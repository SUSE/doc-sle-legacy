<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE refentry PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd"
[
  <!ENTITY % NOVDOC.DEACTIVATE.IDREF "INCLUDE">
  <!ENTITY % entities SYSTEM "entity-decl.ent">
  %entities;
]>
<refentry id="man.crmadmin">
 <refmeta>
  <refentrytitle>crmadmin</refentrytitle>
  <manvolnum>8</manvolnum>
 </refmeta>
 <refnamediv>
  <refname>crmadmin</refname><refpurpose>controls the Cluster Resource Manager</refpurpose>
 </refnamediv>
 <refsect1>
  <title>Synopsis</title>
<!-- crmadmin [-?Vs] [command] [command args] -->
<screen><command>crmadmin</command> <option>[-V|-q]</option> <option>[-i|-d|-K|-S|-E]</option> <replaceable>node</replaceable></screen>
<screen><command>crmadmin</command> <option>[-V|-q]</option> <option>-N</option> <option>-B</option></screen>
<screen><command>crmadmin</command> <option>[-V|-q]</option> <option>-D</option></screen>
<screen><command>crmadmin</command> <option>-v</option></screen>
<screen><command>crmadmin</command> <option>-?</option></screen>
 </refsect1>
 <refsect1>
  <title>Description</title>
  <para>
   <command>crmadmin</command> was originally designed to control most of
   the actions of the CRM daemon. However, the largest part of its
   functionality has been made obsolete by other tools, such as
   <command>crm_attribute</command> and <command>crm_resource</command>. Its
   remaining functionality is mostly related to testing and the status of
   the crmd process.
  </para>
  <warning>
   <para>
    Some <command>crmadmin</command> options are geared towards testing and
    cause trouble if used incorrectly. In particular, do not use the
    <option>--kill</option> or <option>--election</option> options unless
    you know exactly what you are doing.
   </para>
  </warning>
 </refsect1>
 <refsect1>
  <title>Options</title>
  <variablelist>
   <varlistentry>
    <term><option>--help</option>, <option>-?</option>
    </term>
    <listitem>
     <para>
      Print the help text.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--version</option>, <option>-v</option>
    </term>
    <listitem>
     <para>
      Print version details for HA, CRM, and CIB feature set.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--verbose</option>, <option>-V</option>
    </term>
    <listitem>
     <para>
      Turn on command debug information.
     </para>
     <note>
      <para>
       Increase the level of verbosity by providing additional instances.
      </para>
     </note>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--quiet</option>, <option>-q</option>
    </term>
    <listitem>
     <para>
      Do not provide any debug information at all and reduce the output to a
      minimum.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--bash-export</option>, <option>-B</option>
    </term>
    <listitem>
     <para>
      Create bash export entries of the form <literal>export
      uname=uuid</literal>. This applies only to the <command>crmadmin
      <option>-N <replaceable>node</replaceable></option></command> command.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
  <note>
   <para>
    The <option>-B</option> functionality is rarely useful and may be
    removed in future versions.
   </para>
  </note>
 </refsect1>
 <refsect1>
  <title>Commands</title>
  <variablelist>
   <varlistentry>
    <term><option>--debug_inc <replaceable>node</replaceable></option>,
     <option>-i <replaceable>node</replaceable></option>
    </term>
    <listitem>
     <para>
      Incrementally increase the CRM daemon's debug level on the specified
      node. This can also be achieved by sending the USR1 signal to the crmd
      process.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--debug_dec <replaceable>node</replaceable></option>,
     <option>-d <replaceable>node</replaceable></option>
    </term>
    <listitem>
     <para>
      Incrementally decrease the CRM daemon's debug level on the specified
      node. This can also be achieved by sending the USR2 signal to the crmd
      process.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--kill <replaceable>node</replaceable></option>, <option>-K
      <replaceable>node</replaceable></option>
    </term>
    <listitem>
     <para>
      Shut down the CRM daemon on the specified node.
     </para>
     <warning>
      <para>
       Use this with extreme caution. This action should normally only be
       issued by &hb; and may have unintended side effects.
      </para>
     </warning>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--status <replaceable>node</replaceable></option>, <option>-S
      <replaceable>node</replaceable></option>
    </term>
    <listitem>
     <para>
      Query the status of the CRM daemon on the specified node.
     </para>
     <para>
      The output includes a general heath indicator and the internal FSM
      state of the crmd process. This can be helpful when determining what
      the cluster is doing.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--election <replaceable>node</replaceable></option>,
     <option>-E <replaceable>node</replaceable></option>
    </term>
    <listitem>
     <para>
      Initiate an election from the specified node.
     </para>
     <warning>
      <para>
       Use this with extreme caution. This action is normally initiated
       internally and may have unintended side effects.
      </para>
     </warning>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--dc_lookup</option>, <option>-D</option>
    </term>
    <listitem>
     <para>
      Query the uname of the current DC.
     </para>
     <para>
      The location of the DC is only of significance to the crmd internally
      and is rarely useful to administrators except when deciding on which
      node to examine the logs.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--nodes</option>, <option>-N</option>
    </term>
    <listitem>
     <para>
      Query the uname of all member nodes. The results of this query may
      include nodes in <literal>offline</literal> mode.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
  <note>
   <para>
    The <option>-i</option>, <option>-d</option>, <option>-K</option>, and
    <option>-E</option> options are rarely used and may be removed in future
    versions.
   </para>
  </note>
 </refsect1>
 <refsect1>
  <title>See Also</title>
  <para>
   <xref linkend="man.crmattribute"/>, <xref linkend="man.crmresource"/>
  </para>
 </refsect1>
</refentry>
