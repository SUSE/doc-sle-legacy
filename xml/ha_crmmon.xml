<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE refentry PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd"
[
  <!ENTITY % NOVDOC.DEACTIVATE.IDREF "INCLUDE">
  <!ENTITY % entities SYSTEM "entity-decl.ent">
  %entities;
]>
<refentry id="man.crmmon">
 <refmeta>
  <refentrytitle>crm_mon</refentrytitle>
  <manvolnum>8</manvolnum>
 </refmeta>
 <refnamediv>
  <refname>crm_mon</refname><refpurpose>monitor the cluster's status</refpurpose>
 </refnamediv>
 <refsect1>
  <title>Synopsis</title>
<!-- crm_mon [-V?i:nrh:cdp:1X:] -->
<screen><command>crm_mon</command> <option>[-V]</option> <option>-d</option> <option>-p<replaceable>filename</replaceable></option> <option>-h</option> <replaceable>filename</replaceable></screen>
<screen><command>crm_mon</command> <option>[-V]</option> <option>[-1|-n|-r]</option> <option>-h</option> <replaceable>filename</replaceable></screen>
<screen><command>crm_mon</command> <option>[-V]</option> <option>[-n|-r]</option> <option>-X</option> <replaceable>filename</replaceable></screen>
<screen><command>crm_mon</command> <option>[-V]</option> <option>[-n|-r]</option> <option>-c|-1</option></screen>
<screen><command>crm_mon</command> <option>[-V]</option> <option>-i</option> <replaceable>interval</replaceable></screen>
<screen><command>crm_mon</command> <option>-?</option></screen>
<!--
  <screen><command>crm_mon</command> [-V?nrcd1 -i <replaceable>interval</replaceable> -h <replaceable>filename</replaceable> -p <replaceable>filename</replaceable> -X <replaceable>filename</replaceable>]</screen>-->
 </refsect1>
 <refsect1>
  <title>Description</title>
  <para>
   The <command>crm_mon</command> command allows you to monitor your
   cluster's status and configuration. Its output includes the number of
   nodes, uname, uuid, status, the resources configured in your cluster, and
   the current status of each. The output of <command>crm_mon</command> can
   be displayed at the console or printed into an HTML file. When provided
   with a cluster configuration file without the status section,
   <command>crm_mon</command> creates an overview of nodes and resources as
   specified in the file.
  </para>
 </refsect1>
 <refsect1>
  <title>Options</title>
  <variablelist>
   <varlistentry>
    <term><option>--help</option>, <option>-?</option>
    </term>
    <listitem>
     <para>
      Provide help.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--verbose</option>, <option>-V</option>
    </term>
    <listitem>
     <para>
      Increase the debug output.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--interval <replaceable>seconds</replaceable></option>,
     <option>-i <replaceable>seconds</replaceable></option>
    </term>
    <listitem>
     <para>
      Determine the update frequency. If <option>-i</option> is not
      specified, the default of 15 seconds is assumed.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--group-by-node</option>, <option>-n</option>
    </term>
    <listitem>
     <para>
      Group resources by node.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--inactive</option>, <option>-r</option>
    </term>
    <listitem>
     <para>
      Display inactive resources.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--simple-status</option>, <option>-s</option>
    </term>
    <listitem>
     <para>
      Display the cluster status once as a simple one line output (suitable
      for nagios).
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--one-shot</option>, <option>-1</option>
    </term>
    <listitem>
     <para>
      Display the cluster status once on the console then exit (does not use
      ncurses).
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--as-html <replaceable>filename</replaceable></option>,
     <option>-h <replaceable>filename</replaceable></option>
    </term>
    <listitem>
     <para>
      Write the cluster's status to the specified file.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--web-cgi</option>, <option>-w</option>
    </term>
    <listitem>
     <para>
      Web mode with output suitable for CGI.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--daemonize</option>, <option>-d</option>
    </term>
    <listitem>
     <para>
      Run in the background as a daemon.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--pid-file <replaceable>filename</replaceable></option>,
     <option>-p <replaceable>filename</replaceable></option>
    </term>
    <listitem>
     <para>
      Specify the daemon's pid file.
     </para>
    </listitem>
   </varlistentry>
<!--<varlistentry>
    <term><option>&#x2d;&#x2d;xml-file <replaceable>filename</replaceable></option>,
     <option>-X <replaceable>filename</replaceable></option></term>
    <listitem>
     <para>Specify an XML file containing a cluster configuration and create an
     overview of the cluster's configuration.</para>
    </listitem>
   </varlistentry>-->
  </variablelist>
 </refsect1>
 <refsect1>
  <title>Examples</title>
  <variablelist>
   <varlistentry>
    <term>Display your cluster's status and get an updated listing every 15
     seconds:</term>
    <listitem>
<screen><command>crm_mon</command>
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Display your cluster's status and get an updated listing after an
     interval specified by <option>-i</option>. If <option>-i</option> is not
     given, the default refresh interval of 15 seconds is assumed:</term>
    <listitem>
<screen><command>crm_mon</command> <option>-i <replaceable>interval[s]</replaceable></option>
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Display your cluster's status on the console:</term>
    <listitem>
<screen><command>crm_mon</command> <option>-c</option>
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Display your cluster's status on the console just once then exit:
    </term>
    <listitem>
<screen><command>crm_mon</command> <option>-1</option>
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Display your cluster's status and group resources by node:</term>
    <listitem>
<screen><command>crm_mon</command> <option>-n</option>
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Display your cluster's status, group resources by node, and include
     inactive resources in the list:</term>
    <listitem>
<screen><command>crm_mon</command> <option>-n</option> <option>-r</option></screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Write your cluster's status to an HTML file:</term>
    <listitem>
<screen><command>crm_mon</command> <option>-h <replaceable>filename</replaceable></option>
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Run <option>crm_mon</option> as a daemon in the background, specify the
     daemon's pid file for easier control of the daemon process, and create
     HTML output. This option allows you to constantly create HTML output that
     can be easily processed by other monitoring applications:</term>
    <listitem>
<screen><command>crm_mon</command> <option>-d</option> <option>-p <replaceable>filename</replaceable></option> <option>-h</option> <replaceable>filename</replaceable>
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Display the cluster configuration laid out in an existing cluster
     configuration file (<replaceable>filename</replaceable>), group the
     resources by node, and include inactive resources. This command can be
     used for dry runs of a cluster configuration before rolling it out to a
     live cluster.</term>
    <listitem>
<screen><command>crm_mon</command> <option>-r</option> <option>-n</option><option> -X</option> <replaceable>filename</replaceable></screen>
    </listitem>
   </varlistentry>
  </variablelist>
 </refsect1>
 <refsect1>
  <title>Files</title>
  <para>
   <filename>/var/lib/heartbeat/crm/cib.xml</filename>&mdash;the CIB (minus
   status section) on disk. Editing this file directly is strongly
   discouraged.
  </para>
 </refsect1>
<!-- 
 <refsect1>
  <title>Author</title>
  <para>
   <command>crm_mon</command> was written by Andrew Beekhof.
  </para>
 </refsect1>
 -->
</refentry>
