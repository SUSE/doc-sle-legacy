<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook51-profile.xsl"
    type="text/xml"
    title="Profiling step"
?>
<!DOCTYPE sect1
[
   <!ENTITY % entities SYSTEM "entity-decl.ent">
   %entities;
]>


<section xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.1" xml:id="sec-ha-quick-iscsi-inst">
<title>Installation</title>

  <para>You need to install one of the supported iSCSI target implementations 
   and </para>

  <section os="linbit" xml:id="installing-scsi-target-framework-on-red-hat-enterprise-linux">
   <title>Installing SCSI Target Framework on Red Hat Enterprise Linux</title>
   <para>
    The SCSI Target Framework (tgt) is a fully supported iSCSI
    implementation as of Red Hat Enterprise Linux 5 Update 3. To enable
    iSCSI target functionality on RHEL, you must install the
    <literal>scsi-target-utils</literal> package, using the following
    command:
   </para>
<screen>yum install scsi-target-utils</screen>
   <para>
    If, however, you use the older <literal>up2date</literal> package
    manager instead of YUM, you must issue the following command instead:
   </para>
<screen>up2date install scsi-target-utils</screen>
   <para>
    After installation, you should make sure that the tgtd service on system
    startup:
   </para>
<screen>chkconfig tgtd on</screen>
  </section>

  <section xml:id="sec-ha-quick-iscsi-install-target">
   <title>Installing an iSCSI Target</title>
   <para>
    &sle; 11 comes with two iSCSI target implementations: iSCSI Enterprise Target 
    (IET) and the SCSI Target Framework (tgt). You may select either for 
    installation.
   </para>
   <section xml:id="installing-iet-on-sles-11">
    <title>Installing IET on SLES 11</title>
    <para>
     To install IET, issue the following commands:
    </para>
<screen>zypper install iscsitarget iscsitarget-kmp-&lt;flavor&gt;</screen>
    <para>
     Replace <literal>&lt;flavor&gt;</literal> with your kernel flavor
     (usually <literal>default</literal>).
    </para>
    <para>
     Then, make sure that the IET management daemon is started on system
     startup:
    </para>
<screen>insserv ietd</screen>
   </section>
   <section xml:id="installing-tgt-on-sles-11">
    <title>Installing tgt on SLES 11</title>
    <para>
     To install tgt, issue the following command:
    </para>
<screen>zypper install tgt</screen>
    <para>
     tgt requires no additional kernel modules.
    </para>
    <para>
     Then, to make sure tgt is started automatically on system startup,
     issue:
    </para>
<screen>insserv tgtd</screen>
   </section>
   <section xml:id="installing-iscsi-enterprise-target-on-debian-gnu-linux">
    <title>Installing iSCSI Enterprise Target on Debian GNU/Linux</title>
    <para>
     iSCSI Enterprise Target (IET) is available as part of Debian GNU/Linux
     5.0 (<literal>lenny</literal>), although the IET kernel modules are not
     distributed as part of the Debian stock kernel. Thus, you must install
     two packages, one containing the IET administration utilities, and one
     containing the kernel modules:
    </para>
<screen>aptitude install iscsitarget iscsitarget-modules-2.6-&lt;arch&gt;</screen>
    <para>
     Replace <literal>&lt;arch&gt;</literal> with your kernel architecture
     (usually <literal>amd64</literal>). This will install the IET module
     package to match the latest Debian 2.6 kernel for your architecture. If
     you are using a stock kernel other than the latest Debian kernel, issue
     the following command instead:
    </para>
<screen>aptitude install iscsitarget iscsitarget-modules-`uname -r`</screen>
   </section>
  </section>

  <section xml:id="installing-the-pacemaker-cluster-manager-on-red-hat-enterprise-linux">
   <title>Installing the Pacemaker cluster manager on Red Hat Enterprise Linux</title>
   <para>
    RHEL 5 packages are provided by the Pacemaker project and are available
    the project website. Pacemaker is best installed using the
    <literal>yum</literal> package manager. To be able to do so, you must
    first add the Pacemaker repository to your repository configuration:
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Download the repository file from
      <link xlink:href="http://www.clusterlabs.org/rpm/epel-5/clusterlabs.repo">http://www.clusterlabs.org/rpm/epel-5/clusterlabs.repo</link>
      and install it into the <literal>/etc/yum.repos.d</literal> directory.
     </para>
    </listitem>
    <listitem>
     <para>
      Then, install Pacemaker (and dependencies) with <literal>yum install
      pacemaker.x86_64</literal>.
     </para>
    </listitem>
   </itemizedlist>
  </section>

  <section xml:id="installing-pacemaker-on-sles-11">
   <title>Installing Pacemaker on SLES 11</title>
   <para>
    Installing Pacemaker on SLES 11 requires a valid SUSE Linux Enterprise
    High Availability Extension subscription.
   </para>
   <note>
    <para>
     Enabling SLE 11 HAE is beyond the scope of this manual.
    </para>
   </note>
   <para>
    Once enabled, you may install Pacemaker with the following command:
   </para>
<screen>zypper install pacemaker</screen>
   <para>
    Then, to make sure Pacemaker is started automatically on system startup,
    issue:
   </para>
<screen>zypper install pacemaker</screen>
  </section>
 </section>
