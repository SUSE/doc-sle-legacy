<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:novdoc-profile.xsl"
  type="text/xml" 
  title="Profiling step"?>
<!DOCTYPE article PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN"
                      "novdocx.dtd"
[
<!ENTITY % NOVDOC.DEACTIVATE.IDREF "IGNORE">
<!ENTITY % entities SYSTEM "entity-decl.ent">
%entities;
]>
<sect1 id="sec_ha_quick_nfs_use">
 <title>Using the NFS Service</title>

 <para>
  This section outlines how to use the highly available NFS service from an
  NFS client. It covers NFS clients using NFS versions 3 and 4.
 </para>

 <sect2 id="sec_ha_quick_nfs_use_nfsv3">
  <title>Connecting with NFS Version 3</title>
  <para>
   To connect to the highly available NFS service with an NFS version 3
   client, make sure to use the <emphasis>virtual IP address</emphasis> to
   connect to the cluster, rather than a physical IP configured on one of
   the cluster nodes' network interfaces. NFS version 3 requires that you
   specify the <emphasis>full</emphasis> path of the NFS export on the
   server.
  </para>
  <para>
   In its simplest form, the command to mount the NFS export with NFSv3
   looks like this:
  </para>
  <screen>mount -t nfs 10.9.9.180:/srv/nfs/engineering /home/engineering</screen>
  <para>
   For selecting a specific transport protocol (<option>proto</option>) and
   maximum read and write request sizes (<option>rsize</option> and
   <option>wsize</option>):
  </para>
  <screen>mount -t nfs -o proto=udp,rsize=32768,wsize=32768 \
  10.9.9.180:/srv/nfs/engineering /home/engineering</screen>
  <para>
   For further NFSv3 mount options, consult the <command>nfs</command> man
   page.
  </para>
 </sect2>

 <sect2 id="sec_ha_quick_nfs_use_nfsv4">
  <title>Connecting with NFS Version 4</title>
  <important>
   <para>
    Connecting to the NFS server with NFSv4 <emphasis>will not
    work</emphasis> unless you have configured an NFSv4 virtual file system
    root. For details on how to set this up, see
    <xref
            linkend="sec_ha_quick_nfs_resources_nfsexport_nfsv4root"/>.
   </para>
  </important>
  <para>
   To connect to a highly available NFS service, NFSv4 clients must use the
   floating cluster IP address (as with NFSv3) , rather than any of the
   cluster nodes' physical NIC addresses. NFS version 4 requires that you
   specify the NFS export path <emphasis>relative</emphasis> to the root of
   the virtual file system. Thus, to connect to the
   <literal>engineering</literal> export, you would use the following
   <literal>mount</literal> command (note the <literal>nfs4</literal> file
   system type):
  </para>
  <screen>mount -t nfs4 10.9.9.180:/engineering /home/engineering</screen>
  <para>
   As with NFSv3, there are a multitude of mount options for NFSv4. For
   example, selecting larger-than-default maximum request sizes may be
   desirable:
  </para>
  <screen>mount -t nfs4 -o rsize=32768,wsize=32768 \
  10.9.9.180:/engineering /home/engineering</screen>
 </sect2>
</sect1>
