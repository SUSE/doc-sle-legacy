<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE refentry PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd"
[
  <!ENTITY % NOVDOC.DEACTIVATE.IDREF "INCLUDE">
  <!ENTITY % entities SYSTEM "entity-decl.ent">
  %entities;
]>
<refentry id="man.crmmaster">
 <refmeta>
  <refentrytitle>crm_master</refentrytitle>
  <manvolnum>8</manvolnum>
 </refmeta>
 <refnamediv>
  <refname>crm_master</refname><refpurpose>Manage a master/slave resource's preference for being promoted on a given node</refpurpose>
 </refnamediv>
 <refsect1>
  <title>Synopsis</title>
<screen><command>crm_master</command> <option>[-V|-Q]</option> <option>-D</option> <option>[-l <replaceable>lifetime</replaceable>]</option></screen>
<screen><command>crm_master</command> <option>[-V|-Q]</option> <option>-G</option> <option>[-l <replaceable>lifetime</replaceable>]</option></screen>
<screen><command>crm_master</command> <option>[-V|-Q]</option> <option>-v <replaceable>string</replaceable></option> <option>[-l <replaceable>string</replaceable>]</option></screen>
 </refsect1>
 <refsect1>
  <title>Description</title>
  <para>
   <command>crm_master</command> is called from inside the resource agent
   scripts to determine which resource instance should be promoted to master
   mode. It should never be used from the command line and is just a helper
   utility for the resource agents. RAs use <command>crm_master</command> to
   promote a particular instance to master mode or to remove this preference
   from it. By assigning a lifetime, determine whether this setting should
   survive a reboot of the node (set lifetime to <literal>forever</literal>)
   or whether it should not survive a reboot (set lifetime to
   <literal>reboot</literal>).
  </para>
  <para>
   A resource agent needs to determine on which resource
   <command>crm_master</command> should operate. These queries must be
   handled inside the resource agent script. The actual calls of
   <command>crm_master</command> follow a syntax similar to those of the
   <command>crm_attribute</command> command.
  </para>
 </refsect1>
 <refsect1>
  <title>Options</title>
  <variablelist>
   <varlistentry>
    <term><option>--help</option>, <option>-?</option>
    </term>
    <listitem>
     <para>
      Print a help message.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--verbose</option>, <option>-V</option>
    </term>
    <listitem>
     <para>
      Turn on debug information.
     </para>
     <note>
      <para>
       Increase the level of verbosity by providing additional instances.
      </para>
     </note>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--quiet</option>, <option>-Q</option>
    </term>
    <listitem>
     <para>
      When doing an attribute query using <option>-G</option>, print just
      the value to stdout. Use this option with <option>-G</option>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--get-value</option>, <option>-G</option>
    </term>
    <listitem>
     <para>
      Retrieve rather than set the preference to be promoted.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--delete-attr</option>, <option>-D</option>
    </term>
    <listitem>
     <para>
      Delete rather than set the attribute.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--attr-id <replaceable>string</replaceable></option>,
        <option>-i <replaceable>string</replaceable></option>
    </term>
    <listitem>
     <para>
      For advanced users only. Identifies the id attribute.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--attr-value <replaceable>string</replaceable></option>,
     <option>-v <replaceable>string</replaceable></option>
    </term>
    <listitem>
     <para>
      Value to set. This is ignored when used with <option>-G</option>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--lifetime <replaceable>string</replaceable></option>,
     <option>-l <replaceable>string</replaceable></option>
    </term>
    <listitem>
     <para>
      Specify how long the preference lasts. Possible values are
      <literal>reboot</literal> or <literal>forever</literal>.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </refsect1>
 <refsect1>
  <title>Environment Variables</title>
  <para>
   <envar>OCF_RESOURCE_INSTANCE</envar>&mdash;the name of the resource
   instance
  </para>
 </refsect1>
 <refsect1>
  <title>Files</title>
  <para>
   <filename>/var/lib/heartbeat/crm/cib.xml</filename>&mdash;the CIB (minus
   status section) on disk.
  </para>
 </refsect1>
 <refsect1>
  <title>See Also</title>
  <para>
   <xref linkend="man.cibadmin"/>, <xref linkend="man.crmattribute"/>
  </para>
 </refsect1>
<!-- 
 <refsect1>
  <title>Author</title>
  <para>
   crm_master was written by Andrew Beekhof.
  </para>
 </refsect1>
 -->
</refentry>
