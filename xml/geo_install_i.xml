<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook51-profile.xsl"
    type="text/xml"
    title="Profiling step"
?>
<!DOCTYPE sect1
[
   <!ENTITY % entities SYSTEM "entity-decl.ent">
   %entities;
]>


<section xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.1" xml:id="sec-ha-geo-inst">
 <title>Installation as Add-on</title>
 <para>For using the &hasi; and &hageo;, you need the packages included
  in the following installation patterns:</para>
 
 <itemizedlist mark="bullet" spacing="normal">
  <listitem>
   <para>
    <literal>&ha;</literal>
   </para>
  </listitem>
  <listitem>
   <para>
    <literal>Geographical Clustering</literal>
   </para>
  </listitem>
 </itemizedlist>
 
 <note>
  <title>Package Requirements for Arbitrators</title>
  <para>If your &geo; cluster setup includes one or more arbitrators (see
   <xref linkend="vle-ha-geo-components-arbitrator"/>), those only need the
   pattern <literal>Geographical Clustering</literal>. For instructions on
   how to install this pattern, see 
   <xref linkend="sec-ha-geo-inst-arbitrators"/>.</para>
 </note>
 
 <para>Both patterns are only available if you have registered your system at
  &ncc; (or a local registration server) and have added the respective
  product channels or installation media as add-ons. For information on how to
  install add-on products, see the <citetitle>&sle; &productnumber;
   &deploy;</citetitle>, available at &suse-onlinedoc;. 
  Refer to chapter <citetitle>Installing Add-On Products</citetitle>.
  <!--taroth: need to use hard-coded link here as the target is not included in the same set-->
 </para>
 
 <section xml:id="sec-ha-geo-inst-nodes">
  <title>Installing the Packages on Cluster Nodes</title>
  
  <para>In case both &hasi; and &hageo; have been added as add-on
   products, but the packages are not installed yet, proceed as follows:</para>
  
  <procedure>
   <step>
    <para>To install the packages from both patterns via command line, use
     Zypper:</para>
    <screen>sudo <command>zypper</command> in -t pattern ha_sles ha_geo</screen>
   </step>
   <step xml:id="step-ha-geo-inst-yast">
    <para>Alternatively, use &yast; for a graphical installation:</para>
    <substeps performance="required">
     <step>
      <para> Start &yast; as &rootuser; user and select <menuchoice>
       <guimenu>Software</guimenu>
       <guimenu>Software Management</guimenu>
      </menuchoice>. </para>
     </step>
     <step>
      <para> Click <menuchoice>
       <guimenu>View</guimenu>
       <guimenu>Patterns</guimenu>
      </menuchoice> and activate the following patterns:</para>
      <itemizedlist mark="bullet" spacing="normal">
       <listitem>
        <para>
         <literal>&ha;</literal>
        </para>
       </listitem>
       <listitem>
        <para>
         <literal>Geographical Clustering</literal>
        </para>
       </listitem>
      </itemizedlist>
     </step>
     <step>
      <para> Click <guimenu>Accept</guimenu> to start installing the packages.
      </para>
     </step>
    </substeps>
   </step>
  </procedure>
  
  <important><title>Installing Software Packages on all Parties</title>
   <para> The software packages needed for &ha; and &geo; clusters are
    <emphasis>not</emphasis> automatically copied to the cluster nodes. </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para> Install &sls; &productnumber; and the
      <literal>&ha;</literal> and <literal>Geographical Clustering</literal> 
      patterns on <emphasis>all</emphasis> machines that
      will be part of your &geo; cluster. </para>
    </listitem>
    <listitem>
     <para> If you do not want to install the packages manually on all nodes
      that will be part of your cluster, use &ay; to clone existing nodes.
      Find more information in the <citetitle>&haguide;</citetitle> for
      &productname; &productnumber;, available from
      &suse-onlinedoc;. Refer to chapter <citetitle>Installation and Basic
       Setup</citetitle>, section <citetitle>Mass Deployment with
        &ay;</citetitle>. </para>
     <para>For all machines that need the &hageo; add-on, you currently need to install the
      packages for &geo; clusters manually. &ay; support for &hageo; is not yet available.
     </para>
    </listitem>
   </itemizedlist>
  </important>
 </section>
 <section xml:id="sec-ha-geo-inst-arbitrators">
  <title>Installing the Packages on Arbitrators</title>
  <procedure>
   <step>
    <para>Make sure that &hageo; has been added as an add-on product to the
     machines to serve as arbitrators.</para>
   </step>
   <step>
    <para>Log in to each arbitrator and install the packages with the following
     command:</para>
    <screen>sudo <command>zypper</command> in -t pattern ha_geo</screen>
    <para>Alternatively, use &yast; to install the <literal>Geographical 
     Clustering</literal> pattern.</para>
   </step>
  </procedure>
 </section>
</section>
