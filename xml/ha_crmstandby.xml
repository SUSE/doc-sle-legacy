<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE refentry PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd"
[
  <!ENTITY % NOVDOC.DEACTIVATE.IDREF "INCLUDE">
  <!ENTITY % entities SYSTEM "entity-decl.ent">
  %entities;
]>
<refentry id="man.crmstandby">
 <refmeta>
  <refentrytitle>crm_standby</refentrytitle>
  <manvolnum>8</manvolnum>
 </refmeta>
 <refnamediv>
  <refname>crm_standby</refname><refpurpose>manipulate a node's standby attribute to determine whether
   resources can be run on this node</refpurpose>
 </refnamediv>
 <refsect1>
  <title>Synopsis</title>
<screen><command>crm_standby</command> <option>[-?|-V]</option> <option>-D</option> <option>-u|-U <replaceable>node</replaceable></option> <option>-r <replaceable>resource</replaceable></option></screen>
<screen><command>crm_standby</command>  <option>[-?|-V]</option> <option>-G</option> <option>-u|-U <replaceable>node</replaceable></option> <option>-r <replaceable>resource</replaceable></option></screen>
<screen><command>crm_standby</command> <option>[-?|-V]</option> <option>-v <replaceable>string</replaceable></option> <option>-u|-U <replaceable>node</replaceable></option> <option>-r <replaceable>resource</replaceable></option> <option>[-l <replaceable>string</replaceable>]</option></screen>
 </refsect1>
 <refsect1>
  <title>Description</title>
  <para>
   The <command>crm_standby</command> command manipulates a node's standby
   attribute. Any node in standby mode is no longer eligible to host
   resources and any resources that are there must be moved. Standby mode
   can be useful for performing maintenance tasks, such as kernel updates.
   Remove the standby attribute from the node when it needs to become a
   fully active member of the cluster again.
  </para>
  <para>
   By assigning a lifetime to the <option>standby</option> attribute,
   determine whether the standby setting should survive a reboot of the node
   (set lifetime to <literal>forever</literal>) or should be reset with
   reboot (set lifetime to <literal>reboot</literal>). Alternatively, remove
   the <option>standby</option> attribute and bring the node back from
   standby manually.
  </para>
 </refsect1>
 <refsect1>
  <title>Options</title>
  <variablelist>
   <varlistentry>
    <term><option>--help</option>, <option>-?</option>
    </term>
    <listitem>
     <para>
      Print a help message.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--verbose</option>, <option>-V</option>
    </term>
    <listitem>
     <para>
      Turn on debug information.
     </para>
     <note>
      <para>
       Increase the level of verbosity by providing additional instances.
      </para>
     </note>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--quiet</option>, <option>-Q</option>
    </term>
    <listitem>
     <para>
      When doing an attribute query using <option>-G</option>, print just
      the value to stdout. Use this option with <option>-G</option>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--get-value</option>, <option>-G</option>
    </term>
    <listitem>
     <para>
      Retrieve rather than set the preference.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--delete-attr</option>, <option>-D</option>
    </term>
    <listitem>
     <para>
      Specify the attribute to delete.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--attr-value <replaceable>string</replaceable></option>,
     <option>-v <replaceable>string</replaceable></option>
    </term>
    <listitem>
     <para>
      Specify the value to use. This option is ignored when used with
      <option>-G</option>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--attr-id <replaceable>string</replaceable></option>,
     <option>-i <replaceable>string</replaceable></option>
    </term>
    <listitem>
     <para>
      For advanced users only. Identifies the id attribute..
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--node <replaceable>node_uname</replaceable></option>,
     <option>-u <replaceable>node_uname</replaceable></option>
    </term>
    <listitem>
     <para>
      Specify the uname of the node to change.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>--lifetime <replaceable>string</replaceable></option>, 
     <option>-l <replaceable>string</replaceable></option>
    </term>
    <listitem>
     <para>
      Determine how long this preference lasts. Possible values are
      <literal>reboot</literal> or <literal>forever</literal>.
     </para>
     <note>
      <para>
       If a <option>forever</option> value exists, it is always used by the
       CRM instead of any <option>reboot</option> value.
      </para>
     </note>
    </listitem>
   </varlistentry>
  </variablelist>
 </refsect1>
 <refsect1>
  <title>Examples</title>
  <variablelist>
   <varlistentry>
    <term>Have a local node go to standby:</term>
    <listitem>
<screen><command>crm_standby</command> <option>-v</option> true</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Have a node (<literal>node1</literal>) go to standby:</term>
    <listitem>
<screen><command>crm_standby</command> <option>-v</option> true <option>-U</option> <replaceable>node1</replaceable></screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Query the standby status of a node:</term>
    <listitem>
<screen><command>crm_standby</command> <option>-G</option> <option>-U</option> <replaceable>node1</replaceable></screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Remove the standby property from a node:</term>
    <listitem>
<screen><command>crm_standby</command> <option>-D</option> <option>-U</option> <replaceable>node1</replaceable></screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Have a node go to standby for an indefinite period of time:</term>
    <listitem>
<screen><command>crm_standby</command> <option>-v</option> true <option>-l</option> forever <option>-U</option> <replaceable>node1</replaceable></screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Have a node go to standby until the next reboot of this node:</term>
    <listitem>
<screen><command>crm_standby</command> <option>-v</option> true <option>-l</option> reboot -U <replaceable>node1</replaceable></screen>
    </listitem>
   </varlistentry>
  </variablelist>
 </refsect1>
 <refsect1>
  <title>Files</title>
  <para>
   <filename>/var/lib/heartbeat/crm/cib.xml</filename>&mdash;the CIB (minus
   status section) on disk. Editing this file directly is strongly
   discouraged.
  </para>
 </refsect1>
 <refsect1>
  <title>See Also</title>
  <para>
   <xref linkend="man.cibadmin"/>, <xref linkend="man.crmattribute"/>
  </para>
 </refsect1>
<!-- 
 <refsect1>
  <title>Author</title>
  <para>
   <command>crm_standby</command> was written by Andrew Beekhof.
  </para>
 </refsect1>
 -->
</refentry>
