<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook51-profile.xsl"
    type="text/xml"
    title="Profiling step"
?>
<!DOCTYPE refentry
[
   <!ENTITY % entities SYSTEM "entity-decl.ent">
   %entities;
]>


<refentry xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="man-crmverify">
 <refmeta>
  <refentrytitle>crm_verify</refentrytitle>
  <manvolnum>8</manvolnum>
 </refmeta>
 <refnamediv>
  <refname>crm_verify</refname><refpurpose>check the CIB for consistency</refpurpose>
 </refnamediv>
 <refsect1>
  <title>Synopsis</title>
<screen><command>crm_verify</command> <option>[-V]</option> <option>-x</option> <replaceable>file</replaceable></screen>
<screen><command>crm_verify</command> <option>[-V]</option> <option>-X</option> <replaceable>string</replaceable></screen>
<screen><command>crm_verify</command> <option>[-V]</option> <option>-L|-p</option></screen>
<screen><command>crm_verify</command> <option>[-?]</option></screen>
 </refsect1>
 <refsect1>
  <title>Description</title>
  <para>
   <command>crm_verify</command> checks the configuration database (CIB) for
   consistency and other problems. It can be used to check a file containing
   the configuration or can it can connect to a running cluster. It reports
   two classes of problems, errors and warnings. Errors must be fixed before
   &ha; can work properly. However, it is left up to the administrator to
   decide if the warnings should also be fixed.
  </para>
  <para>
   <command>crm_verify</command> assists in creating new or modified
   configurations. You can take a local copy of a CIB in the running
   cluster, edit it, validate it using <option>crm_verify</option>, then put
   the new configuration into effect using <command>cibadmin</command>.
  </para>
 </refsect1>
 <refsect1>
  <title>Options</title>
  <variablelist>
   <varlistentry>
    <term version="5.1"><option>--help</option>, <option>-h</option>
    </term>
    <listitem>
     <para>
      Print a help message.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term version="5.1"><option>--verbose</option>, <option>-V</option>
    </term>
    <listitem>
     <para>
      Turn on debug information.
     </para>
     <note>
      <para>
       Increase the level of verbosity by providing additional instances.
      </para>
     </note>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term version="5.1"><option>--live-check</option>, <option>-L</option>
    </term>
    <listitem>
     <para>
      Connect to the running cluster and check the CIB.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term version="5.1"><option>--crm_xml <replaceable>string</replaceable></option>, <option>-X <replaceable>string</replaceable></option>
    </term>
    <listitem>
     <para>
      Check the configuration in the supplied string. Pass complete CIBs
      only.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term version="5.1"><option>--xml-file <replaceable>file</replaceable></option>,
     <option>-x <replaceable>file</replaceable></option>
    </term>
    <listitem>
     <para>
      Check the configuration in the named file.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term version="5.1"><option>--xml-pipe</option>, <option>-p</option>
    </term>
    <listitem>
     <para>
      Use the configuration piped in via stdin. Pass complete CIBs only.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </refsect1>
 <refsect1>
  <title>Examples</title>
  <variablelist>
   <varlistentry>
    <term version="5.1">Check the consistency of the configuration in the running
     cluster and produce verbose output:</term>
    <listitem>
<screen><command>crm_verify</command> <option>-VL</option></screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term version="5.1">Check the consistency of the configuration in a given file and
     produce verbose output:</term>
    <listitem>
<screen><command>crm_verify</command> <option>-Vx</option> <replaceable>file1</replaceable></screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term version="5.1">Pipe a configuration into <command>crm_verify</command> and produce
     verbose output:</term>
    <listitem>
<screen><command>cat</command> <replaceable>file1.xml</replaceable> | <command>crm_verify</command> <option>-Vp</option></screen>
    </listitem>
   </varlistentry>
  </variablelist>
 </refsect1>
 <refsect1>
  <title>Files</title>
  <para>
   <filename>/var/lib/heartbeat/crm/cib.xml</filename>&mdash;the CIB (minus
   status section) on disk. Editing this file directly is strongly
   discouraged.
  </para>
 </refsect1>
 <refsect1>
  <title>See Also</title>
  <para>
   <xref linkend="man-cibadmin"/>
  </para>
 </refsect1>
<!-- 
 <refsect1>
  <title>Author</title>
  <para>
   <command>crm_verify</command> was written by Andrew Beekhof.
  </para>
 </refsect1>
 -->
</refentry>
