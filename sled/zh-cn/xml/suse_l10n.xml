<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook51-profile.xsl"
    type="text/xml"
    title="Profiling step"
?>
<!DOCTYPE sect1
[
   <!ENTITY % entities SYSTEM "entity-decl.ent">
   %entities;
]>


<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<section xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.1" xml:base="suse_l10n.xml" xml:id="sec-suse-l10n">
 <title>语言和国家/地区特定的设置</title><indexterm> <primary>系统</primary> <secondary>本地化</secondary> </indexterm> <indexterm> <primary>I18N</primary> </indexterm> <indexterm> <primary>L10N</primary> </indexterm> <indexterm> <primary>国际化</primary> </indexterm> <indexterm> <primary>本地化</primary> </indexterm>

 <para>
  该系统在很大程度上实现了国际化，可修改以满足本地需要。国际化 (<emphasis>I18N</emphasis>) 允许特定的本地化 (<emphasis>L10N</emphasis>)。I18N 和 L10N 这两个缩写词使用原单词的第一个和最后一个字母，中间的数字表示省略的字母数。
 </para>

 <para>
  设置是通过文件 <filename>/etc/sysconfig/language</filename> 中定义的 <systemitem>LC_ </systemitem>变量进行的。这不仅指<emphasis>本地语言支持</emphasis>，还指<emphasis>消息</emphasis>（语言）、<emphasis>字符集</emphasis>、<emphasis>排序顺序</emphasis>、<emphasis>时间和日期</emphasis>、<emphasis>数字</emphasis>和<emphasis>货币</emphasis>等类别。这些类别中的每一种都可以使用其自己的变量直接定义或使用文件 <filename>language</filename> 中的主变量间接定义（请参见手册页 <command>man locale</command>）。<indexterm><primary>配置文件</primary><secondary>语言</secondary> </indexterm>
 </para>

 <variablelist>
  <varlistentry>
   <term><systemitem>RC_LC_MESSAGES</systemitem>、<systemitem>RC_LC_CTYPE</systemitem>、<systemitem>RC_LC_COLLATE</systemitem>、<systemitem>RC_LC_TIME</systemitem>、<systemitem>RC_LC_NUMERIC</systemitem>、<systemitem>RC_LC_MONETARY</systemitem><indexterm><primary>变量</primary><secondary>环境</secondary> </indexterm>
   </term>
   <listitem>
    <para>
     这些变量以不带 <systemitem>RC_</systemitem> 前缀的形式传递到外壳，它们代表所列出的类别。下面列出了相关外壳配置文件。可以使用命令 <command>locale</command> 显示当前设置。
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term><systemitem>RC_LC_ALL</systemitem>
   </term>
   <listitem>
    <para>
     此变量（如果设置）将覆盖上述变量的值。
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term><systemitem>RC_LANG</systemitem>
   </term>
   <listitem>
    <para>
     如果未设置上述的任何变量，则这是后备变量。默认情况下，只设置 <systemitem>RC_LANG</systemitem> 。这便于用户输入他们自己的值。
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term><systemitem>ROOT_USES_LANG</systemitem>
   </term>
   <listitem>
    <para>
     <literal>yes</literal> 或<literal> no</literal> 变量。如果将其设置为 <literal>no</literal>，则 <systemitem class="username">root</systemitem> 用户始终在 POSIX 环境中工作。
    </para>
   </listitem>
  </varlistentry>
 </variablelist>

 <para>
  这些变量可通过 YaST sysconfig 编辑器进行设置（请参见<xref linkend="sec-boot-sysconfig-edit"/>）。此类变量的值包含语言代码、国家/地区代码、编码和修饰符。各部分之间通过特殊字符连接：
 </para>

<screen>
  LANG=&lt;language&gt;[[_&lt;COUNTRY&gt;].&lt;Encoding&gt;[@&lt;Modifier&gt;]]
</screen>

 <section>
  <title>一些示例</title>
  <para>
   语言和国家/地区代码始终应该一起设置。语言设置遵循 ISO  639 标准（可从 <link xlink:href="http://www.evertype.com/standards/iso639/iso639-en.html"/> 和 <link xlink:href="http://www.loc.gov/standards/iso639-2/"/> 上获取）。国家/地区代码在 ISO 3166（参见 <link xlink:href="http://en.wikipedia.org/wiki/ISO_3166"/>）中列出。


  </para>
  <para>
   只有设置可以在 <filename>/usr/lib/locale</filename> 中找到其可用描述文件的值才有意义。可以使用命令 <filename>localedef</filename> 基于 <command>/usr/share/i18n</command> 中的文件创建更多描述文件；描述文件是 <systemitem>glibc-i18ndata</systemitem> 包的一部分。可以使用以下命令创建 <literal>en_US.UTF-8</literal>（用于英国英语和美国英语）的描述文件：
  </para>

  
<screen>
localedef -i en_US -f UTF-8 en_US.UTF-8
</screen>
  <variablelist>
   <varlistentry>
    <term>
<systemitem>LANG=en_US.UTF-8</systemitem>
    </term>
    <listitem>
     <para>
      如果在安装过程中选择的是美国英语，则这是默认设置。如果选择了其他语言，则将支持该语言，但仍使用 UTF-8 作为字符编码。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>
<systemitem>LANG=en_US.ISO-8859-1</systemitem><indexterm><primary>编码</primary><secondary>ISO-8859-1</secondary> </indexterm>
    </term>
    <listitem>
     <para>
      这会将语言设置为英语，将国家/地区设置为美国，将字符集设置为 <literal>ISO-8859-1</literal>。此字符集不支持欧元符号，但它有时可用于尚未进行更新以支持 <literal>UTF-8</literal> 的程序。随后，Emacs 等程序将对定义字符集的字符串（在本例中为 <literal>ISO-8859-1</literal>）进行求值。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>

    <term><systemitem>LANG=en_IE@euro</systemitem>
    </term>
    <listitem>
     <para>
      上例将欧元符号显式包含在语言设置中。此设置现已过时，因为 UTF-8 也可涵盖欧元符号。仅当应用程序支持 ISO-8859-15 而不是 UTF-8 时，它才有用。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
  <para>
   在以前的版本中，在对 <filename>/etc/sysconfig/language</filename> 执行任何更改后必须运行 <command>SuSEconfig</command>。SuSEconfig 之后将更改写入 <filename>/etc/SuSEconfig/profile</filename> 和 <filename>/etc/SuSEconfig/csh.login</filename>。登录时，这些文件由 <filename>/etc/profile</filename>（对于 Bash）或 <filename>/etc/csh.login</filename>（对于 tcsh）读取。
  </para>
  <para>
   在最近的版本中，<filename>/etc/SuSEconfig/profile</filename> 已替换为 <filename>/etc/profile.d/lang.sh</filename>，<filename>/etc/SuSEconfig/csh.login</filename> 则替换为 <filename>/etc/profile.de/lang.csh</filename>。但如果这两个旧文件存在，登录时仍会读取它们。
  </para>
  <para>
   进程链现在如下所示：
  </para>
  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     对于 Bash：<filename>/etc/profile</filename> 读取 <filename>/etc/profile.d/lang.sh</filename>，后者则分析 <filename>/etc/sysconfig/language</filename>。
    </para>
   </listitem>
   <listitem>
    <para>
     对于 tcsh：<filename>/etc/csh.login</filename> 在登录时读取 <filename>/etc/profile.d/lang.csh</filename>，后者则分析 <filename>/etc/sysconfig/language</filename>。
    </para>
   </listitem>
  </itemizedlist>
  <para>
   这确保了在下次登录到相应外壳时 <filename>/etc/sysconfig/language</filename> 的任何更改均可用，而无需先运行 SuSEconfig。<indexterm> <primary>配置文件</primary> <secondary>语言</secondary> </indexterm><indexterm> <primary>配置文件</primary> <secondary>配置文件</secondary> </indexterm> <indexterm> <primary>配置文件</primary> <secondary>/etc/profile.d/lang.sh</secondary> </indexterm>
  </para>
  <para>
   用户可以通过相应地编译他们的 <filename>~/.bashrc</filename> 覆盖系统默认值。例如，如果不想将整个系统范围的 <literal>en_US</literal> 用于程序消息，请包括 <systemitem>LC_MESSAGES=es_ES</systemitem>，这样消息将以西班牙语显示。
  </para>
 </section>

 <section xml:id="sec-suse-l10n-dot-i18n">
  <title><filename>~/.i18n </filename>中的语言环境设置</title>
  <para>
   如果您对系统默认的区域设置不满意，请根据 Bash 脚本编写语法更改 <filename>~/.i18n</filename> 中的设置。<filename>~/.i18n </filename>中的项覆盖来自 <filename>/etc/sysconfig/language</filename> 中的系统默认值。使用相同的变量名而不使用 <literal>RC_</literal> 名称空间前缀。例如，使用 <literal>LANG</literal> 而不是 <literal>RC_LANG</literal>：
  </para>
<screen>LANG=cs_CZ.UTF-8
LC_COLLATE=C
</screen>
 </section>

 <section xml:id="sec-suse-l10n-fallback">
  <title>语言支持的设置</title>
  <para>
   <emphasis>消息</emphasis>类别中的文件通常只储存在对应的语言目录（例如<filename> en</filename>）中以保留后备。如果将 <systemitem>LANG</systemitem> 设置为 <literal>en_US</literal> 并且 <filename>/usr/share/locale/en_US/LC_MESSAGES</filename> 中的消息文件不存在，则它将使用 <filename>/usr/share/locale/en/LC_MESSAGES</filename>。
  </para>
  <para>
   还可以定义后备语言，例如，将布列塔尼语作为法语的后备语言，将加利西亚语作为葡萄牙语的后备语言。
  </para>
  <para>
   <systemitem>LANGUAGE="br_FR:fr_FR"</systemitem>
  </para>
  <para>
   <systemitem>LANGUAGE="gl_ES:es_ES:pt_PT"</systemitem>
  </para>
  <para>
   如果需要，可改用挪威语变体 Nynorsk 和 Bokmal（将其他后备语言设置为 <literal>no</literal>）：
  </para>
  <para>
   <systemitem>LANG="nn_NO"</systemitem>
  </para>
  <para>
   <systemitem>LANGUAGE="nn_NO:nb_NO:no"</systemitem>
  </para>
  <para>
   或
  </para>
  <para>
   <systemitem>LANG="nb_NO"</systemitem>
  </para>
  <para>
   <systemitem>LANGUAGE="nb_NO:nn_NO:no"</systemitem>
  </para>
  <para>
   请注意，在挪威语中，<systemitem>LC_TIME</systemitem> 的处理方式也有所不同。
  </para>
  

  <para>
   可能会出现一个问题，那就是无法正确识别用于分隔成组数位的分隔符。如果 <systemitem>LANG</systemitem> 设置为仅两个字母的语言代码（如 <literal>de</literal>），但使用的定义文件 glibc 位于 <filename>/usr/share/lib/de_DE/LC_NUMERIC</filename>，则将出现此问题。因此必须将 <systemitem>LC_NUMERIC</systemitem> 设置为 <literal>de_DE</literal> 以使系统能够识别出分隔符定义。
  </para>
 </section>

 <section xml:id="sec-suse-l10n-info">
  <title>更多信息</title>
  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     《<emphasis>GNU C 库参考手册</emphasis>》中的<quote>区域设置和国际化</quote>一章。它包含在 <systemitem>glibc-info</systemitem> 中。<phrase os="sles;sled">该包可从 SUSE Linux Enterprise Software Development Kit (SDK) 中获取。该 SDK 是 SUSE Linux Enterprise 的附加产品，可从 <link xlink:href="http://download.suse.com/"/> 下载。</phrase>
    </para>
   </listitem>
   <listitem>
    <para>
     Markus Kuhn 编写的 <emphasis>Unix/Linux 的 UTF-8 和 Unicode 常见问题解答</emphasis>，当前位于 <link xlink:href="http://www.cl.cam.ac.uk/~mgk25/unicode.html"/>。
    </para>
   </listitem>
   <listitem>
    <para>
     Bruno Haible 编写的 <emphasis>Unicode-Howto</emphasis>，位于 <link xlink:href="http://tldp.org/HOWTO/Unicode-HOWTO-1.html"/>。
    </para>
   </listitem>
  </itemizedlist>
 </section>
</section>
