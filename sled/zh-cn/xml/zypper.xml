<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sect1 PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN"
"novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<sect1 xml:base="zypper.xml" id="sec.zypper">
 <title>使用 Zypper</title><indexterm id="idx.zypper" class="startofrange"><primary>zypper</primary></indexterm><indexterm><primary>命令</primary><secondary>zypper</secondary></indexterm><indexterm><primary>软件</primary><secondary>管理</secondary><tertiary>命令行</tertiary></indexterm>

 <para>
  
  
  Zypper 是一个命令行包管理器，用于安装、更新和删除包及管理储存库。<phrase os="sles;sled">Zypper 的语法与 rug 的相似。与 rug 相反，Zypper 不需要在场景后运行 zmd 守护程序。有关 rug 兼容性的更多信息，请参见 <command>man zypper</command> 的 <quote>COMPATIBILITY WITH RUG</quote> 部分。</phrase>这一点对于完成远程软件管理任务或从外壳脚本管理软件尤其有用。
 </para>

 <sect2 id="sec.zypper.usage">
  <title>一般使用</title>
  <para>
   Zypper 的常用语法为：
  </para>
<screen>zypper <option>[global-options]</option><replaceable>command</replaceable><option>[command-options]</option><option>[arguments]</option> ...</screen>
  <para>
   不需要括在括号中的组件。执行 Zypper 最简单的方式是，键入其名称后跟一个命令。例如，将所有需要的增补程序应用于系统类型：
  </para>
<screen>zypper patch</screen>
  <para>
   或者，可以从一个或多个全局选项中选择，方法是：只需在命令前面键入这些选项。例如，<option>--non-interactive</option> 表示运行命令时不询问任何问题（自动应用默认回答）：
  </para>
<screen>zypper --non-interactive patch</screen>
  <para>
   要使用特定于某一特定命令的选项，请在此命令后面键入这些选项。例如，<option>--auto-agree-with-licenses</option> 表示将所有必需的增补程序应用到系统，不要求确认任何许可证（它们会被自动接受）：
  </para>
<screen>zypper patch --auto-agree-with-licenses</screen>
  <para>
   某些命令需要一个或多个自变量。例如，使用安装命令时，需要指定安装哪个（哪些）包：
  </para>
<screen>zypper install mplayer</screen>
  <para>
   某些选项也需要自变量。用以下命令可列出所有已知模式：
  </para>
<screen>zypper search -t pattern</screen>
  <para>
   您可以组合上述所有模式。例如，以下命令将在冗长模式下从 <literal>factory</literal> 储存库安装 <systemitem>mplayer</systemitem> 和 <systemitem>amarok</systemitem> 包：
  </para>
<screen>zypper -v install --from factory mplayer amarok</screen>
  <para>
   <option>--from</option> 选项确保了在从指定储存库请求包时保留所有储存库的启用状态（用于解析任何依赖项）。
  </para>
  <para>
   多数 Zypper 命令都有 <literal>dry-run</literal> 选项，它模拟给定的命令。它可用于测试。
  </para>
<screen>zypper remove --dry-run MozillaFirefox</screen>
  <para>
   Zypper 支持用于标识事务的全局 <option>--userdata <replaceable>字符串</replaceable></option>选项。用户定义的字符串将传递到 <filename>/var/log/zypp/history</filename> 中的 Zypper 历史日志和快照程序。
  </para>
<screen>zypper --userdata <replaceable>string</replaceable> patch</screen>
 </sect2>

 <sect2 id="sec.zypper.softman">
  <title>使用 Zypper 安装和删除软件</title>
  <para>
   要安装或删除包，请使用以下命令：
  </para>
<screen>zypper install <replaceable>package_name</replaceable>
zypper remove <replaceable>package_name</replaceable></screen>
  <para>
   Zypper 知道安装和删除命令处理包的不同方式：
  </para>
  <variablelist>
   <varlistentry>
    <term>用确切的包名称（和版本号）</term>
    <listitem>
<screen>zypper install MozillaFirefox</screen>
     <para>
      或
     </para>
<screen>zypper install MozillaFirefox-3.5.3</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>用储存库别名和包名称</term>
    <listitem>
<screen>zypper install mozilla:MozillaFirefox</screen>
     <para>
      其中 <literal>mozilla</literal> 是用于安装的储存库别名。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>用使用通配符的包名称</term>
    <listitem>
     <para>
      以下命令将安装名称以<quote>Moz</quote>开头的所有包。使用通配符要小心，特别是删除包的时候。
     </para>
<screen>zypper install 'Moz*'</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>用功能</term>
    <listitem>
     <para>
      例如，如果您要安装 perl 模块但不知道包名称，功能就可以派上用场：
     </para>
<screen>zypper install 'perl(Time::ParseDate)'</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>用功能和/或体系结构和/或版本</term>
    <listitem>
     <para>
      您可以指定功能以及体系结构（例如 <literal>i586</literal> 或 <literal>x86_64</literal>）和/或版本。版本前必须带有以下某个运算符：<literal>&lt;</literal>（小于）、<literal>&lt;=</literal>（小于等于）、<literal>=</literal>（等于）、<literal>&gt;=</literal>（大于等于）或 <literal>&gt;</literal>（大于）。
     </para>
<screen>zypper install 'firefox.x86_64'
zypper install 'firefox&gt;=3.5.3'
zypper install 'firefox.x86_64&gt;=3.5.3'</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>用 RPM 文件的路径</term>
    <listitem>
     <para>
      您还可以指定包的本地或远程路径：
     </para>
<screen>zypper install /tmp/install/MozillaFirefox.rpm
zypper install http://download.opensuse.org/repositories/mozilla/SUSE_Factory/x86_64/MozillaFirefox-3.5.3-1.3.x86_64.rpm</screen>
    </listitem>
   </varlistentry>
  </variablelist>
  <para>
   要同时安装和删除包，请使用 <literal>+/-</literal> 修饰符。要同时安装 <systemitem>emacs</systemitem> 并删除 <systemitem>vim</systemitem>，请使用：
  </para>
<screen>zypper install emacs -vim
</screen>
  <para>
   要同时删除 <systemitem>emacs</systemitem> 并安装 <systemitem>vim</systemitem>，请使用：
  </para>
<screen>zypper remove emacs +vim
</screen>
  <para>
   为避免 <literal>-</literal> 开头的包名称被解释为命令行选项，要始终把它用作第二个自变量。如果做不到这点，在它之前加上 <literal>--</literal>：
  </para>
<screen>zypper install -emacs +vim       # Wrong
zypper install vim -emacs        # Correct
zypper install -- -emacs +vim    # same as above
zypper remove emacs +vim         # same as above</screen>
  <para>
   如果（同时使用某个包）要自动删除在删除指定包后不再需要的任何包，请使用 <option>--clean-deps</option> 选项：
  </para>
<screen>rm <replaceable>package_name</replaceable> --clean-deps</screen>
  <para>
   默认情况下，在安装或删除选定包之前或发生问题时，Zypper 会要求确认。您可以使用 <option>--non-interactive</option> 选项覆盖此行为。必须在实际命令（<command>install</command>、<command>remove</command> 和 <command>patch</command>）之前提供此选项，如下所示：
  </para>
<screen>zypper <option>--non-interactive</option> install <replaceable>package_name</replaceable></screen>
  <para>
   该选项允许在脚本和 cron 任务中使用 Zypper。
  </para>

  <warning>
   <title>不要删除必需的系统包</title>
   <para>
    请勿删除如 <systemitem>glibc</systemitem>、<systemitem>zypper</systemitem>、<systemitem>kernel</systemitem> 之类的包。这些包是系统强制安装的，如果删除可能导致系统不稳定或完全停止运行。
   </para>
  </warning>
  <sect3 id="sec.zypper.softman.sources">
   <title>安装或下载源包</title>
   <para>
    <indexterm> <primary>软件</primary> <secondary>安装</secondary> <tertiary>源包</tertiary> </indexterm> 如果要安装某包对应的源包，请使用：
   </para>
<screen>zypper source-install <replaceable>package_name</replaceable></screen>
   <para>
    使用此命令，还可安装指定包的版本依赖性。如果不想执行此操作，请如下所示添加开关 <literal>-D</literal>。要只安装版本依赖性，请使用 <literal>-d</literal>。
   </para>
<screen>zypper source-install -D <replaceable>package_name</replaceable> # source package only
zypper source-install -d <replaceable>package_name</replaceable> # build dependencies only</screen>
   <para>
    当然，只有当储存库列表中启用了含有源包的储存库时，才能这样做（默认添加但不启用它）。请参见<xref linkend="sec.zypper.instrepo"/> 了解有关储存库管理的细节。
   </para>
   <para>
    可使用以下方法来获取储存库中所有源包的列表：
   </para>
<screen>zypper search -t srcpackage</screen>
   <para>
    您也可以将所有已安装软件包的源包下载到本地目录。要下载源包，请使用：
   </para>
<screen>zypper source-download</screen>
   <para>
    默认的下载目录是 <filename>/var/cache/zypper/source-download</filename>。您可以使用 <option>--directory</option> 选项更改下载目录。若只想显示缺失或多余的包而不进行下载或删除任何内容，请使用 <option>--status</option> 选项。要删除多余的源包，请使用 <option>--delete</option> 选项。要禁用删除，请使用 <option>--no-delete</option> 选项。
   </para>
  </sect3>
  <sect3 id="sec.zypper.softman.util">
   <title>实用程序</title>
   <para>
    要校验所有依赖性是否仍然满足，并修复缺少的依赖性，请使用：
   </para>
<screen>zypper verify</screen>
   <para>
    除了依赖性必须满足外，某些包还<quote>推荐</quote>其他包。只有在实际可用并可安装时才会安装这些推荐包。如果推荐的包在推荐它们的包已安装（通过添加其他包或硬件）之后才可用，请使用以下命令：
   </para>
<screen>zypper install-new-recommends</screen>
   <para>
    此命令在插入摄像头或 WLAN 设备后非常有用。如果可用，它将安装设备驱动程序和相关软件。只有在满足特定硬件依赖性后，才可安装驱动程序和相关软件。
   </para>
  </sect3>
 </sect2>

 <sect2 id="sec.zypper.softup">
  <title>使用 Zypper 更新软件</title>
  <para>
   用 Zypper 更新软件有三种方式：安装包、安装包的新版本或更新整个分发包。后者用 <command>zypper dist-upgrade</command> 命令实现，该命令在<xref linkend="sec.update.zypper"/> 中进行了讨论。
  </para>
  <sect3 id="sec.zypper.softup.patch">
   <title>安装增补程序</title>
   <para>
    要安装所有适用于您系统的正式发布增补程序，只需运行：
   </para>
<screen>zypper patch</screen>
   <para>
    这种情况下，会对储存库中的所有可用增补程序进行相关性检查，如有需要，还会进行安装。<phrase os="sles;sled">注册安装的 <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> 之后，包含此类增补程序的正式更新储存库将添加到您的系统中。</phrase>上述命令就是为了在需要时应用它们所必须输入的全部内容。
   </para>
   <para>
    Zypper 知道三种查询增补程序可用性的不同命令：
   </para>
   <variablelist>
    <varlistentry>
     <term><command>zypper patch-check</command>
     </term>
     <listitem>
      <para>
       列出需要的增补程序数（适用于您的系统但尚未安装的增补程序）
      </para>
<screen>~ # zypper patch-check
Loading repository data...
Reading installed packages...
5 patches needed (1 security patch)</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>zypper list-patches</command>
     </term>
     <listitem>
      <para>
       列出需要的所有增补程序（适用于您的系统但尚未安装的增补程序）
      </para>
<screen><?dbsuse-fo font-size="0.70em"?>

~ # zypper list-patches
Loading repository data...
Reading installed packages...
 
Repository                          | Name      | Version | Category | Status
------------------------------------+-----------+---------+----------+-------
Updates for openSUSE 11.3 11.3-1.82 | lxsession | 2776    | security | needed
</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>zypper patches</command>
     </term>
     <listitem>
      <para>
       列出 <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> 可用的所有增补程序，不论它们是否已安装或是否适用于您的安装。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    还可以列出并安装与特定问题相关的增补程序。要列出特定的增补程序，请使用带以下选项的 <command>zypper list-patches</command> 命令：
   </para>
   <variablelist>
    <varlistentry>
     <term><option>--bugzilla[=<replaceable>编号</replaceable>] </option>
     </term>
     <listitem>
      <para>
       列出 Bugzilla 问题的所有必需增补程序。如果只要列出特定 bug 的增补程序，则可以选择指定其 bug 编号。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><option>--cve[=<replaceable>编号</replaceable>]</option>
     </term>
     <listitem>
      <para>
       列出 CVE（通用漏洞披露）问题的所有必需增补程序，或者仅列出与特定 CVE 编号（如果已指定）匹配的增补程序。默认只会列出未应用的增补程序。使用 <option>-a</option> 可列出所有增补程序。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    要安装用于特定 Bugzilla 或 CVE 问题的增补程序，请使用以下命令：
   </para>
<screen>zypper patch --bugzilla=<replaceable>number</replaceable></screen>
   <para>
    或
   </para>
<screen>zypper patch --cve=<replaceable>number</replaceable></screen>
   <para>
    例如，要安装 CVE 编号为 <literal>CVE-2010-2713</literal> 的安全增补程序，请执行：
   </para>
<screen>zypper patch --cve=CVE-2010-2713</screen>
  </sect3>
  <sect3 id="sec.zypper.softup.update">
   <title>安装更新</title>
   <para>
    如果某个储存库只包含新包，但未提供增补程序，则 <command>zypper patch</command> 不会产生任何作用。要使用新的可用版本更新所有安装的包，请使用：
   </para>
<screen>zypper update</screen>
   <para>
    要更新个别包，请用更新或安装命令指定包：
   </para>
<screen>zypper update <replaceable>package_name</replaceable>
zypper install <replaceable>package_name</replaceable></screen>
   <para>
    可使用此命令来获取所有新的可安装包的列表：
   </para>
<screen>zypper list-updates</screen>
   <para>
    请注意，此命令仅列出与以下准则匹配的包：
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      与已安装的包拥有相同的供应商，
     </para>
    </listitem>
    <listitem>
     <para>
      由至少与已安装包拥有相同优先级的储存库提供，
     </para>
    </listitem>
    <listitem>
     <para>
      可安装（满足所有依赖性）。
     </para>
    </listitem>
   </itemizedlist>
   <para>
    <emphasis>所有</emphasis>新的可用包（无论是否可安装）的列表可通过以下方式获取：
   </para>
<screen>zypper list-updates --all</screen>
   <para>
    要找出新包不能安装的原因，使用上面描述的 <command>zypper install</command> 或 <command>zypper update</command> 命令即可。
   </para>
  </sect3>
  <sect3 id="sec.zypper.softup.upgrade">
   <title>升级到新产品版本</title>
   <para>
    要轻松将安装的产品升级到新版本<phrase os="sles;sled">（例如，从 SUSE Linux Enterprise Server 11 升级到 SUSE Linux Enterprise Server 11 SP1）</phrase>，请先调整您的储存库，使其与当前的 <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> 储存库匹配。有关细节，请参见<xref linkend="sec.zypper.instrepo"/>。然后对必需的储存库使用 <command>zypper dist-upgrade</command> 命令。该命令可确保安装当前启用的储存库上的所有包。有关详细说明，请参见<xref linkend="sec.update.zypper"/>。
   </para>
   <para>
    要将分发包升级限制为来自特定储存库的包，同时还考虑满足依赖性的其他储存库，请使用 <option>--from</option> 选项并按别名、编号或 URI 指定储存库。
   </para>
   <note>
    <title><command>zypper update</command> 和 <command>zypper dist-upgrade</command> 之间的区别</title>
    <para>
     选择 <command>zypper update</command> 可以在保持系统完整性的前提下将包更新到您的产品版本可用的较新版本。<command>zypper update</command> 遵守以下规则：
    </para>
    <simplelist>
     <member>不更改供应商</member> <member>不更改体系结构</member> <member>不降级</member> <member>保留已安装的包</member>
    </simplelist>
    <para>
     执行 <command>zypper dist-upgrade</command> 时，将安装来自当前启用的储存库的所有包。该规则是强制执行的，因此包可能更改供应商或体系结构，甚至降级。升级后不满足依赖性的所有包都将卸装。
    </para>
   </note>
  </sect3>
 </sect2>

 <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="zypper_upgrade.xml" parse="xml"/>

 <sect2 id="sec.zypper.instrepo">
  <title>使用 Zypper 管理储存库</title>
   
  <para>
   Zypper 的所有安装或增补程序命令均基于已知储存库列表。要列出系统已知的所有储存库，请使用命令：
  </para>
<screen>zypper repos</screen>
  <para>
   结果将类似于与以下输出：
  </para>
  <example id="ex.zypper.repos">
   <title>Zypper — 已知储存库的列表</title>
<screen os="sles;sled"><?dbsuse-fo font-size="0.80em"
?>


# | Alias                             | Name                              | Enabled | Refresh
--+-----------------------------------+-----------------------------------+---------+--------
1 | SUSE-Linux-Enterprise-Server 11-0 | SUSE-Linux-Enterprise-Server 11-0 | Yes     | No
2 | SLES-11-Updates                   | SLES 11 Online Updates            | Yes     | Yes
3 | broadcomdrv                       | Broadcom Drivers                  | Yes     | No      </screen>

  </example>
  <para>
   当在各个命令中指定储存库时，可以使用别名、URI 或 <command>zypper repos</command> 命令输出中的储存库编号。储存库别名是用于储存库处理命令中的储存库名称的简短版本。请注意，在修改储存库列表后，储存库编号可能会更改。别名本身不会更改。
  </para>
  <para>
   默认情况下不显示储存库的 URI 或优先级之类的细节。用以下命令可以列出所有细节：
  </para>
<screen>zypper repos -d</screen>
  <para>
   列表中有时会包含大量未启用的储存库，这可能会造成困扰。想要只显示启用的储存库，请使用以下命令：
  </para>
<screen>zypper repos -E</screen>
  <sect3 id="sec.zypper.instrepo.add">
   <title>添加储存库</title>
    <warning>
     <title>使用 Zypper 添加储存库时可能会对系统产生危害</title>
     <para>默认情况下，系统会检查 SUSE 所提供储存库中的包摘要和签名，确保它们的完整性和来源。在提供储存库的服务器上的储存库配置文件中可启用此 <quote>GPG check</quote>。 </para>
     <para>当使用 <command>zypper ar</command> 命令添加储存库时，会将此配置文件下载到 <filename>/etc/zypp/repos.d</filename>。Zypper 也会通知用户 GPG Check 选项的启用情况：</para>
     <screen>GPG check: Yes</screen>
     <para>请始终确保 GPG check 输出设置为<quote>Yes</quote>。如果设置为<quote>No</quote>，您的系统可能就会受到危害。例如，将包降级会重新引入以前已修复的漏洞。建议不要信任此选项设置为<quote>No</quote>的储存库。如果您确定 GPG check 由于操作失误而被禁用，请在 <filename>/etc/zypp/repos.d</filename> 中的相应储存库配置文件内添加下面的行来重新启用该选项：</para>
     <screen>gpgcheck=1</screen>
   </warning>    
   <para>
    要添加储存库，请运行
   </para>
<screen>zypper addrepo <replaceable>URI</replaceable><replaceable>alias</replaceable></screen>
   <para>
    <replaceable>URI</replaceable> 可以是因特网储存库、网络资源、目录、CD 或 DVD（有关细节请参见 <ulink url="http://en.opensuse.org/openSUSE:Libzypp_URIs"/>）。<replaceable>别名</replaceable>是储存库的唯一简写标识符。您可以自由选择别名，唯一的例外情况是别名必须唯一。如果指定的别名已在使用，Zypper 将发出警告。
   </para>
  </sect3>
  <sect3 id="sec.zypper.instrepo.rm">
   <title>删除储存库</title>
   <para>
    如果要从此列表中删除某个储存库，请将命令 <command>zypper removerepo</command> 和要删除的储存库的别名或编号结合使用。例如，要删除<xref linkend="ex.zypper.repos"/> 中列为第三项的储存库，请使用以下命令：
   </para>
<screen>zypper removerepo 3</screen>
  </sect3>
  <sect3 id="sec.zypper.instrepo.mofify">
   <title>修改储存库</title>
   <para>
    用 <command>zypper modifyrepo</command> 启用或禁用储存库。您还可以用该命令更改储存库的属性（例如刷新行为、名称或优先级）。以下命令将会启用名为 <literal>updates</literal> 的储存库、打开自动刷新并将其优先级设置为 20：
   </para>
<screen>zypper modifyrepo -er -p 20 'updates'</screen>
   <para>
    修改储存库并不局限于单个储存库 — 您也可以对组执行该操作︰
   </para>
   <simplelist>
    <member><option>-a</option>：所有储存库</member> <member><option>-l</option>：本地储存库</member> <member><option>-t</option>：远程储存库</member> <member><option>-m <replaceable>类型</replaceable></option>：特定类型的储存库（其中<replaceable>类型</replaceable>可以是以下之一：<literal>http</literal>、<literal>https</literal>、<literal>ftp</literal>、<literal>cd</literal>、<literal>dvd</literal>、<literal>dir</literal>、<literal>file</literal>、<literal>cifs</literal>、<literal>smb</literal>、<literal>nfs</literal>、<literal>hd</literal> 和 <literal>iso</literal>）</member>
   </simplelist>
   <para>
    要重命名储存库别名，请使用 <literal>renamerepo</literal> 命令。以下示例把别名从 <literal>Mozilla Firefox</literal> 改为 <literal>firefox</literal>：
   </para>
<screen>zypper renamerepo 'Mozilla Firefox' firefox</screen>
  </sect3>
 </sect2>

 <sect2 id="sec.zypper.query">
  <title>用 Zypper 查询储存库和包</title>
  <para>
   Zypper 提供各种查询储存库或包的方式。要获取所有可用的产品、模式、包或增补程序的列表，请使用以下命令：
  </para>
<screen>zypper products
zypper patterns
zypper packages
zypper patches</screen>
  <para>
   要查询特定包的所有储存库，请使用 <literal>search</literal>。它用于包名称或（可选）包摘要和描述。搜索项中允许使用通配符 <literal>*</literal> 和 <literal>?</literal>。默认情况下搜索不区分大小写。
  </para>
<screen>zypper search firefox       # simple search for "firefox"
zypper search "*fire*"      # using wild cards
zypper search -d fire       # also search in package descriptions and summaries
zypper search -u firefox    # only display packages not already installed</screen>
  <para>
   要搜索提供特殊功能的包，请使用命令 <literal>what-provides</literal>。例如，如果您想知道哪个包提供 perl 模块 <literal>SVN::Core</literal>，请使用以下命令：
  </para>
<screen>zypper what-provides 'perl(SVN::Core)'</screen>
  <para>
   要查询个别包，请使用 <command>info</command> 命令，并用完整包名称作为自变量。它会显示包的详细信息。如果还要显示该包必需/推荐的包，则使用选项 <option>--requires</option> 和 <option>--recommends</option>：
  </para>
<screen>zypper info --requires MozillaFirefox</screen>
  <para>
   <literal>what-provides <replaceable>package</replaceable></literal> 与 <command>rpm -q --whatprovides <replaceable>package</replaceable></command> 类似，不过 RPM 只能查询 RPM 数据库（即所有已安装的包的数据库）。另一方面，Zypper 将告诉您任意储存库的功能的提供商，而非仅已安装的储存库功能的提供商。
  </para><indexterm class="endofrange" startref="idx.zypper"/>
 </sect2>

 <sect2 id="sec.zypper.configure">
  <title>配置 Zypper</title>
  <para>
   Zypper 现在随附配置文件，允许您永久更改 Zypper 的行为（系统范围或用户特定）。要进行系统范围更改，请编辑 <filename>/etc/zypp/zypper.conf</filename>。要进行用户特定的更改，请编辑 <filename>~/.zypper.conf</filename>。如果 <filename>~/.zypper.conf</filename> 尚不存在，则可使用 <filename>/etc/zypp/zypper.conf</filename> 作为模板：将其复制到 <filename>~/.zypper.conf</filename> 并按您的喜好调整。请参见文件中的注释，获取有关可用选项的帮助。
  </para>
 </sect2>

 <sect2 id="sec.zypper.trouble">
  <title>查错</title>
  <para>
   如果您在访问配置的储存库中的包时遇到问题（例如，尽管您知道某个包在某个储存库中，但 Zypper 找不到该包），可使用以下命令刷新储存库：
  </para>
<screen>zypper refresh</screen>
  <para>
   如果不起作用，则尝试
  </para>
<screen>zypper refresh -fdb</screen>
  <para>
   这会强制完全刷新和重构建数据库，包括强制下载原始元数据。
  </para>
 </sect2>

 <sect2>
  <title>btrfs 文件系统上的 Zypper 回滚功能</title>
  <para>
   如果根分区上使用的是 Btrfs 文件系统且系统中安装了 <command>snapper</command>，当 Zypper 提交对文件系统所做的更改以创建相应的文件系统快照时，会（通过 <command>snapper</command> 安装的脚本）自动调用 <command>snapper</command>。这些快照可用于还原 zypper 执行的任何更改。有关 <command>snapper</command> 的更多信息，请参见 <command>man snapper</command>。
  </para>
  <para>
   当前，Zypper（和 YaST）只会为根文件系统生成快照，而无法配置其他子卷。默认文件系统不支持此功能。
  </para>
 </sect2>

 
</sect1>
