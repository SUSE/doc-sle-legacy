<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook51-profile.xsl"
    type="text/xml"
    title="Profiling step"
?>
<!DOCTYPE sect2
[
   <!ENTITY % entities SYSTEM "entity-decl.ent">
   %entities;
]>


<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<section xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.1" xml:base="suse_logfiles.xml" xml:id="sec-suse-log">
 <title>Protokolldateien: Paket logrotate</title><indexterm> <primary>Protokolldateien</primary> </indexterm> <indexterm> <primary>logrotate</primary> </indexterm>
 <para>
  Mehrere Systemdienste ( <emphasis>Dämonen</emphasis>) zeichnen zusammen mit dem Kernel selbst regelmäßig den Systemstatus und spezielle Ereignisse in Protokolldateien auf. Auf diese Weise kann der Administrator den Status des Systems zu einem bestimmten Zeitpunkt regelmäßig überprüfen, Fehler oder Fehlfunktionen erkennen und die Fehler mit Präzision beheben. Die Protokolldateien werden in der Regel, wie von FHS angegeben, unter <filename>/var/log</filename> gespeichert und werden täglich umfangreicher. Mit dem Paket <systemitem>logrotate</systemitem> kann der Umfang der Dateien gesteuert werden.
 </para>
 <para>
  Konfigurieren Sie Logrotate mit der Datei <indexterm><primary>Konfigurationsdateien</primary><secondary>logrotate.conf</secondary></indexterm><filename>/etc/logrotate.conf</filename>. Die Dateien, die zusätzlich gelesen werden sollen, werden insbesondere durch die <systemitem>include</systemitem>-Spezifikation konfiguriert. Programme, die Protokolldateien erstellen, installieren einzelne Konfigurationsdateien in <filename>/etc/logrotate.d</filename>. Solche Dateien sind beispielsweise im Lieferumfang der Pakete <systemitem>apache2</systemitem> (<filename>/etc/logrotate.d/apache2</filename>) und <systemitem>syslogd</systemitem> (<filename>/etc/logrotate.d/syslogd</filename>) enthalten.
 </para>
 <example xml:id="dat-suse-logrotate-conf">
  <title>Beispiel für /etc/logrotate.conf</title>
<screen># see "man logrotate" for details
# rotate log files weekly
weekly

# keep 4 weeks worth of backlogs
rotate 4

# create new (empty) log files after rotating old ones
create

# uncomment this if you want your log files compressed
#compress

# RPM packages drop log rotation information into this directory
include /etc/logrotate.d

# no packages own lastlog or wtmp - we'll rotate them here
#/var/log/wtmp {
#    monthly
#    create 0664 root utmp
#    rotate 1
#}

# system-specific logs may be also be configured here.</screen>
 </example>
 <para>
  logrotate wird über cron gesteuert und täglich durch <filename>/etc/cron.daily/logrotate</filename> aufgerufen.
 </para>
 <important>
  <para>
   <indexterm><primary>Berechtigungen</primary><secondary>Dateiberechtigungen</secondary></indexterm> Mit der Option <systemitem>create</systemitem> werden alle vom Administrator in <filename>/etc/permissions*</filename> vorgenommenen Einstellungen gelesen. Stellen Sie sicher, dass durch persönliche Änderungen keine Konflikte auftreten.
  </para>
 </important>
</section>
