<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sect1 PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN"
"novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<sect1 xml:base="zypper.xml" id="sec-zypper">
 <title>Verwenden von zypper</title><indexterm id="idx-zypper" class="startofrange"> <primary>zypper</primary> </indexterm> <indexterm> <primary>Kommandos</primary> <secondary>zypper</secondary> </indexterm> <indexterm> <primary>Software</primary> <secondary>Verwalten</secondary> <tertiary>Kommandozeile</tertiary> </indexterm>

 <para>
  
  
  Zypper ist ein Kommandozeilen-Paketmanager für Installation, Aktualisierung und Löschung von Paketen sowie zum Verwalten von Repositorys. <phrase os="sles;sled">Die Syntax von Zypper entspricht der von rug. Im Unterschied zu rug benötigt Zypper zur Ausführung im Hintergrund allerdings keinen zmd-Dämon. Weitere Informationen über rug-Kompatibilität finden Sie in <command>man zypper</command>, Abschnitt <quote>COMPATIBILITY WITH RUG</quote>.</phrase> Damit können Sie Software per Fernzugriff oder mithilfe von Shell-Skripten verwalten.
 </para>

 <sect2 id="sec-zypper-usage">
  <title>Allgemeine Verwendung</title>
  <para>
   Die allgemeine Syntax von Zypper sieht wie folgt aus:
  </para>
<screen>zypper <option>[global-options]</option><replaceable>command</replaceable><option>[command-options]</option><option>[arguments]</option> ...</screen>
  <para>
   Die Komponenten in Klammern sind nicht erforderlich. Am einfachsten führen Sie Zypper aus, indem Sie seinen Namen gefolgt von einem Kommando eingeben. Geben Sie z. B. für das Anwenden aller erforderlichen Patches auf den Systemtyp das Folgende ein:
  </para>
<screen>zypper patch</screen>
  <para>
   Zusätzlich können Sie aus einer oder mehreren globalen Optionen wählen, indem Sie sie direkt vor dem Kommando eingeben. Beispielspielsweise führt <option>--non-interactive</option> das Kommando ohne Eingabeaufforderungen aus (und wendet automatisch die Standardantworten an):
  </para>
<screen>zypper --non-interactive patch</screen>
  <para>
   Um die spezifischen Optionen für ein bestimmtes Kommando zu benutzen, geben Sie sie direkt nach dem Kommando ein. Beispielsweise werden mit <option>--auto-agree-with-licenses</option> alle erforderlichen Patches auf das System angewendet, ohne eine Bestätigung von Lizenzen anzufordern (sie werden automatisch akzeptiert):
  </para>
<screen>zypper patch --auto-agree-with-licenses</screen>
  <para>
   Einige Kommandos erfordern ein oder mehrere Argumente. Bei der Verwendung des Installationskommandos z. B. müssen Sie angeben, welche Pakete zu installieren sind:
  </para>
<screen>zypper install mplayer</screen>
  <para>
   Einige Optionen erfordern auch ein Argument. Das folgende Kommando listet alle bekannten Muster auf:
  </para>
<screen>zypper search -t pattern</screen>
  <para>
   Sie können alle obigen Optionen kombinieren. Beispielsweise werden mit dem folgenden Kommando <systemitem>mplayer</systemitem>- und <systemitem>amarok</systemitem>-Pakete mithilfe des <literal>factory</literal>-Repositorys installiert und ausführlich angegeben:
  </para>
<screen>zypper -v install --from factory mplayer amarok</screen>
  <para>
   Mit der Option <option>--from</option> bleiben alle Repositorys aktiviert (damit alle Abhängigkeiten aufgelöst werden können), wenn das Paket aus dem angegebenen Repository abrufen wird.
  </para>
  <para>
   Die meisten Zypper-Kommandos besitzen eine <literal>dry-run</literal>-Option, die eine Simulation des angegebenen Kommandos ausführt. Sie kann für Tests verwendet werden.
  </para>
<screen>zypper remove --dry-run MozillaFirefox</screen>
  <para>
   Zypper unterstützt die globale Option <option>--userdata <replaceable>string</replaceable></option> zur Identifizierung von Transaktionen. Die benutzerdefinierte Zeichenkette wird an die zypper-Verlaufsprotokolle in <filename>/var/log/zypp/history</filename> und Snapper übergeben.
  </para>
<screen>zypper --userdata <replaceable>string</replaceable> patch</screen>
 </sect2>

 <sect2 id="sec-zypper-softman">
  <title>Installieren und Entfernen von Software mit zypper</title>
  <para>
   Verwenden Sie zur Installation oder Löschung von Paketen die folgenden Kommandos:
  </para>
<screen>zypper install <replaceable>package_name</replaceable>
zypper remove <replaceable>package_name</replaceable></screen>
  <para>
   Zypper kennt verschiedene Möglichkeiten, Pakete für die Installations- und Löschkommandos anzugeben:
  </para>
  <variablelist>
   <varlistentry>
    <term>nach dem genauen Namen (und der Versionsnummer) des Pakets</term>
    <listitem>
<screen>zypper install MozillaFirefox</screen>
     <para>
      oder
     </para>
<screen>zypper install MozillaFirefox-3.5.3</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>nach dem Repository-Alias und Paketnamen</term>
    <listitem>
<screen>zypper install mozilla:MozillaFirefox</screen>
     <para>
      Dabei ist <literal>mozilla</literal> der Alias des Repositorys, aus dem installiert werden soll.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>nach dem Paketnamen mit Wildcards</term>
    <listitem>
     <para>
      Das folgende Kommando installiert alle Pakete, deren Name mit <quote>Moz</quote> beginnt. Verwenden Sie diese Möglichkeit mit äußerster Umsicht, vor allem beim Entfernen von Paketen.
     </para>
<screen>zypper install 'Moz*'</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>nach Funktion</term>
    <listitem>
     <para>
      Wenn Sie beispielsweise ein perl-Modul installieren möchten, ohne den Namen des Pakets zu kennen, sind Funktionen praktisch:
     </para>
<screen>zypper install 'perl(Time::ParseDate)'</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>nach Funktion und/oder Architektur und/oder Version</term>
    <listitem>
     <para>
      Zusammen mit einer Funktion können Sie eine Architektur (wie <literal>i586</literal> oder <literal>x86_64</literal>) und/oder eine Version angeben. Der Version muss ein Operator vorangehen: <literal>&lt;</literal> (kleiner als), <literal>&lt;=</literal> (kleiner oder gleich), <literal>=</literal> (gleich), <literal>&gt;=</literal> (größer oder gleich), <literal>&gt;</literal> (größer als).
     </para>
<screen>zypper install 'firefox.x86_64'
zypper install 'firefox&gt;=3.5.3'
zypper install 'firefox.x86_64&gt;=3.5.3'</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>nach dem Pfad der RPM-Datei</term>
    <listitem>
     <para>
      Sie können einen lokalen oder entfernten Pfad zu einem Paket angeben:
     </para>
<screen>zypper install /tmp/install/MozillaFirefox.rpm
zypper install http://download.opensuse.org/repositories/mozilla/SUSE_Factory/x86_64/MozillaFirefox-3.5.3-1.3.x86_64.rpm</screen>
    </listitem>
   </varlistentry>
  </variablelist>
  <para>
   Zum gleichzeitigen Installieren und Entfernen von Paketen verwenden Sie die Modifikatoren <literal>+/-</literal>. Zum gleichzeitigen Installieren von <systemitem>emacs</systemitem> und Entfernen von <systemitem>vim</systemitem> verwenden Sie Folgendes:
  </para>
<screen>zypper install emacs -vim
</screen>
  <para>
   Zum gleichzeitigen Entfernen von <systemitem>emacs</systemitem> und Installieren von <systemitem>vim</systemitem> verwenden Sie Folgendes:
  </para>
<screen>zypper remove emacs +vim
</screen>
  <para>
   Um zu vermeiden, dass der mit <literal>-</literal> beginnende Paketname als Kommandooption interpretiert wird, verwenden Sie ihn stets als das zweite Argument. Falls dies nicht möglich ist, stellen Sie ihm <literal>--</literal> voran:
  </para>
<screen>zypper install -emacs +vim       # Wrong
zypper install vim -emacs        # Correct
zypper install -- -emacs +vim    # same as above
zypper remove emacs +vim         # same as above</screen>
  <para>
   Wenn Sie (zusammen mit einem bestimmten Paket) alle Pakete entfernen möchten, die nach dem Entfernen dieses Pakets nicht mehr erforderlich sind, verwenden Sie die Option <option>--clean-deps</option>:
  </para>
<screen>rm <replaceable>package_name</replaceable> --clean-deps</screen>
  <para>
   Standardmäßig verlangt Zypper eine Bestätigung, bevor ein ausgewähltes Paket installiert oder entfernt wird oder wenn ein Problem auftritt. Mit der Option <option>--non-interactive</option> können Sie dieses Verhalten deaktivieren. Die Option muss jedoch vor dem tatsächlich auszuführenden Kommando (<command>Installieren</command>, <command>Entfernen</command> oder <command>Patch</command>) angegeben werden, wie im Folgenden:
  </para>
<screen>zypper <option>--non-interactive</option> install <replaceable>package_name</replaceable></screen>
  <para>
   Mit dieser Option kann Zypper auch in Skripten und Cron-Aufträgen verwendet werden.
  </para>

  <warning>
   <title>Entfernen Sie keine obligatorischen Systempakete.</title>
   <para>
    Entfernen Sie keine Pakete wie <systemitem>glibc</systemitem>, <systemitem>zypper</systemitem>, <systemitem>kernel</systemitem> oder ähnliche Pakete. Diese Pakete sind obligatorisch für das System. Wenn sie entfernt werden, kann das System instabil werden oder seine Funktion komplett einstellen.
   </para>
  </warning>
  <sect3 id="sec-zypper-softman-sources">
   <title>Installieren und Herunterladen von Quellpaketen</title>
   <para>
    <indexterm> <primary>Software</primary> <secondary>installieren</secondary> <tertiary>Quellpaket</tertiary> </indexterm> Wenn Sie das entsprechende Quellpaket eines Pakets installieren möchten, verwenden Sie:
   </para>
<screen>zypper source-install <replaceable>package_name</replaceable></screen>
   <para>
    Dieses Kommando installiert auch die Build-Abhängigkeiten des angegebenen Pakets. Wenn Sie dies nicht wünschen, fügen Sie den Schalter <literal>-D</literal> hinzu. Um nur die Build-Abhängigkeiten zu installieren, verwenden Sie <literal>-d</literal>.
   </para>
<screen>zypper source-install -D <replaceable>package_name</replaceable> # source package only
zypper source-install -d <replaceable>package_name</replaceable> # build dependencies only</screen>
   <para>
    Natürlich gelingt dies nur, wenn das Repository mit den Quellpaketen in Ihrer Repository-Liste aktiviert ist (es wird standardmäßig hinzugefügt, aber nicht aktiviert). Details zur Repository-Verwaltung finden Sie unter <xref linkend="sec-zypper-instrepo"/>.
   </para>
   <para>
    Eine Liste aller Quellpakete, die in Ihren Repositorys verfügbar sind, können Sie wie folgt abrufen:
   </para>
<screen>zypper search -t srcpackage</screen>
   <para>
    Wenn Sie möchten, können Sie die Quellpakete für alle installierten Pakete in ein lokales Verzeichnis herunterladen. Zum Herunterladen von Quellpaketen verwenden Sie:
   </para>
<screen>zypper source-download</screen>
   <para>
    Das Standardverzeichnis für heruntergeladene Dateien lautet <filename>/var/cache/zypper/source-download</filename>. Mit der Option <option>--directory</option> können Sie dieses Verzeichnis ändern. Sollen nur fehlende oder überzählige Pakete angezeigt werden, ohne Pakete herunterzuladen oder zu löschen, verwenden Sie die Option <option>--status</option>. Zum Löschen überzähliger Pakete verwenden Sie die Option <option>--delete</option>. Soll das Löschen deaktiviert werden, verwenden Sie die Option <option>--no-delete</option>.
   </para>
  </sect3>
  <sect3 id="sec-zypper-softman-util">
   <title>Dienstprogramme</title>
   <para>
    Wenn Sie prüfen möchten, ob alle Abhängigkeiten noch erfüllt sind, und fehlende Abhängigkeiten reparieren möchten, verwenden Sie:
   </para>
<screen>zypper verify</screen>
   <para>
    Zusätzlich zu Abhängigkeiten, die erfüllt sein müssen, <quote>empfehlen</quote> einige Pakete andere Pakete. Diese empfohlenen Pakete werden installiert, wenn sie aktuell verfügbar und installierbar sind. Falls empfohlene Pakete erst nach der Installation des empfehlenden Pakets (durch Hinzufügen zusätzlicher Pakete oder zusätzlicher Hardware) zur Verfügung steht, verwenden Sie das folgende Kommando: 
   </para>
<screen>zypper install-new-recommends</screen>
   <para>
    Dieses Kommando ist nach dem Anschließen einer Webcam oder eines WLAN-Geräts äußerst nützlich. Hiermit werden Treiber für das Gerät und die zugehörige Software installiert, sofern verfügbar. Die Treiber und die zugehörige Software sind nur dann installierbar, wenn bestimmte Hardware-Abhängigkeiten erfüllt sind.
   </para>
  </sect3>
 </sect2>

 <sect2 id="sec-zypper-softup">
  <title>Aktualisieren von Software mit zypper</title>
  <para>
   Es gibt drei verschiedene Möglichkeiten, Software mithilfe von Zypper zu installieren: durch Installation von Patches, durch Installation einer neuen Version eines Pakets oder durch Aktualisieren der kompletten Distribution. Letzters wird mit dem Kommando <command>zypper dist-upgrade</command> erreicht, das in <xref linkend="sec-update-zypper"/> behandelt wird.
  </para>
  <sect3 id="sec-zypper-softup-patch">
   <title>Installieren von Patches</title>
   <para>
    Um alle offiziell herausgegebenen Patches für Ihr System zu installieren, führen Sie einfach Folgendes aus:
   </para>
<screen>zypper patch</screen>
   <para>
    In diesem Fall werden alle in Ihren Repositorys vorhandenen Patches auf Relevanz überprüft und bei Bedarf installiert. <phrase os="sles;sled">Nach dem Registrieren Ihrer <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase>-Installation wird Ihrem System ein offizielles Aktualisierungs-Repository hinzugefügt, das solche Patches enthält.</phrase> Das obige Kommando ist alles, was Sie brauchen, um sie bei Bedarf anzuwenden.
   </para>
   <para>
    Zypper kennt drei unterschiedliche Kommandos, um die Verfügbarkeit von Patches abzufragen:
   </para>
   <variablelist>
    <varlistentry>
     <term><command>zypper patch-check</command>
     </term>
     <listitem>
      <para>
       Listet die Anzahl der benötigten Patches auf (Patches, die für Ihr System gelten, aber noch nicht installiert sind)
      </para>
<screen>~ # zypper patch-check
Loading repository data...
Reading installed packages...
5 patches needed (1 security patch)</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>zypper list-patches</command>
     </term>
     <listitem>
      <para>
       Listet alle benötigten Patches auf (Patches, die für Ihr System gelten, aber noch nicht installiert sind)
      </para>
<screen><?dbsuse-fo font-size="0.70em"?>

~ # zypper list-patches
Loading repository data...
Reading installed packages...
 
Repository                          | Name      | Version | Category | Status
------------------------------------+-----------+---------+----------+-------
Updates for openSUSE 11.3 11.3-1.82 | lxsession | 2776    | security | needed
</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>zypper patches</command>
     </term>
     <listitem>
      <para>
       Listet alle für <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> verfügbaren Patches auf, unabhängig davon, ob sie bereits installiert sind oder für Ihre Installation gelten.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    Sie können auch Patches für bestimmte Probleme auflisten und installieren. Dazu geben Sie das Kommando <command>zypper list-patches</command> mit den folgenden Optionen ein:
   </para>
   <variablelist>
    <varlistentry>
     <term><option>--bugzilla[=<replaceable>Nummer</replaceable>] </option>
     </term>
     <listitem>
      <para>
       Listet alle erforderlichen Patches für Probleme mit Bugzilla auf. Optional können Sie eine Fehlernummer angeben, wenn nur Patches für diesen bestimmten Fehler aufgeführt werden sollen.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><option>--cve[=<replaceable>number</replaceable>]</option>
     </term>
     <listitem>
      <para>
       Listet alle erforderlichen Patches für CVE-Probleme (Common Vulnerabilities and Exposures, häufige Sicherheitslücken und Gefährdungen) auf bzw. nur Patches für eine bestimmte CVE-Nummer, sofern angegeben. Standardmäßig werden nur Patches aufgeführt, die noch nicht angewendet wurden. Mit <option>-a</option> werden alle Einträge angezeigt.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    Zum Installieren eines Patches für ein bestimmtes Bugzilla- oder CVE-Problem verwenden Sie die folgenden Kommandos:
   </para>
<screen>zypper patch --bugzilla=<replaceable>number</replaceable></screen>
   <para>
    oder
   </para>
<screen>zypper patch --cve=<replaceable>number</replaceable></screen>
   <para>
    Zum Installieren eines Sicherheits-Patches mit der CVE-Nummer <literal>CVE-2010-2713</literal> führen Sie beispielsweise Folgendes aus:
   </para>
<screen>zypper patch --cve=CVE-2010-2713</screen>
  </sect3>
  <sect3 id="sec-zypper-softup-update">
   <title>Installieren von Updates</title>
   <para>
    Wenn ein Repository neue Pakete enthält, aber keine Patches zur Verfügung stellt, zeigt <command>zypper patch</command> keinerlei Wirkung. Verwenden Sie zum Aktualisieren aller installierten Pakete mit neueren verfügbaren Versionen:
   </para>
<screen>zypper update</screen>
   <para>
    Zum Aktualisieren einzelner Pakete geben Sie das Paket mit dem Aktualisierungs- oder Aktualisierungskommando an:
   </para>
<screen>zypper update <replaceable>package_name</replaceable>
zypper install <replaceable>package_name</replaceable></screen>
   <para>
    Mit dem Kommando kann eine Liste mit allen neuen installierbaren Paketen abgerufen werden.
   </para>
<screen>zypper list-updates</screen>
   <para>
    Dieses Kommando listet ausschließlich Pakete auf, die die folgenden Kriterien erfüllen:
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      stammt von demselben Hersteller wie das bereits installierte Paket,
     </para>
    </listitem>
    <listitem>
     <para>
      umfasst Repositorys mit mindestens derselben Priorität wie das bereits installierte Paket,
     </para>
    </listitem>
    <listitem>
     <para>
      ist installierbar (alle Abhängigkeiten wurden erfüllt).
     </para>
    </listitem>
   </itemizedlist>
   <para>
    Eine Liste <emphasis>aller</emphasis> neuen verfügbaren Pakete (unabhängig davon, ob diese Pakete installierbar sind oder nicht) erhalten Sie mit Folgendem:
   </para>
<screen>zypper list-updates --all</screen>
   <para>
    Um festzustellen, warum ein neues Paket nicht installiert werden kann, verwenden Sie einfach das Kommando <command>zypper install</command> oder <command>zypper update</command>, wie oben beschrieben.
   </para>
  </sect3>
  <sect3 id="sec-zypper-softup-upgrade">
   <title>Aktualisieren auf eine neue Produktversion</title>
   <para>
    Um die Installation schnell und einfach auf eine neue Produktversion zu aktualisieren <phrase os="sles;sled">(beispielsweise von SUSE Linux Enterprise Server 11 auf SUSE Linux Enterprise Server 11 SP1)</phrase>, passen Sie zunächst die Repositorys so an, dass sie den aktuellen Repositorys für <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> entsprechen. Detaillierte Informationen finden Sie in <xref linkend="sec-zypper-instrepo"/>. Führen Sie dann das Kommando <command>zypper dist-upgrade</command> für die erforderlichen Repositorys aus. Dieses Kommando stellt sicher, dass alle Pakete aus den aktuell aktivierten Repositorys installiert werden. Siehe dazu <xref linkend="sec-update-zypper"/>.
   </para>
   <para>
    Um das Distributions-Upgrade auf Pakete aus einem bestimmten Repository zu beschränken, während gleichzeitig die anderen Repositorys im Hinblick auf die Abhängigkeiten berücksichtigt werden, verwenden Sie die Option <option>--from</option> option und geben Sie das Repository wahlweise mit dem Alias, der Nummer oder der URI an.
   </para>
   <note>
    <title>Unterschiede zwischen <command>zypper update</command> und <command>zypper dist-upgrade</command></title>
    <para>
     Wählen Sie <command>zypper update</command>, um Pakete auf neuere Versionen zu aktualisieren, die für Ihre Produktversion verfügbar sind, und die Systemintegrität beizubehalten. <command>zypper update</command> richtet sich nach den folgenden Regeln:
    </para>
    <simplelist>
     <member>keine Herstelleränderungen</member> <member>keine Architekturänderungen</member> <member>keine Zurückstufung</member> <member>installierte Pakete behalten</member>
    </simplelist>
    <para>
     Bei <command>zypper dist-upgrade</command> werden alle Pakete aus den derzeit aktivierten Repositorys installiert. Diese Regel ist erzwungen, d. h. Pakete könnten einen anderen Hersteller oder eine andere Architektur haben oder sogar zurückgestuft werden. Alle Pakete, die nach der Aktualisierung unerfüllte Abhängigkeiten aufweisen, werden deinstalliert.
    </para>
   </note>
  </sect3>
 </sect2>

 <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="zypper_upgrade.xml" parse="xml"/>

 <sect2 id="sec-zypper-instrepo">
  <title>Verwalten von Repositorys mit zypper</title>
   
  <para>
   Sämtliche Installations- und Patch-Kommandos von Zypper sind von der Liste der bekannten Repositorys abhängig. Um alle dem System bekannten Repositorys aufzulisten, verwenden Sie das Kommando:
  </para>
<screen>zypper repos</screen>
  <para>
   Das Ergebnis ist der folgenden Ausgabe ähnlich:
  </para>
  <example id="ex-zypper-repos">
   <title>Zypper – Liste der bekannten Repositorys</title>
<screen os="sles;sled"><?dbsuse-fo font-size="0.80em"
?>


# | Alias                             | Name                              | Enabled | Refresh
--+-----------------------------------+-----------------------------------+---------+--------
1 | SUSE-Linux-Enterprise-Server 11-0 | SUSE-Linux-Enterprise-Server 11-0 | Yes     | No
2 | SLES-11-Updates                   | SLES 11 Online Updates            | Yes     | Yes
3 | broadcomdrv                       | Broadcom Drivers                  | Yes     | No      </screen>

  </example>
  <para>
   Bei der Angabe von Repositorys kann in verschiedenen Kommandos ein Alias, URI oder eine Repository-Nummber aus der Ausgabe des Kommandos <command>zypper repos</command> verwendet werden. Ein Repository-Alias ist eine Kurzform des Repository-Namens, der in Repository-Kommandos verwendet wird. Beachten Sie dabei, dass sich die Repository-Nummern nach dem Bearbeiten der Repository-Liste ändern können. Der Alias ändert sich nie von alleine.
  </para>
  <para>
   Standardmäßig werden Details wie URI oder Priorität des Repositorys nicht angezeigt. Verwenden Sie das folgende Kommando, um alle Details aufzulisten:
  </para>
<screen>zypper repos -d</screen>
  <para>
   Unter Umständen enthält die Liste eine Vielzahl an nicht aktivierten Repositorys, was verwirrend wirken kann. Mit dem folgenden Kommando werden ausschließlich aktivierte Repositorys angezeigt:
  </para>
<screen>zypper repos -E</screen>
  <sect3 id="sec-zypper-instrepo-add">
   <title>Hinzufügen von Repositorys</title>
    <warning>
     <title>Mögliche Systemkonflikte beim Hinzufügen von Repositorys mit zypper</title>
     <para>Standardmäßig werden die Integrität und der Ursprung der Digests und Signaturen überprüft, die aus Paketen in Repositorys von SUSE stammen. Diese <quote>GPG-Prüfung</quote> wird in der Repository-Konfigurationsdatei auf dem Server aktiviert, der das betreffende Repository bereitstellt. </para>
     <para>Beim Hinzufügen eines Repository mit dem Kommando <command>zypper ar</command> wird diese Konfigurationsdatei in <filename>/etc/zypp/repos.d</filename> heruntergeladen. zypper informiert den Benutzer außerdem über die Option zur GPG-Prüfung:</para>
     <screen>GPG check: Yes</screen>
     <para>Die Ausgabe der GPG-Prüfung muss stets auf <quote>Ja</quote> eingestellt sein. Bei <quote>Nein</quote> können mögliche Konflikte im System auftreten, beispielsweise durch Paket-Downgrades, mit denen bereits behobene Schwachstellen wieder eingebracht werden. Es wird empfohlen, alle Repositorys, bei denen diese Option auf <quote>Nein</quote> eingestellt ist, als nicht vertrauenswürdig zu betrachten. Falls Sie sicher sind, dass die GPG-Prüfung versehentlich deaktiviert wurde, aktivieren Sie die Option wieder. Fügen Sie hierzu die folgende Zeile in die entsprechende Repository-Konfigurationsdatei in <filename>/etc/zypp/repos.d</filename> ein:</para>
     <screen>gpgcheck=1</screen>
   </warning>    
   <para>
    Zum Hinzufügen eines Repositorys führen Sie Folgendes aus:
   </para>
<screen>zypper addrepo <replaceable>URI</replaceable><replaceable>alias</replaceable></screen>
   <para>
    <replaceable>URI</replaceable> kann ein Internet-Repository, eine Netzwerkressource, ein Verzeichnis oder eine CD oder DVD sein (für Details siehe <ulink url="http://en.opensuse.org/openSUSE:Libzypp_URIs"/>). Der <replaceable>Alias</replaceable> ist ein Kürzel und eine eindeutige Kennung für das Repository. Sie können ihn frei wählen, vorausgesetzt, er ist eindeutig. Zypper gibt eine Warnung aus, wenn Sie einen Alias angeben, der bereits verwendet wird. 
   </para>
  </sect3>
  <sect3 id="sec-zypper-instrepo-rm">
   <title>Entfernen von Repositorys</title>
   <para>
    Wenn ein Repository von der Liste entfernt werden soll, verwenden Sie das Kommando <command>zypper removerepo</command> zusammen mit dem Alias oder der Nummer des zu löschenden Repositorys. Zum Entfernen des Repositorys, das im dritten Eintrag in <xref linkend="ex-zypper-repos"/> aufgeführt ist, verwenden Sie beispielsweise das folgende Kommando:
   </para>
<screen>zypper removerepo 3</screen>
  </sect3>
  <sect3 id="sec-zypper-instrepo-mofify">
   <title>Ändern von Repositorys</title>
   <para>
    Aktivieren oder deaktivieren von Repositorys mit <command>zypper modifyrepo</command>. Mit diesem Kommando können Sie auch die Eigenschaften des Repositorys (z. B. Aktualisierungsverhalten, Name oder Priorität) ändern. Das folgende Kommando aktiviert das Repository mit dem Namen <literal>updates</literal>, aktiviert die automatische Aktualisierung und stellt seine Priorität auf 20 ein:
   </para>
<screen>zypper modifyrepo -er -p 20 'updates'</screen>
   <para>
    Das Ändern von Repositorys ist nicht auf ein einziges Repository beschränkt – Sie können auch Gruppen bearbeiten:
   </para>
   <simplelist>
    <member><option>-a</option>: alle Repositorys</member> <member><option>-l</option>: lokale Repositorys</member> <member><option>-t</option>: entfernte Repositorys</member> <member><option>-m <replaceable>TYPE</replaceable></option>: Repositorys eines bestimmten Typs (wobei <replaceable>TYPE</replaceable> eines der folgenden sein kann: <literal>http</literal>, <literal>https</literal>, <literal>ftp</literal>, <literal>cd</literal>, <literal>dvd</literal>, <literal>dir</literal>, <literal>file</literal>, <literal>cifs</literal>, <literal>smb</literal>, <literal>nfs</literal>, <literal>hd</literal>, <literal>iso</literal>) </member>
   </simplelist>
   <para>
    Zum Umbenennen eines Repository-Alias verwenden Sie das Kommando <literal>renamerepo</literal>. Das folgende Beispiel ändert den Alias von <literal>Mozilla Firefox</literal> in <literal>firefox</literal>:
   </para>
<screen>zypper renamerepo 'Mozilla Firefox' firefox</screen>
  </sect3>
 </sect2>

 <sect2 id="sec-zypper-query">
  <title>Abfragen von Repositorys und Paketen mit Zypper</title>
  <para>
   Zypper bietet zahlreiche Methoden zur Abfrage von Repositorys oder Paketen. Verwenden Sie die folgenden Kommandos, um eine Liste aller verfügbaren Produkte, Muster, Pakete oder Patches zu erhalten:
  </para>
<screen>zypper products
zypper patterns
zypper packages
zypper patches</screen>
  <para>
   Zur Abfrage aller Repositorys auf bestimmte Pakete verwenden Sie <literal>search</literal>. Es gilt für Paketnamen oder optional für Paketzusammenfassungen und -beschreibungen. Verwenden der Platzhalter <literal>*</literal> und <literal>?</literal>mit dem Suchbegriff ist erlaubt. Standardmäßig unterscheidet der Suchvorgang keine Groß- und Kleinschreibung.
  </para>
<screen>zypper search firefox       # simple search for "firefox"
zypper search "*fire*"      # using wild cards
zypper search -d fire       # also search in package descriptions and summaries
zypper search -u firefox    # only display packages not already installed</screen>
  <para>
   Verwenden Sie zur Suche nach Paketen, die eine spezielle Funktion bieten, das Kommando <literal>what-provides</literal>. Wenn Sie beispielsweise wissen möchten, welches Paket das perl-Modul <literal>SVN::Core</literal> bereitstellt, verwenden Sie das folgende Kommando:
  </para>
<screen>zypper what-provides 'perl(SVN::Core)'</screen>
  <para>
   Um einzelne Pakete abzufragen, verwenden Sie <command>info</command> mit einem exakten Paketnamen als Argument. Damit werden detaillierte Informationen zu einem Paket angezeigt. Um auch die Elemente abzurufen, die für das Paket erforderlich/empfohlen sind, verwenden Sie die Optionen <option>--requires</option> und <option>--recommends</option>:
  </para>
<screen>zypper info --requires MozillaFirefox</screen>
  <para>
   Das <literal>what-provides<replaceable>-Paket</replaceable></literal> gleicht dem <command>rpm -q --whatprovides<replaceable>-Paket</replaceable></command>, aber RPM ist nur für Abfragen der RPM-Datenbank (die Datenbank aller installierten Pakete) möglich. zypper informiert Sie auf der anderen Seite über Anbieter der Möglichkeit von einem beliebigen Repository, nicht nur von denen, die installiert sind.
  </para><indexterm class="endofrange" startref="idx-zypper"/>
 </sect2>

 <sect2 id="sec-zypper-configure">
  <title>Konfigurieren von Zypper</title>
  <para>
   Zypper ist nunmehr mit einer Konfigurationsdatei ausgestattet, in der Sie die Arbeitsweise von Zypper dauerhaft verändern können (wahlweise systemweit oder benutzerspezifisch). Für systemweite Änderungen bearbeiten Sie <filename>/etc/zypp/zypper.conf</filename>. Für benutzerspezifische Änderungen bearbeiten Sie <filename>~/.zypper.conf</filename>. Falls <filename>~/.zypper.conf</filename> noch nicht vorhanden ist, können Sie <filename>/etc/zypp/zypper.conf</filename> als Schablone verwenden. Kopieren Sie diese Datei in <filename>~/.zypper.conf</filename> und passen Sie sie nach Ihren Anforderungen an. Weitere Informationen zu den verfügbaren Optionen finden Sie in den Kommentaren in der Datei.
  </para>
 </sect2>

 <sect2 id="sec-zypper-trouble">
  <title>Fehlersuche</title>
  <para>
   Falls Probleme beim Zugriff auf Pakete von konfigurierten Repositorys auftreten (beispielsweise kann Zypper ein bestimmtes Paket nicht finden, obwohl Sie wissen, dass sich dieses Paket in einem der Repositorys befindet), kann schon das Aktualisieren der Repositorys Abhilfe bringen:
  </para>
<screen>zypper refresh</screen>
  <para>
   Falls das nicht wirkt, probieren Sie Folgendes:
  </para>
<screen>zypper refresh -fdb</screen>
  <para>
   Damit wird eine vollständige Aktualisierung und ein kompletter Neuaufbau der Datenbank erzwungen, außerdem ein erzwungener Download von Roh-Metadaten.
  </para>
 </sect2>

 <sect2>
  <title>Zypper Rollback-Funktion im btrfs-Dateisystem</title>
  <para>
   Wenn in der Root-Partition das btrfs-Dateisystem verwendet wird und <command>snapper</command> installiert ist, ruft zypper automatisch <command>snapper</command> auf (über ein von <command>snapper</command> installiertes Skript), wenn Änderungen des Dateisystems übermittelt werden, so dass entsprechende Dateisystem-Snapshots erstellt werden. Diese Snapshots können verwendet werden, um alle durch zypper vorgenommenen Änderungen rückgängig zu machen. Weitere Informationen zu <command>snapper</command>finden Sie unter <command>man snapper</command>.
  </para>
  <para>
   zypper (und YaST) erstellen zurzeit nur Snapshots des Stamm-Dateisystems. Andere Subvolumes können nicht konfiguriert werden. Diese Funktion wird für das standardmäßige Dateisystem nicht unterstützt.
  </para>
 </sect2>

 
</sect1>
