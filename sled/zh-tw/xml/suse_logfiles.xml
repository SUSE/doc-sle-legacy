<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sect2 PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN"
"novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<sect2 xml:base="suse_logfiles.xml" id="sec-suse-log">
 <title>記錄檔：套件 logrotate</title><indexterm> <primary>記錄檔</primary></indexterm><indexterm><primary>logrotate </primary></indexterm>
 <para>
  某些系統服務 (<emphasis>精靈</emphasis>) 以及核心本身，會定期將系統狀態與特定事件記錄到記錄檔中。這樣，管理員可以定期檢查某個時間點的系統狀態、找出錯誤或有問題的功能，並用精確的方式來排除它們。這些記錄檔通常以 FHS 所指定的方式儲存於 <filename>/var/log</filename>，而且會日益增大。<systemitem>logrotate</systemitem> 套件有助於控制這些檔案增大的方式。
 </para>
 <para>
  使用檔案<indexterm><primary>組態檔</primary><secondary>logrotate.conf</secondary></indexterm> <filename>/etc/logrotate.conf</filename> 來設定 logrotate。尤其 <systemitem>include</systemitem> 規格主要是設定其他要讀取的檔案。產生記錄檔的程式會在 <filename>/etc/logrotate.d</filename> 中單獨安裝組態檔。例如，套件 <systemitem>apache2</systemitem> (<filename>/etc/logrotate.d/apache2</filename>) 與 <systemitem>syslogd</systemitem> (<filename>/etc/logrotate.d/syslog</filename>) 隨附的檔案。
 </para>
 <example id="dat-suse-logrotate-conf">
  <title>/etc/logrotate.conf 的範例</title>
<screen># see "man logrotate" for details
# rotate log files weekly
weekly

# keep 4 weeks worth of backlogs
rotate 4

# create new (empty) log files after rotating old ones
create

# uncomment this if you want your log files compressed
#compress

# RPM packages drop log rotation information into this directory
include /etc/logrotate.d

# no packages own lastlog or wtmp - we'll rotate them here
#/var/log/wtmp {
#    monthly
#    create 0664 root utmp
#    rotate 1
#}

# system-specific logs may be also be configured here.</screen>
 </example>
 <para>
  logrotate 是透過 cron 來控制，並且每日是經由 <filename>/etc/cron.daily/logrotate</filename> 來呼叫。
 </para>
 <important>
  <para>
   <indexterm><primary>權限</primary><secondary>檔案權限</secondary></indexterm>create<systemitem/> 選項會讀取 <filename>/etc/permissions*</filename> 中由管理員所做的所有設定。請確定個人的修改不會造成衝突。
  </para>
 </important>
</sect2>
