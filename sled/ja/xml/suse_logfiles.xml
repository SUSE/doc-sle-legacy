<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sect2 PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN"
"novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<sect2 xml:base="suse_logfiles.xml" id="sec-suse-log">
 <title>ログファイル:パッケージlogrotate</title><indexterm> <primary>ログファイル</primary></indexterm><indexterm><primary>logrotate </primary></indexterm>
 <para>
  カーネルそのものと一緒になって、定期的にシステムスのステータスおよび特定イベントをログファイルに記録するシステムサービス(<emphasis>デーモン</emphasis>)が数多くあります。これにより、管理者は、一定間隔でシステムのステータスを定期的にチェックし、エラーまたは障害のある機能を認識し、そのトラブルシューティングをピンポイントで実行できます。通常、これらのログファイルは、FHSで指定されるように<filename>/var/log</filename>内に格納され、毎日記録が追加されるためにサイズが増大します。logrotate<systemitem>パッケージを使用して、これらのファイルが増大するのを制御できます。</systemitem>
 </para>
 <para>
  <indexterm><primary>設定ファイル</primary><secondary>logrotate.conf</secondary></indexterm><filename>/etc/logrotate.conf</filename>ファイルを使用して、logrotateを設定します。特に、<systemitem>include</systemitem>には、最初に読み込む追加ファイルを設定します。ログファイルを生成しないプログラムは、個別の環境設定ファイルを<filename>/etc/logrotate.d</filename>にインストールします。たとえば、そのようなファイルは、出荷時には、<systemitem>apache2</systemitem>パッケージ (<filename>/etc/logrotate.d/apache2</filename>)および<systemitem>syslogd</systemitem>パッケージ (<filename>/etc/logrotate.d/syslog</filename>)に含まれています。
 </para>
 <example id="dat-suse-logrotate-conf">
  <title>/etc/logrotate.confの例</title>
<screen># see "man logrotate" for details
# rotate log files weekly
weekly

# keep 4 weeks worth of backlogs
rotate 4

# create new (empty) log files after rotating old ones
create

# uncomment this if you want your log files compressed
#compress

# RPM packages drop log rotation information into this directory
include /etc/logrotate.d

# no packages own lastlog or wtmp - we'll rotate them here
#/var/log/wtmp {
#    monthly
#    create 0664 root utmp
#    rotate 1
#}

# system-specific logs may be also be configured here.</screen>
 </example>
 <para>
  logrotateは、cronによって制御され、<filename>/etc/cron.daily/logrotate</filename>により毎日呼び出されます。
 </para>
 <important>
  <para>
   <indexterm><primary>パーミッション</primary><secondary>ファイルパーミッション</secondary></indexterm><systemitem>create</systemitem>オプションは、管理者によって<filename>/etc/permissions*</filename>内に作成されるすべての設定を読み取ります。個人的な変更によっていずれの競合も発生することがないようにしてください。
  </para>
 </important>
</sect2>
