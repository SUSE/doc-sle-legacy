<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sect1 PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN"
"novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<sect1 xml:base="zypper.xml" id="sec.zypper">
 <title>Usando o zypper</title><indexterm id="idx.zypper" class="startofrange"> <primary>zypper</primary> </indexterm> <indexterm> <primary>comandos</primary> <secondary>zypper</secondary> </indexterm> <indexterm> <primary>software</primary> <secondary>gerenciando</secondary> <tertiary>linha de comando</tertiary> </indexterm>

 <para>
  
  
  O zypper é um gerenciador de pacotes de linha de comando para instalar, atualizar e remover pacotes, bem como para gerenciar repositórios. <phrase os="sles;sled">A sintaxe do zypper é semelhante à do rug. Ao contrário do rug, o zypper não requer que o daemon zmd seja executado nos bastidores. Para obter mais informações sobre compatibilidade com o rug, consulte <command>man zypper</command>, seção <quote>COMPATIBILIDADE COM O RUG</quote>.</phrase> Ele é especialmente útil para realizar tarefas de gerenciamento remoto de software ou gerenciar software de scripts de shell.
 </para>

 <sect2 id="sec.zypper.usage">
  <title>Uso geral</title>
  <para>
   A sintaxe geral do zypper é:
  </para>
<screen>zypper <option>[global-options]</option><replaceable>command</replaceable><option>[command-options]</option><option>[arguments]</option> ...</screen>
  <para>
   Os componentes entre colchetes não são obrigatórios. A maneira mais simples de executar o zypper é digitar seu nome seguido de um comando. Por exemplo, para aplicar todos os patches necessários ao sistema, digite:
  </para>
<screen>zypper patch</screen>
  <para>
   Além disso, você pode escolher dentre uma ou mais opções globais, digitando-as antes do comando. Por exemplo, <option>--non-interactive</option> significa executar o comando sem perguntar nada (aplicando as respostas padrão automaticamente):
  </para>
<screen>zypper --non-interactive patch</screen>
  <para>
   Para usar as opções específicas de um comando em particular, digite-as logo após o comando. Por exemplo, <option>--auto-agree-with-licenses</option> significa aplicar todos os patches necessários ao sistema sem solicitar confirmação de nenhuma licença (eles serão aceitos automaticamente):
  </para>
<screen>zypper patch --auto-agree-with-licenses</screen>
  <para>
   Alguns comandos requerem um ou mais argumentos. Ao usar o comando install, por exemplo, é preciso especificar o(s) pacotes(s) a instalar:
  </para>
<screen>zypper install mplayer</screen>
  <para>
   Algumas opções também requerem um argumento. O comando a seguir lista todos os padrões conhecidos:
  </para>
<screen>zypper search -t pattern</screen>
  <para>
   Você pode combinar todos os anteriores. Por exemplo, o comando a seguir instala os pacotes <systemitem>mplayer</systemitem> e <systemitem>amarok</systemitem> do repositório <literal>factory</literal> durante o modo verboso:
  </para>
<screen>zypper -v install --from factory mplayer amarok</screen>
  <para>
   A opção <option>--from</option> trata de manter todos os repositórios habilitados (para resolução de dependências) enquanto solicita o pacote do repositório especificado.
  </para>
  <para>
   Quase todos os comandos zypper possuem uma opção <literal>dry-run</literal> que simula o comando indicado. Ela pode ser usada para fins de teste.
  </para>
<screen>zypper remove --dry-run MozillaFirefox</screen>
  <para>
   O Zypper suporta a opção global <option>--userdata <replaceable>string</replaceable></option> para fins de identificação da transação. A string definida pelo usuário é passada para os registros de histórico do Zypper em  <filename>/var/log/zypp/history</filename> e no Snapper.
  </para>
<screen>zypper --userdata <replaceable>string</replaceable> patch</screen>
 </sect2>

 <sect2 id="sec.zypper.softman">
  <title>Instalando e removendo software com o zypper</title>
  <para>
   Para instalar ou remover pacotes, use os seguintes comandos:
  </para>
<screen>zypper install <replaceable>package_name</replaceable>
zypper remove <replaceable>package_name</replaceable></screen>
  <para>
   O zypper conhece várias maneiras de tratar pacotes para os comandos install e remove:
  </para>
  <variablelist>
   <varlistentry>
    <term>pelo nome exato do pacote (e número da versão)</term>
    <listitem>
<screen>zypper install MozillaFirefox</screen>
     <para>
      ou
     </para>
<screen>zypper install MozillaFirefox-3.5.3</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>pelo álias do repositório e pelo nome do pacote</term>
    <listitem>
<screen>zypper install mozilla:MozillaFirefox</screen>
     <para>
      onde <literal>mozilla</literal> é o álias do repositório a partir do qual instalar.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>pelo nome do pacote usando curingas</term>
    <listitem>
     <para>
      O comando a seguir instalará todos os pacotes cujos nomes começam com <quote>Moz</quote>. Use-o com cuidado, principalmente ao remover pacotes.
     </para>
<screen>zypper install 'Moz*'</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>por recurso</term>
    <listitem>
     <para>
      Por exemplo, para instalar um módulo perl sem saber o nome do pacote, os recursos podem ser convenientes:
     </para>
<screen>zypper install 'perl(Time::ParseDate)'</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>por recurso e/ou arquitetura e/ou versão</term>
    <listitem>
     <para>
      Juntamente com um recurso, você pode especificar uma arquitetura (como <literal>i586</literal> ou <literal>x86_64</literal>) e/ou uma versão. A versão deve ser precedida por um operador: <literal>&lt;</literal> (menor que), <literal>&lt;=</literal> (menor que ou igual), <literal>=</literal> (igual), <literal>&gt;=</literal> (maior que ou igual), <literal>&gt;</literal> (maior que).
     </para>
<screen>zypper install 'firefox.x86_64'
zypper install 'firefox&gt;=3.5.3'
zypper install 'firefox.x86_64&gt;=3.5.3'</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>por caminho para o arquivo RPM</term>
    <listitem>
     <para>
      Você também pode especificar um local ou caminho remoto para um pacote:
     </para>
<screen>zypper install /tmp/install/MozillaFirefox.rpm
zypper install http://download.opensuse.org/repositories/mozilla/SUSE_Factory/x86_64/MozillaFirefox-3.5.3-1.3.x86_64.rpm</screen>
    </listitem>
   </varlistentry>
  </variablelist>
  <para>
   Para instalar e remover pacotes simultaneamente, use os modificadores <literal>+/-</literal>. Para instalar o <systemitem>emacs</systemitem> e remover o <systemitem>vim</systemitem> simultaneamente, use:
  </para>
<screen>zypper install emacs -vim
</screen>
  <para>
   Para remover o <systemitem>emacs</systemitem> e instalar o <systemitem>vim</systemitem> simultaneamente, use:
  </para>
<screen>zypper remove emacs +vim
</screen>
  <para>
   Para impedir que o nome do pacote iniciado por <literal>-</literal> seja interpretado como uma opção de comando, use-o sempre como segundo argumento. Se isso não for possível, preceda-o com <literal>--</literal>:
  </para>
<screen>zypper install -emacs +vim       # Wrong
zypper install vim -emacs        # Correct
zypper install -- -emacs +vim    # same as above
zypper remove emacs +vim         # same as above</screen>
  <para>
   Para (com determinado pacote) remover automaticamente qualquer pacote desnecessário após remover o pacote especificado, use a opção <option>--clean-deps</option>:
  </para>
<screen>rm <replaceable>package_name</replaceable> --clean-deps</screen>
  <para>
   Por padrão, o zypper solicita uma confirmação antes de instalar ou remover um pacote selecionado, ou quando ocorre um problema. Você pode anular esse comportamento usando a opção <option>--non-interactive</option>. Essa opção deve ser inserida antes do comando real (<command>install</command>, <command>remove</command> e <command>patch</command>), conforme mostrado a seguir:
  </para>
<screen>zypper <option>--non-interactive</option> install <replaceable>package_name</replaceable></screen>
  <para>
   Essa opção permite o uso do zypper em scripts e tarefas cron.
  </para>

  <warning>
   <title>não remova pacotes de sistema obrigatórios</title>
   <para>
    Não remova pacotes como <systemitem>glibc</systemitem>, <systemitem>zypper</systemitem>, <systemitem>kernel</systemitem> ou similares. Esses pacotes são obrigatórios para o sistema e, se removidos, podem fazer o sistema ficar instável ou parar de funcionar de vez.
   </para>
  </warning>
  <sect3 id="sec.zypper.softman.sources">
   <title>Instalando ou fazendo download dos pacotes de origem</title>
   <para>
    <indexterm> <primary>software</primary> <secondary>instalando</secondary> <tertiary>pacote de origem</tertiary> </indexterm> Se desejar instalar o pacote de origem de um pacote, use:
   </para>
<screen>zypper source-install <replaceable>package_name</replaceable></screen>
   <para>
    Esse comando também instalará as dependências de compilação do pacote especificado. Se não quiser isso, adicione o switch <literal>-D</literal>. Para instalar apenas as dependências de compilação, use <literal>-d</literal>.
   </para>
<screen>zypper source-install -D <replaceable>package_name</replaceable> # source package only
zypper source-install -d <replaceable>package_name</replaceable> # build dependencies only</screen>
   <para>
    Naturalmente isso só funcionará se o repositório com os pacotes de origem estiver habilitado na sua lista de repositórios (ele é adicionado por padrão, mas não habilitado). Consulte a <xref linkend="sec.zypper.instrepo"/> para obter os detalhes sobre o gerenciamento de repositórios.
   </para>
   <para>
    Uma lista de todos os pacotes de origem disponíveis nos seus repositórios pode ser obtida com:
   </para>
<screen>zypper search -t srcpackage</screen>
   <para>
    É possível também fazer download dos pacotes de origem para todos os pacotes instalados em um diretório local. Para fazer download dos pacotes de origem, use:
   </para>
<screen>zypper source-download</screen>
   <para>
    O diretório de download padrão é <filename>/var/cache/zypper/source-download</filename>. Você pode mudá-lo usando a opção <option>--directory</option>. Para mostrar apenas os pacotes ausentes ou incorretos sem fazer download nem apagar nada, use a opção <option>--status</option>. Para apagar pacotes de origem incorretos, use a opção <option>--delete</option>. Para desabilitar a exclusão, use a opção <option>--no-delete</option>.
   </para>
  </sect3>
  <sect3 id="sec.zypper.softman.util">
   <title>Utilitários</title>
   <para>
    Para verificar se todas as dependências ainda são atendidas e para reparar dependências ausentes, use:
   </para>
<screen>zypper verify</screen>
   <para>
    Além das dependências que precisam ser atendidas, alguns pacotes <quote>recomendam</quote> outros pacotes. Esses pacotes recomendados são instalados apenas quando estão realmente disponíveis e são instaláveis. Caso os pacotes recomendados fiquem disponíveis após a instalação do pacote que os recomendou (adicionando outros pacotes ou hardware), use o seguinte comando:
   </para>
<screen>zypper install-new-recommends</screen>
   <para>
    Esse comando é muito útil após conectar uma webcam ou um dispositivo WLAN. Ele instala drivers para o dispositivo e software relacionado, se disponíveis. Os drivers e o software relacionado serão instaláveis se determinadas dependências de hardware forem atendidas.
   </para>
  </sect3>
 </sect2>

 <sect2 id="sec.zypper.softup">
  <title>Atualizando software com o zypper</title>
  <para>
   Existem três maneiras diferentes de atualizar o software usando o zypper: instalando patches, instalando uma versão nova de um pacote ou atualizando a distribuição inteira. Para executar a última maneira, usa-se o comando <command>zypper dist-upgrade</command>, abordado na <xref linkend="sec.update.zypper"/>.
  </para>
  <sect3 id="sec.zypper.softup.patch">
   <title>Instalando patches</title>
   <para>
    Para instalar todos os patches lançados oficialmente que se aplicam ao seu sistema, execute:
   </para>
<screen>zypper patch</screen>
   <para>
    Nesse caso, todos os patches disponíveis em seus repositórios são verificados quanto à sua relevância e instalados, se necessário. <phrase os="sles;sled">Após o registro de sua instalação do <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase>, um repositório de atualização oficial contendo os patches será adicionado ao seu sistema.</phrase> O comando acima é tudo o que você deve digitar para aplicá-los quando necessário.
   </para>
   <para>
    O zypper conhece três comandos diferentes para consultar a disponibilidade dos patches:
   </para>
   <variablelist>
    <varlistentry>
     <term><command>zypper patch-check</command>
     </term>
     <listitem>
      <para>
       Lista o número de patches necessários (patches que se aplicam ao seu sistema e ainda não estão instalados)
      </para>
<screen>~ # zypper patch-check
Loading repository data...
Reading installed packages...
5 patches needed (1 security patch)</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>zypper list-patches</command>
     </term>
     <listitem>
      <para>
       Lista todos os patches necessários (patches que se aplicam ao seu sistema e ainda não estão instalados)
      </para>
<screen><?dbsuse-fo font-size="0.70em"?>

~ # zypper list-patches
Loading repository data...
Reading installed packages...
 
Repository                          | Name      | Version | Category | Status
------------------------------------+-----------+---------+----------+-------
Updates for openSUSE 11.3 11.3-1.82 | lxsession | 2776    | security | needed
</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>zypper patches</command>
     </term>
     <listitem>
      <para>
       Lista todos os patches disponíveis para o <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase>, independentemente de já estarem instalados ou de se aplicarem à sua instalação.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    Também é possível listar e instalar todos os patches relevantes a problemas específicos. Para listar patches específicos, use o comando <command>zypper list-patches</command> com as seguintes opções:
   </para>
   <variablelist>
    <varlistentry>
     <term><option>--bugzilla[=<replaceable>número</replaceable>] </option>
     </term>
     <listitem>
      <para>
       Lista todos os patches necessários para problemas do Bugzilla. Opcionalmente, você pode inserir um número de bug para listar apenas os patches para esse bug específico.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><option>--cve[=<replaceable>número</replaceable>]</option>
     </term>
     <listitem>
      <para>
       Lista todos os patches necessários para problemas do CVE (Common Vulnerabilities and Exposures) ou apenas os patches correspondentes a determinado número de CVE, se especificado. Por padrão, apenas os patches não aplicados aparecem na lista. Use <option>-a</option> para listar tudo.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    Para instalar um patch para um problema específico do Bugzilla ou do CVE, use os seguintes comandos:
   </para>
<screen>zypper patch --bugzilla=<replaceable>number</replaceable></screen>
   <para>
    ou
   </para>
<screen>zypper patch --cve=<replaceable>number</replaceable></screen>
   <para>
    Por exemplo, para instalar um patch de segurança com o número do CVE <literal>CVE-2010-2713</literal>, execute:
   </para>
<screen>zypper patch --cve=CVE-2010-2713</screen>
  </sect3>
  <sect3 id="sec.zypper.softup.update">
   <title>Instalando atualizações</title>
   <para>
    Se um repositório contém apenas pacotes novos, mas não fornece patches, <command>zypper patch</command> não surte nenhum efeito. Para atualizar todos os pacotes instalados com versões disponíveis mais novas, use:
   </para>
<screen>zypper update</screen>
   <para>
    Para atualizar pacotes individuais, especifique o pacote com o comando update ou install:
   </para>
<screen>zypper update <replaceable>package_name</replaceable>
zypper install <replaceable>package_name</replaceable></screen>
   <para>
    Uma lista de todos os novos pacotes instaláveis pode ser obtida pelo comando:
   </para>
<screen>zypper list-updates</screen>
   <para>
    Observe que esse comando apenas lista os pacotes correspondentes aos seguintes critérios:
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      têm os mesmo fornecedor que o pacote já instalado,
     </para>
    </listitem>
    <listitem>
     <para>
      são fornecidos por repositórios com pelo menos a mesma prioridade que o pacote já instalado,
     </para>
    </listitem>
    <listitem>
     <para>
      são instaláveis (todas as dependências foram atendidas).
     </para>
    </listitem>
   </itemizedlist>
   <para>
    Uma lista de <emphasis>todos</emphasis> os novos pacotes disponíveis (sejam instaláveis ou não) pode ser obtida com:
   </para>
<screen>zypper list-updates --all</screen>
   <para>
    Para descobrir o motivo pelo qual um novo pacote não pode ser instalado, basta usar o comando <command>zypper install</command> ou <command>zypper update</command> conforme descrito acima.
   </para>
  </sect3>
  <sect3 id="sec.zypper.softup.upgrade">
   <title>Fazendo upgrade para uma nova versão de produto</title>
   <para>
    Para fazer upgrade da instalação para uma nova versão do produto <phrase os="sles;sled">(por exemplo, do SUSE Linux Enterprise Server 11 para o SUSE Linux Enterprise Server 11 SP1</phrase> com facilidade, ajuste primeiro os repositórios para corresponder aos repositórios atuais do <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase>. Para obter informações detalhadas, consulte a <xref linkend="sec.zypper.instrepo"/>. Em seguida, use o comando <command>zypper dist-upgrade</command> com os repositórios necessários. Esse comando garante que todos os pacotes serão instalados a partir dos repositórios atualmente habilitados. Para obter instruções detalhadas, consulte <xref linkend="sec.update.zypper"/>.
   </para>
   <para>
    Para restringir o upgrade de distribuição aos pacotes de determinado repositório e, ao mesmo tempo, considerar os outros repositórios para atender às dependências, use a opção <option>--from</option> e especifique o repositório por seu álias, número ou URI.
   </para>
   <note>
    <title>diferenças entre <command>zypper update</command> e <command>zypper dist-upgrade</command></title>
    <para>
     Escolha <command>zypper update</command> para atualizar os pacotes com as versões mais recentes disponíveis para a sua versão do produto e manter a integridade do sistema. <command>zypper update</command> obedecerá às seguintes regras:
    </para>
    <simplelist>
     <member>nenhuma mudança de fornecedor</member> <member>nenhuma mudança de arquitetura</member> <member>nenhum downgrade</member> <member>manter pacotes instalados</member>
    </simplelist>
    <para>
     Ao executar <command>zypper dist-upgrade</command>, todos os pacotes serão instalados dos repositórios habilitados. Como essa regra tem uso obrigatório assegurado, os pacotes podem mudar de fornecedor ou arquitetura ou até sofrer downgrade. Todos os pacotes com dependências não atendidas após o upgrade serão desinstalados.
    </para>
   </note>
  </sect3>
 </sect2>

 <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="zypper_upgrade.xml" parse="xml"/>

 <sect2 id="sec.zypper.instrepo">
  <title>Gerenciando repositórios com o zypper</title>
   
  <para>
   Todos os comandos de instalação ou patch do zipper dependem de uma lista de repositórios conhecidos. Para listar todos os repositórios conhecidos para o sistema, use o comando:
  </para>
<screen>zypper repos</screen>
  <para>
   O resultado parecerá com o seguinte:
  </para>
  <example id="ex.zypper.repos">
   <title>Zypper: lista de repositórios conhecidos</title>
<screen os="sles;sled"><?dbsuse-fo font-size="0.80em"
?>


# | Alias                             | Name                              | Enabled | Refresh
--+-----------------------------------+-----------------------------------+---------+--------
1 | SUSE-Linux-Enterprise-Server 11-0 | SUSE-Linux-Enterprise-Server 11-0 | Yes     | No
2 | SLES-11-Updates                   | SLES 11 Online Updates            | Yes     | Yes
3 | broadcomdrv                       | Broadcom Drivers                  | Yes     | No      </screen>

  </example>
  <para>
   Na especificação de repositórios em vários comandos, é possível usar um álias, URI ou número de repositório a partir da saída do comando <command>zypper repos</command>. O álias do repositório é uma versão abreviada do nome do repositório para uso em comandos de gerenciamento de repositórios. Observe que os números dos repositórios podem ser mudados após modificar a lista de repositórios. O álias nunca mudará sozinho.
  </para>
  <para>
   Por padrão; detalhes, como o URI ou a prioridade do repositório, não são exibidos. Use o seguinte comando para listar todos os detalhes:
  </para>
<screen>zypper repos -d</screen>
  <para>
   Às vezes, a lista inclui um grande número de repositórios que não estão habilitados, o que pode ser confuso. Para mostrar apenas os repositórios habilitados, use o seguinte comando:
  </para>
<screen>zypper repos -E</screen>
  <sect3 id="sec.zypper.instrepo.add">
   <title>Adicionando repositórios</title>
    <warning>
     <title>Possível comprometimento do sistema ao adicionar repositórios com o Zypper</title>
     <para>Por padrão, as sínteses e assinaturas de pacotes dos repositórios fornecidos pela SUSE são verificadas para garantir sua origem e qualidade. A <quote>Verificação GPG</quote> está habilitada no arquivo de configuração de repositório no servidor que fornece o repositório. </para>
     <para>Ao adicionar um repositório com o comando <command>zypper ar</command>, o download desse arquivo de configuração é feito em <filename>/etc/zypp/repos.d</filename>. O Zypper também informa o usuário sobre a opção Verificação GPG:</para>
     <screen>GPG check: Yes</screen>
     <para>Verifique sempre se a saída da verificação GPG está definida como <quote>Sim</quote>. Se estiver definida como <quote>Não</quote>, o sistema poderá estar comprometido por downgrades de pacotes que introduzem novamente vulnerabilidades já corrigidas, por exemplo. Não é recomendado confiar em repositórios que tenham essa opção definida como <quote>Não</quote>. Caso você saiba que a verificação GPG foi desabilitada por engano, habilite a opção novamente adicionando a seguinte linha ao respectivo arquivo de configuração de repositório em <filename>/etc/zypp/repos.d</filename>:</para>
     <screen>gpgcheck=1</screen>
   </warning>    
   <para>
    Para adicionar um repositório, execute
   </para>
<screen>zypper addrepo <replaceable>URI</replaceable><replaceable>alias</replaceable></screen>
   <para>
    O <replaceable>URI</replaceable> pode ser um repositório da Internet, um recurso de rede, um diretório ou um CD ou DVD (consulte <ulink url="http://en.opensuse.org/openSUSE:Libzypp_URIs"/> para obter os detalhes). O <replaceable>álias</replaceable> é um identificador abreviado e exclusivo do repositório. Pode ser escolhido livremente, com a única condição de que seja exclusivo. O zypper emitirá um aviso se você especificar um álias que já está em uso.
   </para>
  </sect3>
  <sect3 id="sec.zypper.instrepo.rm">
   <title>Removendo repositórios</title>
   <para>
    Se você deseja remover um repositório da lista, use o comando <command>zypper removerepo</command> junto com o álias ou o número do repositório que você deseja apagar. Por exemplo, para remover o repositório listado como a terceira entrada no <xref linkend="ex.zypper.repos"/>, use o seguinte comando:
   </para>
<screen>zypper removerepo 3</screen>
  </sect3>
  <sect3 id="sec.zypper.instrepo.mofify">
   <title>Modificando repositórios</title>
   <para>
    Habilite ou desabilite os repositórios com <command>zypper modifyrepo</command>. Você também pode alterar as propriedades do repositório (por exemplo, atualizar o comportamento, o nome ou a prioridade) com esse comando. O comando a seguir habilita o repositório chamado <literal>updates</literal>, ativa a atualização automática e define sua prioridade como 20:
   </para>
<screen>zypper modifyrepo -er -p 20 'updates'</screen>
   <para>
    A modificação de repositórios não se limita a um único repositório, você também pode operar em grupos:
   </para>
   <simplelist>
    <member><option>-a</option>: todos os repositórios</member> <member><option>-l</option>: repositórios locais</member> <member><option>-t</option>: repositórios remotos</member> <member><option>-m <replaceable>TIPO</replaceable></option>: repositórios de um tipo específico (em que <replaceable>TIPO</replaceable> pode ser um dos seguintes: <literal>http</literal>, <literal>https</literal>, <literal>ftp</literal>, <literal>cd</literal>, <literal>dvd</literal>, <literal>dir</literal>, <literal>file</literal>, <literal>cifs</literal>, <literal>smb</literal>, <literal>nfs</literal>, <literal>hd</literal>, <literal>iso</literal>) </member>
   </simplelist>
   <para>
    Para renomear o álias de um repositório, use o comando <literal>renamerepo</literal>. O exemplo a seguir muda o álias <literal>Mozilla Firefox</literal> para somente <literal>firefox</literal>:
   </para>
<screen>zypper renamerepo 'Mozilla Firefox' firefox</screen>
  </sect3>
 </sect2>

 <sect2 id="sec.zypper.query">
  <title>Consultando repositórios e pacotes com o zypper</title>
  <para>
   O zypper oferece vários métodos de consulta a repositórios ou pacotes. Para obter as listas de todos os produtos, padrões, pacotes ou patches disponíveis, use os seguintes comandos:
  </para>
<screen>zypper products
zypper patterns
zypper packages
zypper patches</screen>
  <para>
   Para consultar todos os repositórios para determinados pacotes, use <literal>search</literal>. Ela funciona em nomes de pacotes ou, opcionalmente, em resumos e descrições de pacotes. Usando os curingas <literal>*</literal> e <literal>?</literal>com o termo da pesquisa é permitido. Por padrão, a pesquisa não diferencia maiúsculas de minúsculas.
  </para>
<screen>zypper search firefox       # simple search for "firefox"
zypper search "*fire*"      # using wild cards
zypper search -d fire       # also search in package descriptions and summaries
zypper search -u firefox    # only display packages not already installed</screen>
  <para>
   Para procurar pacotes que oferecem um recurso específico, use o comando <literal>what-provides</literal>. Por exemplo, para saber qual pacote fornece o módulo perl <literal>SVN::Core</literal>, use o seguinte comando:
  </para>
<screen>zypper what-provides 'perl(SVN::Core)'</screen>
  <para>
   Para consultar pacotes únicos, use <command>info</command> com um nome exato de pacote como argumento. Ele exibe informações detalhadas sobre um pacote. Para mostrar também o que é exigido/recomendado pelo pacote, use as opções <option>--requires</option> e <option>--recommends</option>:
  </para>
<screen>zypper info --requires MozillaFirefox</screen>
  <para>
   O <literal>what-provides <replaceable>pacote</replaceable></literal> é semelhante a <command>rpm -q --whatprovides <replaceable>pacote</replaceable></command>, mas o RPM só pode consultar o banco de dados RPM (que é o banco de dados de todos os pacotes instalados). O zypper, por outro lado, o informará sobre fornecedores do recurso a partir de qualquer repositório, não apenas aqueles que estão instalados.
  </para><indexterm class="endofrange" startref="idx.zypper"/>
 </sect2>

 <sect2 id="sec.zypper.configure">
  <title>Configurando o Zypper</title>
  <para>
   O Zypper agora vem com um arquivo de configuração que permite mudar permanentemente o comportamento do Zypper (de todo o sistema ou de um usuário específico). Para mudanças de todo o sistema, edite <filename>/etc/zypp/zypper.conf</filename>. Para mudanças específicas do usuário, edite <filename>~/.zypper.conf</filename>. Se <filename>~/.zypper.conf</filename> ainda não existir, use <filename>/etc/zypp/zypper.conf</filename> como modelo: copie-o para <filename>~/.zypper.conf</filename> e ajuste-o como preferir. Consulte os comentários no arquivo para obter ajuda sobre as opções disponíveis.
  </para>
 </sect2>

 <sect2 id="sec.zypper.trouble">
  <title>Solucionando problemas</title>
  <para>
   Caso tenha problemas para acessar os pacotes dos repositórios configurados (por exemplo, o Zypper não encontra determinado pacote apesar de você saber que ele existe em um dos repositórios), poderá ajudar se você atualizar os repositórios com:
  </para>
<screen>zypper refresh</screen>
  <para>
   Se isso não ajudar, tente
  </para>
<screen>zypper refresh -fdb</screen>
  <para>
   Isso força uma atualização completa e a reconstrução do banco de dados, incluindo um download forçado dos metadados iniciais.
  </para>
 </sect2>

 <sect2>
  <title>Recurso de rollback do Zypper no sistema de arquivos btrfs</title>
  <para>
   Se o sistema de arquivos btrfs for usado na partição raiz e o <command>snapper</command> estiver instalado, o Zypper chamará automaticamente o <command>snapper</command> (usando o script instalado pelo <command>snapper</command>) ao confirmar as mudanças no sistema de arquivos para criar os instantâneos apropriados do sistema de arquivos. É possível usar esses instantâneos para reverter as mudanças feitas pelo zypper. Para obter mais informações sobre o <command>snapper</command>, consulte <command>man snapper</command>.
  </para>
  <para>
   Atualmente, o Zypper (e o YaST) só cria instantâneos do sistema de arquivos raiz. Outros subvolumes não podem ser configurados. Esse recurso não é suportado no sistema de arquivos padrão.
  </para>
 </sect2>

 
</sect1>
