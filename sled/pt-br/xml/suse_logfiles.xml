<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook51-profile.xsl"
    type="text/xml"
    title="Profiling step"
?>
<!DOCTYPE sect2
[
   <!ENTITY % entities SYSTEM "entity-decl.ent">
   %entities;
]>


<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<section xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.1" xml:base="suse_logfiles.xml" xml:id="sec-suse-log">
 <title>Arquivos de registro: pacote logrotate</title><indexterm> <primary>arquivos de registro</primary> </indexterm> <indexterm> <primary>logrotate </primary></indexterm>
 <para>
  Existem vários serviços de sistema (<emphasis>daemons</emphasis>) que, junto com o próprio kernel, gravam regularmente o status do sistema e eventos específicos em arquivos de registro. Dessa maneira, o administrador pode verificar regularmente o status do sistema em um determinado momento, reconhecer erros ou funções defeituosas e solucioná-los com total precisão. Esses arquivos de registro são normalmente armazenados em <filename>/var/log</filename>, como especificado pelo FHS, e crescem diariamente. O pacote <systemitem>logrotate</systemitem> ajuda a controlar o crescimento desses arquivos.
 </para>
 <para>
  Configure o logrotate com o arquivo <indexterm><primary>arquivos de configuração</primary> <secondary>logrotate.conf</secondary> </indexterm> <filename>/etc/logrotate.conf</filename>. Em particular, a especificação<systemitem>include</systemitem> configura principalmente os arquivos adicionais a serem lidos. Programas que produzem arquivos de registro instalam arquivos de configuração individuais em <filename>/etc/logrotate.d</filename>. Por exemplo, esses arquivos vêm com os pacotes <systemitem>apache2</systemitem> (<filename>/etc/logrotate.d/apache2</filename>) e <systemitem>syslogd</systemitem> (<filename>/etc/logrotate.d/syslog</filename>).
 </para>
 <example xml:id="dat-suse-logrotate-conf">
  <title>Exemplo para /etc/logrotate.conf</title>
<screen># see "man logrotate" for details
# rotate log files weekly
weekly

# keep 4 weeks worth of backlogs
rotate 4

# create new (empty) log files after rotating old ones
create

# uncomment this if you want your log files compressed
#compress

# RPM packages drop log rotation information into this directory
include /etc/logrotate.d

# no packages own lastlog or wtmp - we'll rotate them here
#/var/log/wtmp {
#    monthly
#    create 0664 root utmp
#    rotate 1
#}

# system-specific logs may be also be configured here.</screen>
 </example>
 <para>
  logrotate é controlado pelo cron e é chamado diariamente por <filename>/etc/cron.daily/logrotate</filename>.
 </para>
 <important>
  <para>
   <indexterm> <primary>permissões</primary><secondary>permissões de arquivo</secondary></indexterm> A opção <systemitem>create</systemitem> lê todas as configurações feitas pelo administrador em <filename>/etc/permissions*</filename>. Certifique-se de que não haja conflitos devido a modificações pessoais.
  </para>
 </important>
</section>
