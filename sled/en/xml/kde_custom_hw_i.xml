<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook51-profile.xsl"
    type="text/xml"
    title="Profiling step"
?>
<!DOCTYPE sect1
[
   <!ENTITY % entities SYSTEM "entity-decl.ent">
   %entities;
]>


<section xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.1" xml:id="sec-kde-cust-hw">
 <title>Configuring Hardware Components</title>

 <para>
  Most of your hardware components (like mouse, keyboard and display) are
  configured automatically. In case you need to change any settings, KDE
  provides a set of options and tools, some of which are integrated into the
  Personal Settings (like options for mouse and keyboard behavior or the
  display options). For adjusting your display configuration on the fly, use
  &krandr;, the graphical front-end for the RandR (Resize and Rotate)
  extension of the X server.
 </para>

 <section xml:id="sec-kde-cust-hw-keymouse">
  <title>Keyboard and Mouse Settings</title>
  <para>
   In the <guimenu>Keyboard &amp; Mouse</guimenu> category of the Personal
   Settings, you can define options like what happens if you press and hold
   down a key (keyboard repeat), or what to do with the NumLock toggle key.
   You can also change keyboard shortcuts as described in
   <xref linkend="pro-kde-cust-hw-shortcuts"/> or alter your mouse settings
   (for example, for left-handed or right-handed use as described in
   <xref linkend="pro-kde-cust-hw-mouse"/>). Apart from that, you can adjust
   or add keyboard layouts in the <guimenu>Regional &amp; Language</guimenu>
   section of the Personal Settings.
  </para>
  <procedure xml:id="pro-kde-cust-hw-kbdlayout">
   <title>Adjusting and Adding Keyboard Layouts</title><indexterm>
   <primary>KDE</primary>
   <secondary>configuring</secondary>
   <tertiary>keyboard, layouts</tertiary></indexterm>
   <step>
    <para>
     To adjust or add keyboard layouts, open the Personal Settings and
     select <menuchoice> <guimenu>Regional &amp; Language</guimenu>
     <guimenu>Keyboard Layout</guimenu> </menuchoice>.
    </para>
   </step>
   <step>
    <para>
     Activate <guimenu>Enable keyboard layouts</guimenu> at the top.
    </para>
   </step>
   <step>
    <para>
     If you have a special <guimenu>Keyboard Model</guimenu>, select the
     appropriate model from the list, otherwise just keep the default.
    </para>
   </step>
   <step>
    <para>
     If you often need to enter texts in various languages, you may want to
     add different language layouts for your keyboard. To do so, select a
     layout in the list of <guimenu>Available layouts</guimenu> and click
     the right arrow button to transfer it to the list of <guimenu>Active
     layouts</guimenu>.
    </para>
    <informalfigure>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="kde_kcontrol_keylayout.png" width="75%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="kde_kcontrol_keylayout.png" width="75%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </informalfigure>
   </step>
   <step>
    <para>
     If you added several layouts, you can change the sorting order with the
     help of the up and down arrow buttons.
    </para>
   </step>
   <step>
    <para>
     Use the <guimenu>Switching Options</guimenu> tab to adjust the options
     for switching between the keyboard layouts. For example, you can define
     keyboard shortcuts for switching.
    </para>
   </step>
   <step>
    <para>
     For more information, click <guimenu>Help</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Confirm your changes with <guimenu>Apply</guimenu>.
    </para>
   </step>
  </procedure>
  <para>
   If you added keyboard layout, you can change between different keyboard
   layouts by clicking the country flag in the panel or by using the
   relevant keyboard shortcut.
  </para>
  <procedure xml:id="pro-kde-cust-hw-shortcuts">
   <title>Modifying KDE Keyboard Shortcuts</title>
   <para>
    KDE comes with a set of predefined keyboard shortcuts. You can easily
    create more keyboard shortcuts or change existing shortcuts (for
    example, if they conflict with other application-specific shortcuts).
   </para><indexterm>
   <primary>KDE</primary>
   <secondary>configuring</secondary>
   <tertiary>keyboard shortcuts</tertiary></indexterm>
   <step>
    <para>
     Open the Personal Settings and select <guimenu>Keyboard &amp;
     Mouse</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Click either <guimenu>Standard Keyboard Shortcuts</guimenu> or
     <guimenu>Global Keyboard Shortcuts</guimenu>. In the <guimenu>Global
     Keyboard Shortcuts</guimenu> category, you can define shortcuts for a
     number of KDE components like Plasma or the window manager KWin.
    </para>
    <para>
     For example, to change the shortcuts for switching between the virtual
     desktops, select the <guimenu>KWin</guimenu> entry from the drop-down
     list. To change the shortcuts for locking the screen or logging out,
     select the <guimenu>Run Command Interface</guimenu> entry.
    </para>
    <informalfigure>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="kde_kcontrol_shortcut.png" width="75%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="kde_kcontrol_shortcut.png" width="75%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </informalfigure>
   </step>
   <step>
    <para>
     Browse through the list of shortcuts for the selected entry. To filter
     for certain keywords, enter a search string in the search field above.
    </para>
   </step>
   <step>
    <para>
     To change or add a shortcut, select the relevant list entry and in the
     dialog that opens, select <guimenu>Custom</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Click the wrench icon to switch to the input mode.
    </para>
   </step>
   <step>
    <para>
     Press the desired key or key combination. If this shortcut cannot be
     accepted or in case of conflict with another existing shortcut, a
     notification shows. If your input was successful, the new or modified
     shortcut appears in the list.
    </para>
   </step>
   <step>
    <para>
     If you want to switch back to the default keyboard shortcut for the
     selected action, just click the entry again and select
     <guimenu>Default</guimenu>.
    </para>
   </step>
   <step>
    <para>
     To save the modified settings, click <guimenu>Apply</guimenu>. To reset
     all shortcuts to the default values, click <guimenu>Defaults</guimenu>
     then <guimenu>Apply</guimenu>.
    </para>
   </step>
  </procedure>
  <procedure xml:id="pro-kde-cust-hw-mouse">
   <title>Adjusting the Mouse Settings</title><indexterm>
   <primary>KDE</primary>
   <secondary>configuring</secondary>
   <tertiary>settings, mouse</tertiary></indexterm>
   <step>
    <para>
     Open the Personal Settings and select <menuchoice><guimenu>Keyboard
     &amp; Mouse</guimenu><guimenu>Mouse</guimenu></menuchoice>.
    </para>
    <informalfigure>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="kde_kcontrol_mouse.png" width="75%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="kde_kcontrol_mouse.png" width="75%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </informalfigure>
   </step>
   <step>
    <para>
     To switch between left-handed or right-handed use, select the
     corresponding options in the <guimenu>Button Order</guimenu> group.
    </para>
   </step>
   <step>
    <para>
     To switch to double-clicks to open files and folders, select the
     corresponding option in the <guimenu>Icons</guimenu> group.
    </para>
   </step>
   <step>
    <para>
     To change the mouse pointer appearance, switch to the <guimenu>Cursor
     Theme</guimenu> tab and select a different cursor theme.
    </para>
   </step>
   <step>
    <para>
     To change the default values of double-click intervals or the distance
     that the pointer moves over the screen on movement of the mouse, adjust
     the settings on the <guimenu>Advanced</guimenu> tab.
    </para>
   </step>
   <step>
    <para>
     Click <guimenu>Apply</guimenu> to apply the changes and close the
     configuration dialog.
    </para>
   </step>
  </procedure>
 </section>

 <section xml:id="sec-kde-cust-hw-display">
  <title>Monitor Settings</title>
  <para>
   Monitors attached to your machine are detected automatically during
   installation (or, if you plug them in after the installation, they are
   detected during the next start of the X server). Configure them with the
   tools your desktop environment (KDE or GNOME) provides. To trigger
   detection of new monitors during a running session, either use the
   <keycap>Fn-Fx</keycap> keys or the RandR desktop tools, &krandr; or
   gnome-display-properties.
  </para>
  <para>
   If you want to set up multiple monitors for dual-head graphics cards, you
   can choose between different modes.
  </para>
<!--sources:
   http://wiki.unixboard.de/index.php/HowTo:DualHead
   http://forums.opensuse.org/hardware/416383-dual-head-xinerama-mode-graphics-card-recommendations-2.html#post2000402
   http://www.realtimesoft.com/multimon/faq.asp
  -->
  <para>
   Currently, the following modes are generally supported:
  </para>
  <variablelist>
<!-- <varlistentry>
    <term>Separate X Screens</term>
    <listitem>
     <para>
      Shows a separate screen on each display. You can use 3D acceleration
      and rotate each monitor separately but you cannot move application
      windows between the screens.
     </para>
    </listitem>
   </varlistentry>-->
   <varlistentry>
    <term>Clone Mode </term>
    <listitem>
     <para>
      In this mode, the same content is shown on two or more monitors. Clone
      mode is usually limited to the monitors connected to a single graphics
      card.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Span View</term>
    <listitem>
     <para>
      In this mode, the monitors connected to a graphics card form a single
      large monitor. You can use 3D acceleration and you can move
      application windows between the screens. Any application that is
      maximized stretches across the complete desktop, not only across one
      monitor. For this mode, a similar resolution of both monitors is
      recommended for ease of use.
     </para>
    </listitem>
   </varlistentry>
<!-- <varlistentry>
    <term>Xinerama</term>
    <listitem>
     <para>
      Also allows to merge two monitors to a single desktop but does not
      require that both monitors use the same resolution. Any application
      that is maximized, stretches only across the monitor it is currently
      located on, not across the complete desktop. However, in Xinerama
      mode, 3D acceleration cannot be used.
     </para>
    </listitem>
   </varlistentry>-->
   <varlistentry>
    <term>Twin View</term>
    <listitem>
     <para>
      This mode is Nvidia-specific and is a hybrid of Span View and
      Xinerama: you can have 3D acceleration and one desktop stretching over
      both monitors, but you cannot rotate just one of them (only both or
      neither).
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
  <note>
   <title>Available Modes</title>
   <para>
    Which modes and options are available on your machine depend on your
    hardware (graphics cards and monitors) and the driver you use.
   </para>
  </note>
  <procedure>
   <title>Configuring One or Multiple Monitors</title>
   <para>
    For configuring multiple monitors, you need a graphics card that is
    supported by a driver that implements the RandR extension in version 1.2
    or higher. To find out if you are using a valid driver, run the
    <command>xrandr</command> command and check the output. If you only get
    a single output that contains the string <literal>default</literal>,
    your driver only supports RandR version 1.1. For illustration, see the
    examples below.
   </para>
   <example>
    <title>Example Output for a Driver Supporting RandR 1.1</title>
<screen>$xrandr
Screen 0: minimum 2048 x 768, current 3360 x 1050, maximum 3360 x 1050
default connected 3360x1050+0+0 0mm x 0mm
   3360x1050      50.0*
   2048x768       51.0
    </screen>
   </example>
   <example>
    <title>Example Output for a Driver Supporting RandR 1.2</title>
<screen>$xrandr
Screen 0: minimum 320 x 200, current 1280 x 1024, maximum 3840 x 1200
DVI-I_1/digital disconnected (normal left inverted right x axis y axis)
DVI-I_1/analog connected 1280x1024+0+0 (normal left inverted right x axis y axis) 338mm x 270mm
   1024x768       60.0
   800x600        60.3
   640x480        59.9
DVI-D_2 disconnected (normal left inverted right x axis y axis)  1280x1024 (0x3e)  108.0MHz
   h: width  1280 start 1328 end 1440 total 1688 skew    0 clock   64.0KHz
   v: height 1024 start 1025 end 1028 total 1066           clock   60.0Hz
    </screen>
   </example>
   <step>
    <para>
     Open the Personal Settings and select <guimenu>Display</guimenu>.
    </para>
   </step>
   <step>
    <para>
     <remark>taroth 090827: DEVs, if someone of you uses a driver supporting
      multi-monitor configuration and could send me a screen shot, I would add
      one here as example</remark>
     Select <guimenu>Size &amp; Orientation </guimenu> to configure
     parameters like dual-head modes, screen size, and refresh rate.
    </para>
   </step>
   <step>
    <para>
     Parameters like standby, suspend or power off for your monitor can be
     configured in the <guimenu>Power Control</guimenu> category.
    </para>
   </step>
   <step>
    <para>
     To calibrate your monitor, click the <guimenu>Gamma</guimenu> category.
     For more information, click <guimenu>Help</guimenu>.
    </para>
   </step>
   <step>
    <para>
     In the <guimenu>Multiple Monitors</guimenu> category, you can set some
     options for application windows (for example, if maximized windows need
     to be limited to just one monitor).
    </para>
   </step>
   <step>
    <para>
     Confirm your settings with <guimenu>Apply</guimenu>.
    </para>
   </step>
  </procedure>
  <para>
   To adjust your display configuration on the fly, start &krandr; from the
   main menu, or press <keycombo> <keycap function="alt"/>
   <keycap>F2</keycap> </keycombo> and enter <command>krandrtray</command>.
   After you have started the applet, the applet icon is usually added to
   your system tray. To change screen size or refresh rate, right-click the
   icon and select one of the entries. After selection, your screen
   resolution changes immediately and you are asked to confirm the new
   configuration or to revert to the old one. If you do not confirm the new
   configuration, the display switches back to the former resolution
   automatically after 15 seconds. If you left-click the icon, you are taken
   to the same configuration dialog you can also start from the Personal
   Settings.
  </para>
 </section>

 <section xml:id="sec-kde-cust-hw-trouble">
  <title>Background Information</title>
  <para>
   The following background information might help you in case your hardware
   components are not detected correctly by default and you need to adjust
   some settings manually.
  </para>
  <remark>taroth 090825: kudos to sndirsch, I added most of his information from
   the recent mail thread here</remark>
  <variablelist>
   <varlistentry>
    <term>Graphics Card and Display</term>
    <listitem>
     <para>
      The following processes are executed by the system to detect and
      configure your monitor: The X server is responsible for detecting the
      graphics card. The corresponding driver is selected according to a
      certain order defining the priorities, for example:
     </para>
<screen>ATI: fglrx --&gt; radeonhd --&gt; radeon --&gt; fbdev --&gt; vesa
NVIDIA: nvidia --&gt; nouveau --&gt; nv --&gt; fbdev --&gt; vesa
VIA: chrome9 --&gt; openchrome --&gt; unichrome
Intel: intel --&gt; fbdev --&gt; vesa</screen>
     <para>
      If one of the drivers in the list does not exist or the hardware is
      not supported, the system tries the next driver. The driver then
      addresses the monitor in its native resolution. Dynamic changes can be
      made using desktop-specific tools like gnome-display-properties or
      &krandr;.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Mouse, Keyboard and Touchpad</term>
    <listitem>
     <para>
      For mouse and keyboard, the <phrase role="productname">evdev</phrase> driver is
      used; for notebook touchpads the <phrase role="productname">synaptic</phrase>
      driver. The settings are defined systemwide by HAL (hardware
      abstraction layer) and are stored under
      <filename>/usr/share/hal/fdi/policy</filename>.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
  <para>
   In case you need to adjust your (static) X Window System configuration
   for hardware components, this can be done with a graphical front-end
   (&sax;) or by editing the <filename>/etc/X11/xorg.conf</filename>
   configuration file manually (for experts only). To start &sax;, press
   <keycombo> <keycap function="alt"/> <keycap>F2</keycap> </keycombo> and
   enter <command>sax2</command> (&rootuser; password needed).
  </para>
  <para>
   For experienced users, there are also command line tools available: you
   can set the keyboard with <command>setxkbmap</command> or test and
   configure XInput devices with <command>xinput</command>.
  </para>
 </section>
</section>
