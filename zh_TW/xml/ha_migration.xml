<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook51-profile.xsl"
    type="text/xml"
    title="Profiling step"
?>
<!DOCTYPE appendix>
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<appendix xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.1" xml:base="ha_migration.xml" xml:id="app-ha-migration"><title>升級叢集和更新軟體套件</title><info><abstract>
  <para>
   本章介紹兩種不同的方案：將叢集升級到另一個版本的 <phrase role="productnamereg"><phrase os="sles">SUSE® Linux Enterprise High Availability Extension</phrase></phrase> (主要版本或 Service Pack)，以及更新叢集節點上的個別套件。
  </para>
 </abstract></info>
 
 
 
 <section xml:id="sec-ha-migration-terminology">
  <title>術語</title>
  
  <para>
   下面將介紹本章中使用的最重要的術語定義：
  </para>
  
  
  
  <variablelist>
   <varlistentry>
    <term>主要版本</term>
    <term>廣泛使用 (GA) 版本</term>
    <listitem>
     <para>
      SUSE Linux Enterprise (或任何軟體產品) 的主要版本是一個新版本，該版本中引入了新功能及工具，去除了以前取代的元件並提供了不可反向相容的變更。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Service Pack (SP)</term>
    <listitem>
     <para>
      將多個修補程式合併為一種易於安裝或部署的形式。Service Pack 都指定了編號，通常包含程式的安全性修正、更新、升級或增強。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>更新</term>
    <listitem>
     <para>
      安裝套件的較新<emphasis>次要</emphasis>版本。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>升級</term>
    <listitem>
     <para>
      安裝套件或套裝作業系統的較新<emphasis>主要</emphasis>版本，會引入<emphasis>新功能</emphasis>。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </section>
 
 <section xml:id="sec-ha-migration-upgrade">
  <title>將叢集升級到產品的最新版本</title>
  
  <para>
   支援哪種升級路徑以及如何執行升級，視執行叢集的目前產品版本以及您要移轉到的目標版本而定。如需與此相關的一般資訊，請參閱《<citetitle>SUSE Linux Enterprise Server 11 部署指南</citetitle>》中的「<citetitle>更新 SUSE Linux Enterprise</citetitle>」一章。此文件位於 <link xlink:href="http://www.suse.com/documentation/"/>。
  </para>
  
  <important>
   <title>升級前的必要準備</title>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      確保您的系統備份是最新版本且可還原。
     </para>
    </listitem>
    <listitem>
     <para>
      在線上環境中執行升級程序前，請先在叢集設定的臨時例項上測試該程序。
     </para>
     <para>
      這樣，您便可以預估維護期所需的時間範圍。這也有助於偵測和解決可能會出現的任何非預期問題。
     </para>
    </listitem>
   </itemizedlist>
  </important>
 <section xml:id="sec-ha-migration-sle11">
  <title>從 SLES 10 升級到 SLE HA 11</title>

   <important>
    <title>需要使叢集離線</title>
    <para> 若要從 SUSE Linux Enterprise Server 10 移轉至 SUSE Linux Enterprise Server 11 (任何 Service Pack)，所有叢集節點都必須處於<emphasis>離線</emphasis>狀態，且叢集必須做為一個整體移轉，系統不支援既有在 SUSE Linux Enterprise Server 10 上執行又有在 SUSE Linux Enterprise Server 11 上執行之節點的混合叢集。 </para>
   </important>

  <para>
   為了方便起見，<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 提供了 <filename>hb2openais.sh</filename> 程序檔，用於在從 Heartbeat 移至 OpenAIS 叢集堆疊時轉換資料。此程序檔可剖析儲存在 <filename>/etc/ha.d/ha.cf</filename> 中的組態，並產生適用於 OpenAIS 叢集堆疊的新組態檔案。此外，它還能調整 CIB 以符合 OpenAIS 慣例、轉換 OCFS2 檔案系統，以及用 cLVM 取代 EVMS。所有 EVMS2 容器都會轉換成 cLVM2 磁碟區。對於 CIB 中現有資源中參考的磁碟區群組，會為其建立新的 LVM 資源。
  </para>

  <para>
   若要將叢集從 SUSE Linux Enterprise Server 10 SP4 成功移轉至 SUSE Linux Enterprise Server 11，需要執行以下步驟︰
  </para>

  <orderedlist spacing="normal">
   <listitem>
    <para>
     <xref linkend="pro-ha-migration-sle11-prep" xrefstyle="select:title"/>
    </para>
   </listitem>
   <listitem>
    <para>
     <xref linkend="pro-ha-migration-sle11-install" xrefstyle="select:title"/>
    </para>
   </listitem>
   <listitem>
    <para>
     <xref linkend="pro-ha-migration-sle11-test" xrefstyle="select:title"/>
    </para>
   </listitem>
   <listitem>
    <para>
     <xref linkend="pro-ha-migration-sle11-convert" xrefstyle="select:title"/>
    </para>
   </listitem>
  </orderedlist>

  <para>
   成功完成轉換後，可以讓升級後的叢集重新恢復線上狀態。
  </para>

  <note>
   <title>升級後回復</title>
   <para>
    升級到 SUSE Linux Enterprise Server 11 後，就<emphasis>不</emphasis>能重新回復到 SUSE Linux Enterprise Server 10。
   </para>
  </note>

  <section xml:id="sec-ha-migration-sle11-prep">
   <title>準備與備份</title>
   <para>
    在將叢集升級到產品的下一版本並相應地轉換資料之前，需要對目前的叢集做一些準備工作。
   </para>
   <procedure xml:id="pro-ha-migration-sle11-prep">
    <title>準備 SUSE Linux Enterprise Server 10 SP4 叢集</title>
    <step>
     <para>
      登入叢集。
     </para>
    </step>
    <step>
     <para>
      檢閱 Heartbeat 組態檔案 <filename>/etc/ha.d/ha.cf</filename>，並檢查所有通訊媒體是否支援多路廣播。
     </para>
    </step>
    <step>
     <para>
      確認以下檔案在所有節點上都相同︰<filename>/etc/ha.d/ha.cf</filename> 和 <filename>/var/lib/heartbeat/crm/cib.xml</filename>。
     </para>
    </step>
    <step>
     <para>
      對每個節點執行 <command>rcheartbeat stop</command>，使它們離線。
     </para>
    </step>
    <step>
     <para>
      在更新至最新版本之前，除了需要依建議執行一般性系統備份之外，還需備份以下檔案，因為在升級到 SUSE Linux Enterprise Server 11 後需要使用它們來執行轉換程序檔︰
     </para>
     <itemizedlist mark="bullet" spacing="normal">
      <listitem>
       <para>
        <filename>/var/lib/heartbeat/crm/cib.xml</filename>
       </para>
      </listitem>
      <listitem>
       <para>
        <filename>/var/lib/heartbeat/hostcache</filename>
       </para>
      </listitem>
      <listitem>
       <para>
        <filename>/etc/ha.d/ha.cf </filename>
       </para>
      </listitem>
      <listitem>
       <para>
        <filename>/etc/logd.cf</filename>
       </para>
      </listitem>
     </itemizedlist>
    </step>
    <step>
     <para>
      如果您擁有 EVMS2 資源，請將非 LVM EVMS2 磁碟區轉換為 SUSE Linux Enterprise Server 10 上相容的磁碟區。在轉換過程中 (請參閱<xref linkend="sec-ha-migration-sle11-convert"/>)，這些磁碟區將轉變並歸入 LVM2 磁碟區群組。轉換之後，請務必使用 <command>vgchange -c y</command> 將各個磁碟區群組標示為高可用性叢集的成員。

     </para>
    </step>
   </procedure>
  </section>

  <section xml:id="sec-ha-migration-sle11-install">
   <title>升級/安裝</title>
   <para>
    準備好叢集並備份好檔案之後，便可以在叢集節點上執行 SUSE Linux Enterprise 11 的全新安裝。
   </para>
   <procedure xml:id="pro-ha-migration-sle11-install">
    <title>升級到 SUSE Linux Enterprise 11</title>
    <step>
     <para>
      在所有叢集節點上執行 SUSE Linux Enterprise 11 的全新安裝。
     </para>
    </step>
    <step>
     <para>
      在所有叢集節點上，將 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 11 做為 SUSE Linux Enterprise Server 的附加產品進行安裝。如需詳細資訊，請參閱<xref linkend="sec-ha-installation-add-on"/>。
     </para>
    </step>
   </procedure>
  </section>

  <section xml:id="sec-ha-migration-sle11-convert">
   <title>資料轉換</title>
   <para>
    安裝 SUSE Linux Enterprise Server 11 和 High Availability Extension 之後，便可開始轉換資料。High Availability Extension 隨附的轉換程序檔已經過周密設定，但它並不能在完全自動的模式下完成所有設定。它會警告您它所進行的變更，但仍需要您的互動和決定。您需要瞭解叢集的詳細情況，因為最終是由您來確認這些變更是否有意義。轉換程序檔位於 <filename>/usr/lib/heartbeat</filename> 中 (若您使用的是 64 位元系統，則位於 <filename>/usr/lib64/heartbeat</filename> 中)。
   </para>
   <note>
    <title>執行測試回合</title>
    <para>
     為了讓您熟悉轉換程序，我們強烈建議您先進行轉換測試 (不做任何變更)。您可以使用相同的測試目錄來執行重複的測試回合，但只需複製一次檔案。
    </para>
   </note>
   <procedure xml:id="pro-ha-migration-sle11-test">
    <title>測試轉換</title>
    <step>
     <para>
      在其中一個節點上，建立測試目錄並將備份檔案複製到測試目錄中︰
     </para>
<screen>$ mkdir /tmp/hb2openais-testdir
$ cp /etc/ha.d/ha.cf /tmp/hb2openais-testdir
$ cp /var/lib/heartbeat/hostcache /tmp/hb2openais-testdir
$ cp /etc/logd.cf /tmp/hb2openais-testdir
$ sudo cp /var/lib/heartbeat/crm/cib.xml /tmp/hb2openais-testdir</screen>
    </step>
    <step>
     <para>
      使用以下指令開始進行測試回合
     </para>
<screen>$ /usr/lib/heartbeat/hb2openais.sh -T /tmp/hb2openais-testdir -U</screen>
     <para>
      若您使用的是 64 位元系統，請使用以下指令執行測試︰
     </para>
<screen>$ /usr/lib64/heartbeat/hb2openais.sh -T /tmp/hb2openais-testdir -U</screen>
    </step>
    <step>
     <para>
      讀取並驗證產生的 <filename>openais.conf</filename> 和 <filename>cib-out.xml</filename> 檔案︰
     </para>
<screen>$ cd  /tmp/hb2openais-testdir 
$ less openais.conf 
$ crm_verify -V -x cib-out.xml</screen>
    </step>
   </procedure>
   <para>
    如需轉換階段的詳細資訊，請參閱所安裝之 High Availability Extension 中的 <filename>/usr/share/doc/packages/pacemaker/README.hb2openais</filename>。
   </para>
   <procedure xml:id="pro-ha-migration-sle11-convert">
    <title>轉換資料</title>
    <para>
     執行測試回合並檢查輸出之後，便可以開始轉換資料。您只需在<emphasis>一個</emphasis>節點上執行轉換。主叢集組態 (CIB) 會自動複寫到其他節點中。轉換程序檔會自動複製需要複寫的所有其他檔案。
    </para>
    <step>
     <para>
      確定所有節點上都在執行 <systemitem class="daemon">sshd</systemitem>，並且 <systemitem class="username">root</systemitem> 可以存取該服務，以便轉換程序檔能成功將檔案複製到其他叢集節點。
     </para>
    </step>
    <step>
     <para>
      確定所有 ocfs2 檔案系統都已卸載。
     </para>
    </step>
    <step>
     <para>
      High Availability Extension 隨附了預設的 OpenAIS 組態檔案。若在執行以下步驟時，不希望預設的組態被覆寫，請複製一份 <filename>/etc/ais/openais.conf</filename> 組態檔案。
     </para>
    </step>
    <step>
     <para>
      以 <systemitem class="username">root</systemitem> 身分啟動轉換程序檔。若正在使用 sudo，請使用 <option>-u</option> 選項指定有特權的使用者︰
     </para>
<screen>$ /usr/lib/heartbeat/hb2openais.sh -u root</screen>
     <para>
      程序檔會依據 <filename>/etc/ha.d/ha.cf</filename> 中儲存的組態，產生適用於 OpenAIS 叢集堆疊的新組態檔案 <filename>/etc/ais/openais.conf</filename>。程序檔還會分析 CIB 組態，並讓您知道您的叢集組態是否需要因環境從 Heartbeat 變為 OpenAIS 而變更。所有檔案處理都是在執行轉換的節點上完成，然後再複寫到其他節點。
     </para>
    </step>
    <step>
     <para>
      按照螢幕上的指示執行操作。
     </para>
    </step>
   </procedure>
   <para>
    成功完成轉換後，依<xref linkend="sec-ha-installation-start"/> 中所述啟動新的叢集堆疊。
   </para>
   <para>
    完成升級後，就不能重新回復到 SUSE Linux Enterprise Server 10。
   </para>

  </section>

  <section xml:id="sec-ha-migration-sle11-more">
   <title>更多資訊</title>
   <para>
    如需轉換程序檔和轉換階段的更多詳細資料，請參閱所安裝之 High Availability Extension 中的 <filename>/usr/share/doc/packages/pacemaker/README.hb2openais</filename>。
   </para>
  </section>
 </section>
 <section xml:id="sec-ha-migration-sle11-sp1">
  <title>從 SLE HA 11 升級到 SLE HA 11 SP1</title>

   <note>
    <title>在 Service Pack 版本之間滾存升級</title>
    <para>若要將現有叢集從一個 Service Pack 版本成功移轉至下一個版本，您可以執行<quote>滾存升級</quote>，即將節點逐個升級。</para>
   </note>
   <para>由於在 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 11 SP1 中，主要叢集組態檔案已從 <filename>/etc/ais/openais.conf</filename> 變更為 <filename>/etc/corosync/corosync.conf</filename>，因此會有一個程序檔負責必要的轉換。這些轉換會在更新 <systemitem class="resource">openais</systemitem> 套件之後自動進行。
  </para>



  <procedure xml:id="pro-ha-migration-rolling-upgrade">
   <title>執行滾存升級</title>

    <warning>
     <title>在更新期間處於使用中狀態的叢集堆疊</title>
     <para> 若要更新執行中叢集之成員節點上的任何軟體套件，應先<emphasis>停止</emphasis><emphasis>該節點</emphasis>上的叢集堆疊，然後再開始更新軟體。在某些情況下 (請參閱<xref linkend="il-ha-update-cond"/>)，您還可以將叢集置於維護模式 (自 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 11 SP4 開始提供此模式)。 </para>
     <para>
      如果某個節點上的叢集資源管理員在軟體更新期間處於使用中狀態，可能會導致出現不可預知的結果，例如圍籬區隔使用中的節點。
     </para>
    </warning>
   <step>
    <para>
     以 <systemitem class="username">root</systemitem> 身分登入要升級和停止 OpenAIS 的節點︰
    </para>
<screen>rcopenais stop</screen>
   </step>
   <step>
    <para>
     檢查您的系統備份是否最新、能否還原。
    </para>
   </step>
   <step xml:id="step-ha-migration-upgrade-tolatest">
    <para>
     執行從 SUSE Linux Enterprise Server 11 到 SUSE Linux Enterprise Server 11 SP1 的升級程序，以及從 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 11 到 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 11 SP1 的升級程序。如需如何升級產品的相關資訊，請參閱《SUSE Linux Enterprise Server 11 SP1 部署指南》中的「<citetitle>更新 SUSE Linux Enterprise</citetitle>」一章。
    </para>
   </step>
   <step xml:id="step-ha-migration-upgrade-ais">
    <para>
     在已升級的節點上重新啟動 OpenAIS/Corosync，讓節點重新加入叢集︰
    </para>
<screen>rcopenais start</screen>
   </step>
   <step>
    <para>
     讓下一個節點離線，並對其重複執行此程序。
    </para>
   </step>
  </procedure>
 </section>
 <section xml:id="sec-ha-migration-sle11-sp2">
  <title>從 SLE HA 11 SP1 升級到 SLE HA 11 SP2</title>

  <para>
   您可以透過<literal>滾存升級</literal>將現存叢集從 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 11 SP1 移轉至 11 SP2，這與從版本 11 升級到 11 SP1 的程序相似。
  </para>

  <para>
   依照<xref linkend="pro-ha-migration-rolling-upgrade"/> 所述繼續，同時注意以下兩個差異：
  </para>

  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     在<xref linkend="step-ha-migration-upgrade-tolatest" xrefstyle="select:name"/> 中，從 SUSE Linux Enterprise Server 11 SP1 升級到 SUSE Linux Enterprise Server 11 SP2，以及從 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 11 SP1 升級到 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 11 SP2。
    </para>

    <para>
     由於 32 位元架構不再支援 Xen 監管程式，您可能需要手動解析套件 <systemitem class="resource">drbd-xen</systemitem> 的相依項。請注意，系統不支援跨平台叢集。
    </para>
   </listitem>
   <listitem>
    <para>
     由於 SP2 隨附了核心更新，請在<xref linkend="step-ha-migration-upgrade-tolatest" xrefstyle="select:name"/> 與<xref linkend="step-ha-migration-upgrade-ais"/> 之間將節點重新開機。
    </para>
   </listitem>
  </itemizedlist>

  <important>
   <title>滾存升級的時間限制</title>
   <para>
    只有將<emphasis>所有</emphasis>叢集節點都升級到最新的產品版本後，才可以使用 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 11 SP2 隨附的新功能。在滾存升級期間，只有一段較短的時間支援 SP1/SP2 混合叢集。請在一週內完成滾存升級。
   </para>
  </important>
 </section>
 <section xml:id="sec-ha-migration-sle11-sp3">
  <title>從 SLE HA 11 SP2 升級到 SLE HA 11 SP3</title>

  <para>
   您可以透過<literal>滾存升級</literal>將現存叢集從 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 11 SP2 移轉至 11 SP3，這與從版本 11 升級到 11 SP1 的程序相似。
  </para>

  <para>
   依照<xref linkend="pro-ha-migration-rolling-upgrade"/> 所述繼續，並注意以下差異：在<xref linkend="step-ha-migration-upgrade-tolatest" xrefstyle="select:name"/> 中，從 SUSE Linux Enterprise Server 11  SP2 升級到 SUSE Linux Enterprise Server 11 SP3，以及從 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 11 SP2 升級到 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 11 SP3。
  </para>

  <important>
   <title>滾存升級的時間限制</title>
   <para>
    只有將<phrase role="productname">所有<phrase os="sles">叢集節點都升級到最新的產品版本後，才可以使用 </phrase></phrase>SUSE Linux Enterprise High Availability Extension<emphasis/> 11 SP3 隨附的新功能。在滾存升級期間，只有一段較短的時間支援 SP2/SP3 混合叢集。請在一週內完成滾存升級。
   </para>
  </important>
 </section>
  
  <section xml:id="sec-ha-migration-sle11-sp4">
   <title>從 SLE HA 11 SP3 升級到 SLE HA 11 SP4</title>
   
   <para>
    您可以透過<literal>滾存升級</literal>將現存叢集從 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 11 SP3 移轉至 11 SP4，這與從版本 11 升級到 11 SP1 的程序相似。
   </para>
   
   <para>
    依照<xref linkend="pro-ha-migration-rolling-upgrade"/> 所述繼續，並注意以下差異：在<xref linkend="step-ha-migration-upgrade-tolatest" xrefstyle="select:name"/> 中，從 SUSE Linux Enterprise Server 11  SP3 升級到 SUSE Linux Enterprise Server 11 SP4，以及從 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 11 SP3 升級到 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 11 SP4。
   </para>
   
   <note xml:id="note-ha-cib-upgrade">
    <title>升級 CIB 語法版本</title>
    <para>標記 (用於對資源分組) 和某些 ACL 功能僅適用於 <literal>pacemaker-2.0</literal> 或更高的 CIB 語法版本。(若要檢查版本，請執行 <command>cibadmin -Q |grep validate-with</command>)。如果您已從 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 11 SP3 升級，則 CIB 版本預設<emphasis>不會</emphasis>升級。若要手動升級到最新的 CIB 版本，請使用下列其中一個指令：</para>
    <screen><prompt role="root">root # </prompt>cibadmin --upgrade --force</screen>
    <para>或</para>
    <screen><prompt role="root">root # </prompt>crm configure upgrade force</screen>
   </note>
   
   <important>
    <title>滾存升級的時間限制</title>
    <para>
     只有將<phrase role="productname">所有<phrase os="sles">叢集節點都升級到最新的產品版本後，才可以使用 </phrase></phrase>SUSE Linux Enterprise High Availability Extension<emphasis/> 11 SP4 隨附的新功能。在滾存升級期間，只有一段較短的時間支援 SP3/SP4 混合叢集。請在一週內完成滾存升級。
    </para>
   </important>
  </section>
  
 </section>
 <section xml:id="sec-ha-update">
  <title>更新叢集節點上的軟體套件</title>
  
  <warning>
   <title>在更新期間處於使用中狀態的叢集堆疊</title>
   <para> 若要更新執行中叢集之成員節點上的任何軟體套件，應先<emphasis>停止</emphasis><emphasis>該節點</emphasis>上的叢集堆疊，然後再開始更新軟體。在某些情況下 (請參閱<xref linkend="il-ha-update-cond"/>)，您還可以將叢集置於維護模式 (自 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 11 SP4 開始提供此模式)。 </para>
   <para>
    如果某個節點上的叢集資源管理員在軟體更新期間處於使用中狀態，可能會導致出現不可預知的結果，例如圍籬區隔使用中的節點。
   </para>
  </warning>
  
  <para>
   在節點上安裝任何套件更新之前，請檢查以下幾點：
  </para>
  
  <itemizedlist xml:id="il-ha-update-cond" mark="bullet" spacing="normal">
   <title>停止叢集堆疊的條件</title>
   <listitem>
    <para>
     更新是否會影響屬於 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 或 Geo Clustering for SUSE Linux Enterprise High Availability Extension 附加產品的任何套件？如果會影響，請在開始軟體更新前先在節點上停止叢集堆疊。
    </para>
    <screen><prompt role="root">root # </prompt>rcopenais stop</screen>
   </listitem>
   <listitem>
    <para>
     更新套件是否需要重新開機？如果需要，請在開始軟體更新前先在節點上停止叢集堆疊：
    </para>
    <screen><prompt role="root">root # </prompt>rcopenais stop</screen>
   </listitem>
  </itemizedlist>
  
  <para>
   如果不屬於以上任一種情況，則不需要停止叢集堆疊。在此情況下，請在開始軟體更新前將叢集置於維護模式：
  </para>
  
  <screen><prompt role="root">root # </prompt><command>crm</command> configure property maintenance-mode=true</screen>
  
  <para>
   如需維護模式的詳細資料，請參閱<xref linkend="sec-ha-config-basics-maint-mode"/>。
  </para>
  
  
  <para>
   成功安裝更新後，請將叢集解除維護模式：
  </para>
  
  <screen><prompt role="root">root # </prompt><command>crm</command> configure property maintenance-mode=true</screen>
  
  <para>
   或者使用以下指令在相應節點上重新啟動叢集堆疊：
  </para>
  
  <screen><prompt role="root">root # </prompt>rcopenais start</screen>
 </section>
 
 <section xml:id="sec-ha-migration-more">
  <title>更多資訊</title>

  <para>
   如需所升級產品目標版本的任何變更及新功能的詳細資訊，請參閱其版本說明，這些文件可從 <link xlink:href="https://www.suse.com/releasenotes/"/> 取得。
  </para>
 </section>
</appendix>
