<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE chapter PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN"
"novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<chapter xml:base="yast2_sw.xml" id="cha.y2.sw">
 <title>安裝或移除軟體</title><indexterm> <primary>YaST</primary> <secondary>軟體</secondary> </indexterm> <indexterm> <primary>設定</primary> <secondary>軟體</secondary> </indexterm>
 <abstract>
  <para>
   使用 YaST 的軟體管理工具可搜尋您要新增或移除的軟體元件。YaST 會為您解決所有相依性問題。若要安裝未包含在安裝媒體中的套件，請將相應的軟體儲存庫新增至設定，並由 YaST 對它們進行管理。使用更新 Applet 管理軟體更新，讓系統保持最新狀態。
  </para>
 </abstract>
 <para os="sles">
  使用 YaST 軟體管理員可變更系統的軟體集合。此 YaST 模組在 Qt 和 ncurses 兩種工具套件類別中提供，此處將介紹 Qt 類別。
 </para>
 
 
 <note>
  <title>確認並檢閱變更</title>
  <para>
   安裝、更新或移除套件後，不會立即套用「軟體管理員」中的任何變更，只有在您另外按一下<guimenu>接受</guimenu>或<guimenu>套用</guimenu>進行確認後才會套用。YaST 會維護一份包含所有動作的清單，從而可讓您在將變更套用至系統之前進行檢閱和修改。
  </para>
 </note>
 <sect1 id="sec.onlineupdate.terms">
  <title>術語定義</title>

  <variablelist>
   <varlistentry>
    <term>儲存庫</term>
    <listitem>
     <para>
      包含套件以及有關這些套件的其他資訊 (套件中繼資料) 的本地或遠端目錄。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>(儲存庫) 別名</term>
    <listitem>
     <para>
      各個 Zypper 指令所用儲存庫的簡稱。使用者可以在新增儲存庫時選擇別名，別名必須唯一。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>產品</term>
    <listitem>
     <para>
      表示整個產品，例如 <phrase role="productname"><phrase os="sles">SUSE® Linux Enterprise Server</phrase></phrase>。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>模式</term>
    <listitem>
     <para>
      模式是專門用於特定目的的可安裝套件群組。例如，<systemitem>筆記型電腦</systemitem>模式包含行動計算環境中所需的所有套件。模式定義套件的相依性 (例如必要套件或推薦的套件) 並預先標示了部分套件進行安裝。這可確保在安裝模式之後，系統中已經有達成特定目的所需的最重要套件。但並不是模式中預先選取的所有套件都必須進行安裝，您可以根據需要和意愿手動選取或取消選取模式中的套件。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>套件</term>
    <listitem>
     <para>
      套件是 <literal>rpm</literal> 格式的壓縮檔案，其中包含特定程式所需的檔案。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>修補程式</term>
    <listitem>
     <para>
      修補程式由一或多個套件組成，並可透過 deltarpm 的方式進行套用。它還可能引入對尚未安裝之套件的相依性。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>可解析項目</term>
    <listitem>
     <para>
      表示產品、模式、套件或修補程式的一般術語。最常用的可解析項目類型是套件或修補程式。
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term>deltarpm</term>
    <listitem>
     <para>
      deltarpm 只包括某套件兩個定義版本之間的二進位差異，因此，它的下載大小最小。安裝之前，會在本地機器上重建完整的 RPM 套件。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>套件依存度</term>
    <listitem>
     <para>
      某些套件依存於其他套件，例如共享程式庫。換言之，一個套件可能<literal>需要</literal>其他套件 — 如果所需的套件不可用，便無法安裝該套件。除了必須滿足的相依條件 (套件要求) 之外，一些套件還會<literal>推薦</literal>其他套件。這些推薦的套件只有在確實可用時才會進行安裝，否則系統會予以忽略，而繼續安裝推薦方套件。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect1>
 <sect1 id="sec.y2.sw.qt">
  <title>使用 KDE 介面 (Qt)</title>

  

  <para>
   依預設，使用桌面系統 KDE、IceWM 及其他系統時會啟動 YaST Qt 介面。此外，從遠端終端機呼叫 YaST 時也會使用該介面。從「YaST 控制中心」選擇<menuchoice><guimenu>軟體</guimenu><guimenu>軟體管理</guimenu></menuchoice>，啟動軟體管理員。
  </para>

  <informalfigure>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="yast2_sw_manager.png" width="70%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="yast2_sw_manager.png" width="65%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </informalfigure>

  <sect2 id="sec.y2.sw.search">
   <title>搜尋套件或模式的檢視窗</title>
   <para>
    YaST 軟體管理員可以安裝所有目前啟用的儲存庫中的套件或模式。它提供不同的檢視窗及過濾器，更方便您尋找要搜尋的軟體。<guimenu>搜尋</guimenu>檢視窗是該視窗的預設檢視窗。若要變更檢視窗，請按一下<guimenu>檢視窗</guimenu>並從下拉式清單中選取下列項目之一。選定的檢視窗會在新索引標籤中開啟。
   </para>
   <variablelist>
    <varlistentry>
     <term>模式</term>
     <listitem>
      <para>
       列出所有可供在系統上安裝的模式。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>套件群組</term>
     <listitem>
      <para>
       按群組 (<guimenu>繪圖</guimenu>、<guimenu>程式設計</guimenu>或<guimenu>安全性</guimenu>) 列出所有套件。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>RPM 群組</term>
     <listitem>
      <para>
       按功能 (包括群組和子群組) 列出所有套件。例如<menuchoice><guimenu>網路</guimenu><guimenu>電子郵件</guimenu><guimenu>用戶端</guimenu></menuchoice>。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>語言</term>
     <listitem>
      <para>
       列出新增系統語言所必需的所有套件的過濾器。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>儲存機制</term>
     <listitem>
      <para>
       按儲存庫列出套件的過濾器。要選取多個儲存庫，請按住 <keycap function="control"/> 鍵的同時按一下儲存庫名稱。<quote>pseudo repository</quote> <guimenu>@System</guimenu>會列出目前已安裝的所有套件。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>搜尋</term>
     <listitem>
      <para>
       可讓您根據特定準則搜尋套件。輸入搜尋字串，然後按 <keycap function="enter"/>。指定<guimenu>搜尋範圍</guimenu>以及變更<guimenu>搜尋模式</guimenu>可以調整搜尋條件。例如，如果您不知道套件名稱，只知道要搜尋的應用程式名稱，可嘗試在搜尋程序中加入套件<guimenu>描述</guimenu>。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>安裝摘要</term>
     <listitem>
      <para>
       如果您已選取要安裝、更新或移除的套件，此檢視窗會顯示變更。這些變更會在您按一下<guimenu>接受</guimenu>後立即套用至系統。若要過濾出此檢視窗中處於特定狀態的套件，請啟用或停用相應的核取方塊。按住 <keycombo> <keycap function="shift"/> <keycap>F1</keycap> </keycombo> 可獲取狀態旗標的詳細資料。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <tip>
    <title>尋找不屬於使用中儲存庫的套件</title>
    <para>
     若要列出所有不屬於使用中儲存庫的套件，請選擇 <menuchoice> <guimenu>檢視</guimenu> <guimenu>儲存庫</guimenu> <guimenu>@System</guimenu> </menuchoice>，然後選擇<menuchoice> <guimenu>次要過濾器</guimenu> <guimenu>不再維護的套件</guimenu></menuchoice>。例如，您刪除了某個儲存庫，並且想要確定系統上未安裝該儲存庫中的任意一個套件，此操作就非常有用。
    </para>
   </tip>
  </sect2>

  <sect2 id="sec.y2.sw.install">
   <title>安裝和移除套件或模式</title>

   <para>
    某些套件依存於其他套件，例如共享程式庫。另外，有些套件不能與其他套件在系統中並存。如果可能，YaST 會自動解決這些相依性問題或衝突。如果您所做的選擇導致某相依性衝突無法自動解決，則需要按<xref linkend="sec.y2.sw.deps"/> 中所述手動解決該衝突。
   </para>
   <note>
    <title>移除套件</title>
    <para>
     移除套件時，YaST 預設只會移除所選的套件。如果想讓 YaST 同時移除在指定套件移除後便不再需要的其他套件，請選取<menuchoice><guimenu>選項</guimenu><guimenu>刪除套件時清理</guimenu></menuchoice>。
    </para>
   </note>
   <procedure>
    <step performance="required">
     <para>
      按<xref linkend="sec.y2.sw.search"/> 中所述搜尋套件。
     </para>
    </step>
    <step performance="required">
     <para>
      找到的套件會列在右側窗格中。若要安裝或移除套件，請在該套件上按滑鼠右鍵，然後選擇<guimenu>安裝</guimenu>或<guimenu>刪除</guimenu>。如果相關選項不可用，請檢查套件名稱前面的符號所指示的套件狀態 — 按 <keycombo> <keycap function="shift"/> <keycap>F1</keycap> </keycombo> 可取得說明。
     </para>
     <tip>
      <title>向所有列出的套件套用某個動作</title>
      <para>
       若要向右側窗格中列出的所有套件套用某個動作，請從<menuchoice><guimenu>套件</guimenu> <guimenu>此清單中所有項目</guimenu></menuchoice>中選擇一個動作。
      </para>
     </tip>
    </step>
    <step performance="required">
     <para>
      若要安裝模式，請在該模式名稱上按滑鼠右鍵，然後選擇<guimenu>安裝</guimenu>。
     </para>
    </step>
    <step performance="required">
     <para>
      模式本身無法移除。但您可以選取要移除之模式下的各個套件，標示它們予以移除。
     </para>
    </step>
    <step performance="required">
     <para>
      要選取更多套件，請重複上述步驟。
     </para>
    </step>
    <step performance="required">
     <para>
      套用變更之前，您可以按一下<menuchoice><guimenu>檢視</guimenu><guimenu>安裝摘要</guimenu></menuchoice>以檢視或修改變更。依預設，狀態將會變更的所有套件都會列出。
     </para>
    </step>
    <step performance="required">
     <para>
      如果某個套件已排定要刪除或更新，要想回復其狀態，可在該套件上按一下滑鼠右鍵，然後選取<guimenu>保留</guimenu>；如果某個套件已排定要安裝，要想回復其狀態，可選取<guimenu>不要安裝</guimenu>。若要放棄所有變更並關閉軟體管理員，請依序按一下<guimenu>取消</guimenu>和<guimenu>放棄</guimenu>。
     </para>
    </step>
    <step performance="required">
     <para>
      完成後，按一下<guimenu>接受</guimenu>以套用變更。
     </para>
    </step>
    <step performance="required">
     <para>
      如果 YaST 發現與其他套件存在相依關係，則會顯示一組額外選中要安裝、更新或移除的套件。按一下<guimenu>繼續</guimenu>予以接受。
     </para>
     <para>
      安裝、更新或移除所有選定的套件後，YaST 軟體管理員會自動終止。
     </para>
    </step>
   </procedure>
   <note>
    <title>安裝來源套件</title>
    <para>
     目前無法使用 YaST 軟體管理員安裝來源套件。請使用指令行工具 <command>zypper</command> 安裝。如需詳細資訊，請參閱<xref linkend="sec.zypper.softman.sources"/>。
    </para>
   </note>
  </sect2>

  <sect2 id="sec.y2.sw.update">
   <title>更新套件</title>
   <para>
    除更新個別套件之外，您還可以更新安裝的所有套件或特定儲存庫中的全部套件。更新大量套件時，通常需要考量以下幾方面︰
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      提供套件之儲存庫的優先程度，
     </para>
    </listitem>
    <listitem>
     <para>
      套件的架構 (例如，x86_64、i686、i586)，
     </para>
    </listitem>
    <listitem>
     <para>
      套件的版本號碼，
     </para>
    </listitem>
    <listitem>
     <para>
      套件的廠商。
     </para>
    </listitem>
   </itemizedlist>
   <para>
    至於哪一方面對選擇更新候選最為重要，取決於您選擇的更新選項。
   </para>
   <procedure>
    <step performance="required">
     <para>
      若要將安裝的所有套件更新至最新版本，請從主功能表選擇<menuchoice><guimenu>套件</guimenu><guimenu>所有套件</guimenu><guimenu>有較新版本時即更新</guimenu></menuchoice>。
     </para>
     <para>
      系統會根據以下規則在所有儲存庫中檢查是否有可用的更新候選︰YaST 先會嘗試將搜尋範圍限制在與已安裝套件擁有相同架構及廠商的套件。如果搜尋到相符項，系統會根據以下流程，從中選擇<quote>最佳</quote>更新候選。但是，如果找不到同一廠商的類似套件，搜尋會擴展到具有相同架構的所有套件。如果仍找不到類似套件，系統會考慮所有套件並根據以下準則選擇<quote>最佳</quote>更新候選︰
     </para>
     <orderedlist spacing="normal">
      <listitem>
       <para>
        儲存庫優先程度︰選擇優先程度最高之儲存庫中的套件。
       </para>
      </listitem>
      <listitem>
       <para>
        如果有多個套件符合此準則，會選擇具有<quote>最佳</quote>架構的那一個 (最佳選擇︰與已安裝套件的架構相符，否則按以下優先順序選擇︰x86_64 &gt; i686 &gt; i586)。
       </para>
      </listitem>
     </orderedlist>
     <para>
      如果最後選中的套件版本高於已安裝的套件，系統會更新已安裝的套件並以所選的更新候選取代。
     </para>
     <para>
      選擇此選項會儘量避免改變已安裝套件的架構與廠商，但某些情況下變更也是允許的。
     </para>
     <note>
      <title>無條件更新</title>
      <para>
       如果選擇的是<menuchoice><guimenu>套件</guimenu><guimenu>所有套件</guimenu><guimenu>無條件更新</guimenu></menuchoice>，基本會套用相同的準則，但會無條件安裝發現的任何候選套件。因此，選擇此選項事實上有可能會降級某些套件。
      </para>
     </note>
    </step>
    <step performance="required">
     <para>
      若要確定進行大量更新的套件源自特定儲存庫︰
     </para>
     <substeps performance="required">
      <step performance="required">
       <para>
        依<xref linkend="sec.y2.sw.search"/> 中所述，選擇要更新的套件所在的儲存庫。
       </para>
      </step>
      <step performance="required">
       <para>
        在視窗的右側，按一下<guimenu>將系統套件切換至此儲存庫中的版本</guimenu>。此操作將明確允許 YaST 在取代套件時變更套件的廠商。
       </para>
       <para>
        按一下<guimenu>接受</guimenu>即可繼續，且安裝的所有套件都會由源自此儲存庫的套件 (若有) 取代。這可能導致某些套件的廠商和架構發生變更，甚至遭到降級。
       </para>
      </step>
      <step performance="required">
       <para>
        若要避免出現此情況，請按一下<guimenu>取消將系統套件切換至此儲存庫中的版本</guimenu>。請注意，只有在按<guimenu>接受</guimenu>按鈕後才能取消。
       </para>
      </step>
     </substeps>
    </step>
    <step performance="required">
     <para>
      套用變更之前，您可以按一下<menuchoice><guimenu>檢視</guimenu><guimenu>安裝摘要</guimenu></menuchoice>以檢視或修改變更。依預設，狀態將會變更的所有套件都會列出。
     </para>
    </step>
    <step performance="required">
     <para>
      如果所有選項都已根據您的意愿進行了設定，請按一下<guimenu>接受</guimenu>確認變更，以啟動大量更新。
     </para>
    </step>
   </procedure>
  </sect2>





  <sect2 id="sec.y2.sw.deps">
   <title>檢查軟體相依性</title>
   <para>
    大多數套件都依存於其他套件。例如，若某一套件使用共享程式庫，它就依存於提供此程式庫的套件。另外，有些套件不能相互並存，否則會產生衝突 (例如，郵件傳輸代理程式 sendmail 與 postfix 之中，您只能安裝一個)。安裝或移除軟體時，軟體管理員會確定不存在未解決的相依性或衝突，以確保系統的完整性。
   </para>
   <para>
    若系統中只存在一個可解決某個相依性或衝突的解決方案，它將自動解決問題。若有多個解決方案，則總是會產生衝突，需要您手動解決。如果衝突的解決涉及到廠商或架構的變更，則也需要手動解決。按一下<guimenu>接受</guimenu>在軟體管理員中套用所有變更後，即會顯示自動解析器觸發之所有動作的綜覽，您需要對其進行確認。
   </para>
   <para>
    依預設，系統會自動檢查相依性。每當您變更了套件狀態 (例如，將套件標記為待安裝或待移除)，系統就會執行該檢查。這種檢查一般都是有用的，但當您手動解決相依性衝突時會帶來很多麻煩。若要停用此功能，請取消核取<menuchoice><guimenu>相依性</guimenu><guimenu>自動檢查</guimenu></menuchoice>。按一下<menuchoice> <guimenu>相依性</guimenu> <guimenu>立刻檢查</guimenu></menuchoice>可手動執行相依性檢查。當您按一下<guimenu>接受</guimenu>確認選擇時，系統都會執行一致性檢查。
   </para>
   <para>
    若要檢閱某個套件的相依性，請在該套件上按滑鼠右鍵，然後選擇<guimenu>顯示解析程式資訊</guimenu>。顯示相依性的映射即會開啟。已經安裝的套件顯示在綠色框架中。
   </para>
   <note>
    <title>手動解決套件衝突</title>
    <para>
     如果您不具備豐富的經驗，請在處理套件衝突時遵循 YaST 給出的建議，否則您可能無法解決衝突。請注意，您所做的每一個變更，都可能觸發其他衝突，因此很容易造成衝突數量的不斷上升。如果出現該情況，請<guimenu>取消</guimenu>軟體管理員，並<guimenu>放棄</guimenu>所有變更，然後重新開始。
    </para>
   </note>
   <figure id="fig.y2.sw.packconfl">
    <title>軟體管理員的衝突管理</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="yast2_package_conflict.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="yast2_package_conflict.png" width="65%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>
 </sect1>
 
 <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="yast2_sw_repo.xml" parse="xml"/>
 <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="opensuseupdater.xml" parse="xml"/>
</chapter>
