<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sect1 PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN"
"novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<sect1 xml:base="yast2_manpart.xml" id="sec-yast2-i-y2-part-expert">
 <title>使用 YaST 磁碟分割程式</title><indexterm> <primary>YaST</primary><secondary>磁碟分割</secondary></indexterm><indexterm><primary>分割區</primary><secondary>建立</secondary></indexterm>

 <para>
  您可使用如 <xref linkend="fig-yast2-i-y2-disk-part"/> 所示的進階磁碟分割程式，手動修正一個或多個硬碟分割區。您可以新增、刪除、編輯分割區並調整其大小，也可以存取 Soft RAID 和 LVM 組態。
 </para>

 <warning>
  <title>重新分割執行中系統</title>
  <para>
   儘管可以在系統執行時對其進行重新分割，但這樣做極有可能造成資料遺失。儘量避免重裝分割安裝的系統，若要這樣做，請始終在開始之前對資料執行完整的備份。
  </para>
 </warning>

 <figure id="fig-yast2-i-y2-disk-part">
  <title>YaST 磁碟分割程式</title>
  <mediaobject>
   <imageobject role="fo">
    <imagedata fileref="i_y2_disk_part.png" width="75%" format="PNG"/>
   </imageobject>
   <imageobject role="html">
    <imagedata fileref="i_y2_disk_part.png" width="75%" format="PNG"/>
   </imageobject>
  </mediaobject>
 </figure>

 <tip arch="zseries" os="sles">
  <title>IBM System z：裝置名稱</title>
  <para>
   IBM System z 只能辨識 DASD 和 SCSI 硬碟。不支援 IDE 硬碟。所以這些裝置會在分割區表上顯示為 <filename>dasda</filename> 或 <filename>sda</filename> 做為第一個識別的裝置。
  </para>
 </tip>

 <para>
  所有已連接硬碟上的現有或建議分割區都顯示在 YaST<guimenu>進階磁碟分割程式</guimenu>對話方塊的<guimenu>可用儲存</guimenu>清單中。整個硬碟都列為不含編號的裝置，例如 <filename>/dev/sda</filename><phrase arch="zseries" os="sles"> (或 <filename>/dev/dasda</filename>)</phrase>。各分割區則列示為這些裝置的一部分，例如 <filename>/dev/sda1</filename><phrase arch="zseries" os="sles"> (或 <filename>/dev/dasda1</filename>)</phrase>。此外還會顯示硬碟的大小、類型、加密狀態、檔案系統和掛接點以及分割區。定點描述分割區出現在 Linux 檔案系統樹狀結構上的位置。
 </para>

 <para>
  <guimenu>系統檢視</guimenu>右側有幾個功能檢視窗。使用這些檢視窗可以收集有關現有儲存組態的資訊，也可以設定 <literal>RAID</literal>、<literal>磁碟區管理</literal>、<literal>加密檔案</literal>等功能，或者檢視包含其他功能的檔案系統，如 <literal>BTRFS</literal>、<literal>NFS</literal> 或 <literal>TMPFS</literal>。
 </para>

 <para>
  安裝期間若執行專家對話方塊，同時會自動選取並列出所有可用的硬碟空間。若要提供更多磁碟空間給 <phrase role="productname"><phrase os="sles">SUSE® Linux Enterprise Server</phrase></phrase>，請從清單的底部開始往上釋放所需的空間 (從硬碟的最後一個分割區開始至第一個)。
 </para>

 <sect2 id="sec-IB-part-typen">
  <title>分割區類型</title><indexterm> <primary>分割區</primary> <secondary>類型</secondary> </indexterm>
  <tip arch="zseries" os="sles">
   <title>IBM System z：硬碟</title>
   <para>
    在 IBM System z 平台上，SUSE Linux Enterprise Server 支援 SCSI 硬碟和 DASD (直接存取儲存裝置)。SCSI 磁碟分割描述如下，DASD 分割表不可以含有超過三個的分割登錄。
   </para>
  </tip>
  <para>
   每一個硬碟都有一個分割區表，可以儲存四筆登錄。分割區表中的每個項目對應一個主分割區或延伸分割區。不過，只能出現一個延伸分割區項目。
  </para>
  <para>
   主分割區僅由指派給特定作業系統之連續範圍的磁柱 (實體磁碟區) 組成。如果存在主分割區，每個硬碟最多只能劃分成四個分割區，因為分割區表中無法再容納更多分割區。這就是使用延伸分割區的原因。延伸分割區也是由連續範圍的磁柱組成，但延伸分割區又可以再劃分為<emphasis>邏輯分割區</emphasis>。邏輯分割區不需要在分割區表中登錄。換句話說，延伸分割區是邏輯分割區的容器。
  </para>
  <para>
   如果您需要四個以上的分割區，請建立延伸分割區做為四個分割區之一。這個延伸分割區應佔據剩餘的所有可用磁柱範圍。接著在延伸分割區中建立多個邏輯分割區即可。邏輯分割區的最大數量為 63 (與磁碟類型無關)。Linux 對於使用的分割區類型沒有限制。主分割區與邏輯分割區均可正常運作。
  </para>
  <tip os="sles">
   <title>GPT 分割區表</title>
   <para>
    如果您需要在一個硬碟上建立 4 個以上的主要分割區，必須使用 GPT 分割區類型。此類型可以不受主要分割區數量的限制，並支援大於 2 TB 的分割區。
   </para>
   <para>
    若要使用 GPT，請執行 YaST 磁碟分割程式，接著按一下<guimenu>系統檢視</guimenu>中相應的磁碟名稱，然後選擇<menuchoice><guimenu>進階</guimenu> <guimenu>建立新分割區表</guimenu> <guimenu>GPT</guimenu></menuchoice>。
   </para>
  </tip>
 </sect2>

 <sect2 id="sec-yast2-i-y2-part-expert-newpart">
  <title>建立分割區</title><indexterm> <primary>分割區</primary> <secondary>建立</secondary> </indexterm>
  <para>
   若要從頭開始建立分割區，請選取<guimenu>硬碟</guimenu>，然後選取具有可用空間的硬碟。實際的修改可以在<guimenu>分割區</guimenu>索引標籤中進行。
  </para>
  <procedure>
   <step performance="required">
    <para>
     選取<guimenu>新增</guimenu>，然後指定分割區類型 (主要分割區或延伸分割區)。最多可建立四個主分割區，或是三個主分割區和一個延伸分割區。在延伸分割區內建立數個邏輯分割區 (請參閱<xref linkend="sec-IB-part-typen"/>)。
    </para>
   </step>
   <step performance="required">
    <para>
     指定新分割區的大小。您可以選擇佔用所有未分割的可用空間，也可以輸入一個自定大小值。
    </para>
   </step>
   <step performance="required">
    <para>
     選取要使用的檔案系統與掛接點。YaST 建議為每個建立的分割區都準備一個掛接點。若要使用另一種掛接方式，例如按標籤掛接，請選取<guimenu>Fstab 選項</guimenu>。如需支援之檔案系統的詳細資訊，請參閱 <systemitem class="username">root</systemitem>。
    </para>
   </step>
   <step performance="required">
    <para>
     依您的安裝需求，指定其他檔案系統選項。例如，如果您需要持續性裝置名稱，則必須這樣做。關於可用選項的詳細資料，請參閱 <xref linkend="sec-yast2-i-y2-part-expert-options"/>。
    </para>
   </step>
   <step performance="required">
    <para>
     按一下<guimenu>完成</guimenu>套用您的分割區設定，並離開磁碟分割模組。
    </para>
    <para>
     若您在安裝過程中建立分割區，會回到安裝綜覽畫面。
    </para>
   </step>
  </procedure>
  <sect3 id="yast2-btrfs">
   <title>Btrfs 磁碟分割</title>
   <para>
    如果您要使用 Btrfs (如需 Btrfs 的詳細資訊，請參閱<xref linkend="cha-snapper"/><phrase os="sles">以及<xref linkend="filesystems"/></phrase>) 做為新安裝系統的預設檔案系統，請在<guimenu>安裝設定</guimenu>螢幕上按一下<guimenu>磁碟分割</guimenu>，然後核取<guimenu>將 Btrfs 用做預設檔案系統</guimenu>。安裝系統便會建議建立格式化為 Ext3 檔案系統的 <filename>/boot</filename> 分割區，以及格式化為 Btrfs 的根 <filename>/</filename> 分割區；該根分割區擁有一組預設的子磁碟區，您日後可以使用<guimenu>進階磁碟分割程式</guimenu>工具加以修改。
   </para>
   <para>
    該根檔案系統是預設的子磁碟區，不會列在已建立的子磁碟區清單中。做為預設 Btrfs 子磁碟區，它可以像一般檔案系統一樣進行掛接。
   </para>
   <para>
    您可以建立 Btrfs 子磁碟區的快照 - 可以手動建立，也可以根據系統事件自動建立。例如，當變更檔案系統時，<command>zypper</command> 會呼叫 <command>snapper</command> 指令以在變更前後建立快照。如果您對 <command>zypper</command> 進行的變更不滿意，並想還原到先前的狀態，則此功能非常有用。由於 <command>zypper</command> 呼叫的 <command>snapper</command> 預設會建立<emphasis>根</emphasis>檔案系統的快照，因此有必要排除對特定目錄建立快照，具體視這些目錄所保存的資料性質而定。而這就是 YaST 建議建立下列獨立子磁碟區的原因。
   </para>
   <variablelist>
    <title>建議的 Btrfs 子磁碟區</title>
    <varlistentry>
     <term><filename>/tmp /var/tmp /var/run</filename>
     </term>
     <listitem>
      <para>
       包含頻繁變更之內容的目錄。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><filename>/var/spool</filename>
     </term>
     <listitem>
      <para>
       包含使用者資料，例如郵件。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><filename>/var/log</filename>
     </term>
     <listitem>
      <para>
       包含系統和應用程式的記錄檔案，這些檔案永遠不會得到復原。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><filename>/var/crash</filename>
     </term>
     <listitem>
      <para>
       包含已毀損核心的記憶體傾印。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><filename>/srv</filename>
     </term>
     <listitem>
      <para>
       包含屬於 FTP 和 HTTP 伺服器的資料檔案。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><filename>/opt</filename>
     </term>
     <listitem>
      <para>
       包含協力廠商軟體。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <tip>
    <title>Btrfs 分割區的大小</title>
    <para>
     因為已儲存的快照需要更多磁碟空間，因此建議為 Btrfs 分割區保留的空間比不支援快照之分割區 (例如 Ext3) 的空間多。對於具有建議子磁碟區的根 Btrfs 分割區，建議大小為 20GB。
    </para>
   </tip>
   <sect4 id="yast2-btrfs-yast">
    <title>使用 YaST 管理 Btrfs 子磁碟區</title>
    <para>
     現在，您可以使用 YaST<guimenu>進階磁碟分割程式</guimenu>模組來管理 Btrfs 分割區的子磁碟區。您可以新增子磁碟區或移除現有的子磁碟區。
    </para>
    <procedure>
     <title>使用 YaST 管理的 Btrfs 子磁碟區</title>
     <step performance="required">
      <para>
       透過<menuchoice><guimenu>系統</guimenu><guimenu>磁碟分割程式</guimenu></menuchoice>啟動 YaST<guimenu>進階磁碟分割程式</guimenu>。
      </para>
     </step>
     <step performance="required">
      <para>
       在左側<guimenu>系統檢視</guimenu>窗格中選擇<guimenu>BTRFS</guimenu>。
      </para>
     </step>
     <step performance="required">
      <para>
       選取需要管理其子磁碟區的 Btrfs 分割區，然後按一下<guimenu>編輯</guimenu>。
      </para>
     </step>
     <step performance="required">
      <para>
       按一下<guimenu>子磁碟區處理</guimenu>。隨即可以看到所選 Btrfs 分割區之所有現有子磁碟區的清單。您可能會注意到有許多 <literal>@/.snapshots/xyz/snapshot</literal> 項目，其中的每個子磁碟區都屬於一個現有快照。
      </para>
     </step>
     <step performance="required">
      <para>
       根據您是要新增還是移除子磁碟區，執行下列動作：
      </para>
      <substeps performance="required">
       <step performance="required">
        <para>
         若要移除子磁碟區，請從<guimenu>現有子磁碟區</guimenu>清單中選取該子磁碟區，然後按一下<guimenu>移除</guimenu>。
        </para>
       </step>
       <step performance="required">
        <para>
         若要新增子磁碟區，請在<guimenu>新子磁碟區</guimenu>文字欄位中輸入其名稱，然後按一下<guimenu>新增</guimenu>。
        </para>
        <figure id="fig-yast2-btrfs-subvolumes">
         <title>YaST 磁碟分割程式中的 Btrfs 子磁碟區</title>
         <mediaobject>
          <imageobject role="fo">
           <imagedata fileref="yats2_btrfs_subvolumes.png" width="75%" format="PNG"/>
          </imageobject>
          <imageobject role="html">
           <imagedata fileref="yats2_btrfs_subvolumes.png" width="75%" format="PNG"/>
          </imageobject>
         </mediaobject>
        </figure>
       </step>
      </substeps>
     </step>
     <step performance="required">
      <para>
       依次按一下<guimenu>確定</guimenu>以及<guimenu>完成</guimenu>進行確認。
      </para>
     </step>
     <step performance="required">
      <para>
       按一下<guimenu>完成</guimenu>以結束磁碟分割程式。
      </para>
     </step>
    </procedure>
   </sect4>
  </sect3>
 </sect2>

 <sect2 id="sec-yast2-i-y2-part-expert-options">
  <title>編輯分割</title><indexterm> <primary>分割區</primary> <secondary>分割區</secondary> </indexterm>
  <para>
   在建立一個新的分割區或修改一個現有分割區時，可設定多項參數。對於新的分割區，YaST 設定的預設參數通常已可滿足需求，無需做任何修改。若要手動編輯您的分割設定，請如下操作：
  </para>
  <procedure>
   <step performance="required">
    <para>
     選擇分割區。
    </para>
   </step>
   <step performance="required">
    <para>
     按一下<guimenu>編輯</guimenu>，編輯分割區並設定參數：
    </para>
    <variablelist>
     <varlistentry>
      <term>檔案系統 ID</term>
      <listitem>
       <para>
        <indexterm><primary>分割區</primary><secondary>LVM</secondary></indexterm><phrase os="sles"/><indexterm><primary>分割區</primary><secondary>RAID</secondary></indexterm>即使您在此階段不想要格式化分割區，也請指定一個檔案系統 ID 給它，以確保分割區的登錄正確。一般值為 <guimenu>Linux</guimenu>、<guimenu>Linux swap</guimenu>、<guimenu>Linux LVM</guimenu> 和 <guimenu>Linux RAID</guimenu>。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>
       檔案系統
      </term>
      <listitem>
       <para>
        <indexterm> <primary>檔案系統</primary> <secondary>變更</secondary> </indexterm> <indexterm> <primary>分割區</primary> <secondary>重新格式化</secondary> </indexterm> 若要變更分割區的檔案系統，請按一下<guimenu>格式化分割區</guimenu>，並在<guimenu>檔案系統</guimenu>清單中選取一種檔案系統類型。
       </para>
       <para>
        <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 支援多種類型的檔案系統。Btrfs 擁有多項進階功能，是一款出色的 Linux 檔案系統。它支援寫入時複製功能、可以建立快照、可以跨多個裝置、可以設定子磁碟區，並支援其他多種有用的技術。ReiserFS、JFS、XFS 和 Ext3  是記錄檔案系統。利用作業時記錄的寫入程序，這些檔案系統可以在系統當機後非常迅速地復原系統。Ext2 不是一個記錄檔案系統，但對於較小的分割區而言已足夠，因為它不需要很多磁碟空間用於管理。
       </para>
       <note>
        <title>對 Ext4 檔案系統的支援</title>
        <para>
         由於 Btrfs 已證實在效能與擴充性方面都優於 Ext4，因此 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 對 Ext4 分割區僅支援唯讀存取權限。不過，只要安裝了 <systemitem>ext4-writeable</systemitem> 套件，您仍然可以在讀寫模式下存取 Ext4 分割區。請注意，此操作不受支援，並會對核心產生影響。
        </para>
       </note>
       <para>
        Swap 是一種允許分割區做為虛擬記憶體的特殊格式。建立的交換分割區至少要有 256 MB。但是，如果交換空間已用盡，可以考慮為系統新增更多記憶體，不要新增更多交換空間。
       </para>
       <warning>
        <title>變更檔案系統</title>
        <para>
         變更檔案系統和重新格式化分割區都會刪除分割區中的所有資料，而且無法復原。
        </para>
       </warning>
       <para>
        如需各種檔案系統的詳細資料，請參閱《<emphasis>儲存管理指南</emphasis>》。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>
       加密裝置 
      </term>
      <listitem>
       <para>
        如果您啟用加密，所有資料都會以加密格式寫入硬碟。這可以使敏感資料更加安全，但會降低系統速度，因為加密處理需要一些時間。如需檔案系統加密的詳細資訊，請參閱<xref linkend="cha-security-cryptofs"/>。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>
       掛接點
      </term>
      <listitem>
       <para>
        指定檔案系統樹狀結構中用於掛接分割區的目錄。可以選取 YaST 提供的建議，或輸入任何其他名稱。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>
       Fstab 選項
      </term>
      <listitem>
       <para>
        指定全域檔案系統管理檔案 (<filename>/etc/fstab</filename>) 中包含的各個參數。預設值應足以滿足大多數安裝需求。例如，您可以將檔案系統的識別資訊由裝置名稱變更為磁碟區標籤。在磁碟區標籤中，您可以使用除 <literal>/</literal> 和空格以外的所有字元。
       </para>
       <para>
        若要取得永久裝置名稱，請使用掛接選項：<guimenu>裝置 ID</guimenu>、<guimenu>UUID</guimenu> 或<guimenu>標籤</guimenu>。在 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 中，預設會啟用永久的裝置名稱。
       </para>
       <note os="sles" arch="zseries">
        <title>IBM System z：依路徑掛接</title>
        <para>
         由於在使用磁碟至磁碟的複製時，依 ID 掛接會在 IBM System z 上造成問題，所以預設會在 IBM System z 上依 <filename>/etc/fstab</filename> 中的路徑掛接裝置。
        </para>
       </note>
       <para>
        如果想要按標籤掛接分割區，需要在<guimenu>磁碟區標籤</guimenu>文字項目中定義一個標籤。例如，您可以對要掛接到 <filename>/home</filename> 的分割區使用分割區標籤 <literal>HOME</literal>。
       </para>
       <para>
        若要在檔案系統上使用配額，請使用掛接選項<guimenu>啟用配額支援</guimenu>。您必須先執行此動作，然後才能在 YaST 的<guimenu>使用者管理</guimenu>模組中為使用者定義配額。如需如何設定使用者配額的詳細資訊，請參閱<xref linkend="sec-y2-userman-adv-quota"/>。
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </step>
   <step performance="required">
    <para>
     選取<guimenu>完成</guimenu>以儲存這些變更。
    </para>
   </step>
  </procedure>
  <note>
   <title>調整檔案系統的大小</title>
   <para>
    若要調整現有檔案系統的大小，請選取分割區，然後使用<guimenu>調整大小</guimenu>。請注意，如果分割區已裝上，則無法調整其大小。若要調整分割區的大小，請在執行磁碟分割程式之前先卸載相應的分割區。
   </para>
  </note>
 </sect2>

 <sect2 id="sec-yast2-i-y2-part-expert-options2">
  <title>進階使用者選項</title>
  <para>
   在<guimenu>系統檢視</guimenu>窗格中選取一個硬碟裝置 (例如<guimenu>sda</guimenu>) 後，即可存取<guimenu>進階磁碟分割程式</guimenu>視窗右下方的<guimenu>進階...</guimenu>功能表。該功能表包含下列指令︰
  </para>
  <variablelist>
   <varlistentry>
    <term>建立新分割區表</term>
    <listitem>
     <para>
      此選項可用於在選定裝置上建立新的分割區表。
     </para>
     <warning>
      <title>建立新分割區表</title>
      <para>
       若在裝置上建立新的分割區表，就會移除該裝置上的所有分割區及其資料，而且無法復原。
      </para>
     </warning>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>複製此磁碟</term>
    <listitem>
     <para>
      此選項可用於將裝置的分割區配置 (而不是資料) 複製到其他可用的磁碟裝置。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect2>

 <sect2 id="sec-yast2-i-y2-part-expert-configure-options">
  <title>進階選項</title>
  <para>
   選取電腦的主機名稱 (<guimenu>系統檢視</guimenu>窗格中樹狀結構的頂層) 後，可以存取<guimenu>進階磁碟分割程式</guimenu>視窗右下方的<guimenu>設定...</guimenu>功能表。該功能表包含下列指令︰
  </para>
  <variablelist>
   <varlistentry>
    <term>設定 iSCSI</term>
    <listitem>
     <para>
      若要透過 IP 阻擋裝置存取 SCSI，首先要設定 iSCSI。這樣即可在主分割區清單中列出更多可用的裝置。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>設定多重路徑</term>
    <listitem>
     <para>
      此選項可用於為受支援的大量儲存裝置設定多重路徑增強功能。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect2>

 <sect2 id="sec-yast2-i-y2-part-expert-info">
  <title>更多磁碟分割提示</title>
  <para>
   下一節包含一些關於磁碟分割的提示和祕訣，可協助您在設定系統時做出正確的決定。
  </para>
  <tip>
   <title>磁柱編號</title>
   <para>
    請注意，不同的磁碟分割工具會從 <literal>0</literal> 或 <literal>1</literal> 開始統計分割區的磁柱數量。在計算磁柱的數量時，應該總是將最後一個磁柱號與第一個磁柱號相減再加一。
   </para>
  </tip>

  <sect3>
   <title>使用<literal>交換</literal></title>
   <para>
    使用交換可以延伸可用的實體記憶體。這樣可以使用的記憶體就比可用的實體 RAM 要多。對於 2.4.10 之前的核心，其記憶體管理系統需要使用交換做為一種安全措施。因此如果使用交換後的記憶體沒有達到 RAM 大小的兩倍，就會影響系統效能。這些限制已不存在。
   </para>
   <para>
    Linux 使用稱為<quote>近期最少使用</quote>(LRU) 的頁面來選取可從記憶體移至磁碟的頁面。因此，執行中的應用程式可以使用更多記憶體，快取也更加順暢。
   </para>
   <para>
    如果應用程式嘗試配置所允許的最大記憶體，則交換可能會出現問題。主要分為以下三種情況：
   </para>
   <variablelist>
    <varlistentry>
     <term>沒有交換的系統</term>
     <listitem>
      <para>
       應用程式獲得所允許的最大記憶體。系統會釋放所有快取，導致其他所有執行中的應用程式變慢。几分鐘後，核心的記憶體不足終止機制即會啟動，然後將該程序停止。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>具備中等大小交換 (128 MB-512 MB) 的系統</term>
     <listitem>
      <para>
       起先，系統的效能會降低，就像沒有交換的系統一樣。當所有實體 RAM 都配置完畢後，就會使用交換空間。此時，系統變得非常慢，並且無法從遠端執行指令。根據執行交換空間之硬碟的速度，系統將保持此狀況約 10 到 15 分鐘，直到記憶體不足終止機制將此問題解決為止。請注意，如果電腦需要執行<quote>暫停寫入到磁碟</quote>，則您需要一定的交換容量。在此情況下，交換空間應足夠大，才能容納來自記憶體的必要資料 (512 MB-1GB)。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>具備大量交換的系統 (數 GB)</term>
     <listitem>
      <para>
       在此情況下，最好不要執行無法控制且交換空間過大的應用程式。若使用此類應用程序，系統將需要數小時的時間才能復原。在此過程中，其他程序可能會逾時和出錯，使系統陷入未知狀態，即使停止了錯誤程序也是如此。在此情況下，請強制重新開機，使系統重新執行。只有在您有依賴於此功能的應用程式時，大量交換才有用。這類應用程式 (例如資料庫或圖形處理程式) 通常可以選擇直接使用硬碟空間以符合它們的需要。建議使用此選項，而不是使用大量交換空間。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    如果您的系統未失控，但在一定的時間後需要更多交換，則可以線上延伸交換空間。如果您為交換空間準備了一個分割區，只需使用 YaST 新增此分割區。如果您沒有可用的分割區，您也只需使用交換檔來延伸交換。生成交換檔案的速度會低於分割區，但與實體 RAM 相比，二者速度均緩慢至極，因此實際差異可忽略不計。
   </para>
   <procedure>
    <title>手動新增交換檔</title>
    <para>
     若要在正在執行的系統中新增交換檔，請按照下列步驟進行：
    </para>
    <step performance="required">
     <para>
      在系統中建立一個空檔案。例如，若要在 <filename>/var/lib/swap/swapfile</filename> 中新增有 128 MB 交換的交換檔，請使用以下指令：
     </para>
<screen>mkdir -p /var/lib/swap
dd if=/dev/zero of=/var/lib/swap/swapfile bs=1M count=128</screen>
    </step>
    <step performance="required">
     <para>
      使用以下指令啟始化此交換檔
     </para>
<screen>mkswap /var/lib/swap/swapfile</screen>
    </step>
    <step performance="required">
     <para>
      使用以下指令啟動交換
     </para>
<screen>swapon /var/lib/swap/swapfile</screen>
     <para>
      若要停用此交換檔，請使用以下指令
     </para>
<screen>swapoff /var/lib/swap/swapfile</screen>
    </step>
    <step performance="required">
     <para>
      使用以下指令檢查目前可用的交換空間
     </para>
<screen>cat /proc/swaps</screen>
     <para>
      請注意，現在這只是暫時的交換空間，下次重新開機後就不再可用。
     </para>
    </step>
    <step performance="required">
     <para>
      若要永久啟用此交換檔，請將下行新增到 <filename>/etc/fstab</filename>︰
     </para>
     
     
<screen>/var/lib/swap/swapfile swap swap defaults 0 0</screen>
    </step>
   </procedure>
  </sect3>
 </sect2>

 <sect2>
  <title>磁碟分割與 LVM</title>
  <para>
   在<guimenu>進階磁碟分割程式</guimenu>中，按一下<guimenu>系統檢視</guimenu>窗格中的<guimenu>磁碟區管理</guimenu>項目，可存取 LVM 組態。但是，如果系統中已存在有效的 LVM 組態，則一旦輸入工作階段的啟始 LVM 組態，它就會自行啟動。在此情況下，任何磁碟只要含有分割區 (屬於某個已啟動的磁碟區群組)，就無法重新分割。硬碟上只要有分割區正在使用中，Linux 核心就無法重新讀取其修改過的分割區表。如果系統中已存在有效的 LVM 組態，就不需要進行實體重新分割，只要變更邏輯磁碟區的組態即可。
  </para>
  <para>
   在實體磁碟區 (PV) 的開頭，有關磁碟區的資訊會寫入分割區。若要為了其他非 LVM 的使用而要重新使用這類分割區，建議刪除此磁碟區的開始部分。例如，在 VG <literal>system</literal> 與 PV <filename>/dev/sda2</filename> 中，使用 <command>dd</command><option>if=/dev/zero of=/dev/sda2 bs=512 count=1 </option>指令，即可完成這個動作。
  </para>
  <warning>
   <title>開機的檔案系統</title>
   <para>
    開機的檔案系統 (root 檔案系統或 <filename>/boot</filename>) 不得儲存在 LVM 邏輯磁碟區中。請另外儲存在一般的實體分割區中。
   </para>
  </warning>
  <para os="sles">
   如需 LVM 的詳細資料，請參閱<xref linkend="stor-admin"/>。
  </para>
 </sect2>
</sect1>
