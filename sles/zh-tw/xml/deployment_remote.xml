<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE chapter PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN"
"novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<chapter xml:base="deployment_remote.xml" role="General" id="cha-deployment-remoteinst">
 <title>遠端安裝</title>
 <para>
  可以使用不同的方法安裝 <phrase role="productname"><phrase os="sles">SUSE® Linux Enterprise Server</phrase></phrase>。除了<xref linkend="cha-inst"/>中介紹的常見媒體安裝方式外，也可以選擇使用各種基於網路的方式，甚至採用完全自動的方式來安裝 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>。
 </para>
 <para>
  每一個方法的簡介都透過兩個簡短的核對清單來進行：一個列出該方法的先決條件，另一個則說明基本程序。接著會介紹用於每個安裝方式的所有技術的詳細資訊。
 </para>
 <note>
  <para>
   以下幾節中將要存放新安裝之 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 的系統稱做<emphasis>目標系統</emphasis>或<emphasis>安裝目標</emphasis>。<emphasis>儲存庫</emphasis> (以前稱為<quote>安裝來源</quote>) 這個名詞則是用來表示所有安裝資料的來源。其中包括實體媒體 (例如 CD 和 DVD) 以及您網路中發佈安裝資料的網路伺服器。
  </para>
 </note>
 <sect1 id="sec-deployment-remoteinst-scenario">
  <title>遠端安裝的安裝方式</title>

  <para>
   此章節將介紹最常用於遠端安裝的安裝方式。不論使用那個方式，都必須仔細檢查先決條件清單，並依照該安裝方式中說明的程序進行安裝。如果需要某個特定步驟的詳細說明，請連接至每個步驟中提供的連結以取得說明。
  </para>

  <important>
   <para>
    X Window System 的組態不屬於任何遠端安裝程序中的一個部分。完成安裝後，請以 <systemitem class="username">root</systemitem> 身份登入目標系統、輸入 <command>telinit 3</command>，接著啟動 SaX2 來設定圖形硬體。
   </para>
  </important>

  <sect2 id="sec-deployment-remoteinst-scenario-vncstat">
   <title>透過 VNC 執行簡易遠端安裝 — 靜態網路組態</title>
   <para>
    此安裝類型仍需要某個程度的實體存取權限，以便存取並啟動目標系統來進行安裝。安裝本身完全受控於遠端工作站，遠端工作站會使用 VNC 連接至安裝程式來進行安裝。這時也必須執行像<xref linkend="cha-inst"/> 所述手動安裝時的使用者互動。
   </para>
   <para>
    使用此安裝類型時，請確定已符合以下需求：
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      遠端儲存庫：NFS、HTTP、FTP 或具有有效網路連接的 SMB。
     </para>
    </listitem>
    <listitem>
     <para>
      執行網路連接的目標系統。
     </para>
    </listitem>
    <listitem>
     <para>
      具有有效網路連接的控制系統以及 VNC 檢視器軟體，或啟用了 Java 的瀏覽器 (Firefox、Konqueror、Internet Explorer、Opera 等)。
     </para>
    </listitem>
    <listitem>
     <para>
      用於啟動目標系統的實體開機媒體 (CD、DVD 或 USB 隨身碟)。
     </para>
    </listitem>
    <listitem>
     <para>
      已指定給儲存庫和控制系統的有效靜態 IP 位址。
     </para>
    </listitem>
    <listitem>
     <para>
      已指定到目標系統的有效靜態 IP 位址。
     </para>
    </listitem>
    <listitem>
     <para>
      透過 VNC 安裝時，不會設定 X11，且輸出將重新導向至本地機器。若要使用 SaX2，請使用 <command>export DISPLAY=:0 &amp;&amp; sax:2 -a -r</command>
     </para>
    </listitem>
   </itemizedlist>
   <para>
    若要執行此安裝類型，請按照下列步驟進行：
   </para>
   <procedure id="proc-deployment-remoteinst-scenario-vncstat">
    <step performance="required">
     <para>
      依照<xref linkend="sec-deployment-remoteinst-instserver"/> 中的說明設定儲存庫。選擇 NFS、HTTP 或 FTP 網路伺服器。若要使用 SMB 儲存庫，請參閱<xref linkend="sec-deployment-remoteinst-instserver-smb"/>。
     </para>
    </step>
    <step performance="required">
     
     <para os="sled;sles">
      使用 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 媒體套件的 DVD1 將目標系統開機。

     </para>
    </step>
    <step performance="required">
     <para>
      目標系統開機螢幕出現時，使用開機選項提示來設定適當的 VNC 選項和儲存庫的位址。如需詳細說明，請參閱 <xref linkend="sec-deployment-remoteinst-bootinst"/>。
     </para>
     <para>
      目標系統會啟動到以文字模式為基礎的環境，並提供網路位址和顯示編號，而 VNC 檢視器應用程式或瀏覽器必須使用這些資訊才可在圖形安裝環境下進行安裝。 VNC 安裝會透過 OpenSLP 自我宣告，如果防火牆允許，您可以使用 Konqueror 在 <literal>service:/</literal> 或 <literal>slp:/</literal> 模式中找到 VNC 安裝。
     </para>
    </step>
    <step performance="required">
     <para>
      接著，請在控制工作站上開啟 VNC 檢視應用程式或網頁瀏覽器，並依照<xref linkend="sec-deployment-remoteinst-monitor-vnc"/> 中的說明連接到目標系統。
     </para>
    </step>
    <step performance="required">
     <para>
      依照<xref linkend="cha-inst"/> 所述步驟執行安裝。目標系統重新開機後，重新連接至目標系統，以完成安裝的最後一個部分。
     </para>
    </step>
    <step performance="required">
     <para>
      完成安裝。
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec-deployment-remoteinst-scenario-vncdyn">
   <title>透過 VNC 執行簡易遠端安裝─動態網路組態</title>
   <para>
    此安裝類型仍需要某個程度的實體存取權限，以便存取並啟動目標系統來進行安裝。請在 DHCP 定義網路組態。安裝本身完全受控於遠端工作站，遠端工作站會使用 VNC 連接至安裝程式，但使用者仍必須與安裝程式進行互動，以實際設定組態。
   </para>
   <para>
    使用此安裝類型時，請確定已符合以下需求：
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      遠端儲存庫：NFS、HTTP、FTP 或具有有效網路連接的 SMB。
     </para>
    </listitem>
    <listitem>
     <para>
      執行網路連接的目標系統。
     </para>
    </listitem>
    <listitem>
     <para>
      執行網路連接的控制系統和 VNC 檢視器軟體，或已啟用 Java 的瀏覽器 (Firefox、Konqueror、Internet Explorer 或 Opera)。
     </para>
    </listitem>
    <listitem>
     
     <para os="sled;sles">
      使用 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 媒體套件的 DVD1 將目標系統開機。
     </para>
    </listitem>
    <listitem>
     <para>
      提供 IP 位址的執行中 DHCP 伺服器。
     </para>
    </listitem>
    <listitem>
     <para>
      透過 VNC 安裝時，不會設定 X11，且輸出將重新導向至本地機器。若要使用 SaX2，請使用 <command>export DISPLAY=:0 &amp;&amp; sax:2 -a -r</command>
     </para>
    </listitem>
   </itemizedlist>
   <para>
    若要執行此安裝類型，請按照下列步驟進行：
   </para>
   <procedure id="proc-deployment-remoteinst-scenario-vncdyn">
    <step performance="required">
     <para>
      依照<xref linkend="sec-deployment-remoteinst-instserver"/> 中的說明設定儲存庫。選擇 NFS、HTTP 或 FTP 網路伺服器。若要使用 SMB 儲存庫，請參閱<xref linkend="sec-deployment-remoteinst-instserver-smb"/>。
     </para>
    </step>
    <step performance="required">
     
     <para os="sled;sles">
      使用 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 媒體套件的 DVD1 將目標系統開機。
     </para>
    </step>
    <step performance="required">
     <para>
      目標系統開機螢幕出現時，使用開機選項提示來設定適當的 VNC 選項和儲存庫的位址。如需詳細說明，請參閱 <xref linkend="sec-deployment-remoteinst-bootinst"/>。
     </para>
     <para>
      目標系統會啟動到以文字模式為基礎的環境，並提供網路位址和顯示編號，而 VNC 檢視器應用程式或瀏覽器必須使用這些資訊才可在圖形安裝環境下進行安裝。 VNC 安裝會透過 OpenSLP 自我宣告，如果防火牆允許，您可以使用 Konqueror 在 <literal>service:/</literal> 或 <literal>slp:/</literal> 模式中找到 VNC 安裝。
     </para>
    </step>
    <step performance="required">
     <para>
      接著，請在控制工作站上開啟 VNC 檢視應用程式或網頁瀏覽器，並依照<xref linkend="sec-deployment-remoteinst-monitor-vnc"/> 中的說明連接到目標系統。
     </para>
    </step>
    <step performance="required">
     <para>
      依照<xref linkend="cha-inst"/> 所述步驟執行安裝。目標系統重新開機後，重新連接至目標系統，以完成安裝的最後一個部分。
     </para>
    </step>
    <step performance="required">
     <para>
      完成安裝。
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec-deployment-remoteinst-scenario-vncpxe">
   <title>透過 VNC 執行遠端安裝 — PXE 開機和網路喚醒功能</title>
   <para>
    此安裝類型為完全自動安裝。目標機器將經由遠端啟動。使用者只需在實際安裝時才需要與安裝程式進行互動。此方法適用於跨網站部署。
   </para>
   <para>
    若要執行此安裝類型，請確定已符合以下需求：
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      遠端儲存庫：NFS、HTTP、FTP 或具有有效網路連接的 SMB。
     </para>
    </listitem>
    <listitem>
     <para>
      TFTP 伺服器。
     </para>
    </listitem>
    <listitem>
     <para>
      執行用於您網路的 DHCP 伺服器。
     </para>
    </listitem>
    <listitem>
     <para>
      可以透過 PXE 開機、可連接網路並具有網路喚醒功能的目標系統，且需插入和連接到網路。
     </para>
    </listitem>
    <listitem>
     <para>
      執行網路連接的控制系統和 VNC 檢視器軟體，或已啟用 Java 的瀏覽器 (Firefox、Konqueror、Internet Explorer 或 Opera)。
     </para>
    </listitem>
    <listitem>
     <para>
      透過 VNC 安裝時，不會設定 X11，且輸出將重新導向至本地機器。若要使用 SaX2，請使用 <command>export DISPLAY=:0 &amp;&amp; sax:2 -a -r</command>
     </para>
    </listitem>
   </itemizedlist>
   <para>
    若要執行此安裝類型，請按照下列步驟進行：
   </para>
   <procedure id="proc-deployment-remoteinst-scenario-vncpxe">
    <step performance="required">
     <para>
      依照<xref linkend="sec-deployment-remoteinst-instserver"/> 中的說明設定儲存庫。選擇一個 NFS、HTTP、FTP 網路伺服器，或設定 SMB 儲存庫，詳細步驟說明請參閱<xref linkend="sec-deployment-remoteinst-instserver-smb"/>。
     </para>
    </step>
    <step performance="required">
     <para>
      設定 TFTP 伺服器以存放目標系統所需的開機影像。如需詳細資訊，請參閱<xref linkend="sec-deployment-remoteinst-boot-tftp"/>。
     </para>
    </step>
    <step performance="required">
     <para>
      設定 DHCP 伺服器以向所有機器提供 IP 位址，並向目標系統顯示 TFTP 伺服器的位置。如需詳細資訊，請參閱<xref linkend="sec-deployment-remoteinst-boot-dhcp"/>。
     </para>
    </step>
    <step performance="required">
     <para>
      準備用於 PXE 啟動的目標系統。如需進一步詳細說明，請參閱<xref linkend="sec-deployment-remoteinst-boot-pxeprep"/>。
     </para>
    </step>
    <step performance="required">
     <para>
      使用網路喚醒功能啟動目標系統的開機程序。如需詳細資訊，請參閱<xref linkend="sec-deployment-remoteinst-boot-wol"/>。
     </para>
    </step>
    <step performance="required">
     <para>
      接著，請在控制工作站上開啟 VNC 檢視應用程式或網頁瀏覽器，並依照<xref linkend="sec-deployment-remoteinst-monitor-vnc"/> 中的說明連接到目標系統。
     </para>
    </step>
    <step performance="required">
     <para>
      依照<xref linkend="cha-inst"/> 所述步驟執行安裝。目標系統重新開機後，重新連接至目標系統，以完成安裝的最後一個部分。
     </para>
    </step>
    <step performance="required">
     <para>
      完成安裝。
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec-deployment-remoteinst-scenario-sshstat">
   <title>透過 SSH 執行簡易遠端安裝 — 靜態網路組態</title>
   <para>
    此安裝類型仍需要某個程度的實體存取權限，以便存取並啟動目標系統並決定安裝目標的 IP 位址。安裝本身完全受控於遠端工作站，遠端工作站會使用 SSH 連接至安裝程式。這時也必須執行像<xref linkend="cha-inst"/> 所述一般安裝時的使用者互動。
   </para>
   <para>
    使用此安裝類型時，請確定已符合以下需求：
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      遠端儲存庫：NFS、HTTP、FTP 或具有有效網路連接的 SMB。
     </para>
    </listitem>
    <listitem>
     <para>
      執行網路連接的目標系統。
     </para>
    </listitem>
    <listitem>
     <para>
      執行網路連接和 SSH 用戶端軟體的控制系統。
     </para>
    </listitem>
    <listitem>
     
     <para os="sled;sles">
      使用 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 媒體套件的 DVD1 將目標系統開機。
     </para>
    </listitem>
    <listitem>
     <para>
      已指定給儲存庫和控制系統的有效靜態 IP 位址。
     </para>
    </listitem>
    <listitem>
     <para>
      已指定到目標系統的有效靜態 IP 位址。
     </para>
    </listitem>
    <listitem>
     <para>
      透過 SSH 安裝時，不會設定 X11，且輸出將重新導向至本地機器。若要使用 SaX2，請使用 <command>export DISPLAY=:0 &amp;&amp; sax:2 -a -r</command>
     </para>
    </listitem>
   </itemizedlist>
   <para>
    若要執行此安裝類型，請按照下列步驟進行：
   </para>
   <procedure id="proc-deployment-remoteinst-scenario-sshstat">
    <step performance="required">
     <para>
      依照<xref linkend="sec-deployment-remoteinst-instserver"/> 中的說明設定儲存庫。選擇 NFS、HTTP 或 FTP 網路伺服器。若要使用 SMB 儲存庫，請參閱<xref linkend="sec-deployment-remoteinst-instserver-smb"/>。
     </para>
    </step>
    <step performance="required">
     
     <para os="sled;sles">
      使用 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 媒體套件的 DVD1 將目標系統開機。
     </para>
    </step>
    <step performance="required">
     <para>
      目標系統開機螢幕出現時，使用開機選項提示來設定適當的網路連接參數和儲存庫位址，並啟用 SSH。如需詳細說明，請參閱 <xref linkend="sec-deployment-remoteinst-bootinst-custom"/>。
     </para>
     <para>
      目標系統會啟動到以文字模式為基礎的環境，並提供網路位址，而所有 SSH 用戶端必須使用這些資訊才可在圖形安裝環境下進行安裝。
     </para>
    </step>
    <step performance="required">
     <para>
      接著，請在控制工作站上開啟終端機視窗，並依照<xref linkend="sec-deployment-remoteinst-monitor-ssh-connect"/> 中的說明連接到目標系統。
     </para>
    </step>
    <step performance="required">
     <para>
      依照<xref linkend="cha-inst"/> 所述步驟執行安裝。目標系統重新開機後，重新連接至目標系統，以完成安裝的最後一個部分。
     </para>
    </step>
    <step performance="required">
     <para>
      完成安裝。
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec-deployment-remoteinst-scenario-sshdyn">
   <title>透過 SSH 執行簡易遠端安裝 ─ 動態網路組態</title>
   <para>
    此安裝類型仍需要某個程度的實體存取權限，以便存取並啟動目標系統並決定安裝目標的 IP 位址。安裝本身完全受控於遠端工作站，遠端工作站會使用 SSH 連接至安裝程式，但使用者仍必須與安裝程式進行互動，以實際設定組態。
   </para>
   <note>
    <title>在第 2 步之後避免連接中斷 (安裝)</title>
    <para>
     在網路設定對話方塊中，核取<guimenu>使用 ifup 的傳統方法</guimenu>，並避免使用 NetworkManager。否則，SSH 連接將在安裝期間中斷。安裝完成之後，請將該設定重設為<guimenu>使用 NetworkManager 進行使用者控制</guimenu>。
    </para>
   </note>
   <para>
    使用此安裝類型時，請確定已符合以下需求：
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      遠端儲存庫：NFS、HTTP、FTP 或具有有效網路連接的 SMB。
     </para>
    </listitem>
    <listitem>
     <para>
      執行網路連接的目標系統。
     </para>
    </listitem>
    <listitem>
     <para>
      執行網路連接和 SSH 用戶端軟體的控制系統。
     </para>
    </listitem>
    <listitem>
     <para>
      用於啟動目標系統的實體開機媒體 (CD、DVD 或 USB 隨身碟)。
     </para>
    </listitem>
    <listitem>
     <para>
      提供 IP 位址的執行中 DHCP 伺服器。
     </para>
    </listitem>
    <listitem>
     <para>
      透過 SSH 安裝時，不會設定 X11，且輸出將重新導向至本地機器。若要使用 SaX2，請使用 <command>export DISPLAY=:0 &amp;&amp; sax:2 -a -r</command>
     </para>
    </listitem>
   </itemizedlist>
   <para>
    若要執行此安裝類型，請按照下列步驟進行：
   </para>
   <procedure id="proc-deployment-remoteinst-scenario-sshdyn">
    <step performance="required">
     <para>
      依照<xref linkend="sec-deployment-remoteinst-instserver"/> 中的說明設定儲存庫來源。選擇 NFS、HTTP 或 FTP 網路伺服器。若要使用 SMB 儲存庫，請參閱<xref linkend="sec-deployment-remoteinst-instserver-smb"/>。
     </para>
    </step>
    <step performance="required">
     
     <para os="sled;sles">
      使用 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 媒體套件的 DVD1 將目標系統開機。
     </para>
    </step>
    <step performance="required">
     <para>
      出現目標系統的開機畫面時，請使用開機選項提示來輸入適當的網路連接參數和安裝來源位置，並啟用 SSH。請參閱 <xref linkend="sec-deployment-remoteinst-bootinst-custom"/>，以取得使用這些參數的詳細說明。
     </para>
     <para>
      目標系統會啟動到以文字模式為基礎的環境，並提供網路位址，而所有 SSH 用戶端必須使用這些資訊才可在圖形安裝環境下進行安裝。
     </para>
    </step>
    <step performance="required">
     <para>
      接著，請在控制工作站上開啟終端機視窗，並依照<xref linkend="sec-deployment-remoteinst-monitor-ssh-connect"/> 中的說明連接到目標系統。
     </para>
    </step>
    <step performance="required">
     <para>
      依照<xref linkend="cha-inst"/> 所述步驟執行安裝。目標系統重新開機後，重新連接至目標系統，以完成安裝的最後一個部分。
     </para>
    </step>
    <step performance="required">
     <para>
      完成安裝。
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec-deployment-remoteinst-scenario-sshpxe">
   <title>透過 SSH 執行遠端安裝 — PXE 開機和網路喚醒功能</title>
   <para>
    此安裝類型為完全自動安裝。目標機器將經由遠端啟動。
   </para>
   <para>
    若要執行此安裝類型，請確定已符合以下需求：
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      遠端儲存庫：NFS、HTTP、FTP 或具有有效網路連接的 SMB。
     </para>
    </listitem>
    <listitem>
     <para>
      TFTP 伺服器。
     </para>
    </listitem>
    <listitem>
     <para>
      網路中目前提供靜態 IP 給將要安裝主機的執行中 DHCP 伺服器。
     </para>
    </listitem>
    <listitem>
     <para>
      可以透過 PXE 開機、可連接網路並具有網路喚醒功能的目標系統，且需插入和連接到網路。
     </para>
    </listitem>
    <listitem>
     <para>
      執行網路連接和 SSH 用戶端軟體的控制系統。
     </para>
    </listitem>
    <listitem>
     <para>
      透過 SSH 安裝時，不會設定 X11，且輸出將重新導向至本地機器。若要使用 SaX2，請使用 <command>export DISPLAY=:0 &amp;&amp; sax:2 -a -r</command>
     </para>
    </listitem>
   </itemizedlist>
   <para>
    若要執行此安裝類型，請按照下列步驟進行：
   </para>
   <procedure id="proc-deployment-remoteinst-scenario-sshpxe">
    <step performance="required">
     <para>
      依照<xref linkend="sec-deployment-remoteinst-instserver"/> 中的說明設定儲存庫。選擇 NFS、HTTP 或 FTP 網路伺服器。如需 SMB 儲存庫的組態資訊，請參閱<xref linkend="sec-deployment-remoteinst-instserver-smb"/>。
     </para>
    </step>
    <step performance="required">
     <para>
      設定 TFTP 伺服器以存放目標系統所需的開機影像。如需詳細資訊，請參閱<xref linkend="sec-deployment-remoteinst-boot-tftp"/>。
     </para>
    </step>
    <step performance="required">
     <para>
      設定 DHCP 伺服器以向所有機器提供 IP 位址，並向目標系統顯示 TFTP 伺服器的位置。如需詳細資訊，請參閱<xref linkend="sec-deployment-remoteinst-boot-dhcp"/>。
     </para>
    </step>
    <step performance="required">
     <para>
      準備用於 PXE 啟動的目標系統。如需進一步詳細說明，請參閱<xref linkend="sec-deployment-remoteinst-boot-pxeprep"/>。
     </para>
    </step>
    <step performance="required">
     <para>
      使用網路喚醒功能啟動目標系統的開機程序。如需詳細資訊，請參閱<xref linkend="sec-deployment-remoteinst-boot-wol"/>。
     </para>
    </step>
    <step performance="required">
     <para>
      接著，請在控制工作站上啟動 SSH 用戶端，並連接到目標系統，詳細步驟說明請參閱<xref linkend="sec-deployment-remoteinst-monitor-ssh"/>。
     </para>
    </step>
    <step performance="required">
     <para>
      依照<xref linkend="cha-inst"/> 所述步驟執行安裝。目標系統重新開機後，重新連接至目標系統，以完成安裝的最後一個部分。
     </para>
    </step>
    <step performance="required">
     <para>
      完成安裝。
     </para>
    </step>
   </procedure>
  </sect2>
 </sect1>

 <sect1 id="sec-deployment-remoteinst-instserver">
  <title>安裝保存安裝來源的伺服器</title>



  <para>
   根據做為 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 網路安裝來源的機器上所執行作業系統的不同，伺服器組態有多種選擇。設定安裝伺服器最簡單的方法就是使用 <phrase os="sled;sles">SUSE Linux Enterprise Server <phrase role="productname"><phrase os="sles;sled;slerte">11 SP4</phrase></phrase> 或 </phrase>openSUSE 11.1 及更高版本上的 YaST。
  </para>

  <tip>
   <para>
    您甚至可以將 Microsoft Windows 機器做為部署 Linux 的安裝伺服器。如需詳細資料，請參閱<xref linkend="sec-deployment-remoteinst-instserver-smb"/>。
   </para>
  </tip>

  <sect2 id="sec-deployment-remoteinst-instserver-sles9">
   <title>使用 YaST 設定安裝伺服器</title>
   <para>
    YaST 提供了圖形工具，方便您建立網路儲存庫。它支援 HTTP、FTP 和 NFS 網路安裝伺服器。
   </para>
   <procedure id="proc-deployment-remoteinst-instserver-sles9">
    <step performance="required">
     <para>
      請以 <systemitem class="username">root</systemitem> 身分登入要做為安裝伺服器的機器。
     </para>
    </step>
    
    <step performance="required">
     <para>
      依序啟動<menuchoice><guimenu>YaST</guimenu> <guimenu>其他</guimenu> <guimenu>安裝伺服器</guimenu></menuchoice>。
     </para>
    </step>
    <step performance="required">
     <para>
      選取儲存庫類型 (HTTP、FTP 或 NFS)。之後，系統每次啟動時都會自動啟動選取的服務。如果您的系統上已在執行選取的服務類型，且您要手動設定該伺服器，請選取<guimenu>不要設定任何網路服務</guimenu>選項，停用伺服器服務的自動組態功能。在這兩種情況下，都必須定義安裝資料可用於伺服器上的目錄。
     </para>
    </step>
    <step performance="required">
     <para>
      設定所需的儲存庫類型。這個步驟與伺服器服務的自動組態功能相關。若您停用自動組態功能，則請略過此步驟。
     </para>
     <para>

      為可找到安裝資料所在的 FTP 或 HTTP 伺服器根目錄定義別名。之後，您即可在 <literal>ftp://<replaceable>伺服器 IP</replaceable>/<replaceable>別名</replaceable>/<replaceable>名稱</replaceable></literal> (FTP) 或 <literal>http://<replaceable>伺服器 IP</replaceable>/<replaceable>別名</replaceable>/<replaceable>名稱</replaceable></literal> (HTTP) 下找到儲存庫。<replaceable>名稱</replaceable>代表儲存庫的名稱，可按照以下步驟定義。如果您在上一個步驟中選取 NFS，請定義萬用字元和輸出選項。您可以經由 <literal>nfs://<replaceable>Server-IP</replaceable>/<replaceable>Name</replaceable></literal> 存取 NFS 伺服器。您可以在<xref linkend="cha-nfs"/>中找到 NFS 和輸出選項的詳細說明。
     </para>
     <tip>
      <title>防火牆設定</title>
      <para>
       請確定您伺服器系統的防火牆設定允許 HTTP、NFS 和 FTP 等連接埠上的傳輸。如果目前不允許，請先啟用<guimenu>在防火牆中開啟埠</guimenu>或核取<guimenu>防火牆細節</guimenu>。
      </para>
     </tip>
    </step>
    <step performance="required">
     <para>
      設定儲存庫。將安裝媒體複製到目的地前，請先定義儲存庫的名稱，最好是以產品和版本縮寫做為名稱，以方便記憶。YaST 允許提供媒體的 ISO 影像，不需要使用安裝 DVD 的副本。如果您要製作 ISO 影像，請啟用相關的核取方塊並指定本地存放 ISP 檔案的目錄路徑。根據將要使用此安裝伺服器發佈的產品而定，可能需要新增更多的附加產品 CD 或 Service Pack CD 做為額外的儲存庫。若要透過 OpenSLP 宣告網路中的安裝伺服器，請啟用適當的選項。
     </para>
     <tip>
      <para>
       若您的網路設定支援此選項，再考慮透過 OpenSLP 宣告您的儲存庫。如此才可以確保每台目標機器皆可進入該網路安裝路徑。只有使用 SLP 開機選項，目標系統才會啟動，並會尋找網路儲存庫，且您不需進一步設定任何組態。如需此選項的詳細資訊，請參閱<xref linkend="sec-deployment-remoteinst-bootinst"/>。
      </para>
     </tip>
    </step>
    <step performance="required">
     <para>
      上傳安裝資料。設定安裝伺服器最冗長的步驟就是複製實際的安裝媒體。請依照 YaST 要求的順序插入媒體，接著等待複製程式結束。複製完來源後，請選取<guimenu>完成</guimenu>返回現有儲存庫的綜覽頁面，並關閉組態。
     </para>
     <para>
      現在，您已完成安裝伺服器的設定，並可開始提供服務。之後每當啟動系統時，將會自動啟動該伺服器。您將不需再進行任何操作。如果您一開始就使用 YaST 停用選定網路服務的自動組態功能，那麼您只需正確地設定和啟動此服務即可。
     </para>
    </step>
   </procedure>
   <para>
    若要停用儲存庫，請選取要移除的儲存庫，再選取<guimenu>刪除</guimenu>。安裝資料會從系統移除。若要停用網路服務，請使用相關的 YaST 模組。
   </para>
   <para>
    如果您的安裝伺服器需要提供多個產品的產品版本的安裝資料，那麼請啟動 YaST 安裝伺服器模組，並在現有儲存庫的綜覽頁面中選取<guimenu>新增</guimenu>來設定新的儲存庫。
   </para>
  </sect2>

  <sect2 id="sec-deployment-remoteinst-instserver-nfs">
   <title>手動設定 NFS 儲存庫</title>
   
   <para>
    基本上，設定 NFS 安裝來源只需兩個步驟。第一個步驟是，建立保存安裝資料的目錄結構，並將安裝媒體複製到此結構中。第二個步驟是，將包存安裝資料的目錄輸出至網路。
   </para>
   <para>
    若要建立保存安裝資料的目錄，請執行下列步驟：
   </para>
   <procedure id="proc-deployment-remoteinst-instserver-nfs-cdir">
    <step performance="required">
     <para>
      以 <systemitem class="username">root</systemitem> 身分登入。
     </para>
    </step>
    <step performance="required">
     <para>
      建立一個之後要保存所有安裝資料的目錄，並轉至此目錄。例如：
     </para>
<screen>mkdir install/<replaceable>product</replaceable>/<replaceable>productversion</replaceable>
cd install/<replaceable>product</replaceable>/<replaceable>productversion</replaceable></screen>
     <para>
      使用產品名稱的縮寫取代 <replaceable>product</replaceable>，並使用包含產品名稱和版本的字串來取代 <replaceable>productversion</replaceable>。
     </para>
    </step>
    <step performance="required">
     <para>
      對媒體套件中的每張 DVD 執行以下指令：
     </para>
     <substeps performance="required">
      <step performance="required">
       <para>
        將安裝 DVD 中的所有內容複製到安裝伺服器目錄：
       </para>
<screen>cp -a /media/<replaceable>path_to_your_DVD_drive .</replaceable></screen>
       <para>
        您的 DVD 光碟機所在位置的實際路徑將會取代 <replaceable>path_to_your_DVD_drive</replaceable>。根據您系統所使用光碟機類型的不同，可能會是 <filename>cdrom</filename>、<filename>cdrecorder</filename>、<filename>dvd</filename> 或 <filename>dvdrecorder</filename>。
       </para>
      </step>
      <step performance="required">
       <para>
        將該目錄重新命名為 DVD 編號：
       </para>
<screen>mv <replaceable>path_to_your_DVD_drive</replaceable> DVD<replaceable>x</replaceable></screen>
       <para>
        DVD 的實際編號將會取代 <replaceable>x</replaceable>。
       </para>
      </step>
     </substeps>
    </step>
   </procedure>
   <para>
    在 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 上，您可以使用 YaST 透過 NFS 輸出儲存庫。請執行下列步驟：
   </para>
   <procedure id="proc-deployment-remoteinst-instserver-nfs-export">
    <step performance="required">
     <para>
      以 <systemitem class="username">root</systemitem> 身分登入。
     </para>
    </step>
    <step performance="required">
     <para>
      依序啟動<menuchoice><guimenu>YaST</guimenu> <guimenu>網路服務</guimenu> <guimenu>NFS 伺服器</guimenu></menuchoice>。
     </para>
    </step>
    <step performance="required">
     <para>
      選取<guimenu>啟動</guimenu>和<guimenu>在防火牆中開啟埠</guimenu>，接著按一下<guimenu>下一步</guimenu>。
     </para>
    </step>
    <step performance="required">
     <para>
      選取<guimenu>新增目錄</guimenu>並瀏覽至含有安裝來源的目錄，而這個範例中的是 <filename><replaceable>productversion</replaceable></filename>。
     </para>
    </step>
    <step performance="required">
     <para>
      選取<guimenu>新增主機</guimenu>，並輸入安裝資料要輸出的目標機器主機名稱。此處除了可以指定主機名稱外，您還可以使用萬用字元、網路位址範圍或只要指定您網路的網域名稱即可。您可以選擇輸入適當的輸出選項，或者保留預設值 (在大多數設定中皆可正常運作)。如需更多有關輸出 NFS 共享所使用語法的詳細資訊，請參閱 <systemitem>exports</systemitem> man 頁面。
     </para>
    </step>
    <step performance="required">
     <para>
      按一下<guimenu>完成</guimenu>。如此一來，存放 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 儲存庫的 NFS 伺服器就會自動啟動，並整合到開機程序中。
     </para>
    </step>
   </procedure>
   <para>
    如果您想透過 NFS 手動輸出儲存庫，而不使用 YaST NFS 伺服器模組來執行輸出，請執行下列步驟：
   </para>
   <procedure id="proc-deployment-remoteinst-instserver-nfs-exportman">
    <step performance="required">
     <para>
      以 <systemitem class="username">root</systemitem> 身分登入。
     </para>
    </step>
    <step performance="required">
     <para>
      開啟檔案 <filename>/etc/exports</filename>，並輸入以下內容：
     </para>
<screen>/<replaceable>productversion</replaceable> *(ro,root_squash,sync)</screen>
     <para>
      此操作可將目錄 <filename>/<replaceable>productversion</replaceable></filename> 輸出至網路中的任何一台主機，或任何可連接到這部伺服器的主機。若要限制存取此伺服器，請使用網路遮罩或網域名稱，而不要使用一般萬用字元 <literal>*</literal>。如需詳細資訊，請參閱 <systemitem>export</systemitem> man 頁面。儲存並結束此組態檔案。
     </para>
    </step>
    <step performance="required">
     <para>
      若要新增 NFS 服務至系統啟動時要啟動的伺服器列表，請執行以下指令：
     </para>
<screen>insserv /etc/init.d/nfsserver</screen>
    </step>
    <step performance="required">
     <para>
      使用 <command>rcnfsserver start</command> 啟動 NFS 伺服器。如果您之後必須變更 NFS 伺服器的組態，請修改組態檔案並使用 <command>rcnfsserver restart</command> 重新啟動 NFS 精靈。
     </para>
    </step>
   </procedure>
   <para>
    透過 OpenSLP 宣告 NFS 伺服器，可以讓您網路中的所有用戶端都知道該伺服器的位址。
   </para>
   <procedure id="proc-deployment-remoteinst-instserver-nfs-slpann">
    <step performance="required">
     <para>
      以 <systemitem class="username">root</systemitem> 身分登入。
     </para>
    </step>
    <step performance="required">
     <para>
      建立組態檔案 <filename>/etc/slp.reg.d/install.suse.nfs.reg</filename>，檔案中必須包含以下內容：
     </para>
<screen><?dbsuse-fo font-size="7pt"?>

# Register the NFS Installation Server
service:install.suse:nfs://$HOSTNAME/<replaceable>path_to_repository</replaceable>/DVD1,en,65535 
description=NFS Repository</screen>
     <para>
      以您伺服器上安裝來源的實際路徑取代 <replaceable>path_to_repository</replaceable>。
     </para>
    </step>
    <step performance="required">
     <para>
      使用 <command>rcslpd start</command> 啟動 OpenSLP 精靈。
     </para>
    </step>
   </procedure>
   <para>
    如需 OpenSLP 的詳細資訊，請參閱 <filename>/usr/share/doc/packages/openslp/</filename> 中的套件文件，或是參閱<xref linkend="cha-slp"/>。如需 NFS 的詳細資訊，請參閱<xref linkend="cha-nfs"/>。
   </para>
  </sect2>

  <sect2 id="sec-deployment-remoteinst-instserver-ftp">
   <title>手動設定 FTP 儲存庫</title>
   <para>
    建立 FTP 儲存庫與建立 NFS 儲存庫的方式非常相似。您也可以使用 OpenSLP 透過網路來宣告 FTP 儲存庫。
   </para>
   <procedure id="proc-deployment-remoteinst-instserver-ftp">
    <step performance="required">
     <para>
      依照<xref linkend="sec-deployment-remoteinst-instserver-nfs"/> 中的說明，建立一個保存安裝來源的目錄。
     </para>
    </step>
    <step performance="required">
     <para>
      設定要發佈安裝目錄內容的 FTP 伺服器：
     </para>
     <substeps performance="required">
      <step performance="required">
       <para>
        以 <systemitem class="username">root</systemitem> 身分登入，接著使用 YaST 軟體管理來安裝 <systemitem>vsftpd</systemitem> 套件。
       </para>
      </step>
      <step performance="required">
       <para>
        輸入 FTP 伺服器根目錄：
       </para>
<screen>cd <option>/srv/ftp</option></screen>
      </step>
      <step performance="required">
       <para>
        在 FTP 根目錄中建立保存安裝來源的子目錄：
       </para>
<screen>mkdir <replaceable>repository</replaceable></screen>
       <para>
        以產品名稱取代 <replaceable>repository</replaceable>。
       </para>
      </step>
      <step performance="required">
       <para>
        請將安裝儲存庫中的內容掛接至 FTP 伺服器的變更根目錄環境中：
       </para>
<screen>mount --bind <replaceable>path_to_repository</replaceable> /srv/ftp/<replaceable>repository</replaceable></screen>
       <para>
        將 <replaceable>path_to_repository</replaceable> 和 <replaceable>repository</replaceable> 取代成與設定相符的值。如果您必須讓此組態永久生效，請將此組態新增至 <filename>/etc/fstab</filename>。
       </para>
      </step>
      <step performance="required">
       <para>
        以 <command>vsftpd</command> 啟動 vsftpd。
       </para>
      </step>
     </substeps>
    </step>
    <step performance="required">
     <para>
      如果您的網路設定支援 OpenSLP，請透過 OpenSLP 來宣告儲存庫：
     </para>
     <substeps performance="required">
      <step performance="required">
       <para>
        建立組態檔案 <filename>/etc/slp.reg.d/install.suse.ftp.reg</filename>，檔案中必須包含以下內容：
       </para>
<screen><?dbsuse-fo font-size="7pt"?>

# Register the FTP Installation Server
service:install.suse:ftp://$HOSTNAME/<replaceable>repository</replaceable>/DVD1,en,65535 
description=FTP Repository</screen>
       <para>
        以您伺服器上儲存庫目錄的實際名稱取代 <replaceable>repository</replaceable>。<literal>service:</literal> 行的輸入內容必須維持連續一行。
       </para>
      </step>
      <step performance="required">
       <para>
        使用 <command>rcslpd start</command> 啟動 OpenSLP 精靈。
       </para>
      </step>
     </substeps>
    </step>
   </procedure>
   <tip os="sles;osuse">
    <title>使用 YaST 設定 FTP 伺服器</title>
    <para>
     如果您想要使用 YaST 以手動方式設定 FTP 安裝伺服器，請參閱<xref linkend="cha-ftp"/>，以瞭解關於如何使用 YaST FTP 伺服器模組的詳細資訊。
    </para>
   </tip>
  </sect2>

  <sect2 id="sec-deployment-remoteinst-instserver-http">
   <title>手動設定 HTTP 儲存庫</title>
   <para>
    建立 HTTP 儲存庫與建立 NFS 儲存庫的方式非常相似。您也可以使用 OpenSLP 透過網路來宣告 HTTP 儲存庫。
   </para>
   <procedure id="proc-deployment-remoteinst-instserver-http">
    <step performance="required">
     <para>
      依照<xref linkend="sec-deployment-remoteinst-instserver-nfs"/> 中的說明，建立一個保存安裝來源的目錄。
     </para>
    </step>
    <step performance="required">
     <para>
      設定要發佈安裝目錄內容的 HTTP 伺服器：
     </para>
     <substeps performance="required">
      <step performance="required">
       <para>
        <phrase os="sles;osuse">安裝網頁伺服器 Apache，詳細步驟說明請參閱<xref linkend="sec-apache2-quickstart-installation"/>。</phrase>
       </para>
      </step>
      <step performance="required">
       <para>
        輸入 HTTP 伺服器的根目錄 (<filename>/srv/www/htdocs</filename>)，並建立要保存安裝來源的子目錄：
       </para>
<screen>mkdir <replaceable>repository</replaceable></screen>
       <para>
        以產品名稱取代 <replaceable>repository</replaceable>。
       </para>
      </step>
      <step performance="required">
       <para>
        建立一個從安裝來源位置連結到 Web 伺服器根目錄的符號連結 (<filename>/srv/www/htdocs</filename>)：
       </para>
<screen>ln -s <replaceable>/path_to_repository </replaceable>/srv/www/htdocs/<replaceable>repository</replaceable></screen>
      </step>
      <step performance="required">
       <para>
        接著，請修改 HTTP 伺服器的組態檔案 (<filename>/etc/apache2/default-server.conf</filename>)，使其遵循符號連結。將下列一行：
       </para>
<screen>Options None</screen>
       <para>
        與
       </para>
<screen>Options Indexes FollowSymLinks</screen>
      </step>
      <step performance="required">
       <para>
        使用 <command>rcapache2 reload</command> 重新載入 HTTP 伺服器組態。
       </para>
      </step>
     </substeps>
    </step>
    <step performance="required">
     <para>
      如果您的網路設定支援 OpenSLP，請透過 OpenSLP 來宣告儲存庫：
     </para>
     <substeps performance="required">
      <step performance="required">
       <para>
        建立組態檔案 <filename>/etc/slp.reg.d/install.suse.http.reg</filename>，檔案中必須包含以下內容：
       </para>
<screen><?dbsuse-fo font-size="6.5pt"?>

# Register the HTTP Installation Server
service:install.suse:http://$HOSTNAME/<replaceable>repository</replaceable>/DVD1/,en,65535 
description=HTTP Repository</screen>
       <para>
        以您伺服器上儲存庫的實際路徑取代 <replaceable>repository</replaceable>。<literal>service:</literal> 行的輸入內容必須維持連續一行。
       </para>
      </step>
      <step performance="required">
       <para>
        使用 <command>rcslpd restart</command> 啟動 OpenSLP 精靈。
       </para>
      </step>
     </substeps>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec-deployment-remoteinst-instserver-smb">
   <title>管理 SMB 儲存庫</title>
   <para>
    使用 SMB，您可以從 Microsoft Windows 伺服器輸入安裝來源，並在沒有 Linux 機器的情況下啟動您的 Linux 部署。
   </para>
   <para>
    若要設定存放 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 儲存庫的輸出 Windows 共用，請執行下列步驟：
   </para>
   <procedure id="proc-deployment-remoteinst-instserver-smb-export">
    <step performance="required">
     <para>
      登入您的 Windows 機器。
     </para>
    </step>
    <step performance="required">
     <para>
      建立一個用於保存完整安裝樹狀結構的新資料夾，並為其命名，如 <filename>INSTALL</filename>。
     </para>
    </step>
    <step performance="required">
     <para>
      根據您 Windows 文件中概述的程序輸出共享。
     </para>
    </step>
    <step performance="required">
     <para>
      輸入此共享，並建立名稱為 <filename><replaceable>product</replaceable></filename> 的子資料夾。以實際產品名稱取代 <replaceable>product</replaceable>。
     </para>
    </step>
    <step performance="required">
     <para>
      輸入 <filename>INSTALL/<replaceable>產品</replaceable></filename>資料夾，並將每個 DVD 複製到單獨的資料夾，例如 <literal>DVD1</literal> 和 <literal>DVD2</literal>。
     </para>
    </step>
   </procedure>
   <para>
    若要使用 SMB 掛接共享做為儲存庫，請執行下列步驟：
   </para>
   <procedure id="proc-deployment-remoteinst-instserver-smb-use">
    <step performance="required">
     <para>
      啟動安裝目標。
     </para>
    </step>
    <step performance="required">
     <para>
      選取<guimenu>安裝</guimenu>。
     </para>
    </step>
    <step performance="required">
     <para>
      按 <keycap>F4</keycap> 以選取儲存庫。
     </para>
    </step>
    <step performance="required">
     <para>
      選擇 SMB，並輸入 Windows 機器名稱或 IP 位址、共享名稱 (在此範例中為 <filename>INSTALL/<replaceable>產品</replaceable>/DVD1</filename>)、使用者名稱和密碼。語法應為：
     </para>
<screen>smb://workdomain;user:password@server/INSTALL/DVD1</screen>
     <para>
      YaST 會在您按下 <keycap function="enter">Enter</keycap> 之後啟動，這時您就可以開始執行安裝。
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec-deployment-remoteinst-iso">
   <title>在伺服器上使用安裝媒體的 ISO 影像</title>
   <para>
    您也可以將安裝媒體的 ISO 影像掛接至安裝伺服器並將其做為儲存庫，而不需手動將實體媒體複製到伺服器目錄中。若要設定 HTTP、NFS 或 FTP 伺服器使用 ISO 影像 (而不使用媒體副本)，請按照下列步驟進行：
   </para>
<?dbfo-need height="10em"?>


   <procedure>
    <step performance="required">
     <para>
      下載 ISO 影像並將其儲存至機器，做為安裝伺服器使用。
     </para>
    </step>
    <step performance="required">
     <para>
      以 <systemitem class="username">root</systemitem> 身分登入。
     </para>
    </step>
    <step performance="required">
     <para>
      請為安裝資料選擇並建立適當的位置，如<xref linkend="sec-deployment-remoteinst-instserver-nfs"/>、<xref linkend="sec-deployment-remoteinst-instserver-ftp"/> 或 <xref linkend="sec-deployment-remoteinst-instserver-http"/> 所述。
     </para>
    </step>
    <step performance="required">
     <para>
      為每個 DVD 建立相應的子目錄。
     </para>
    </step>
    <step performance="required">
     <para>
      若要將各個 ISO 影像掛接並解壓縮到最後的位置，請執行下列指令：
     </para>
<screen>mount -o loop <replaceable>path_to_iso</replaceable><replaceable>path_to_repository</replaceable>/<replaceable>product</replaceable>/<replaceable>mediumx</replaceable></screen>
     <para>
      以 ISO 影像的本地副本路徑取代 <replaceable>path_to_iso</replaceable>，以伺服器的來源目錄取代 <replaceable>path_to_repository</replaceable>，以產品名稱取代 <replaceable>product</replaceable>，以您使用的媒體類型 (CD 或 DVD) 和編號取代 <replaceable>mediumx</replaceable>。
     </para>
    </step>
    <step performance="required">
     <para>
      請重複前面的步驟來為您的產品掛接所有必須的 ISO 影像。
     </para>
    </step>
    <step performance="required">
     <para>
      請以您平常的方式啟動安裝伺服器，如<xref linkend="sec-deployment-remoteinst-instserver-nfs"/>、<xref linkend="sec-deployment-remoteinst-instserver-ftp"/>或<xref linkend="sec-deployment-remoteinst-instserver-http"/> 所述。
     </para>
    </step>
   </procedure>
   <para>
    若要在開機時自動掛接 ISO 影像，請新增各掛接項至 <filename>/etc/fstab</filename>。先前範例的項目應類似於︰
   </para>
<screen><replaceable>path_to_iso</replaceable> <replaceable>path_to_repository</replaceable>/<replaceable>product</replaceable><replaceable>medium</replaceable> auto loop</screen>
  </sect2>
 </sect1>
 <sect1 id="sec-deployment-remoteinst-boot">
  <title>準備啟動目標系統</title>

  <para>
   本節內容會介紹各種複雜開機方式的組態任務。其中包含 DHCP、PXE 啟動、TFTP 和網路喚醒等準備應用的組態。
  </para>

  <sect2 id="sec-deployment-remoteinst-boot-dhcp">
   <title>設定 DHCP 伺服器</title>
   <para>
    有兩種方法可設定 DHCP 伺服器。YaST 為 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 提供了一個圖形介面來處理這項工作。使用者還可以手動編輯組態檔案。<phrase os="osuse;sles">如需有關 DHCP 伺服器的詳細資訊，另請參閱<xref linkend="cha-dhcp"/>。</phrase>
   </para>

   <sect3 id="sec-deployment-remoteinst-boot-dhcp-yast">
    <title>使用 YaST 設定 DHCP 伺服器</title>
    <para>
     若要對網路用戶端宣告 TFTP 伺服器的位置，並指定安裝目標應使用的開機影像檔案，請在您的 DHCP 伺服器組態中新增兩個宣告。
    </para>
<?dbfo-need height="10em"?>


    <procedure id="proc-deployment-remoteinst-boot-dhcp-yast">
     <step performance="required">
      <para>
       以 <systemitem class="username">root</systemitem> 身分登入代管 DHCP 伺服器的機器。
      </para>
     </step>
     
     <step performance="required">
      <para>
       啟動<menuchoice><guimenu>YaST</guimenu> <guimenu>網路服務</guimenu> <guimenu>DHCP 伺服器</guimenu></menuchoice>。
      </para>
     </step>
     <step performance="required">
      <para>
       完成基本 DHCP 伺服器設定的設定精靈。
      </para>
     </step>
     <step id="st-deployment-remoteinst-boot-dhcp-yast-expert" performance="required">
      <para>
       選取<guimenu>進階設定</guimenu>，並在出現即將離開啟動對話方塊的警告時，選取<guimenu>是</guimenu>。
      </para>
     </step>
     <step performance="required">
      <para>
       在<guimenu>設定的宣告</guimenu>對話方塊中，選取新系統所在位置的子網路，並按一下<guimenu>編輯</guimenu>。
      </para>
     </step>
     <step performance="required">
      <para>
       在<guimenu>子網路組態</guimenu>對話方塊中，選取<guimenu>新增</guimenu>將新選項新增到子網路的組態中。
      </para>
     </step>
     <step performance="required">
      <para>
       選取 <option>filename</option>，並輸入 <literal>pxelinux.0</literal> 做為值。
      </para>
     </step>
     <step performance="required">
      <para>
       新增另一個選項 (<option>next-server</option>)，將它的值設為 TFTP 伺服器的位址。
      </para>
     </step>
     <step performance="required">
      <para>
       選取<guimenu>確定</guimenu>和<guimenu>完成</guimenu>以完成 DHCP 伺服器組態。
      </para>
     </step>
    </procedure>
    <para>
     若要將 DHCP 設定成為特定主機提供靜態 IP 位址，請進入 DHCP 伺服器組態模組 (<xref linkend="st-deployment-remoteinst-boot-dhcp-yast-expert" xrefstyle="StepOnPage"/>) 的<guimenu>進階設定</guimenu>，並新增主機類型的新宣告。在這個主機宣告中新增 <option>hardware</option> 和 <option>fixed-address</option> 選項，並提供適當的值。
    </para>
   </sect3>
   <sect3 id="sec-deployment-remoteinst-boot-dhcp-man">
    <title>手動設定 DHCP 伺服器</title>
    <para>
     除了為網路用戶端提供自動位址配置外，DHCP 伺服器需要執行的所有工作就是宣告 TFTP 伺服器的 IP 位址，以及目標機器上的安裝常式需要拉進的檔案。
    </para>
    <procedure id="proc-deployment-remoteinst-boot-dhcp-man">
     <step performance="required">
      <para>
       以 <systemitem class="username">root</systemitem> 身分登入代管 DHCP 伺服器的機器。
      </para>
     </step>
     <step performance="required">
      <para>
       將以下幾行附加到 <filename>/etc/dhcpd.conf</filename> 下之 DHCP 伺服器組態檔案的子網路組態︰
      </para>
<screen>subnet 192.168.1.0 netmask 255.255.255.0 { 
  range dynamic-bootp 192.168.1.200 192.168.1.228;
  # PXE related stuff 
  # 
  # "next-server" defines the TFTP server that will be used 
  next-server <replaceable>ip_tftp_server</replaceable>; 
  #
  # "filename" specifies the pxelinux image on the TFTP server
  # the server runs in chroot under /srv/tftpboot 
  filename  "pxelinux.0";
}</screen>
      <para>
       將 <replaceable>ip_of_the_tftp_server</replaceable> 取代成 TFTP 伺服器的實際 IP 位置。如需更多 <filename>dhcpd.conf</filename> 中可用選項的詳細資訊，請參閱 <systemitem>dhcpd.conf</systemitem> man 頁面。
      </para>
     </step>
     <step performance="required">
      <para>
       執行 <command>rcdhcpd restart</command> 重新啟動 DHCP 伺服器。
      </para>
     </step>
    </procedure>
    <para>
     如果您計畫使用 SSH 來遠端控制 PXE 和網路喚醒功能安裝，請明確指定 DHCP 應提供給安裝目標的 IP 位址。若要完成這項工作，請根據以下範例修改上述 DHCP 組態：
    </para>
<screen>group { 
  # PXE related stuff 
  # 
  # "next-server" defines the TFTP server that will be used 
  next-server <replaceable>ip_tftp_server</replaceable>:
  # 
  # "filename" specifies the pxelinux image on the TFTP server 
  # the server runs in chroot under /srv/tftpboot
  filename "pxelinux.0";
  host test {
    hardware ethernet <replaceable>mac_address</replaceable>; 
    fixed-address <replaceable>some_ip_address</replaceable>;
    }
}
</screen>
    <para>
     這項主機陳述式將引入安裝目標的主機名稱。若要繫結特定主機的主機名稱和 IP 位址，您必須瞭解並指定系統的硬體 (MAC) 位址。將此範例中的所有變數取代成符合您環境的實際值。
    </para>
    <para>
     重新啟動 DHCP 伺服器之後，它將向所指定的主機提供一個靜態 IP，從而使您能夠透過 SSH 連接到該系統。
    </para>
   </sect3>
  </sect2>

  <sect2 id="sec-deployment-remoteinst-boot-tftp">
   <title>設定 TFTP 伺服器</title>
   <para>
    使用 YaST 在 <phrase os="sled;sles">SUSE Linux Enterprise Server 和 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase></phrase> 上設定 TFTP 伺服器，或以手動方式在任何支援 xinetd 和 TFTP 的其他 Linux 作業系統上設定 TFTP 伺服器。每當目標系統開機時，TFTP 伺服器即會傳送開機影像至目標系統，並傳送對目標系統的要求。
   </para>
   <sect3 id="sec-deployment-remoteinst-boot-tftp-yast">
    <title>使用 YaST 設定 TFTP 伺服器</title>
    <procedure id="proc-deployment-remoteinst-boot-tftp-yast">
     <step performance="required">
      <para>
       以 <systemitem class="username">root</systemitem> 身分登入。
      </para>
     </step>
     
     <step performance="required">
      <para>
       依序啟動 <menuchoice><guimenu>YaST</guimenu><guimenu>網路服務</guimenu><guimenu>TFTP 伺服器</guimenu></menuchoice>，並安裝所需套件。
      </para>
     </step>
     <step performance="required">
      <para>
       按一下<guimenu>啟用</guimenu>，確定伺服器已經啟動，並已包含至開機常式。為安全起見，xinetd 在開機時啟動 tftpd 時，您不需執行任何動作。
      </para>
     </step>
     <step performance="required">
      <para>
       按一下<guimenu>在防火牆中開啟埠</guimenu>，開啟在您機器上運作中防火牆的適當連接埠。如果您的伺服器上沒有執行任何防火牆，就無法使用此選項。
      </para>
     </step>
     <step performance="required">
      <para>
       按一下<guimenu>瀏覽</guimenu>，瀏覽開機影像目錄。這時系統會建立預設目錄為 <filename>/tftpboot</filename>，而且會自動選取。
      </para>
     </step>
     <step performance="required">
      <para>
       按一下<guimenu>完成</guimenu>便可套用您的設定，並啟動伺服器。
      </para>
     </step>
    </procedure>
   </sect3>
   <sect3 id="sec-deployment-remoteinst-boot-tftp-man">
    <title>手動設定 TFTP 伺服器</title>
    <procedure id="proc-deployment-remoteinst-boot-tftp-man">
     <step performance="required">
      <para>
       以 <systemitem class="username">root</systemitem> 身分登入，並安裝 <systemitem>tftp</systemitem> 和 <systemitem>xinetd</systemitem> 套件。
      </para>
     </step>
     <step performance="required">
      <para>
       若無法安裝，請建立 <filename>/srv/tftpboot</filename> 和 <filename>/srv/tftpboot/pxelinux.cfg</filename> 目錄。
      </para>
     </step>
     <step performance="required">
      <para>
       接著，請加入開機影像需要的正確檔案，詳細步驟說明請參閱<xref linkend="sec-deployment-remoteinst-boot-pxe"/>。
      </para>
     </step>
     <step performance="required">
      <para>
       修改位於 <filename>/etc/xinetd.d</filename> 下的 xinetd 組態，以確保開機時會啟動 TFTP 伺服器：
      </para>
      <substeps performance="required">
       <step performance="required">
        <para>
         如果 xinetd 不存在，請使用 <filename>touch tftp</filename>，在此目錄下建立一個名為 <command>tftp</command> 的檔案。接著執行 <command>chmod 755 tftp</command>。
        </para>
       </step>
       <step performance="required">
        <para>
         開啟檔案 <filename>tftp</filename>，並新增以下內容：
        </para>
<screen>service tftp 
{ 
        socket_type            = dgram
        protocol               = udp 
        wait                   = yes 
        user                   = root 
        server                 = /usr/sbin/in.tftpd 
        server_args            = -s /srv/tftpboot 
        disable                = no 
}
</screen>
       </step>
       <step performance="required">
        <para>
         儲存檔案，並使用 <command>rcxinetd restart</command> 重新啟動 xinetd。
        </para>
       </step>
      </substeps>
     </step>
    </procedure>
   </sect3>
  </sect2>

  <sect2 id="sec-deployment-remoteinst-boot-pxe">
   <title>使用 PXE 開機</title>
   <para>
    如需取得一些技術背景資訊和 PXE 的完整規格，請參閱「開機前執行環境 (Preboot Execution Environment, PXE) 規格」(<ulink url="http://www.pix.net/software/pxeboot/archive/pxespec.pdf"/>)。
   </para>
   <procedure id="proc-deployment-remoteinst-boot-pxe">
    <step performance="required">
     <para>
      輸入以下指令，以變更安裝儲存庫的目錄 <filename>boot/&lt;architecture&gt;/loader</filename>，並將 <filename>linux</filename>、<filename>initrd</filename>、<filename>message</filename>、<filename>biostest</filename> 及 <filename>memtest</filename> 檔案複製到 <filename>/srv/tftpboot</filename> 目錄：
     </para>
<screen>cp -a linux initrd message biostest memtest /srv/tftpboot</screen>
    </step>
    <step performance="required">
     <para>
      使用 YaST 直接從您的安裝 DVD 安裝 <systemitem>syslinux</systemitem> 套件。
     </para>
    </step>
    <step performance="required">
     <para>
      輸入以下指令，將 <filename>/usr/share/syslinux/pxelinux.0</filename> 檔案複製到 <filename>/srv/tftpboot</filename> 目錄：
     </para>
<screen>cp -a /usr/share/syslinux/pxelinux.0 /srv/tftpboot
     </screen>
    </step>
    <step performance="required">
     <para>
      輸入以下指令，切換至安裝儲存庫的目錄，並將 <filename>isolinux.cfg</filename> 檔案複製到 <filename>/srv/tftpboot/pxelinux.cfg/default</filename>：
     </para>
<screen>cp -a boot/&lt;architecture&gt;/loader/isolinux.cfg /srv/tftpboot/pxelinux.cfg/default
     </screen>
    </step>
    <step performance="required">
     <para>
      編輯 <filename>/srv/tftpboot/pxelinux.cfg/default</filename> 檔案，移除以 <literal>readinfo</literal> 和 <literal>framebuffer</literal> 開頭的幾行文字。
     </para>
    </step>
    <step performance="required">
     <para>

      接著，在預設的 <option>failsafe</option> 和 <option>apic</option> 標籤附加行中，插入下面項目：
     </para>
     <variablelist>
      <varlistentry>
       <term><option>insmod=<replaceable>kernel module</replaceable></option>
       </term>
       <listitem>
        <para>
         插入這個項目之後，便可進入 PXE 用戶端上支援網路安裝所需的網路核心模組。以網路裝置適當的模組名稱取代 <replaceable>kernel module</replaceable>。
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><option>netdevice=<replaceable>interface</replaceable></option>
       </term>
       <listitem>
        <para>
         這個項目可定義網路安裝時必須使用的用戶端網路介面。只有當用戶端配有數張網路卡時才必須插入這個項目，而且必須視情況修改項目內容。如果只有使用一張網路卡，就可以省略這個項目。
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>
<option>install=nfs://<replaceable>安裝伺服器 IP</replaceable>/<replaceable>儲存庫路徑</replaceable>/DVD1</option>
       </term>
       <listitem>
        <para>
         此項目定義用戶端安裝時所用的 NFS 伺服器和儲存庫。將<replaceable>安裝伺服器 IP</replaceable> 取代成安裝伺服器的實際 IP 位址。<replaceable>儲存庫路徑</replaceable>應取代成儲存庫的實際路徑。HTTP、FTP 或 SMB 儲存庫皆以類似方法指定位址，只不過通訊協定字首應分別使用 <literal>http</literal>、<literal>ftp</literal> 或 <literal>smb</literal>。
        </para>
        <important>
         <para>
          如果您需要傳送其他開機選項給安裝來源，例如 SSH 或 VNC 開機參數，那麼請將這些參數附加到 <option>install</option> 項目。您可以參考 <xref linkend="sec-deployment-remoteinst-bootinst"/>，以取得參數綜覽和一些範例。
         </para>
        </important>
       </listitem>
      </varlistentry>
     </variablelist>
     <tip>
      <title>變更核心與 initrd 的檔案名稱</title>
      <para>
       核心與 initrd 影像可以使用不同的檔案名稱。如果希望透過同一開機伺服器提供不同的作業系統，此功能將非常有用。但是，您應當注意，由 TFTP 提供用於 PXE 開機的檔案名稱中只允許包含一個點。
      </para>
     </tip>
     <para>
      以下將介紹 <option>/srv/tftpboot/pxelinux.cfg/default</option> 範例檔案。調整儲存庫的通訊協定字首以與您的網路設定相符，接著將 <literal>vnc</literal> 和 <literal>vncpassword</literal> 或 <literal>usessh</literal> 和 <literal>sshpassword</literal> 選項新增到 <literal>install</literal> 項目中，以指定連接到安裝程式的偏好方式。這幾行內容會以 <literal>\</literal> 分隔，而且應該是連續一行，中間不可間斷，也不能使用 <literal>\</literal>。
     </para>
<screen os="sles;sled">default hard disk 
        
# default
label linux 
  kernel linux 
  append initrd=initrd ramdisk_size=65536 \
     install=nfs://<replaceable>ip_instserver</replaceable>/<replaceable>path_to_repository</replaceable>/<replaceable>product</replaceable>/DVD1 
	    
# repair
label repair
  kernel linux
  append initrd=initrd splash=silent repair=1 showopts

# rescue 
label rescue 
  kernel linux 
  append initrd=initrd ramdisk_size=65536 rescue=1 

# bios test
label firmware
  kernel linux
  append initrd=biostest,initrd splash=silent install=exec:/bin/run_biostest showopts

#  memory test 
label memtest 
  kernel memtest 

#  hard disk 
label hard disk
  localboot 0

implicit     0 
display      message
prompt       1 
timeout      100</screen>

    </step>
    <step performance="required">
     <para>
      將<replaceable>安裝伺服器 IP</replaceable> 和<replaceable>儲存庫路徑</replaceable>取代成在您設定中所使用的值。
     </para>
     <para>
      下節內容可作為此設定中所使用的 PXELINUX 選項的簡短參考。如需更多可用選項的資訊，請參閱 <filename>/usr/share/doc/packages/syslinux/</filename> 中的 <systemitem>syslinux</systemitem> 套件說明文件。
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec-deployment-remoteinst-boot-pxeopts">
   <title>PXELINUX 組態選項</title>
   <para>
    此處列出的選項為 PXELINUX 組態檔案中所有可用選項的子集合。
   </para>
   <variablelist>
    <varlistentry>
     <term><option>APPEND <replaceable>選項... </replaceable></option>
     </term>
     <listitem>
      <para>
       將一或多個選項新增至核心指令行。這些新增選項是用於自動和手動開機。選項會新增在核心指令行的開頭位置，通常您只要明確輸入核心選項，便可覆寫這些選項。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><option>APPEND -</option>
     </term>
     <listitem>
      <para>
       不附加任何項目。在 <option>LABEL</option> 區段中做為引數且包含單一連字號的 <option>APPEND</option>，可以用來覆寫全域的 <option>APPEND</option>。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><option>DEFAULT <replaceable>kernel options</replaceable>...</option>
     </term>
     <listitem>
      <para>
       設定預設的核心指令行。當 PXELINUX 是自動啟動，則該選項的作用相當於在啟動提示處輸入了在 DEFAULT 後輸入的所有內容 (表示自動啟動的 auto 選項除外，它是自動新增的)。
      </para>
      <para>
       如果目前沒有組態檔案，或者組態檔案中沒有 DEFAULT 項目，則預設指令行會是不包含任何選項的核心名稱 <quote>linux</quote>。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>

     <term><option>IFAPPEND <replaceable>旗標</replaceable></option>
     </term>
     <listitem>
      <para>
       根據<replaceable>旗標</replaceable>值將特定選項新增至核心指令行。<option>IFAPPEND</option> 選項僅適用於 PXELINUX。<replaceable>旗標</replaceable>需要一個值，如<xref linkend="tab-deployment-boot-pxeopts-ifappend"/> 中所述。
      </para>
      <table id="tab-deployment-boot-pxeopts-ifappend">
       <title>從 <option>IFAPPEND</option> 產生和新增的核心指令行選項</title>
       <tgroup cols="2">
        <colspec colwidth="1*"/>
        <colspec colwidth="4*"/>
        <thead>
         <row>
          <entry valign="middle">
           <para>
            引數
           </para>
          </entry>
          <entry>
           <para>
            產生的核心指令行/描述
           </para>
          </entry>
         </row>
        </thead>
        <tbody>
         <row>
          <entry>
           <para>
            <option>1</option>
           </para>
          </entry>
          <entry>
<screen>ip=<replaceable>CLIENT_IP</replaceable>:<replaceable>BOOT_SERVER_IP</replaceable>:<replaceable>GW_IP</replaceable>:<replaceable>NETMASK</replaceable></screen>
           <para>
            預留位置根據 DHCP/BOOTP 或 PXE 開機伺服器中的輸入加以取代。
           </para>
           <para>
            請注意，此選項並非在已開機系統中執行 DHCP 用戶端的替代項。如果不進行定期更新，PXE BIOS 取得的租用將會過期，使得該 IP 位址可供 DHCP 伺服器重複使用。
           </para>
          </entry>
         </row>
         <row>
          <entry>
           <para>
            <option>2</option>
           </para>
          </entry>
          <entry>
<screen>BOOTIF=<replaceable>MAC_ADDRESS_OF_BOOT_INTERFACE</replaceable></screen>
           <para>
            如果您要在安裝伺服器逐個查探 LAN 介面直到取得 DHCP 伺服器的回覆時避免逾時，此選項非常有用。使用此選項可讓 initrd 程式決定系統是從哪個介面開機的。linuxrc 會讀取此選項並使用此網路介面。
           </para>
          </entry>
         </row>
         <row>
          <entry>
           <para>
            <option>4</option>
           </para>
          </entry>
          <entry>
<screen>SYSUUID=<replaceable>SYSTEM_UUID</replaceable></screen>
           <para>
            新增採用小寫十六進位的 UUID，請參閱 <filename>/usr/share/doc/packages/syslinux/pxelinux.txt</filename>
           </para>
          </entry>
         </row>
        </tbody>
       </tgroup>
      </table>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><option>LABEL <replaceable>label</replaceable> KERNEL <replaceable>image</replaceable> APPEND <replaceable>options</replaceable>...</option>
     </term>
     <listitem>
      <para>
       指示是否要將輸入的 <replaceable>label</replaceable> 當做核心來開機，或是應該讓 PXELINUX 從 <replaceable>image</replaceable> 開機；以及是否要使用指定 <option>APPEND</option> 選項，而不是使用該檔案全域區段 (在第一個 <option>LABEL</option> 指令的前面) 中指定的選項。<replaceable>image</replaceable> 的預設值與 <replaceable>label</replaceable> 相同，而且如果沒有指定 <option>APPEND</option>，就會預設使用全域項目 (如果有的話)。您最多可輸入 128 個 <option>LABEL</option> 項目。
      </para>
      <para>
       請注意，GRUB 將使用以下語法：
      </para>
<screen>title mytitle 
  kernel <replaceable>my_kernel</replaceable><replaceable>my_kernel_options</replaceable> 
  initrd <replaceable>myinitrd</replaceable></screen>
<?dbfo-need height="10em"?>


      <para>
       PXELINUX 使用以下語法：
      </para>
<screen>label <replaceable>mylabel</replaceable> 
  kernel <replaceable>mykernel</replaceable> 
  append <replaceable>myoptions</replaceable></screen>
      <para>
       
       標籤會像檔名一樣進行拆分 (Mangle)，因此它們在拆分之後一定會是唯一專屬名稱。舉例來說，<quote>v2.6.30</quote> 和 <quote>v2.6.31</quote> 這兩個標籤在 PXELINUX 中將無法辨識，因為它們都會拆分成相同的 DOS 檔案名稱。
      </para>
      <para>
       核心不一定要是 Linux 核心，它可以是開機磁區或 COMBOOT 檔案。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><option>LOCALBOOT <replaceable>類型</replaceable></option>
     </term>
     <listitem>
      <para>
       在 PXELINUX 上，指定 <option>LOCALBOOT 0</option> 而不指定 <option>KERNEL</option> 選項，表示要呼叫此特定標籤，並會使用本地磁碟開機，而不使用核心開機。
      </para>
      <informaltable frame="topbot" rowsep="0">
       <tgroup cols="2">

        <thead>
         <row>
          <entry colname="1">
           <para>
            引數
           </para>
          </entry>
          <entry colname="2">
           <para>
            描述
           </para>
          </entry>
         </row>
        </thead>
        <tbody>
         <row>
          <entry colname="1">
           <para>
            <literal>0</literal>
           </para>
          </entry>
          <entry colname="2">
           <para>
            執行正常開機
           </para>
          </entry>
         </row>
         <row>
          <entry colname="1">
           <para>
            <literal>4</literal>
           </para>
          </entry>
          <entry colname="2">
           <para>
            使用仍常駐在記憶體中的「通用網路驅動程式介面」(Universal Network Driver Interface, UNDI) 執行本地開機。
           </para>
          </entry>
         </row>
         <row>
          <entry colname="1">
           <para>
            <literal>5</literal>
           </para>
          </entry>
          <entry colname="2">
           <para>
            使用仍常駐在記憶體中完整的 PXE 堆疊 (包括 UNDI 驅動程式) 執行本地開機。
           </para>
          </entry>
         </row>
        </tbody>
       </tgroup>
      </informaltable>
      <para>
       其他所有值都未定義。如果您對 UNDI 或 PXE 堆疊不甚瞭解，請指定 <literal>0</literal>。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><option>TIMEOUT <replaceable>time-out</replaceable></option>
     </term>
     <listitem>
      <para>
       指示在開機提示等待自動開機的時間長度，單位為 1/10 秒。使用者只要在鍵盤上按下任何一個鍵，就會取消逾時，這是假設使用者會完成已開始的指令。如果逾時時間設為 0，則會完全停用逾時功能 (此設定值亦為預設值)。可能的最大逾時值為 35996 (小於一小時)。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><option>PROMPT<replaceable> flag_val</replaceable></option>
     </term>
     <listitem>
      <para>
       如果 <option>flag_val</option> 為 0，只有在按下 <keycap function="shift">Shift</keycap> 或 <keycap function="alt">Alt</keycap>，或者已設定 <keycap>Caps Lock</keycap> 或 <keycap>Scroll Lock</keycap> 時才會顯示開機提示 (此設定值為預設值)。如果 <option>flag_val</option> 為 1，則永遠會顯示開機提示。
      </para>
<screen>F2  <replaceable>filename</replaceable>
F1  <replaceable>filename</replaceable> 
..etc... 
F9  <replaceable>filename</replaceable>
F10 <replaceable>filename</replaceable></screen>
      <para>
       可在開機提示下按下功能鍵時，於螢幕畫面上顯示指定的檔案。這可用來執行開機前線上說明 (可能是針對核心指令行選項)。如果是使用較早版本的反向相容，<keycap>F10</keycap> 也可以當作 <keycap>F0</keycap> 輸入。請注意，目前還無法將檔案名稱繫結至 <keycap>F11</keycap> 和 <keycap>F12</keycap>。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2 id="sec-deployment-remoteinst-boot-pxeprep">
   <title>準備用於 PXE 啟動的目標系統</title>
   <para>
    請在 BIOS 開機順序中包含 PXE 選項，以便準備 PXE 開機的系統 BIOS。
   </para>
   <warning>
    <title>BIOS 開機順序</title>
    <para>
     請勿將 PXE 選項置於 BIOS 硬碟開機選項之前。否則，此系統會在您每次開機時嘗試重新安裝系統。
    </para>
   </warning>
  </sect2>

  <sect2 id="sec-deployment-remoteinst-boot-wolprep">
   <title>準備用於網路喚醒功能的目標系統</title>
   <para>
    您需要使用適當的 BIOS 選項才可在安裝前啟用網路喚醒 (WOL) 功能。另外，請記下目標系統的 MAC 位址。啟動網路喚醒功能時將會用到此資料。
   </para>
  </sect2>

  <sect2 id="sec-deployment-remoteinst-boot-wol">
   <title>區域網路喚醒</title>
   <para>
    「網路喚醒功能」可藉由包含機器 MAC 位址的特定網路封包來開啟機器。因為世界上的每台機器都有一個獨一無二的 MAC 識別碼，所以您不必擔心會不小心開啟錯誤的機器。
   </para>
   <important>
    <title>跨越不同網路區段的網路喚醒功能</title>
    <para>
     如果控制機器與喚醒安裝目標的位置不在同一個網路區段，請將要傳送的 WOL 要求設定為多重廣播，或者遠端控制網路區段上傳送這些要求的機器。
    </para>
   </important>
   <para os="sled;sles">
    SUSE Linux Enterprise Server 的使用者可以使用名為 WOL 的 YaST 模組輕鬆設定網路喚醒功能。其他 SUSE Linux 版本作業系統的使用者則可以使用指令行工具。
   </para>
  </sect2>

  <sect2 id="sec-deployment-remoteinst-boot-wolyast" os="sled;sles">
   <title>使用 YaST 設定網路喚醒功能</title>
   <procedure id="proc-deployment-remoteinst-boot-wolyast">
    <step performance="required">
     <para>
      以 <systemitem class="username">root</systemitem> 身分登入。
     </para>
    </step>
    <step performance="required">
     <para>
      啟動<menuchoice><guimenu>YaST</guimenu> <guimenu>網路服務</guimenu> <guimenu>WOL</guimenu></menuchoice>。
     </para>
    </step>
    <step performance="required">
     <para>
      按一下<guimenu>新增</guimenu>，並輸入目標系統的主機名稱和 MAC 位址。
     </para>
    </step>
    <step performance="required">
     <para>
      若要開啟此機器，請選取適當的項目，並按一下<guimenu>喚醒</guimenu>。
     </para>
    </step>
   </procedure>
  </sect2>


 </sect1>
 <sect1 id="sec-deployment-remoteinst-bootinst">
  <title>啟動要安裝的目標系統</title>

  <para>
   基本上，除了 <xref linkend="sec-deployment-remoteinst-boot-wol"/> 和 <xref linkend="sec-deployment-remoteinst-boot-pxe"/> 中提到的方法，還有兩種不同的方法可以自定安裝的開機程序。您可以使用預設開機選項和功能鍵，或使用安裝開機畫面的開機選項提示，來傳送安裝核心在此特定硬體上可能需要的任何開機選項。
  </para>

  <sect2 id="sec-deployment-remoteinst-bootinst-opts">
   <title>使用預設開機選項</title>
   <para>
    開機選項已在<xref linkend="cha-inst"/>中詳細介紹過。一般而言，只要選擇<guimenu>安裝</guimenu>就可以開始安裝開機程序。
   </para>
   <para>
    如果發生任何問題，請使用<guimenu>安裝 -- 關閉 ACPI</guimenu>或<guimenu>安裝 -- 安全設定</guimenu>。若需更多安裝程序疑難排解的資訊，請參閱<xref linkend="sec-trouble-install"/>。
   </para>
   <para>
    畫面下方的功能表列會一些提供部分設定所需的進階功能。在不清楚參數詳細語法的情況下，您可以使用 F 鍵指定要傳送到安裝常式的其他選項 (請參閱<xref linkend="sec-deployment-remoteinst-bootinst-custom"/>)。<xref linkend="sec-i-yast2-bootscreen"/> 提供了可用功能鍵的詳細描述。
   </para>
  </sect2>



  <sect2 id="sec-deployment-remoteinst-bootinst-custom">
   <title>使用自定開機選項</title>
   <para>
    使用適當的開機選項設定可以協助您進行安裝程序。您之後也可以使用 linuxrc 常式設定許多參數，但是使用開機選項則更方便。在某些自動化設定中，<filename>initrd</filename> 和 <filename>info</filename> 檔案會提供一些開機選項。
   </para>
   <para>
    以下表格列出本章節中提及的所有安裝方式，其中包括開機所需的參數和對應的開機選項。您只要依照順序將此表格中出現的內容附加到檔案中，即可開機選項字串送到安裝常式中。例如 (全部在一行上)：
   </para>
<screen>install=<replaceable>xxx</replaceable> netdevice<replaceable>=xxx</replaceable> hostip=<replaceable>xxx</replaceable> netmask=<replaceable>xxx</replaceable> vnc=<replaceable>xxx</replaceable> vncpassword=<replaceable>xxx</replaceable></screen>

   <para>
    以適用於您設定的值來取代此字串中的所有 <replaceable>xxx</replaceable> 值。
   </para>
   <table id="tab-deployment-remoteinst-bootinst-custom">
    <title>本章使用的安裝 (開機) 案例</title>
    <tgroup cols="3">

     <thead>
      <row>
       <entry colname="1">
        <para>
         安裝方式
        </para>
       </entry>
       <entry colname="2">
        <para>
         開機時的必要參數
        </para>
       </entry>
       <entry colname="3">
        <para>
         開機選項
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry colname="1">
        <para>
         <xref linkend="cha-inst"/>
        </para>
       </entry>
       <entry colname="2">
        <para>
         無：系統自動開機
        </para>
       </entry>
       <entry colname="3">
        <para>
         不需要
        </para>
       </entry>
      </row>

      <row>
       <entry colname="1">
        <para>
         <xref linkend="sec-deployment-remoteinst-scenario-vncstat"/>
        </para>
       </entry>
       <entry colname="2">
        <itemizedlist spacing="compact" mark="bullet">
         <listitem>
          <para>
           安裝伺服器的位置
          </para>
         </listitem>
         <listitem>
          <para>
           網路裝置
          </para>
         </listitem>
         <listitem>
          <para>
           IP 位址
          </para>
         </listitem>
         <listitem>
          <para>
           網路遮罩
          </para>
         </listitem>
         <listitem>
          <para>
           閘道
          </para>
         </listitem>
         <listitem>
          <para>
           啟用 VNC
          </para>
         </listitem>
         <listitem>
          <para>
           VNC 密碼
          </para>
         </listitem>
        </itemizedlist>
       </entry>
       <entry colname="3">
        <itemizedlist spacing="compact" mark="bullet">
         <listitem>
          <para>
           <filename>install=(nfs,http, ftp,smb)://<replaceable>path_to_instmedia</replaceable></filename>
          </para>
         </listitem>
         <listitem>
          <para>
           <filename>netdevice=<replaceable>some_netdevice</replaceable></filename> (只有當存在數個網路裝置時才需要)
          </para>
         </listitem>
         <listitem>
          <para>
           <filename>hostip=<replaceable>some_ip</replaceable> </filename>
          </para>
         </listitem>
         <listitem>
          <para>
           <filename>netmask=<replaceable>some_netmask</replaceable> </filename>
          </para>
         </listitem>
         <listitem>
          <para>
           <filename>gateway=<replaceable>ip_gateway</replaceable> </filename>
          </para>
         </listitem>
         <listitem>
          <para>
           <filename>vnc=1</filename>
          </para>
         </listitem>
         <listitem>
          <para>
           <filename>vncpassword=<replaceable>some_password</replaceable> </filename>
          </para>
         </listitem>
        </itemizedlist>
       </entry>
      </row>
      <row>
       <entry colname="1">
        <para>
         <xref linkend="sec-deployment-remoteinst-scenario-vncdyn"/>
        </para>
       </entry>
       <entry colname="2">
        <itemizedlist spacing="compact" mark="bullet">
         <listitem>
          <para>
           安裝伺服器的位置
          </para>
         </listitem>
         <listitem>
          <para>
           啟用 VNC
          </para>
         </listitem>
         <listitem>
          <para>
           VNC 密碼
          </para>
         </listitem>
        </itemizedlist>
       </entry>
       <entry colname="3">
        <itemizedlist spacing="compact" mark="bullet">
         <listitem>
          <para>
           <filename>install=(nfs,http, ftp,smb)://<replaceable>path_to_instmedia</replaceable></filename>
          </para>
         </listitem>
         <listitem>
          <para>
           <literal>vnc=1</literal>
          </para>
         </listitem>
         <listitem>
          <para>
           <filename>vncpassword=<replaceable>some_password</replaceable> </filename>
          </para>
         </listitem>
        </itemizedlist>
       </entry>
      </row>
      <row>
       <entry colname="1">
        <para>
         <xref linkend="sec-deployment-remoteinst-scenario-vncpxe"/>
        </para>
       </entry>
       <entry colname="2">
        <itemizedlist spacing="compact" mark="bullet">
         <listitem>
          <para>
           安裝伺服器的位置
          </para>
         </listitem>
         <listitem>
          <para>
           TFTP 伺服器的位置
          </para>
         </listitem>
         <listitem>
          <para>
           啟用 VNC
          </para>
         </listitem>
         <listitem>
          <para>
           VNC 密碼
          </para>
         </listitem>
        </itemizedlist>
       </entry>
       <entry colname="3">
        <para>
         不適用；透過 PXE 和 DHCP 管理的程序
        </para>
       </entry>
      </row>
      <row>
       <entry colname="1">
        <para>
         <xref linkend="sec-deployment-remoteinst-scenario-sshstat"/>
        </para>
       </entry>
       <entry colname="2">
        <itemizedlist spacing="compact" mark="bullet">
         <listitem>
          <para>
           安裝伺服器的位置
          </para>
         </listitem>
         <listitem>
          <para>
           網路裝置
          </para>
         </listitem>
         <listitem>
          <para>
           IP 位址
          </para>
         </listitem>
         <listitem>
          <para>
           網路遮罩
          </para>
         </listitem>
         <listitem>
          <para>
           閘道
          </para>
         </listitem>
         <listitem>
          <para>
           啟用 SSH
          </para>
         </listitem>
         <listitem>
          <para>
           SSH 密碼
          </para>
         </listitem>
        </itemizedlist>
       </entry>
       <entry colname="3">
        <itemizedlist spacing="compact" mark="bullet">
         <listitem>
          <para>
           <filename>install=(nfs,http, ftp,smb)://<replaceable>path_to_instmedia</replaceable></filename>
          </para>
         </listitem>
         <listitem>
          <para>
           <filename>netdevice=<replaceable>some_netdevice</replaceable></filename> (只有當存在數個網路裝置時才需要)
          </para>
         </listitem>
         <listitem>
          <para>
           <filename>hostip=<replaceable>some_ip</replaceable> </filename>
          </para>
         </listitem>
         <listitem>
          <para>
           <filename>netmask=<replaceable>some_netmask</replaceable> </filename>
          </para>
         </listitem>
         <listitem>
          <para>
           <filename>gateway=<replaceable>ip_gateway</replaceable> </filename>
          </para>
         </listitem>
         <listitem>
          <para>
           <literal>usessh=1</literal>
          </para>
         </listitem>
         <listitem>
          <para>
           <filename>sshpassword=<replaceable>some_password</replaceable> </filename>
          </para>
         </listitem>
        </itemizedlist>
       </entry>
      </row>
      <row>
       <entry colname="1">
        <para>
         <xref linkend="sec-deployment-remoteinst-scenario-sshdyn"/>
        </para>
       </entry>
       <entry colname="2">
        <itemizedlist spacing="compact" mark="bullet">
         <listitem>
          <para>
           安裝伺服器的位置
          </para>
         </listitem>
         <listitem>
          <para>
           啟用 SSH
          </para>
         </listitem>
         <listitem>
          <para>
           SSH 密碼
          </para>
         </listitem>
        </itemizedlist>
       </entry>
       <entry colname="3">
        <itemizedlist spacing="compact" mark="bullet">
         <listitem>
          <para>
           <filename>install=(nfs,http, ftp,smb)://<replaceable>path_to_instmedia</replaceable></filename>
          </para>
         </listitem>
         <listitem>
          <para>
           <filename>usessh=1</filename>
          </para>
         </listitem>
         <listitem>
          <para>
           <filename>sshpassword=<replaceable>some_password</replaceable> </filename>
          </para>
         </listitem>
        </itemizedlist>
       </entry>
      </row>
      <row>
       <entry colname="1">
        <para>
         <xref linkend="sec-deployment-remoteinst-scenario-sshpxe"/>
        </para>
       </entry>
       <entry colname="2">
        <itemizedlist spacing="compact" mark="bullet">
         <listitem>
          <para>
           安裝伺服器的位置
          </para>
         </listitem>
         <listitem>
          <para>
           TFTP 伺服器的位置
          </para>
         </listitem>
         <listitem>
          <para>
           啟用 SSH
          </para>
         </listitem>
         <listitem>
          <para>
           SSH 密碼
          </para>
         </listitem>
        </itemizedlist>
       </entry>
       <entry colname="3">
        <para>
         不適用；透過 PXE 和 DHCP 管理的程序
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </table>
   <tip>
    <title>linuxrc 開機選項的詳細資訊</title>
    <para>
     如需用來將 Linux 系統開機的 linuxrc 開機選項的詳細資訊，請造訪 <ulink url="http://en.opensuse.org/SDB:Linuxrc"/>。
    </para>
   </tip>
   <sect3 id="sec-deployment-remoteinst-bootinst-custom-addon">
    <title>安裝附加產品和驅動程式更新</title>
    <para>
     <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 支援安裝提供延伸的附加產品 (例如 SUSE Linux Enterprise High Availability Extension)、協力廠商產品和驅動程式，或其他軟體。若要在遠端部署 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 時自動安裝附加產品，請指定 <literal>addon=<replaceable>REPOSITORY</replaceable></literal> 參數。
    </para>
    <para>
     <replaceable>REPOSITORY</replaceable> 必須是可由 YaST (YaST2 或 YUM (rpm-md)) 讀取的代管儲存庫。目前不支援 ISO 影像。
    </para>
    <tip>
     <title>驅動程式更新</title>
     <para>
      驅動程式更新可在 <ulink url="http://drivers.suse.com/"/> 中找到。並非所有驅動程式更新都是以儲存庫的形式提供 — 有些只能以 iso 影像的形式提供，因此無法使用 <literal>addon</literal> 參數進行安裝。您可以在 <ulink url="http://drivers.suse.com/doc/kit_usage.html"/> 中找到關於如何透過 iso 影像安裝驅動程式更新的指示。
     </para>
    </tip>
   </sect3>
  </sect2>
 </sect1>
 <sect1 id="sec-deployment-remoteinst-monitor">
  <title>監控安裝程序</title>

  <para>
   有數種選項可以用來遠端監控安裝程式。如果在開機時已指定用於安裝的正確開機選項，將會使用 VNC 或 SSH 從遠端工作站來控制安裝和系統組態。
  </para>

  <sect2 id="sec-deployment-remoteinst-monitor-vnc">
   <title>安裝 VNC</title>
   <para>
    您可以使用任何 VNC 檢視器軟體，在絕大多數作業系統上遠端控制 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 的安裝。本節將介紹如何使用 VNC 檢視器應用程式或網頁瀏覽器來進行安裝。
   </para>
   <sect3 id="sec-deployment-remoteinst-monitor-vnc-prep">
    <title>準備安裝 VNC</title>
    <para>
     準備安裝 VNC 時，您在安裝目標上必須執行的動作就是在第一次開始安裝時，提供適當的開機選項 (請參閱 <xref linkend="sec-deployment-remoteinst-bootinst-custom"/>)。目標系統將會啟動到以文字為基礎的環境，接著，請等待 VNC 用戶端連接到安裝程式。
    </para>
    <para>
     安裝程式將會宣告進行連接安裝時所需要的 IP 位址和顯示編號。如果您有實體存取目標系統的權限，系統開機後會隨即提供用於安裝的資訊。當 VNC 用戶端軟體提示輸入資料時，請輸入資料並提供您的 VNC 密碼。
    </para>
    <para>
     因為安裝目標會透過 OpenSLP 宣告自身，若您的網路設定和所有機器都支援 OpenSLP，則您可以透過 SLP 瀏覽器擷取安裝目標的位址資訊，而不需要實際連接到安裝本身：
    </para>
    <procedure id="proc-deployment-remoteinst-monitor-vnc-prep">
     <step performance="required">
      <para>
       啟動 KDE 檔案和網頁瀏覽器 Konqueror。
      </para>
     </step>
     <step performance="required">
      <para>
       在位置列中輸入 <literal>service://yast.installation.suse</literal>。接著，Konqueror 畫面中會出現一個代表目標系統的圖示。按一下此圖示可啟動要執行安裝的 KDE VNC 檢視器。另外，請使用提供的 IP 位址執行您的 VNC 檢視器軟體，並在 IP 位置結尾加上 <literal>:1</literal>，以顯示安裝正在執行中。
      </para>
     </step>
    </procedure>
   </sect3>
   <sect3 id="sec-deployment-remoteinst-monitor-vnc-connect">
    <title>連接到安裝程式</title>
    <para>
     基本上，有兩種方法可以連接到 VNC 伺服器 (即本範例中的安裝目標)。您可以在任何作業系統上啟動獨立的 VNC 檢視器應用程式，或是使用已啟用 Java 的網頁瀏覽器進行連接。
    </para>
    <para>
     您可以使用 VNC，從任何其他作業系統 (包括其他 Linux 版本、Windows 或 Mac 作業系統) 控制 Linux 系統的安裝。
    </para>
    <para>
     若是使用 Linux 機器，請確定已安裝 <systemitem>tightvnc</systemitem> 套件。若是使用 Windows 機器，請安裝此應用程式 (可在 TightVNC 首頁 <ulink url="http://www.tightvnc.com/download.html"/> 取得) 的 Windows 連接埠。
    </para>
    <para>
     若要連接到在目標機器上執行的安裝程式，請執行下列步驟：
    </para>
    <procedure id="proc-deployment-remoteinst-monitor-vnc-connect-app">
     <step performance="required">
      <para>
       啟動 VNC 檢視器。
      </para>
     </step>
     <step performance="required">
      <para>
       輸入由 SLP 瀏覽器或安裝程式本身提供的安裝目標 IP 位址和顯示編號：

      </para>
<screen><replaceable>ip_address</replaceable>:<replaceable>display_number</replaceable></screen>
      <para>
       接著會在您的桌面上開啟一個視窗，並顯示做為一般本機安裝的 YaST 畫面。
      </para>
     </step>
    </procedure>
    <para>
     使用網頁瀏覽器連接到安裝程式，可讓您完全不需理會 VNC 軟體或舊版的作業系統。只要瀏覽器應用程式已啟用 Java 支援，您就可以使用任何瀏覽器 (Fireofx、Internet Explorer、Konqueror、Opera 等) 來執行 Linux 系統安裝。
    </para>
    <para>
     若要進行 VNC 安裝，請依照下列步驟執行：
    </para>
    <procedure id="proc-deployment-remoteinst-monitor-vnc-connect-brow">
     <step performance="required">
      <para>
       啟動您要使用的網頁瀏覽器。
      </para>
     </step>
     <step performance="required">
      <para>
       在位址提示中輸入以下內容：

      </para>
<screen>http://<replaceable>ip_address_of_target</replaceable>:5801</screen>
     </step>
     <step performance="required">
      <para>
       接著，系統會提示您輸入 VNC 密碼。然後，瀏覽器視窗會顯示做為一般本機安裝的 YaST 畫面。
      </para>
     </step>
    </procedure>
   </sect3>
  </sect2>

  <sect2 id="sec-deployment-remoteinst-monitor-ssh">
   <title>安裝 SSH</title>
   <para>
    您可以使用 SSH，透過任何 SSH 用戶端軟體遠端控制 Linux 機器的安裝。
   </para>
   <sect3 id="sec-deployment-remoteinst-monitor-ssh-prep">
    <title>準備安裝 SSH</title>
    <para>
     除了安裝適當的軟體套件 (用於 Linux 的 OpenSSH 和用於 Windows 的 PuTTY) 外，您只需要傳送適當的開機選項即可開始安裝 SSH。如需詳細資料，請參閱 <xref linkend="sec-deployment-remoteinst-bootinst-custom"/>。任何 SUSE Linux 作業系統上會預設安裝 OpenSSH。
    </para>
   </sect3>
   <sect3 id="sec-deployment-remoteinst-monitor-ssh-connect">
    <title>連接到安裝程式</title>
    <procedure id="proc-deployment-remoteinst-monitor-ssh-connect">
     <step performance="required">
      <para>
       擷取安裝目標的 IP 位址。如果您有實際存取目標機器的權限，您就只要取用初始開機後由安裝常式在控制台提供的 IP 位址。或者，也可以採用在 DHCP 伺服器組態中指定給此特定主機的 IP 位址。
      </para>
     </step>
     <step performance="required">
      <para>
       在指令行，輸入以下指令：
      </para>
<screen>ssh -X root@<replaceable>
ip_address_of_target</replaceable></screen>
      <para>
       將 <replaceable>ip_address_of_target</replaceable> 取代成安裝目標的實際 IP 位址。
      </para>
     </step>
     <step performance="required">
      <para>
       系統會提示輸入使用者名稱，接著請輸入 <literal>root</literal>。
      </para>
     </step>
     <step performance="required">
      <para>
       當提示輸入密碼時，請輸入使用 SSH 開機選項所設定的密碼。完成驗證後，會出現一個指令行，提示您輸入安裝目標。
      </para>
     </step>
     <step performance="required">
      <para>
       請輸入 <command>yast</command> 啟動安裝程式。出現一個視窗，顯示<xref linkend="cha-inst"/>所述的一般 YaST 畫面。
      </para>
     </step>
    </procedure>
   </sect3>
  </sect2>
 </sect1>
</chapter>
