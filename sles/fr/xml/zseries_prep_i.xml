<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook51-profile.xsl"
    type="text/xml"
    title="Profiling step"
?>
<!DOCTYPE sect1
[
   <!ENTITY % entities SYSTEM "entity-decl.ent">
   %entities;
]>


<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<section xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.1" xml:base="zseries_prep_i.xml" xml:id="sec-zseries-prep">
 <title>Préparation de l'installation</title>

 <para>
  Dans cette section, découvrez les procédures pour rendre les données accessibles pour l'installation, installer <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> selon différentes méthodes et préparer et utiliser l'IPL du système d'installation de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>. Vous trouverez également des informations sur la configuration et l'installation réseau.
 </para>

 <section xml:id="sec-prep-makeavail">
  <title>Mise à disposition des données d'installation</title><indexterm> <primary>préparation</primary><secondary>mise à disposition des données d'installation</secondary></indexterm> <indexterm><primary>mise à disposition des données d'installation</primary></indexterm>
  <para>
   Cette section fournit des informations détaillées pour rendre accessibles les données d'installation de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> pour IBM System z. Selon l'ordinateur que vous utilisez et l'environnement système, choisissez une installation NFS ou FTP. Si vous exécutez des postes de travail Microsoft Windows dans votre environnement, vous pouvez également utiliser le réseau Windows, y compris le protocole SMB, pour installer <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> sur votre système IBM System z.
  </para>
  <tip>
   <title>exécuter un IPL depuis un DVD</title>
   <para>
    Depuis le développement du Service Pack 1 de SUSE Linux Enterprise Server Version 10, il est possible d'exécuter un IPL depuis un DVD et d'utiliser ce dernier comme support d'installation. Cela peut s'avérer très pratique si vous êtes confronté à des restrictions concernant la configuration d'un serveur d'installation fournissant un support d'installation sur votre réseau. Vous devez disposer d'un lecteur de DVD SCSI associé à un protocole FCP.
   </para>
  </tip>
  <note>
   <title>Aucune installation <quote>depuis le disque dur</quote></title>
   <para>
    Il est impossible de procéder à une installation depuis le disque dur en plaçant le contenu du DVD sur une partition sur un DASD.
   </para>
  </note>
  <section xml:id="sec-prep-makeavail-linuxws">
   <title>Utilisation d'un poste de travail Linux ou d'un DVD <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase></title><indexterm> <primary>mise à disposition des données d'installation</primary><secondary>poste de travail Linux</secondary> </indexterm>
   <para>
    Si votre poste de travail Linux s'exécute dans votre environnement informatique, utilisez le poste de travail pour fournir les données d'installation au processus d'installation IBM System z au moyen du serveur NFS ou FTP. Si le poste de travail Linux s'exécute sous <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>, vous pouvez configurer un serveur d'installation (NFS ou FTP) à l'aide du module YaST <guimenu>Serveur d'installation</guimenu>, comme décrit à la <xref linkend="sec-deployment-remoteinst-instserver-sles9"/>.
   </para>
   <section xml:id="sec-prep-makeavail-linuxws-nfs">
    <title>Avec un serveur NFS</title>
    <para>
     Utilisez le serveur NFS (network file system - système de fichiers réseau) pour mettre à disposition le support d'installation.
    </para>
    <important>
     <title>exportation de périphériques installés avec NFS</title>
     <para>
      Exporter la racine du système de fichiers (<filename>/</filename>) n'entraîne pas l'exportation des périphériques installés, comme un DVD. Désignez explicitement le point d'installation dans <filename>/etc/exports</filename> :
     </para>
     <screen>/media/dvd  *(ro)</screen>
     <para>
      Une fois ce fichier modifié, redémarrez le serveur NFS en exécutant la commande <command>rcnfsserver</command> <option>restart</option>.
     </para>
    </important>
   </section>
   <section xml:id="sec-prep-makeavail-linuxws-ftp">
    <title>Avec un serveur FTP</title>
    <para>
     La configuration d'un serveur FTP sur un système Linux entraîne l'installation du logiciel serveur lui-même, par exemple wuftpd ou proftpd, ainsi que d'autres tâches de configuration. Si vous utilisez YaST, l'installation est simple : sélectionnez le paquetage à installer et lancez l'installation. Ignorez la configuration du serveur FTP si aucun serveur FTP anonyme ne doit être utilisé pour l'installation. Utilisez plutôt une connexion FTP avec un nom d'utilisateur et un mot de passe valides. Vous souhaitez peut-être créer un compte utilisateur uniquement pour cette tâche. Vous n'avez pas besoin de démarrer le daemon FTP manuellement. Il peut être démarré par inetd si une connexion FTP est requise. Pour activer les nouveaux paramètres, entrez <command>rcinetd</command> <option>restart</option> ou <command>rcxinetd</command> <option>restart</option>.
    </para>
   </section>
   <section xml:id="sec-prep-makeavail-linuxws-oncd">
    <title><phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> sur DVD</title>
    <para>
     Le DVD 1 de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> pour IBM System z contient une image Linux amorçable pour les postes de travail Intel et une image pour System z.
    </para>
    <para>
     Sur les postes de travail Intel, démarrez depuis ce DVD, répondez aux questions concernant la langue et la configuration du clavier, puis sélectionnez <guimenu>Démarrer le système de secours</guimenu>. Pour cette opération, 64 Mo minimum de mémoire vive sont requis. Aucun espace disque n'est requis, car tout le système de secours réside dans la mémoire vive du poste de travail. Cette approche nécessite que vous soyez familier avec Linux et la mise en réseau car vous devez configurer manuellement la mise en réseau du poste de travail.
    </para>
    <para>
     Pour le System z, exécutez l'IPL de votre invité LPAR/VM depuis ce DVD, comme décrit à la <xref linkend="sec-prep-ipling-lpar-dvd"/>. Après avoir entré les paramètres de votre réseau, le système d'installation considère le DVD comme la source des données d'installation. Puisque System z ne peut pas avoir de terminal associé prenant en charge X11, choisissez entre une installation VNC ou SSH. SSH fournit également une installation graphique par le tunnelage de la connexion x via SSH grâce à <command>ssh -X</command>.
    </para>
   </section>
  </section>
  <section xml:id="sec-prep-makeavail-windowsws">
   <title>Utilisation d'un poste travail Microsoft Windows</title><indexterm> <primary>mise à disposition des données d'installation</primary><secondary>poste de travail Windows</secondary> </indexterm>
   <para>
    Si un poste de travail Microsoft Windows est disponible sur votre réseau, utilisez cet ordinateur pour mettre à disposition le support d'installation. Pour ce faire, le moyen le plus simple est d'utiliser le protocole SMB, déjà inclus dans le système d'exploitation Windows. Assurez-vous de cocher la case <guimenu>SMB over TCP/IP (SMB sur TCP/IP)</guimenu> pour activer l'encapsulation de paquetages SMB dans les paquetages TCP/IP. Pour plus d'informations, reportez-vous à l'aide en ligne de Windows ou à la documentation Windows traitant de la mise en réseau. Vous pouvez également utiliser FTP. Un logiciel tiers pour Windows est également requis dans ce cas.
   </para>
   <section xml:id="sec-prep-makeavail-windowsws-smb">
    <title>Avec un serveur SMB</title>
    <para>
     Pour mettre à disposition le support d'installation avec le serveur SMB, insérez le DVD 1 de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> dans le lecteur de DVD du poste de travail Windows. Créez ensuite un nouveau partage en utilisant la lettre du lecteur de DVD-ROM et mettez-le à disposition de toutes les personnes sur le réseau.
    </para>
    
    <para>Dans YaST, le chemin d'installation peut se présenter comme suit :</para>
    <screen>smb://<replaceable>DOMAIN</replaceable>;<replaceable>USER</replaceable>:<replaceable>PW</replaceable>@<replaceable>SERVERNAME</replaceable>/<replaceable>SHAREPATH</replaceable></screen>
     <para>Où les marques de réservation ont la signification suivante :</para>
     <variablelist>
       <varlistentry>
         <term><replaceable>DOMAIN</replaceable></term>
         <listitem>
           <para>Domaine de répertoire actif ou groupe de travail facultatif.</para>
         </listitem>
       </varlistentry>
       <varlistentry>
         <term><replaceable>USER</replaceable></term><term><replaceable>PW</replaceable></term>
         <listitem>
           <para>Nom d'utilisateur et mot de passe facultatifs d'un utilisateur habilité à accéder à ce serveur et à son partage.</para>
         </listitem>
       </varlistentry>
       <varlistentry>
         <term><replaceable>SERVERNAME</replaceable></term>
         <listitem>
           <para>Nom du serveur qui héberge le ou les partages.</para>
         </listitem>
       </varlistentry>
       <varlistentry>
         <term><replaceable>SHAREPATH</replaceable></term>
         <listitem>
           <para>Chemin d'accès aux partages.</para>
         </listitem>
       </varlistentry>
     </variablelist>
     
     
     <para/>
    
     
   </section>
   <section xml:id="sec-prep-makeavail-windowsws-nfs">
    <title>Avec un serveur NFS</title>
    <para>
     Reportez-vous à la documentation fournie avec le produit tiers qui active les services du serveur NFS pour votre poste de travail Windows. Le lecteur contenant les DVD <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> doit se situer dans le chemin NFS disponible.
    </para>
   </section>
   <section xml:id="sec-prep-makeavail-windowsws-ftp">
    <title>Avec un serveur FTP</title>
    <para>
     Reportez-vous à la documentation fournie avec le produit tiers qui active les services du serveur FTP sur votre poste de travail Windows. Le lecteur contenant les DVD <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> doit se situer dans le chemin FTP disponible.
    </para>
    <para>
     Le serveur FTP faisant partie de certaines versions de Microsoft Windows implémente uniquement un sous-ensemble de la commande FTP définie et n'est pas adapté pour fournir les données d'installation. Cependant, d'autres produits (tels que le serveur FTP qui fait partie de Hummingbird Exceed ou WAR-FTPD) sont opérationnels.
    </para>
   </section>
   <section>
    <title>Utilisation d'un lecteur de DVD SCSI associé à FCP</title>
    <para>
     Après avoir exécuté un IPL depuis le DVD SCSI, comme décrit à la <xref linkend="sec-info-iplopt-dvd"/>, le système d'installation utilise le DVD comme support d'installation. Dans ce cas, vous n'avez pas besoin des supports d'installation sur le serveur FTP, NFS ou SMB. Cependant, vous avez besoin des données de configuration réseau pour votre instance <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> car vous devez configurer le réseau au cours de l'installation afin d'effectuer une installation graphique avec VNC ou X via un tunnel SSH.
    </para>
   </section>
  </section>
  <section xml:id="sec-prep-makeavail-zpxe-cobbler">
   <title>Utilisation d'un serveur Cobbler pour zPXE</title>
   <para>
    Pour effectuer un chargement IPL à partir du réseau, un serveur Cobbler est nécessaire afin de fournir le kernel, le fichier initrd et les données d'installation. La préparation du serveur Cobbler se décompose en quatre étapes :
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Importation des données d'installation
     </para>
    </listitem>
    <listitem>
     <para>
      Ajout d'une distribution
     </para>
    </listitem>
    <listitem>
     <para>
      Ajout de profils
     </para>
    </listitem>
    <listitem>
     <para>
      Ajout de systèmes
     </para>
    </listitem>
   </itemizedlist>
   
   <section xml:id="sec-prep-makeavail-zpxe-cobbler-import">
    <title>Importation des données d'installation</title>
    <para>
     L'importation du support exige que la source d'installation soit disponible sur le serveur Cobbler, à partir d'un DVD ou d'une source réseau. Exécutez la commande suivante pour importer les données :
    </para>
    <screen>cobbler import --path=<replaceable>PATH</replaceable><co xml:id="cobbler-import-path"/> --name=<replaceable>IDENTIFIER</replaceable><co xml:id="cobbler-import-dirname"/> --arch=s390x</screen>
    <calloutlist>
     <callout arearefs="cobbler-import-path">
      <para>
       Point de montage des données d'installation.
      </para>
     </callout>
     <callout arearefs="cobbler-import-dirname">
      <para>
       Chaîne identifiant le produit importé ; <quote>sles11_sp3_s390x</quote>, par exemple. Cette chaîne est utilisée comme nom du sous-répertoire dans lequel sont copiées les données d'installation. Sur un serveur Cobbler qui s'exécute sous SUSE Linux Enterprise, il s'agit de <filename>/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable></filename>. Ce chemin peut être différent si le serveur Cobbler s'exécute sous un autre système d'exploitation.
      </para>
     </callout>
    </calloutlist>
   </section>
   <section xml:id="sec-prep-makeavail-zpxe-cobbler-add-distro">
    <title>Ajout d'une distribution</title>
    <para>
     En ajoutant une distribution, vous indiquez au serveur Cobbler de fournir le kernel et le fichier initrd requis pour un chargement IPL via zPXE. Exécutez la commande suivante sur le serveur Cobbler pour ajouter <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> pour IBM System z :
    </para>
    <screen>cobbler distro add --arch=s390x --breed=suse --name="<replaceable>IDENTIFIER</replaceable>"<co xml:id="cobbler-add-identifier"/> \
  --os-version=sles10<co xml:id="cobbler-add-os"/> \
  --initrd=/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>/boot/s390x/initrd<co xml:id="cobbler-add-initrd"/> \
  --kernel=/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>/boot/s390x/vmrdr.ikr<co xml:id="cobbler-add-kernel"/> \
  --kopts="install=http://cobbler.example.com/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>"<co xml:id="cobbler-add-server"/>
    </screen>
    <calloutlist>
     <callout arearefs="cobbler-add-identifier">
      <para>
       L'identificateur personnalisé pour la distribution, par exemple <quote>SLES <phrase role="productname"><phrase os="sles;sled;slerte">11 SP4</phrase></phrase> System z</quote>, doit être unique.
      </para>
     </callout>
     <callout arearefs="cobbler-add-os">
      <para>
       Identificateur du système d'exploitation. Utilisez <literal>sles10</literal>.
      </para>
     </callout>
     <callout arearefs="cobbler-add-initrd">
      <para>
       Chemin d'accès au fichier initrd. La première partie du chemin d'accès (<filename>/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>/</filename>) dépend de l'emplacement où Cobbler a importé les données et du nom du sous-répertoire choisi lors de l'importation des données d'installation.
      </para>
     </callout>
     <callout arearefs="cobbler-add-kernel">
      <para>
       Chemin d'accès au kernel. La première partie du chemin d'accès (<filename>/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>/</filename>) dépend de l'emplacement où Cobbler a importé les données et du nom du sous-répertoire choisi lors de l'importation des données d'installation.
      </para>
     </callout>
     <callout arearefs="cobbler-add-server">
      <para>
       URl vers le répertoire d'installation sur le serveur Cobbler.  
      </para>
     </callout>
    </calloutlist>
   </section>
  </section>
  
  <section xml:id="sec-prep-makeavail-zpxe-cobbler-profile">
   <title>Ajout de profils</title>
   <para>
    Un profil vous permet d'ajouter des options à une distribution (par exemple, un fichier AutoYaST pour une installation automatisée). Vous pouvez indiquer plusieurs profils par distribution ; au moins un profil doit être créé.
   </para>
   <screen>cobbler profile add
   --name=<replaceable>PROFILENAME</replaceable><co xml:id="cobbler-profile-name"/> --distro=<replaceable>DISTRIBUTION</replaceable><co xml:id="cobbler-profile-distro"/> --kickstart=<replaceable>PATH_TO_AUTOYAST_FILE</replaceable><co xml:id="cobbler-profile-kickstart"/></screen>
   <calloutlist>
    <callout arearefs="cobbler-profile-name">
     <para>
      Nom unique du profil.
     </para>
    </callout>
    <callout arearefs="cobbler-profile-distro">
     <para>
      Distribution à laquelle le profil doit être appliqué. Vous devez utiliser la chaîne spécifiée avec <option>--name=<replaceable>IDENTIFIER</replaceable></option> dans l'étape d'importation.
     </para>
    </callout>
    <callout arearefs="cobbler-profile-kickstart">
     <para>
      Indiquez le chemin d'accès à un fichier AutoYaST en vue d'une installation automatisée. Ce paramètre est facultatif.
     </para>
    </callout>
   </calloutlist>
  </section>
  
  <section xml:id="sec-prep-makeavail-zpxe-cobbler-system">
   <title>Ajout de systèmes</title>
   <para>
    La dernière étape requise consiste à ajouter des systèmes au serveur Cobbler. L'ajout d'un système doit être effectué pour chaque invité System z qui doit démarrer via zPXE. Les invités sont identifiés au moyen de leur ID utilisateur z/VM (l'exemple suivant utilise un ID <quote>LINUX01</quote>). Pour ajouter un système, exécutez la commande suivante :
   </para>

   <screen>cobbler system add --name=LINUX01 --hostname=linux01.example.com \
--ip=192.168.2.103 --subnet=192.168.2.255 --netmask=255.255.255.0 \
--name-servers=192.168.1.116 --name-servers-search=example.com \
--gateway=192.168.2.1 --kopts="<replaceable>KERNEL_OPTIONS</replaceable>"</screen>

   <para>
    L'option <option>--kopts</option> vous permet de spécifier les paramètres de kernel et d'installation que vous indiquez normalement dans le fichier parmfile. Les paramètres sont saisis dans une liste d'éléments séparés par des espaces sous la forme <replaceable>PARAMÈTRE1=VALEUR1 PARAMÈTRE2=VALEUR2</replaceable>. Le programme d'installation vous invite à saisir les paramètres manquants. Pour bénéficier d'une installation entièrement automatisée, vous devez indiquer tous les paramètres de mise en réseau, des DASD et un fichier AutoYaST. Vous trouverez, ci-dessous, un exemple d'invité équipé d'une interface OSA utilisant les mêmes paramètres réseau que ci-dessus.
   </para>
   <screen>--kopts=" \
AutoYaST=http://192.168.0.5/autoinst.xml \
Hostname=linux01.example.com \
Domain=example.com \
HostIP=192.168.2.103 \
Gateway=192.168.2.1 \
Nameserver=192.168.1.116 \
Searchdns=example.com \
InstNetDev=osa; \
Netmask=255.255.255.0 \
Broadcast=192.168.2.255 \
OsaInterface=qdio \
OsaMedium=eth \
Layer2=0 \
PortNo=0 \
ReadChannel=0.0.0600 \
WriteChannel=0.0601 \
DataChannel=0.0.0602 \
Portname=DT70 \
DASD=600"</screen>
  </section>
 </section>

 <section xml:id="sec-prep-inst-types">
  <title>Types d'installation</title><indexterm> <primary>installation</primary><secondary>LPAR</secondary></indexterm><indexterm><primary>installation </primary><secondary>z/VM</secondary></indexterm>
  <para>
   Cette section traite des étapes à exécuter pour installer <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> pour tous les modes d'installation et de la méthode de recherche des informations appropriées. Une fois les préparations décrites dans les chapitres précédents effectuées, suivez la présentation du mode d'installation souhaité pour installer <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> sur votre système.
  </para>
  <para>
   Comme le mentionne la <xref linkend="sec-prep-makeavail"/>, il existe deux modes différents d'installation pour Linux sur IBM System z :
  </para>
  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     Installation LPAR
    </para>
   </listitem>
   <listitem>
    <para>
     Installation z/VM
    </para>
   </listitem>
  </itemizedlist>
  <procedure xml:id="pro-prep-inst-types-lpar">
   <title>Présentation de l'installation des partitions LPAR</title><indexterm> <primary>installation LPAR</primary><secondary>présentation</secondary> </indexterm>
   <step>
    <para>
     Préparez les périphériques requis pour l'installation. Reportez-vous à la section <xref linkend="sec-prep-prep-ipl-natlpar"/>.
    </para>
   </step>
   <step>
    <para>
     Exécutez un IPL sur le système d'installation. Reportez-vous à la section <xref linkend="sec-prep-ipling-lpar"/>.
    </para>
   </step>
   <step>
    <para>
     Configurez le réseau. Reportez-vous à la section <xref linkend="sec-prep-netcfg"/>.
    </para>
   </step>
   <step>
    <para>
     Connectez-vous au système d'installation de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>. Reportez-vous à la section <xref linkend="sec-prep-connect"/>.
    </para>
   </step>
   <step>
    <para>
     Lancez l'installation avec YaST et exécutez un IPL sur le système installé. Reportez-vous à la section <xref linkend="cha-inst"/>.
    </para>
   </step>
  </procedure>
  <procedure xml:id="pro-prep-inst-types-vm">
   <title>Présentation de l'installation z/VM</title><indexterm> <primary>installation z/VM</primary><secondary>présentation</secondary> </indexterm>
   <step>
    <para>
     Préparez les périphériques requis pour l'installation. Reportez-vous à la section <xref linkend="sec-prep-prep-ipl-vm"/>.
    </para>
   </step>
   <step>
    <para>
     Exécutez un IPL sur le système d'installation. Reportez-vous à la section <xref linkend="sec-prep-ipling-vm"/>.
    </para>
   </step>
   <step>
    <para>
     Configurez le réseau. Reportez-vous à la section <xref linkend="sec-prep-netcfg-vm"/>.
    </para>
   </step>
   <step>
    <para>
     Connectez-vous au système d'installation de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>. Reportez-vous à la section <xref linkend="sec-prep-connect"/>.
    </para>
   </step>
   <step>
    <para>
     Lancez l'installation avec YaST et exécutez un IPL sur le système installé. Reportez-vous à la section <xref linkend="cha-inst"/>.
    </para>
   </step>
  </procedure>
 </section>

 <section xml:id="sec-prep-prep-ipl">
  <title>Préparation de l'IPL du système d'installation de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase></title>
  <para/>
  <section xml:id="sec-prep-prep-ipl-natlpar">
   <title>Installation LPAR</title><indexterm> <primary>installation LPAR</primary><secondary>préparation de l'IPL</secondary></indexterm><indexterm><primary>installation LPAR </primary><secondary>préparation de l'IPL</secondary></indexterm>
   <para>
    Configurez le système IBM System z pour qu'il démarre en mode ESA/S390 ou Linux uniquement avec un profil d'activation approprié et un IOCDS. Pour plus d'informations sur cette procédure, reportez-vous à la documentation IBM.
   </para>
   <section xml:id="sec-prep-prep-ipl-natlpar-iocds">
    <title>IOCDS : Connexion et configuration des périphériques</title>
    <para>
     Une installation de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> nécessite au moins deux périphériques : un DASD et un périphérique de connexion réseau. Pour exécuter un IPL à partir d'une bande, vous devez disposer d'un lecteur de bande. Les périphériques sont configurés et connectés à un LPAR dans l'IOCDS (fichier de configuration des entrées-sorties). Cet exemple définit un DASD, un périphérique réseau OSA-2 et un lecteur de bande pour LPAR Z1. Pour plus d'informations sur la configuration de l'IOCDS pour Linux, reportez-vous à la documentation matérielle IBM de votre machine.
    </para>
    <example xml:id="ex-prep-prep-ipl-natlpar-iocds">
     <title>Exemple d'IOCDS</title>
     <screen>CHPID PATH=(CSS(0),FD),PCHID=120,TYPE=FC
CHPID PATH=(CSS(0),FE),PCHID=320,TYPE=OSD
CHPID PATH=(CSS(0),10),PCHID=3A0,TYPE=CNC

CNTLUNIT CUNUMBR=FD00,PATH=((CSS(0),FD)),UNITADD=((00,1)),UNIT=2105
IODEVICE ADDRESS=(FD00,1),CUNUMBR=(FD00),UNIT=3390B,UNITADD=00

CNTLUNIT CUNUMBR=FE20,PATH=((CSS(0),FE)),UNIT=OSA
IODEVICE ADDRESS=(FE20,1),CUNUMBR=(FE20),UNIT=OSA
IODEVICE ADDRESS=(FEFE,1),CUNUMBR=(FE20),UNIT=OSAD

CNTLUNIT CUNUMBR=100A,PATH=((CSS(0),10)),UNIT=3480,UNITADD=((0A,1))
IODEVICE ADDRESS=(100A,1),CUNUMBR=(100A),UNIT=3480,UNITADD=00</screen>
    </example>
    <para>
     Reportez-vous à la <xref linkend="sec-prep-ipling-lpar"/>.
    </para>
   </section>
  </section>
  <section xml:id="sec-prep-prep-ipl-vm">
   <title>Installation z/VM</title><indexterm> <primary>installation z/VM</primary><secondary>préparation de l'IPL</secondary></indexterm><indexterm><primary>installation z/VM </primary><secondary>préparation de l'IPL</secondary></indexterm>
   <section xml:id="sec-prep-prep-ipl-vm-linux-guest">
    <title>Ajout d'un invité Linux</title><indexterm> <primary>installation z/VM</primary><secondary>invité Linux</secondary> </indexterm>
    <para>
     Pour commencer, connectez et formatez un ou plusieurs DASD dans le système que l'invité Linux doit utiliser dans z/VM. Créez ensuite un nouvel utilisateur dans z/VM. Cet exemple illustre le répertoire pour un utilisateur <literal>LINUX1</literal> avec le mot de passe <literal>LINPWD</literal>, une mémoire de 256 Mo (pouvant atteindre 1024 Mo), une mémoire vive étendue de 32 Mo (XSTORE), des minidisques (MDISK), deux unités centrales et un périphérique OSA QDIO.
    </para>
    <tip>
     <title>Affectation de mémoire aux invités z/VM</title>
     <para>
      Lorsque vous affectez de la mémoire à un invité z/VM, assurez-vous que la taille de la mémoire est adaptée aux besoins de votre type d'installation préférée. Reportez-vous à la section <xref linkend="sec-info-sysreq-sysreq-hw-mem"/>. Pour définir la taille de la mémoire sur 512 Mo, utilisez la commande <command>CP DEFINE STORAGE 512M</command>. À la fin de l'installation, réinitialisez la taille de la mémoire vers la valeur souhaitée.
     </para>
    </tip>
    <example xml:id="ex-prep-prep-ipl-vm-linux-guest-config">
     <title>Configuration d'un répertoire z/VM</title>
     <screen>USER LINUX1 LINPWD 256M 1024M G 
*____________________________________________
* LINUX1 
*____________________________________________
* This VM Linux guest has two CPUs defined.

CPU 01 CPUID 111111 
CPU 02 CPUID 111222 
IPL CMS PARM AUTOCR 
IUCV ANY 
IUCV ALLOW 
MACH ESA 10 
OPTION MAINTCCW RMCHINFO 
SHARE RELATIVE 2000 
XSTORE 32M 
CONSOLE 01C0 3270 A 
SPOOL 000C 2540 READER * 
SPOOL 000D 2540 PUNCH A 
SPOOL 000E 3203 A 
* OSA QDIO DEVICE DEFINITIONS 
DEDICATE 9A0 9A0 
DEDICATE 9A1 9A1 
DEDICATE 9A2 9A2 
* 
LINK MAINT 0190 0190 RR 
LINK MAINT 019E 019E RR 
LINK MAINT 019D 019D RR 
* MINIDISK DEFINITIONS 
MDISK 201 3390 0001 0050 DASD40 MR ONE4ME TWO4ME THR4ME 
MDISK 150 3390 0052 0200 DASD40 MR ONE4ME TWO4ME THR4ME 
MDISK 151 3390 0253 2800 DASD40 MR ONE4ME TWO4ME THR4ME</screen>
    </example>
    <para>
     Cet exemple utilise un minidisque 201 comme disque d'un invité. Le minidisque 150 avec 200 cylindres est le périphérique de commutation Linux. Le disque 151 avec 2 800 cylindres contient l'installation Linux.
    </para>
    <para>
     A ce stade, ajoutez (en tant qu'utilisateur <systemitem class="username">MAINT</systemitem>) l'invité au répertoire utilisateur avec la commande <command>DIRM FOR LINUX1 ADD</command>. Saisissez le nom de l'invité (<literal>LINUX1</literal>) et appuyez sur la touche <keycap>F5</keycap>. Configurez l'environnement de l'utilisateur avec :
    </para>
    <screen>DIRM DIRECT 
DIRM USER WITHPASS</screen>
    <para>
     La dernière commande renvoie un numéro de fichier du lecteur. Ce numéro est requis pour exécuter la commande suivante :
    </para>
    <screen>RECEIVE &lt;number&gt; USER DIRECT A (REPL)</screen>
    <para>
     Assignez les répertoires à l'invité à l'aide de la commande <command>DISKMAP USER DIRECT A</command>. Vous pouvez désormais vous connecter sur Invité en tant qu'utilisateur <systemitem class="username">Linux1</systemitem>.
    </para>
    <para>
     Si l'option <literal>dirmaint</literal> n'est pas disponible, reportez-vous à la documentation IBM pour configurer cet utilisateur.
    </para>
    <para>
     Reportez-vous à la <xref linkend="sec-prep-ipling-vm"/>.
    </para>
   </section>
  </section>
 </section>

 <section xml:id="sec-prep-ipling">
  <title>Exécution d'un IPL sur le système d'installation de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase></title>
  <para/>
  <section xml:id="sec-prep-ipling-lpar">
   <title>Installation LPAR</title><indexterm> <primary>installation LPAR</primary><secondary>système d'installation IPL</secondary></indexterm><indexterm><primary>installation LPAR </primary><secondary>IPL</secondary></indexterm>
   <para>
    Il existe différentes façons d'exécuter un IPL sur <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> au sein d'une partition LPAR. La méthode recommandée est d'utiliser la fonction <guimenu>Load from CD-ROM or server (Charger depuis un CD-ROM ou un serveur)</guimenu> de SE ou HMC.
   </para>
   <section xml:id="sec-prep-ipling-lpar-cdrom">
    <title>Exécution d'un IPL à partir d'un DVD-ROM</title>
    <para>
     Cochez le LPAR à installer, puis sélectionnez <guimenu>Load from CD-ROM or server (Charger depuis un CD-ROM ou un serveur)</guimenu>. Ne remplissez pas le champ relatif à l'emplacement du fichier ou saisissez le chemin d'accès au répertoire racine du premier DVD-ROM, puis sélectionnez Continuer. Dans la liste des options qui s'affiche, choisissez l'emplacement par défaut. <guimenu>Operating system messages (Messages du système d'exploitation)</guimenu> doit afficher les messages de démarrage du kernel.
    </para>
   </section>
   <section xml:id="sec-prep-ipling-lpar-dvd">
    <title>Exécution d'un IPL à partir d'un DVD SCSI associé FCP</title>
    <para>
     Vous pouvez utiliser la procédure <guimenu>LOAD</guimenu> en sélectionnant <guimenu>SCSI</guimenu> comme <guimenu>Type de chargement</guimenu> pour exécuter un IPL à partir de SCSI. Entrez le WWPN (Worldwide port name, Identifiant unique de port) et le LUN (Logical unit number, Identifiant d'unité logique) fournis par votre pont ou stockage SCSI (16 chiffres ; ne pas oublier les 0 à droite). Le sélecteur du programme de démarrage doit être 2. Utilisez votre adaptateur FCP comme <guimenu>Adresse de chargement</guimenu> et exécutez un IPL.
    </para>
   </section>
   <section xml:id="sec-prep-ipling-lpar-tape">
    <title>Exécution d'un IPL à partir d'une bande associée ESCON ou FICON</title>
    <para>
     Si vous ne pouvez pas exécuter d'IPL à partir du DVD, créez une bande associée à un canal à partir de laquelle vous exécutez un IPL sur l'image d'installation de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>. Utilisez le bouton <guimenu>LOAD</guimenu> dans SE ou HMC avec l'adresse du périphérique de bande comme adresse de chargement pour exécuter un IPL sur le système d'installation de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>.
    </para>
    <para>
     Il existe plusieurs façons de créer une bande sur laquelle un IPL peut être exécuté. Vous pouvez par exemple copier les fichiers :
    </para>
    <screen>/boot/s390x/tapeipl.ikr
/boot/s390x/parmfile
/boot/s390x/initrd</screen>
    <para>
     comme fichiers binaires à partir du DVD 1 (par exemple, en utilisant le serveur FTP depuis un poste de travail Linux)
    </para>
    <para>
     Nommez-les
    </para>
    <screen>SLES11 IMAGE
SLES11 PARM
SLES11 INITRD</screen>
    <para>
     et écrivez-les sur une bande avec REXX comme dans l'exemple.
    </para>
    <important>
     <title>Transfert de fichiers binaires à l'aide du serveur FTP</title>
     <para>
      Ne téléchargez pas les fichiers au format <literal>fixed 80</literal>. Enregistrez-les au format <literal>fixed 1024</literal>. Utilisez la commande FTP <command>locsite fix 1024</command>.
     </para>
    </important>
    <example xml:id="sec-prep-ipling-lpar-tape-create">
     <title>Script REXX pour créer une bande sur laquelle exécuter un IPL</title>
     <screen>'REWIND 181'
'FILEDEF IN1 DISK' SLES11 IMAGE A
'FILEDEF IN2 DISK' SLES11 PARM A
'FILEDEF IN3 DISK' SLES11 INITRD A
'FILEDEF OUT TAP1 (RECFM F BLOCK 1024 LRECL 1024 PERM'
say 'Writing: ' left(file1,23)
'MOVEFILE IN1 OUT'
say 'Writing: ' left(file2,23)
'MOVEFILE IN2 OUT'
say 'Writing: ' left(file3,23)
'MOVEFILE IN3 OUT'
say 'Done.'
'REWIND 181'
 exit</screen>
    </example>
    <para>
     La bande de ce script est connectée au format 181. Ajustez le script en fonction de vos besoins.
    </para>
   </section>
  </section>
  <section xml:id="sec-prep-ipling-vm">
   <title>Installation z/VM</title><indexterm> <primary>installation z/VM</primary><secondary>système d'installation IPL</secondary></indexterm><indexterm><primary>installation z/VM </primary><secondary>IPL</secondary></indexterm>
   <para>
    Cette section traite de l'exécution d'un IPL sur le système d'installation afin d'installer <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> pour IBM System z sur un système z/VM.
   </para>
   <section xml:id="sec-prep-ipling-vm-reader">
    <title>Exécution d'un IPL à partir du lecteur z/VM</title>
    <para>
     Vous avez besoin d'une bonne connexion TCP/IP et d'un programme client FTP dans votre invité z/VM récemment défini pour transférer le système d'installation via FTP. La configuration de TCP/IP pour z/VM ne sera pas abordée dans ce manuel. À ce propos, reportez-vous à la documentation IBM appropriée.
    </para>
    <para>
     Connectez-vous en tant qu'invité Linux z/VM pour exécuter un IPL. Rendez le contenu du répertoire <filename>/boot/s390x</filename> sur le DVD 1 de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> pour IBM System z accessible par FTP au sein de votre réseau. Depuis ce répertoire, récupérez les fichiers <filename>vmrdr.ikr</filename>, <filename>initrd</filename>, <filename>parmfile</filename> et <filename>sles11.exec</filename>. Transférez les fichiers avec une taille de blocs fixe de 80 caractères. Spécifiez la taille en exécutant la commande FTP <command>locsite fix 80</command>. Il est important de copier les fichiers <filename>vmrdr.ikr</filename> (kernel Linux) et <filename>initrd</filename> (image d'installation) comme fichiers binaires. Pour cela, utilisez le mode de transfert <literal>binary</literal>. Les fichiers <filename>parmfile</filename> et <filename>sles11.exec</filename> doivent être transférés en mode ASCII.
    </para>
    <para>
     L'exemple montre les étapes requises. Dans cet exemple, les fichiers requis sont accessibles sur un serveur FTP à l'adresse IP <literal>192.168.0.3</literal>, avec l'ID de connexion <systemitem class="username">lininst</systemitem>. Ces informations peuvent varier selon le réseau.
    </para>
    <example xml:id="ex-prep-ipling-vm-reader-ftp-ftptrans">
     <title>Transfert de fichiers binaires via le serveur FTP</title>
     <screen>FTP 192.168.0.3
VM TCP/IP FTP Level 530
Connecting to 192.168.0.3, port 21
220 ftpserver FTP server (Version wu-2.4.2-academ[BETA-18](1)
Thu Feb 11 16:09:02 GMT 2010) ready.
USER
lininst
331 Password required for lininst
PASS
******
230 User lininst logged in.
Command:
binary
200 Type set to I
Command:
locsite fix 80
Command:
get /media/dvd1/boot/s390x/vmrdr.ikr sles11.image
200 PORT Command successful
150 Opening BINARY mode data connection for /media/dvd1/boot/s390x/vmrdr.ikr
(6757376 bytes)
226 Transfer complete.
6757376 bytes transferred in 8.826 seconds.
Transfer rate 766.70 Kbytes/sec.
Command:
get /media/dvd1/boot/s390x/initrd sles11.initrd
200 PORT Command successful
150 Opening BINARY mode data connection for /media/dvd1/boot/s390x/initrd
(12654815 bytes)
226 Transfer complete.
12194534 bytes transferred in 16.520 seconds.
Transfer rate 766.70 Kbytes/sec.
Command:
ascii
200 Type set to A
Command:
get /media/dvd1/boot/s390x/parmfile sles11.parmfile
150 Opening ASCII mode data connection for /media/dvd1/boot/s390x/parmfile
(71 bytes)
226 Transfer complete.
71 bytes transferred in 0.092 seconds.
Transfer rate 0.71 Kbytes/sec.
Command:
get /media/dvd1/boot/s390x/sles11.exec sles11.exec
150 Opening ASCII mode data connection for /media/dvd1/boot/s390x/sles11.exec
(891 bytes)
226 Transfer complete.
891 bytes transferred in 0.097 seconds.
Transfer rate 0.89 Kbytes/sec.
Command:
quit</screen>
    </example>
    <para>
     Utilisez le fichier sles11.exec de script REXX que vous venez de télécharger pour exécuter un IPL sur le système d'installation Linux. Ce script charge le kernel, le fichier parmfile et le disque virtuel initial dans le lecteur pour exécuter un IPL.
    </para>
    <example xml:id="sex-prep-ipling-vm-reader-startscript-slesexec">
     <title>SLES11 EXEC</title>
     <screen>/* REXX LOAD EXEC FOR SUSE LINUX S/390 VM GUESTS       */
/* LOADS SUSE LINUX S/390 FILES INTO READER            */
SAY ''
SAY 'LOADING SLES11 FILES INTO READER...'
'CP CLOSE RDR'
'PURGE RDR ALL'
'SPOOL PUNCH * RDR'
'PUNCH SLES11 IMAGE A (NOH'
'PUNCH SLES11 PARMFILE A (NOH'
'PUNCH SLES11 INITRD A (NOH'
'I 00C'</screen>
    </example>
    <para>
     Ce script permet d'exécuter un IPL sur le système d'installation de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> avec la commande <command>sles11</command>. Le kernel Linux démarre et imprime ses messages de démarrage.
    </para>
    <para>
     Pour continuer l'installation, passez à la <xref linkend="sec-prep-netcfg-vm"/>.
    </para>
   </section>
   <section>
    <title>Exécution d'un IPL à partir d'un DVD SCSI associé FCP</title>
    <para>
     Pour exécuter un IPL dans z/VM, préparez le processus IPL de SCSI en utilisant le paramètre SET LOADDEV :
    </para>
    <screen>SET LOADDEV PORTNAME 200400E8 00D74E00 LUN 00020000 00000000 BOOT 2</screen>
    <para>
     Une fois le paramètre LOADDEV configuré avec les valeurs appropriées, exécutez un IPL sur votre adaptateur FCP, par exemple :
    </para>
    <screen>IPL FC00</screen>
    <para>
     Pour continuer l'installation, passez à la <xref linkend="sec-prep-netcfg-vm"/>.
    </para>
   </section>
   <section xml:id="sec-prep-ipling-vm-tape">
    <title>Exécution d'un IPL à partir d'une bande associée ESCON ou FICON</title>
    <para>
     Si vous ne pouvez pas exécuter d'IPL à partir du lecteur z/VM, créez une bande associée à un canal à partir de laquelle vous exécutez un IPL sur l'image d'installation de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>. Pour plus d'instructions, reportez-vous à la <xref linkend="sec-prep-ipling-lpar-tape"/>.
    </para>
    <para>
     Pour continuer l'installation, passez à la <xref linkend="sec-prep-netcfg-vm"/>.
    </para>
   </section>
   <section xml:id="sec-prep-ipling-vm-zpxe">
    <title>IPL à partir d'un serveur Cobbler avec zPXE</title>
    <para>
     Pour effectuer un chargement IPL à partir d'un serveur Cobbler avec zPXE, vous devez transférer le script <filename>zpxe.exec</filename> via FTP du serveur Cobbler vers votre invité z/VM. L'invité z/VM a besoin d'une connexion TCP/IP opérationnelle et d'un programme client FTP.
    </para>
    <para>
     Connectez-vous en tant qu'invité z/VM Linux pour effectuer un chargement IPL et transférer le script avec une taille fixe de 80 caractères en mode ASCII (voir <xref linkend="ex-prep-ipling-vm-reader-ftp-ftptrans"/>, par exemple). Le script <filename>zpxe.exec</filename> est disponible sur le serveur Cobbler à l'adresse ftp://<replaceable>IP_OF_COBBLER_SERVER</replaceable>/<replaceable>zSERIES_INSTALLATION_DIRECTORY</replaceable>/boot/s390x/zpxe.exec. L'emplacement exact de <replaceable>zSERIES_INSTALLATION_DIRECTORY</replaceable> dépend de l'emplacement d'importation des données d'installation sur le serveur Cobbler (pour plus d'informations, reportez-vous à la <xref linkend="sec-prep-makeavail-zpxe-cobbler-import"/>).
    </para>
    <para>
     <filename>zpxe.exec</filename> est censé remplacer le fichier <filename>PROFILE EXEC</filename> de votre invité. Effectuez une copie de sauvegarde du fichier <filename>PROFILE EXEC</filename> et renommez <filename>ZPXE EXEC</filename> en <filename>PROFILE EXEC</filename>. Une autre solution consiste à appeler <filename>ZPXE EXEC</filename> à partir du fichier <filename>PROFILE EXEC</filename> existant en ajoutant une nouvelle ligne avec le contenu suivant : <literal>'ZPXE EXEC'</literal>.
    </para>
    <para>
     La dernière étape consiste à créer un fichier de configuration, <filename>ZPXE CONF</filename>, en indiquant à <filename>ZPXE EXEC</filename> le serveur Cobbler à contacter et le disque à charger (IPL). Exécutez <command>xedit zpxe conf a</command> et créez <filename>ZPXE CONF</filename> avec le contenu suivant (remplacez les données d'exemple en conséquence) :
    </para>
    <screen>HOST cobbler.example.com
IPLDISK 600</screen>
    <para>
     Le serveur Cobbler sera connecté lors de la prochaine connexion à votre invité z/VM. Si une installation est programmée sur le serveur Cobbler, elle est exécutée. Pour programmer l'installation, exécutez la commande suivante sur le serveur Cobbler :
    </para>
    <screen>cobbler system edit --name <replaceable>ID</replaceable><co xml:id="cobbler-sysedit-id"/> --netboot-enabled 1<co xml:id="cobbler-sysedit-netboot"/> --profile <replaceable>PROFILENAME</replaceable><co xml:id="cobbler-sysedit-profile"/></screen>
    <calloutlist>
     <callout arearefs="cobbler-sysedit-id">
      <para>
       ID utilisateur z/VM.
      </para>
     </callout>
     <callout arearefs="cobbler-sysedit-netboot">
      <para>
       Activez le chargement IPL à partir du réseau.
      </para>
     </callout>
     <callout arearefs="cobbler-sysedit-profile">
      <para>
       Nom du profil existant, voir <xref linkend="sec-prep-makeavail-zpxe-cobbler-profile"/>.
      </para>
     </callout>
    </calloutlist>
   </section>
  </section>
 </section>

 <section xml:id="sec-prep-netcfg">
  <title>Configuration du réseau</title>
  <para/><indexterm> <primary>installation LPAR</primary><secondary>configuration réseau</secondary></indexterm><indexterm><primary>installation LPAR </primary><secondary>configuration réseau</secondary></indexterm>
  <para>
   Patientez jusqu'à ce que le kernel ait terminé ses routines de démarrage. Si vous effectuez une installation en mode basique ou dans un LPAR, ouvrez le menu <guimenu>Operating System Messages (Messages du système d'exploitation)</guimenu> sur HMC ou SE.
  </para>
  <para>
   Pour commencer, choisissez <guimenu>Démarrer l'installation ou le système</guimenu> dans le menu principal linuxrc, puis <guimenu>Démarrer l'installation ou la mise à jour</guimenu> pour lancer le processus d'installation. Sélectionnez <guimenu>Réseau</guimenu> comme support d'installation, puis sélectionnez le type de protocole réseau sur lequel l'installation sera utilisée. La <xref linkend="sec-prep-makeavail"/> décrit comment mettre à disposition les données d'installation pour différents types de connexions réseau. Actuellement, <guimenu>FTP</guimenu>, <guimenu>HTTP</guimenu>, <guimenu>NFS</guimenu> et <guimenu>SMB/CIFS</guimenu> (partage de fichiers Windows) sont pris en charge.
  </para>
  <para>
   Configurez maintenant le périphérique réseau sur lequel recevoir les données d'installation : <guimenu>OSA-2 ou OSA Express</guimenu> ou <guimenu>HiperSockets</guimenu>. Vous pouvez toujours utiliser les adaptateurs réseau suivants bien qu'ils ne soient plus pris en charge : CTC, ESCON et IUCV. Choisissez ensuite l'interface de bus CCW et le support physique (<guimenu>Ethernet</guimenu>). Par conséquent, le pilote respectif est installé et les messages de kernel correspondants s'affichent.
  </para>
  <para>
   Lorsque vous poursuivez l'installation, linuxrc affiche une liste de canaux de lecture, d'écriture et, si applicable, de données fonctionnels. Après avoir saisi les adresses pour chaque canal, vous devrez peut-être également saisir des informations supplémentaires, telles que le nom de port des cartes Ethernet OSA.
  </para>
  <para>
   Ensuite, choisissez d'utiliser ou non la configuration automatique DHCP pour configurer les paramètres de l'interface réseau. Etant donné que DHCP fonctionne uniquement sur quelques périphériques et qu'il requiert des paramètres de configuration matérielle spécifiques, il est préférable de cliquer sur <guimenu>NO (Non)</guimenu> à cet endroit. Lorsque vous cliquez sur NO, vous êtes invité à indiquer les paramètres réseau du périphérique réseau d'installation :
  </para>
  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     L'adresse IP du système à installer
    </para>
   </listitem>
   <listitem>
    <para>
     Le masque de réseau correspondant
    </para>
   </listitem>
   <listitem>
    <para>
     L'adresse IP d'une passerelle pour accéder au serveur
    </para>
   </listitem>
   <listitem>
    <para>
     L'adresse IP du serveur de noms de domaine (DNS)
    </para>
   </listitem>
  </itemizedlist>
  <para>
   Si vous utilisez une carte réseau OSA Express, vous êtes invité à indiquer un <guimenu>numéro de port relatif</guimenu>. Cela a été ajouté pour permettre la prise en charge des nouveaux périphériques réseau OSA Express 3 dotée de 2 ports. Si vous n'utilisez pas de périphérique OSA Express 3, veuillez entrer <literal>0</literal>. Les cartes OSA Express peuvent aussi s'exécuter dans un mode de <quote>prise en charge de la couche OSI de niveau 2</quote> ou utiliser un mode commun plus ancien <quote>couche de niveau 3</quote>. Le mode de la carte affecte tous les systèmes qui partagent le périphérique, y compris les systèmes sur d'autres LPAR. Si vous avez un doute, veuillez spécifier <literal>2</literal> pour assurer une compatibilité avec le mode par défaut utilisé par les autres systèmes d'exploitation, comme z/VM et z/OS. Consultez votre administrateur de matériel pour obtenir plus d'informations sur ces options.
  </para>
  <section xml:id="sec-prep-netcfg-vm">
   <title>Installation z/VM</title><indexterm> <primary>installation z/VM</primary><secondary>configuration réseau</secondary></indexterm><indexterm><primary>installation z/VM </primary><secondary>configuration réseau</secondary></indexterm>
   <para>
    Une fois que le kernel a terminé ses routines de démarrage, répondez à quelques questions concernant la configuration du réseau. Sélectionnez tout d'abord le type de connexion réseau à utiliser : OSA Express ou HiperSockets. Dans cet exemple d'installation, OSA Express est utilisé.
   </para>
   <para>
    Le système affiche une configuration OSA possible. Choisissez d'utiliser QDIO ou LCS OSA. Ensuite, choisissez le support physique que vous souhaitez utiliser, puis saisissez les adresses de périphériques. Si vous préférez une autre configuration, saisissez l'adresse du périphérique du canal de lecture OSA (0.0.0700 dans cet exemple), puis celle du canal d'écriture OSA (0.0.0701) et celle du canal de contrôle OSA (0.0.0702). Une fois les canaux saisis, insérez le nom du port auquel la carte OSA est connectée.
   </para>
   <para>
    <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> tente à présent de charger le module réseau en créant une ligne de paramètre avec les informations fournies et en affichant tous les modules chargés. Le chargement a été exécuté avec succès si vous obtenez des résultats de ce type :
   </para>
   <example xml:id="ex-prep-netcfg-vm-param">
    <title>Paramètres du pilote de périphérique réseau</title>
    <screen>(portname YSW2)
(Port 0)
qdio: 0.0.0702 OSA on SC 3 using AI:1 QEBSM:0 PCI:1 TDD:1 SIGA:RW AO
qeth.736dae: 0.0.0700: Device is a Guest LAN QDIO card (level: V540)
with link type GuestLAN QDIO (portname: YSW2)
qeth.47953b: 0.0.0700: Hardware IP fragmentation not supported on eth0
qeth.066069: 0.0.0700: Inbound source MAC-address not supported on eth0
qeth.d7fdb4: 0.0.0700: VLAN enabled
qeth.e90c78: 0.0.0700: Multicast enabled
qeth.5a9d02: 0.0.0700: IPV6 enabled
qeth.184d8a: 0.0.0700: Broadcast enabled
qeth.dac2aa: 0.0.0700: Using SW checksumming on eth0.
qeth.9c4c89: 0.0.0700: Outbound TSO not supported on eth0
</screen>
   </example>
   <para>
    Ensuite, saisissez votre adresse IP, le masque de réseau et la passerelle par défaut. Pour effectuer une installation sur iucv ou ctc, entrez des informations supplémentaires, comme l'adresse pair (pour un adaptateur poste à poste) ou le nom du port. 
   </para>
   <para>
    Pour finir, saisissez l'adresse IP du serveur DNS et la taille de la MTU. La taille de la MTU doit toujours correspondre à celle utilisée par le réseau auquel vous vous connectez.
   </para>
   <para>
    Un résumé s'affiche ensuite. Confirmez que votre entrée est correcte. Avant le démarrage du réseau, saisissez un mot de passe valide uniquement lors de l'installation. Après avoir exécuté un IPL sur le système installé, saisissez le mot de passe racine <emphasis>real</emphasis>.
   </para>
   <para>
    Une fois tous les paramètres de base configurés, le réseau démarre. Vérifiez la sortie de ifconfig qui devrait contenir deux entrées : une connexion de bouclage (lo) et une connexion (eth0, ctc0, escon0, iucv0 ou hsi0) avec les paramètres adéquats.
   </para>
   <example xml:id="ex-prep-netcfg-vm-ifconfig">
    <title>Exemple de fichier ifconfig</title>
    <screen>/sbin/ifconfig eth0 : 
	Link encap:Ethernet  HWaddr 02:00:01:00:00:27  
        inet addr:192.168.0.1  Bcast:192.168.0.255  Mask:255.255.255.0
        inet6 addr: fe80::200:100:100:27/64 Scope:Link
        UP BROADCAST RUNNING MULTICAST  MTU:1492  Metric:1
        RX packets:0 errors:0 dropped:0 overruns:0 frame:0
        TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
        collisions:0 txqueuelen:1000 
        RX bytes:0 (0.0 Mb)  TX bytes:0 (0.0 Mb)</screen>
   </example>
  </section>
 </section>

 <section xml:id="sec-prep-connect">
  <title>Connexion au système d'installation de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase></title><indexterm> <primary>installation LPAR</primary><secondary>connexion au système d'installation</secondary></indexterm><indexterm><primary>connexion au système d'installation</primary><secondary>installation LPAR</secondary></indexterm><indexterm><primary>installation z/VM </primary><secondary>connexion au système d'installation</secondary></indexterm><indexterm><primary>connexion au système d'installation</primary><secondary>installation z/VM</secondary></indexterm>
  <para>
   Après avoir configuré votre connexion réseau, linuxrc demande les détails de la source d'installation choisis précédemment lors du processus, comme l'adresse IP du serveur et le répertoire dans lequel se trouvent les données.
  </para>
  <para>
   Pour finir, linuxrc souhaite connaître le type d'affichage que vous souhaitez utiliser pour contrôler la procédure d'installation. Vous pouvez choisir parmi <literal>X11</literal> (système X Window), <literal>VNC</literal> (protocole Virtual Network Computing), <literal>SSH</literal> (mode texte ou installation X11 via un shell sécurisé) ou la <literal>console ASCII</literal>.
  </para>
  <para>
   Si vous optez pour la <literal>console ASCII</literal>, YaST démarre en mode texte et vous pouvez exécuter l'installation directement sur votre terminal. Voir <xref linkend="cha-yast-text"/> pour des instructions d'utilisation.
  </para>
  <note>
   <title>Émulation de terminal pour la console ASCII</title>
   <para>
    Pour permettre le fonctionnement avec YaST en mode texte, il est nécessaire de procéder à l'exécution sur un terminal avec une émulation Linux/VT220 (également appelée <literal>console ASCII</literal>). Par exemple, vous ne pourrez pas utiliser YaST sur un terminal 3270.
   </para>
  </note>
  <section xml:id="sec-inst-connect-vnc-inst">
   <title>Lancement de l'installation pour VNC</title><indexterm> <primary>VNC</primary><secondary>lancement de l'installation</secondary> </indexterm>
   <procedure>
    <step>
     <para>
      Une fois que l'option d'installation <literal>VNC</literal> a été choisie, le serveur VNC démarre. Une brève information affichée dans la console fournit des informations sur l'adresse IP et le numéro d'affichage requis pour une connexion à l'aide de vncviewer. Une URL est également indiquée à cet endroit pour accéder au navigateur Java et vous connecter au système d'installation.
     </para>
    </step>
    <step>
     <para>
      Démarrez une application client VNC sur votre système client. Utilisez vncviewer ou le client Java VNC et un navigateur Web Java.
     </para>
    </step>
    <step>
     <para>
      Saisissez l'adresse IP et le numéro d'affichage du système d'installation de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> lorsque vous y êtes invité.
     </para>
     <para>
      Si vous vous connectez via un navigateur Java, saisissez une URL contenant l'adresse IP du système d'installation et le numéro de port approprié au format :
     </para>
     <screen>http://&lt;IP address of installation system&gt;:5801/</screen>
    </step>
    <step>
     <para>
      Une fois la connexion établie, commencez par installer <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> avec YaST.
     </para>
    </step>
   </procedure>
  </section>
  <section xml:id="sec-inst-connect-x">
   <title>Lancement de l'installation pour le système X Window</title><indexterm> <primary>X</primary><secondary>lancement de l'installation</secondary> </indexterm>
   <important>
    <title>Mécanisme d'authentification X</title>
    <para>
     L'installation directe avec le système X Window repose sur un mécanisme d'authentification primitif basé sur des noms d'hôte. Ce mécanisme est désactivé dans les versions actuelles de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>. Il est préférable de procéder à une installation avec SSH ou VNC.
    </para>
   </important>
   <procedure>
    <step>
     <para>
      Assurez-vous que le serveur X permet au client (le système installé) de se connecter. Définissez la variable <command>DISPLAYMANAGER_XSERVER_TCP_PORT_6000_OPEN="yes"</command> dans le fichier <filename>/etc/sysconfig/displaymanager</filename>. Ensuite, redémarrez le serveur X et permettez la connexion du client au serveur à l'aide de <command>xhost &lt;client IP address&gt;</command>.
     </para>
    </step>
    <step>
     <para>
      À l'invite du système d'installation, saisissez l'adresse IP de la machine exécutant le serveur X.
     </para>
    </step>
    <step>
     <para>
      Patientez jusqu'à ce que YaST s'ouvre, puis démarrez l'installation.
     </para>
    </step>
   </procedure>
  </section>



  <section xml:id="sec-inst-connect-ssh">
   <title>Lancement de l'installation pour SSH</title><indexterm> <primary>ssh</primary><secondary>lancement de l'installation</secondary> </indexterm>
   <para>
    Pour se connecter à un système d'installation nommé earth en utilisant SSH, exécutez <command>ssh -X earth</command>. Si votre poste de travail s'exécute sur Microsoft Windows, utilisez le client ssh et telnet et l'émulateur de terminal Putty, disponible sur le site <link xlink:href="http://www.chiark.greenend.org.uk/~sgtatham/putty/"/>. Choisissez <guimenu>Enable X11 forwarding (Activer le réacheminement X11)</guimenu> dans le terminal putty sous<menuchoice> <guimenu>Connexion</guimenu> <guimenu>SSH</guimenu> <guimenu>X11</guimenu> </menuchoice>.
   </para>
   <para>
    Une invite de connexion apparaît. Saisissez <literal>root</literal> et connectez-vous en saisissant votre mot de passe. Saisissez la commande <command>yast2</command> pour démarrer YaST.
   </para>
   <para>
    Passez à la description détaillée de la procédure d'installation qui se trouve à la <xref linkend="cha-inst"/>.
   </para>
  </section>
 </section>
</section>
