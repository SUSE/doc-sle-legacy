<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook51-profile.xsl"
    type="text/xml"
    title="Profiling step"
?>
<!DOCTYPE sect1
[
   <!ENTITY % entities SYSTEM "entity-decl.ent">
   %entities;
]>


<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<section xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.1" xml:base="zseries_prep_i.xml" xml:id="sec-zseries-prep">
 <title>Vorbereitung der Installation</title>

 <para>
  In diesem Abschnitt erfahren Sie, wie Sie die Daten zur Installation bereitstellen, <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> mit verschiedenen Methoden installieren und den IPL-Vorgang des <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>-Installationssystems vorbereiten und ausführen. Darüber hinaus erhalten Sie Informationen zur Konfiguration der Netzwerkinstallation.
 </para>

 <section xml:id="sec-prep-makeavail">
  <title>Bereitstellen der Installationsdaten</title><indexterm> <primary>Vorbereitung</primary> <secondary>Bereitstellen der Installationsdaten</secondary> </indexterm> <indexterm> <primary>Bereitstellen der Installationsdaten</primary> </indexterm>
  <para>
   In diesem Abschnitt finden Sie ausführliche Informationen dazu, wie Sie die Installationsdaten für <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> auf IBM System z zur Installation bereitstellen. Je nach Computer- und Systemumgebung treffen Sie eine Auswahl zwischen der NFS- oder FTP-Installation. Wenn Sie in Ihrer Umgebung Microsoft Windows-Arbeitsstationen ausführen, können Sie auch das Windows-Netzwerk einschließlich des SMB-Protokolls für die Installation von <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> auf dem IBM System z-System verwenden.
  </para>
  <tip>
   <title>IPL von DVD</title>
   <para>
    Seit Service Pack 1 von SUSE Linux Enterprise Server Version 10 kann IPL von DVD ausgeführt und die DVD als Installationsmedium verwendet werden. Dies ist besonders praktisch, wenn Beschränkungen für das Einrichten eines Installationsservers bestehen, der Installationsmedien über das Netzwerk bereitstellt. Voraussetzung ist ein per FCP angeschlossenes SCSI-DVD-Laufwerk.
   </para>
  </tip>
  <note>
   <title>Keine Installation <quote>Von Festplatte</quote></title>
   <para>
    Es ist nicht möglich, von einer Festplatte zu installieren, indem der Inhalt der DVD auf eine Partition auf einem DASD kopiert wird.
   </para>
  </note>
  <section xml:id="sec-prep-makeavail-linuxws">
   <title>Verwenden einer DVD für Linux Workstation oder <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase></title><indexterm> <primary>Bereitstellung der Installationsdaten</primary><secondary>Linux-Arbeitsplatzrechner</secondary> </indexterm>
   <para>
    Wenn Sie in Ihrer Rechnerumgebung einen Linux-Arbeitsplatzrechner ausführen, stellen Sie hierüber die Installationsdaten für den Installationsvorgang für das IBM System z mit NFS oder FTP bereit. Wenn der Linux-Arbeitsplatzrechner unter <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> ausgeführt wird, können Sie einen Installationsserver (NFS oder FTP) über das YaST-Modul <guimenu>Installationsserver</guimenu> einrichten, wie unter <xref linkend="sec-deployment-remoteinst-instserver-sles9"/> beschrieben.
   </para>
   <section xml:id="sec-prep-makeavail-linuxws-nfs">
    <title>Über NFS</title>
    <para>
     Die Installationsmedien werden über NFS (Network File System) verfügbar gemacht.
    </para>
    <important>
     <title>Export eingehängter Geräte über NFS</title>
     <para>
      Durch das Exportieren des Dateisystem-Root (<filename>/</filename>) werden eingehängte Geräte (z. B. DVD) nicht automatisch exportiert. Der Einhängepunkt muss in <filename>/etc/exports</filename> explizit angegeben werden:
     </para>
     <screen>/media/dvd  *(ro)</screen>
     <para>
      Führen Sie nach der Änderung dieser Datei den Neustart des NFS-Servers mit dem Kommando <command>rcnfsserver</command> <option>restart</option> durch.
     </para>
    </important>
   </section>
   <section xml:id="sec-prep-makeavail-linuxws-ftp">
    <title>Über FTP</title>
    <para>
     Das Einrichten eines FTP-Servers auf einem Linux-System umfasst die Installation der Serversoftware (z. B. wuftpd oder proftpd) sowie mögliche weitere Konfigurationsaufgaben. Mit YaST gestaltet sich der Installationsschritt ganz einfach: Wählen Sie das zu installierende Paket aus und starten Sie die Installation. Überspringen Sie die Konfiguration des FTP-Servers, wenn für die Installation kein anonymes FTP (File Transfer Protocol) verwendet werden soll. Führen Sie stattdessen eine FTP-Anmeldung mit gültigem Benutzernamen und Passwort durch. Im Bedarfsfall kann ausschließlich für diese Aufgabe ein Benutzerkonto erstellt werden. Der FTP-Daemon muss nicht manuell gestartet werden. Wenn eine FTP-Verbindung angefordert wird, kann er mit „inetd“ gestartet werden. Geben Sie zur Aktivierung der neuen Einstellungen <command>rcinetd</command> <option>restart</option> oder <command>rcxinetd</command> <option>restart</option> ein.
    </para>
   </section>
   <section xml:id="sec-prep-makeavail-linuxws-oncd">
    <title><phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> auf DVD</title>
    <para>
     DVD 1 für <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> für IBM System z enthält ein bootfähiges Linux-Image für Intel-gestützte Arbeitsplatzrechner sowie ein Image für System z.
    </para>
    <para>
     Booten Sie für Intel-basierte Arbeitsplatzrechner von dieser DVD, beantworten Sie die Fragen hinsichtlich bevorzugter Sprache und Tastaturbelegung und wählen Sie dann <guimenu>Start rescue system</guimenu> (Rettungssystem starten) aus. Hierfür sind mindestens 64 MB RAM erforderlich. Festplattenspeicher wird nicht benötigt, da sich das gesamte Rettungssystem im RAM (Random Accesss Memory) des Arbeitsplatzrechners befindet. Dieser Ansatz setzt ausreichend Erfahrung mit Linux und Netzwerken voraus, da die Netzwerkfunktionen des Arbeitsplatzrechners manuell eingerichtet werden müssen.
    </para>
    <para>
     Führen Sie unter System z, für Ihren LPAR/VM-Gast IPL von dieser DVD aus, wie in <xref linkend="sec-prep-ipling-lpar-dvd"/> beschrieben. Nach der Eingabe Ihrer Netzwerkparameter behandelt das Installationssystem die DVD als Quelle der Installationsdaten. Da an System z kein X11-fähiges Terminal direkt angeschlossen werden kann, wählen Sie zwischen VNC- und SSH-Installation. SSH bietet auch eine grafische Installation durch Tunneling der X-Verbindung über SSH mit <command>ssh -X</command>.
    </para>
   </section>
  </section>
  <section xml:id="sec-prep-makeavail-windowsws">
   <title>Mit einer Microsoft Windows-Arbeitsstation</title><indexterm> <primary>Bereitstellung der Installationsdaten</primary><secondary>Windows-Arbeitsstation</secondary> </indexterm>
   <para>
    Wenn in Ihrem Netzwerk eine Microsoft Windows-Arbeitsstation verfügbar ist, verwenden Sie diesen Computer zur Bereitstellung der Installationsmedien. Am einfachsten lässt sich dies mithilfe des SMB-(Server Message Block-)Protokolls bewerkstelligen, das bereits in das Windows-Betriebssystem integriert ist. Aktivieren Sie in jedem Fall <guimenu>SMB über TCP/IP</guimenu>, da hierdurch die Verkapselung von SMB-Paketen in TCP/IP-(Transmission Control Protocol/Internet Protocol-)Pakete ermöglicht wird. Detaillierte Informationen finden Sie in der Windows-Online-Hilfe bzw. in anderen Windows-Dokumentationen, die sich auf Netzwerke beziehen. Sie können auch FTP (File Transfer Protocol) verwenden. Auch hierfür ist Drittanbieter-Software für Windows erforderlich.
   </para>
   <section xml:id="sec-prep-makeavail-windowsws-smb">
    <title>Mit SMB</title>
    <para>
     Wenn Sie die Installationsmedien über SMB bereitstellen möchten, legen Sie einfach die <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>-DVD 1 in das DVD-Laufwerk der Windows-Arbeitsstation ein. Erstellen Sie dann unter Verwendung des Laufwerkbuchstabens des DVD-ROM-Laufwerks eine neue Freigabe und stellen Sie sie für sämtliche Benutzer im Netzwerk bereit.
    </para>
    
    <para>Der Installationspfad in YaST kann wie folgt lauten:</para>
    <screen>smb://<replaceable>DOMAIN</replaceable>;<replaceable>USER</replaceable>:<replaceable>PW</replaceable>@<replaceable>SERVERNAME</replaceable>/<replaceable>SHAREPATH</replaceable></screen>
     <para>Die Platzhalter bedeuten dabei Folgendes:</para>
     <variablelist>
       <varlistentry>
         <term><replaceable>DOMAIN</replaceable></term>
         <listitem>
           <para>Optionale Arbeitsgruppe oder Active Directory-Domäne.</para>
         </listitem>
       </varlistentry>
       <varlistentry>
         <term><replaceable>USER</replaceable></term><term><replaceable>PW</replaceable></term>
         <listitem>
           <para>Optionaler Benutzername und Passwort eines Benutzers, der auf diesen Server und seine Freigabe zugreifen kann.</para>
         </listitem>
       </varlistentry>
       <varlistentry>
         <term><replaceable>SERVERNAME</replaceable></term>
         <listitem>
           <para>Name des Servers, auf dem sich die Freigabe(n) befinden.</para>
         </listitem>
       </varlistentry>
       <varlistentry>
         <term><replaceable>SHAREPATH</replaceable></term>
         <listitem>
           <para>Pfad für die Freigabe(n).</para>
         </listitem>
       </varlistentry>
     </variablelist>
     
     
     <para/>
    
     
   </section>
   <section xml:id="sec-prep-makeavail-windowsws-nfs">
    <title>Mit NFS</title>
    <para>
     Ziehen Sie die im Lieferumfang des Drittanbieter-Produkts enthaltene Dokumentation zurate, mit dem NFS-Serverdienste für Ihre Windows-Arbeitsstation aktiviert werden. Das DVD-ROM-Laufwerk, in das die <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>-DVDs eingelegt sind, muss sich im verfügbaren NFS-Pfad befinden.
    </para>
   </section>
   <section xml:id="sec-prep-makeavail-windowsws-ftp">
    <title>Mit FTP</title>
    <para>
     Ziehen Sie die im Lieferumfang des Drittanbieter-Produkts enthaltene Dokumentation zurate, mit dem FTP-Serverdienste auf Ihrer Windows-Arbeitsstation aktiviert werden. Das DVD-ROM-Laufwerk, in das die <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>-DVDs eingelegt sind, muss sich im verfügbaren FTP-Pfad befinden.
    </para>
    <para>
     Der in einigen Versionen von Microsoft Windows enthaltene FTP-Server implementiert lediglich eine Teilmenge des FTP-Kommandosatzes und ist für die Bereitstellung der Installationsdaten nicht geeignet. Andere Produkte, beispielsweise der FTP-Server von Hummingbird Exceed bzw. WAR-FTPD, funktionieren Berichten zufolge ordnungsgemäß.
    </para>
   </section>
   <section>
    <title>Verwenden eines per FCP angeschlossenen SCSI-DVD-Laufwerks</title>
    <para>
     Nachdem Sie den IPL-Vorgang, wie in <xref linkend="sec-info-iplopt-dvd"/> beschrieben, durchgeführt haben, verwendet das Installationssystem die DVD als Installationsmedium. In diesem Fall benötigen Sie die Installationsmedien nicht auf einem FTP-, NFS- oder SMB-Server. Allerdings benötigen Sie die Netzwerkkonfigurationsdaten für Ihren <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>, da Sie das Netzwerk während der Installation zur Ausführung einer grafischen Installation per VNC oder X-Tunneling durch SSH einrichten müssen.
    </para>
   </section>
  </section>
  <section xml:id="sec-prep-makeavail-zpxe-cobbler">
   <title>Verwenden eines Cobbler-Servers für zPXE</title>
   <para>
    Zur Ausführung von IPL vom Netzwerk ist ein Cobbler-Server mit Kernel, initrd und Installationsdaten erforderlich. Der Cobbler-Server wird in vier Schritten vorbereitet:
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Importieren der Installationsdaten
     </para>
    </listitem>
    <listitem>
     <para>
      Hinzufügen einer Distribution
     </para>
    </listitem>
    <listitem>
     <para>
      Hinzufügen von Profilen
     </para>
    </listitem>
    <listitem>
     <para>
      Hinzufügen von Systemen
     </para>
    </listitem>
   </itemizedlist>
   
   <section xml:id="sec-prep-makeavail-zpxe-cobbler-import">
    <title>Importieren der Installationsdaten</title>
    <para>
     Zum Importieren der Medien muss die Installationsquelle auf dem Cobbler-Server verfügbar sein – wahlweise als DVD oder als Netzwerkquelle. Führen Sie den folgenden Befehl aus, um die Daten zu importieren:
    </para>
    <screen>cobbler import --path=<replaceable>PATH</replaceable><co xml:id="cobbler-import-path"/> --name=<replaceable>IDENTIFIER</replaceable><co xml:id="cobbler-import-dirname"/> --arch=s390x</screen>
    <calloutlist>
     <callout arearefs="cobbler-import-path">
      <para>
       Einhängepunkt der Installationsdaten.
      </para>
     </callout>
     <callout arearefs="cobbler-import-dirname">
      <para>
       Eine Zeichenkette, die das importierte Produkt bezeichnet, z. B. <quote>sles11_sp3_s390x</quote>. Diese Zeichenkette wird als Name für das Unterverzeichnis verwendet, in das die Installationsdaten kopiert werden. Auf einem Cobbler-Server unter SUSE Linux Enterprise ist dies <filename>/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable></filename>. Wenn Cobbler unter einem anderen Betriebssystem ausgeführt wird, gilt ggf. ein anderer Pfad.
      </para>
     </callout>
    </calloutlist>
   </section>
   <section xml:id="sec-prep-makeavail-zpxe-cobbler-add-distro">
    <title>Hinzufügen einer Distribution</title>
    <para>
     Durch das Hinzufügen einer Distribution weisen Sie Cobbler an, die für IPL erforderlichen Bestandteile (Kernel und initrd) über zPXE bereitzustellen. Zum Hinzufügen von <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> für IBM System z führen Sie das folgende Kommando auf dem Cobbler-Server aus:
    </para>
    <screen>cobbler distro add --arch=s390x --breed=suse --name="<replaceable>IDENTIFIER</replaceable>"<co xml:id="cobbler-add-identifier"/> \
  --os-version=sles10<co xml:id="cobbler-add-os"/> \
  --initrd=/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>/boot/s390x/initrd<co xml:id="cobbler-add-initrd"/> \
  --kernel=/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>/boot/s390x/vmrdr.ikr<co xml:id="cobbler-add-kernel"/> \
  --kopts="install=http://cobbler.example.com/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>"<co xml:id="cobbler-add-server"/>
    </screen>
    <calloutlist>
     <callout arearefs="cobbler-add-identifier">
      <para>
       Benutzerdefinierte Kennung für die Distribution, beispielsweise <quote>SLES <phrase role="productname"><phrase os="sles;sled;slerte">11 SP4</phrase></phrase> System z</quote>. Muss eindeutig sein.
      </para>
     </callout>
     <callout arearefs="cobbler-add-os">
      <para>
       Kennung für das Betriebssystem. Verwenden Sie <literal>sles10</literal>.
      </para>
     </callout>
     <callout arearefs="cobbler-add-initrd">
      <para>
       Path für initrd. Der erste Teil des Pfads (<filename>/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>/</filename>) ist abhängig vom Speicherort, an den die Daten durch Cobbler importiert wurden, sowie vom Namen des Unterverzeichnisses, den Sie beim Importieren der Installationsdaten angegeben haben.
      </para>
     </callout>
     <callout arearefs="cobbler-add-kernel">
      <para>
       Pfad des Kernels. Der erste Teil des Pfads (<filename>/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>/</filename>) ist abhängig vom Speicherort, an den die Daten durch Cobbler importiert wurden, sowie vom Namen des Unterverzeichnisses, den Sie beim Importieren der Installationsdaten angegeben haben.
      </para>
     </callout>
     <callout arearefs="cobbler-add-server">
      <para>
       URL des Installationsverzeichnisses auf dem Cobbler-Server.  
      </para>
     </callout>
    </calloutlist>
   </section>
  </section>
  
  <section xml:id="sec-prep-makeavail-zpxe-cobbler-profile">
   <title>Hinzufügen von Profilen</title>
   <para>
    Mithilfe eines Profils ergänzen Sie eine Distribution um zusätzliche Optionen; beispielsweise können Sie eine AutoYaST-Datei für die automatisierte Installation hinzufügen. Sie können mehrere Profile pro Distribution festlegen; mindestens ein Profil muss dabei zwingend erstellt werden.
   </para>
   <screen>cobbler profile add
   --name=<replaceable>PROFILENAME</replaceable><co xml:id="cobbler-profile-name"/> --distro=<replaceable>DISTRIBUTION</replaceable><co xml:id="cobbler-profile-distro"/> --kickstart=<replaceable>PATH_TO_AUTOYAST_FILE</replaceable><co xml:id="cobbler-profile-kickstart"/></screen>
   <calloutlist>
    <callout arearefs="cobbler-profile-name">
     <para>
      Eindeutiger Name für das Profil.
     </para>
    </callout>
    <callout arearefs="cobbler-profile-distro">
     <para>
      Distribution, für die das Profil gelten soll. Verwenden Sie hier die Zeichenkette, die Sie mit <option>--name=<replaceable>IDENTIFIER</replaceable></option> beim Importieren festgelegt haben.
     </para>
    </callout>
    <callout arearefs="cobbler-profile-kickstart">
     <para>
      Geben Sie hier den Pfad zu einer AutoYaST-Datei für die automatisierte Installation an. Dieser Parameter ist optional.
     </para>
    </callout>
   </calloutlist>
  </section>
  
  <section xml:id="sec-prep-makeavail-zpxe-cobbler-system">
   <title>Hinzufügen von Systemen</title>
   <para>
    Als letzten Schritt fügen Sie Systeme zum Cobbler-Server hinzu. Für jeden System z-Gast, der über zPXE gebootet werden soll, muss ein System hinzugefügt werden. Gäste werden mit einer z/VM-Benutzer-ID bezeichnet. (Im nachfolgenden Beispiel wird die ID <quote>LINUX01</quote> verwendet.) Führen Sie den folgenden Befehl aus, um ein System hinzuzufügen:
   </para>

   <screen>cobbler system add --name=LINUX01 --hostname=linux01.example.com \
--ip=192.168.2.103 --subnet=192.168.2.255 --netmask=255.255.255.0 \
--name-servers=192.168.1.116 --name-servers-search=example.com \
--gateway=192.168.2.1 --kopts="<replaceable>KERNEL_OPTIONS</replaceable>"</screen>

   <para>
    Mit der Option <option>--kopts</option> legen Sie die Kernel- und Installationsparameter fest, die ansonsten in der parmfile angegeben werden. Die Parameter werden (durch Leerzeichen getrennt) im Format <replaceable>PARAMETER1=VALUE1 PARAMETER2=VALUE2</replaceable> eingegeben. Bei fehlenden Parametern werden Sie durch das Installationsprogramm zur Eingabe aufgefordert. Für eine vollständig automatisierte Installation müssen Sie alle Parameter für Netzwerke und DASDs angeben und eine AutoYaST-Datei bereitstellen. Im nachfolgenden Beispiel wird ein Gast mit einer OSA-Schnittstelle dargestellt, der die obigen Netzwerkparameter nutzt.
   </para>
   <screen>--kopts=" \
AutoYaST=http://192.168.0.5/autoinst.xml \
Hostname=linux01.example.com \
Domain=example.com \
HostIP=192.168.2.103 \
Gateway=192.168.2.1 \
Nameserver=192.168.1.116 \
Searchdns=example.com \
InstNetDev=osa; \
Netmask=255.255.255.0 \
Broadcast=192.168.2.255 \
OsaInterface=qdio \
OsaMedium=eth \
Layer2=0 \
PortNo=0 \
ReadChannel=0.0.0600 \
WriteChannel=0.0601 \
DataChannel=0.0.0602 \
Portname=DT70 \
DASD=600"</screen>
  </section>
 </section>

 <section xml:id="sec-prep-inst-types">
  <title>Installationstypen</title><indexterm> <primary>Installation</primary> <secondary>LPAR</secondary> </indexterm> <indexterm> <primary>Installation</primary> <secondary>z/VM</secondary> </indexterm>
  <para>
   In diesem Abschnitt finden Sie Informationen dazu, welche Schritte zur Installation von <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> in den einzelnen Installationsmodi durchgeführt werden müssen und wo sich die entsprechenden Informationen befinden. Halten Sie sich nach Abschluss der in den vorherigen Kapiteln erwähnten Vorbereitungsschritte an den Installationsüberblick des gewünschten Installationsmodus, um <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> auf Ihrem System zu installieren.
  </para>
  <para>
   Wie in <xref linkend="sec-prep-makeavail"/> beschrieben, gibt es zwei unterschiedliche Installationsmodi für Linux auf IBM System z:
  </para>
  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     LPAR-Installation
    </para>
   </listitem>
   <listitem>
    <para>
     z/VM-Installation
    </para>
   </listitem>
  </itemizedlist>
  <procedure xml:id="pro-prep-inst-types-lpar">
   <title>Überblick über die LPAR-Installation</title><indexterm> <primary>LPAR-Installation</primary><secondary>Überblick</secondary> </indexterm>
   <step>
    <para>
     Bereiten Sie die für die Installation benötigten Geräte vor. Weitere Informationen hierzu finden Sie unter <xref linkend="sec-prep-prep-ipl-natlpar"/>. 
    </para>
   </step>
   <step>
    <para>
     Führen Sie den IPL-(Initial Program Load-)Vorgang für das Installationssystem durch. Weitere Informationen hierzu finden Sie unter <xref linkend="sec-prep-ipling-lpar"/>. 
    </para>
   </step>
   <step>
    <para>
     Konfigurieren Sie das Netzwerk. Weitere Informationen hierzu finden Sie unter <xref linkend="sec-prep-netcfg"/>. 
    </para>
   </step>
   <step>
    <para>
     Stellen Sie eine Verbindung zum <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>-Installationssystem her. Weitere Informationen hierzu finden Sie unter <xref linkend="sec-prep-connect"/>.
    </para>
   </step>
   <step>
    <para>
     Starten Sie die Installation mit YaST, und führen Sie den IPL-Vorgang für das installierte System durch. Weitere Informationen hierzu finden Sie unter <xref linkend="cha-inst"/>.
    </para>
   </step>
  </procedure>
  <procedure xml:id="pro-prep-inst-types-vm">
   <title>Installationsüberblick über die z/VM-Installation</title><indexterm> <primary>z/VM-Installation</primary><secondary>Überblick</secondary> </indexterm>
   <step>
    <para>
     Bereiten Sie die für die Installation benötigten Geräte vor. Weitere Informationen hierzu finden Sie unter <xref linkend="sec-prep-prep-ipl-vm"/>. 
    </para>
   </step>
   <step>
    <para>
     Führen Sie den IPL-(Initial Program Load-)Vorgang für das Installationssystem durch. Weitere Informationen hierzu finden Sie unter <xref linkend="sec-prep-ipling-vm"/>. 
    </para>
   </step>
   <step>
    <para>
     Konfigurieren Sie das Netzwerk. Weitere Informationen hierzu finden Sie unter <xref linkend="sec-prep-netcfg-vm"/>. 
    </para>
   </step>
   <step>
    <para>
     Stellen Sie eine Verbindung zum <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>-Installationssystem her. Weitere Informationen hierzu finden Sie unter <xref linkend="sec-prep-connect"/>.
    </para>
   </step>
   <step>
    <para>
     Starten Sie die Installation mit YaST, und führen Sie den IPL-Vorgang für das installierte System durch. Weitere Informationen hierzu finden Sie unter <xref linkend="cha-inst"/>.
    </para>
   </step>
  </procedure>
 </section>

 <section xml:id="sec-prep-prep-ipl">
  <title>Vorbereiten des IPL-Vorgangs für das <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>-Installationssystem</title>
  <para/>
  <section xml:id="sec-prep-prep-ipl-natlpar">
   <title>LPAR-Installation</title><indexterm> <primary>LPAR-Installation</primary> <secondary>Vorbereitung des IPL-Vorgangs</secondary> </indexterm> <indexterm> <primary>Vorbereitung des IPL-Vorgangs</primary> <secondary>LPAR-Installation</secondary> </indexterm>
   <para>
    Konfigurieren Sie Ihr IBM System z-System so, dass der Start im ESA/S390- oder Nur-Linux-Modus erfolgt (mit entsprechendem Aktivierungsprofil und IOCDS). Ziehen Sie für weitere Informationen hierzu die IBM-Dokumentation zurate.
   </para>
   <section xml:id="sec-prep-prep-ipl-natlpar-iocds">
    <title>IOCDS: Anschließen und Konfigurieren von Geräten</title>
    <para>
     Für eine <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>-Installation sind mindestens zwei Geräte erforderlich: ein DASD (Direct Access Storage Device) und ein Gerät für die Netzwerkverbindung. Wenn der IPL-Vorgang vom Band aus durchgeführt werden soll, sollte zudem der Zugriff auf ein Bandmedium möglich sein. Geräte werden im IOCDS (Input Output Configuration Data Set) konfiguriert und einer LPAR (Logical Partition) hinzugefügt. In diesem Beispiel werden ein DASD, ein OSA-2-Netzwerkgerät sowie ein Bandmedium für LPAR Z1 definiert. Weitere Informationen zur Einrichtung von IOCDS für Linux finden Sie in der IBM-Hardwaredokumentation Ihres Computers.
    </para>
    <example xml:id="ex-prep-prep-ipl-natlpar-iocds">
     <title>Beispiel-IOCDS</title>
     <screen>CHPID PATH=(CSS(0),FD),PCHID=120,TYPE=FC
CHPID PATH=(CSS(0),FE),PCHID=320,TYPE=OSD
CHPID PATH=(CSS(0),10),PCHID=3A0,TYPE=CNC

CNTLUNIT CUNUMBR=FD00,PATH=((CSS(0),FD)),UNITADD=((00,1)),UNIT=2105
IODEVICE ADDRESS=(FD00,1),CUNUMBR=(FD00),UNIT=3390B,UNITADD=00

CNTLUNIT CUNUMBR=FE20,PATH=((CSS(0),FE)),UNIT=OSA
IODEVICE ADDRESS=(FE20,1),CUNUMBR=(FE20),UNIT=OSA
IODEVICE ADDRESS=(FEFE,1),CUNUMBR=(FE20),UNIT=OSAD

CNTLUNIT CUNUMBR=100A,PATH=((CSS(0),10)),UNIT=3480,UNITADD=((0A,1))
IODEVICE ADDRESS=(100A,1),CUNUMBR=(100A),UNIT=3480,UNITADD=00</screen>
    </example>
    <para>
     Fahren Sie mit <xref linkend="sec-prep-ipling-lpar"/> fort.
    </para>
   </section>
  </section>
  <section xml:id="sec-prep-prep-ipl-vm">
   <title>z/VM-Installation</title><indexterm> <primary>z/VM-Installation</primary> <secondary>Vorbereitung des IPL-Vorgangs</secondary> </indexterm> <indexterm> <primary>Vorbereitung des IPL-Vorgangs</primary> <secondary>z/VM-Installation</secondary> </indexterm>
   <section xml:id="sec-prep-prep-ipl-vm-linux-guest">
    <title>Hinzufügen eines Linux-Guest-Benutzers</title><indexterm> <primary>z/VM-Installation</primary><secondary>Linux-Guest-Benutzer</secondary> </indexterm>
    <para>
     Zunächst werden ein oder mehrere DASDs im System hinzugefügt, zur Verwendung durch den Linux-Guest-Benutzer in z/VM. Dann wird ein neuer Benutzer in z/VM erstellt. Das Beispiel zeigt ein Verzeichnis für Benutzer <literal>LINUX1</literal> mit Passwort <literal>LINPWD</literal>, 256 MB Speicher (auf maximal 1024 MB erweiterbar), 32 MB erweitertes RAM (XSTORE), einigen Minidisks (MDISK), zwei CPUs und einem OSA-QDIO-Gerät.
    </para>
    <tip>
     <title>Zuweisen von Speicher für z/VM-Guest-Benutzer</title>
     <para>
      Wenn Sie einem z/VM-Guest-Benutzer Speicher zuweisen, vergewissern Sie sich, dass die Speichergröße auf die Anforderungen des bevorzugten Installationstyps abgestimmt ist. Weitere Informationen hierzu finden Sie unter <xref linkend="sec-info-sysreq-sysreq-hw-mem"/>.    Um die Arbeitsspeichergröße auf 512 MB einzustellen, verwenden Sie das Kommando <command>CP DEFINE STORAGE 512M</command>. Setzen Sie nach dem Abschluss der Installation die Arbeitsspeichergröße auf den gewünschten Wert zurück.
     </para>
    </tip>
    <example xml:id="ex-prep-prep-ipl-vm-linux-guest-config">
     <title>Konfiguration eines z/VM-Verzeichnisses</title>
     <screen>USER LINUX1 LINPWD 256M 1024M G 
*____________________________________________
* LINUX1 
*____________________________________________
* This VM Linux guest has two CPUs defined.

CPU 01 CPUID 111111 
CPU 02 CPUID 111222 
IPL CMS PARM AUTOCR 
IUCV ANY 
IUCV ALLOW 
MACH ESA 10 
OPTION MAINTCCW RMCHINFO 
SHARE RELATIVE 2000 
XSTORE 32M 
CONSOLE 01C0 3270 A 
SPOOL 000C 2540 READER * 
SPOOL 000D 2540 PUNCH A 
SPOOL 000E 3203 A 
* OSA QDIO DEVICE DEFINITIONS 
DEDICATE 9A0 9A0 
DEDICATE 9A1 9A1 
DEDICATE 9A2 9A2 
* 
LINK MAINT 0190 0190 RR 
LINK MAINT 019E 019E RR 
LINK MAINT 019D 019D RR 
* MINIDISK DEFINITIONS 
MDISK 201 3390 0001 0050 DASD40 MR ONE4ME TWO4ME THR4ME 
MDISK 150 3390 0052 0200 DASD40 MR ONE4ME TWO4ME THR4ME 
MDISK 151 3390 0253 2800 DASD40 MR ONE4ME TWO4ME THR4ME</screen>
    </example>
    <para>
     In diesem Beispiel wird Minidisk 201 als Home-Disk des Guest-Benutzers verwendet. Minidisk 150 mit 200 Zylindern ist das Linux-Auslagerungsgerät. Auf Disk 151 mit 2800 Zylindern wird die Linux-Installation verwaltet.
    </para>
    <para>
     Fügen Sie nun (als Benutzer <systemitem class="username">MAINT</systemitem>) den Guest-Benutzer mit <command>DIRM FOR LINUX1 ADD</command> dem Benutzerverzeichnis hinzu. Geben Sie den Namen des Guest-Benutzers ein (<literal>LINUX1</literal>) und drücken Sie <keycap>F5</keycap>. Verwenden Sie zur Einrichtung der Umgebung des Benutzers Folgendes:
    </para>
    <screen>DIRM DIRECT 
DIRM USER WITHPASS</screen>
    <para>
     Das letzte Kommando gibt eine Reader-Dateinummer zurück Diese Nummer wird für den nächsten Befehl benötigt:
    </para>
    <screen>RECEIVE &lt;number&gt; USER DIRECT A (REPL)</screen>
    <para>
     Weisen Sie dem Guest-Benutzer die Verzeichnisse mit <command>DISKMAP USER DIRECT A</command> zu. Sie können sich nun als Guest-Benutzer <systemitem class="username">LINUX1</systemitem> anmelden.
    </para>
    <para>
     Wenn die Option <literal>dirmaint</literal> nicht verfügbar ist, konsultieren Sie die IBM-Dokumentation dazu, wie dieser Benutzer eingerichtet wird.
    </para>
    <para>
     Fahren Sie mit <xref linkend="sec-prep-ipling-vm"/> fort.
    </para>
   </section>
  </section>
 </section>

 <section xml:id="sec-prep-ipling">
  <title>Ausführen des IPL-Vorgangs für das <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>-Installationssystem</title>
  <para/>
  <section xml:id="sec-prep-ipling-lpar">
   <title>LPAR-Installation</title><indexterm> <primary>LPAR-Installation</primary> <secondary>IPL für Installationssystem</secondary> </indexterm> <indexterm> <primary>IPL</primary> <secondary>LPAR-Installation</secondary> </indexterm>
   <para>
    Für das Ausführen des IPL-Vorgangs für <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> in einer LPAR stehen mehrere Methoden zur Auswahl. Die bevorzugte Vorgehensweise ist die Funktion <guimenu>Load from CD-ROM or server</guimenu> von SE bzw. HMC.
   </para>
   <section xml:id="sec-prep-ipling-lpar-cdrom">
    <title>IPL von DVD-ROM</title>
    <para>
     Markieren Sie die LPAR für die Installation und wählen Sie <guimenu>Load from CD-ROM or server</guimenu> aus. Lassen Sie das Feld für den Dateispeicherort frei oder geben Sie den Pfad zum root-Verzeichnis der ersten DVD-ROM ein und wählen Sie die Option zum Fortfahren aus. Aktivieren Sie in der daraufhin angezeigten Liste mit Optionen die Standardauswahl. In den Kernel-Boot-Meldungen sollte nun <guimenu>Operating system messages</guimenu> angezeigt werden.
    </para>
   </section>
   <section xml:id="sec-prep-ipling-lpar-dvd">
    <title>IPL von per FCP angeschlossener SCSI-DVD</title>
    <para>
     Sie können den <guimenu>Load</guimenu>-Vorgang verwenden, indem Sie <guimenu>SCSI</guimenu> als <guimenu>Ladetyp</guimenu> für IPL von SCSI auswählen. Geben Sie den WWPN (Worldwide Port Name) und die LUN (Logical unit number) ein, die Ihre SCSI-Bridge oder Ihr SCSI-Speicher bereitstellt (16 Stellen – unterdrücken Sie auf keinen Fall die angehängten Nullen). Die Boot-Programmauswahl muss 2 sein. Verwenden Sie Ihren FCP-Adapter als <guimenu>Ladeadresse</guimenu> und führen Sie einen IPL-Vorgang durch.
    </para>
   </section>
   <section xml:id="sec-prep-ipling-lpar-tape">
    <title>IPL von verbundenem ESCON- oder FICON-Band</title>
    <para>
     Wenn der IPL-Vorgang von DVD nicht möglich ist, erstellen Sie ein Band mit Kanalverbindung, von dem aus der IPL-Vorgang des <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>-Installations-Image durchgeführt werden kann. Klicken Sie in SE bzw. HMC auf die Schaltfläche <guimenu>LOAD</guimenu> und geben Sie die Adresse des Bandmediums als Ladeadresse an, so dass der IPL-Vorgang des <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>-Installationssystems durchgeführt wird.
    </para>
    <para>
     Es gibt mehrere Methoden zur Erstellung eines IPL-fähigen Bands. Eine besteht darin, die Dateien zu kopieren:
    </para>
    <screen>/boot/s390x/tapeipl.ikr
/boot/s390x/parmfile
/boot/s390x/initrd</screen>
    <para>
     als Binärdateien von DVD 1 (z. B. mit FTP von einem Linux-Arbeitsplatzrechner aus).
    </para>
    <para>
     Benennen Sie sie
    </para>
    <screen>SLES11 IMAGE
SLES11 PARM
SLES11 INITRD</screen>
    <para>
     um sie mit der REXX (REstructured eXtended eXecutor Language) aus dem Beispiel auf Band zu schreiben.
    </para>
    <important>
     <title>Übertragen von Binärdateien mit FTP</title>
     <para>
      Laden Sie die Dateien nicht als <literal>fixed 80</literal> herauf. Speichern Sie sie als <literal>fixed 1024</literal>. Verwenden Sie das FTP-Kommando <command>locsite fix 1024</command>.
     </para>
    </important>
    <example xml:id="sec-prep-ipling-lpar-tape-create">
     <title>REXX-Skript zur Erstellung eines IPL-fähigen Bands</title>
     <screen>'REWIND 181'
'FILEDEF IN1 DISK' SLES11 IMAGE A
'FILEDEF IN2 DISK' SLES11 PARM A
'FILEDEF IN3 DISK' SLES11 INITRD A
'FILEDEF OUT TAP1 (RECFM F BLOCK 1024 LRECL 1024 PERM'
say 'Writing: ' left(file1,23)
'MOVEFILE IN1 OUT'
say 'Writing: ' left(file2,23)
'MOVEFILE IN2 OUT'
say 'Writing: ' left(file3,23)
'MOVEFILE IN3 OUT'
say 'Done.'
'REWIND 181'
 exit</screen>
    </example>
    <para>
     Das Band in diesem Skript wird als 181 hinzugefügt. Passen Sie das Skript an Ihre Anforderungen an.
    </para>
   </section>
  </section>
  <section xml:id="sec-prep-ipling-vm">
   <title>z/VM-Installation</title><indexterm> <primary>z/VM-Installation</primary> <secondary>IPL für Installationssystem</secondary> </indexterm> <indexterm> <primary>IPL</primary> <secondary>z/VM-Installation</secondary> </indexterm>
   <para>
    In diesem Abschnitt wird der IPL-Vorgang für das Installationssystem zur Installation von <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> für IBM System z auf einem z/VM-System beschrieben.
   </para>
   <section xml:id="sec-prep-ipling-vm-reader">
    <title>IPL vom z/VM-Reader</title>
    <para>
     Sie benötigen eine funktionierende TCP/IP-Verbindung und ein FTP-Clientprogramm in Ihrem neu definierten z/VM-Gast, um das Installationssystem per FTP zu übertragen. Die TCP/IP-Einrichtung für z/VM würde den Rahmen dieses Handbuchs sprengen. Ziehen Sie die entsprechende IBM-Dokumentation zurate.
    </para>
    <para>
     Melden Sie sich für den IPL-Vorgang als z/VM-Linux-Guest-Benutzer an. Stellen Sie den Inhalt des Verzeichnisses <filename>/boot/s390x</filename> auf DVD 1 von <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> für IBM System z über FTP in Ihrem Netzwerk bereit. Aus diesem Verzeichnis benötigen Sie die Dateien <filename>vmrdr.ikr</filename>, <filename>initrd</filename>, <filename>parmfile</filename> und <filename>sles11.exec</filename>. Übertragen Sie die Dateien mit einer festen Blockgröße von 80 Zeichen. Geben Sie die Größe mithilfe des FTP-Kommandos <command>locsite fix 80</command> an. <filename>vmrdr.ikr</filename> (der Linux-Kernel) und <filename>initrd</filename> (das Installations-Image) müssen in jedem Fall als Binärdateien kopiert werden, Sie sollten folglich den <literal>binary</literal>-Übertragungsmodus verwenden. <filename>parmfile</filename> und <filename>sles11.exec</filename> müssen im ASCII-Modus übertragen werden.
    </para>
    <para>
     Aus dem Beispiel gehen die erforderlichen Schritte hervor. In diesem Beispiel ist der Zugriff auf die erforderlichen Dateien von einem FTP-Server mit IP-Adresse <literal>192.168.0.3</literal> möglich; die Anmeldung erfolgt mit <systemitem class="username">lininst</systemitem>. Diese Angabe kann je nach Netzwerk variieren.
    </para>
    <example xml:id="ex-prep-ipling-vm-reader-ftp-ftptrans">
     <title>Übertragen der Binärdateien über FTP</title>
     <screen>FTP 192.168.0.3
VM TCP/IP FTP Level 530
Connecting to 192.168.0.3, port 21
220 ftpserver FTP server (Version wu-2.4.2-academ[BETA-18](1)
Thu Feb 11 16:09:02 GMT 2010) ready.
USER
lininst
331 Password required for lininst
PASS
******
230 User lininst logged in.
Command:
binary
200 Type set to I
Command:
locsite fix 80
Command:
get /media/dvd1/boot/s390x/vmrdr.ikr sles11.image
200 PORT Command successful
150 Opening BINARY mode data connection for /media/dvd1/boot/s390x/vmrdr.ikr
(6757376 bytes)
226 Transfer complete.
6757376 bytes transferred in 8.826 seconds.
Transfer rate 766.70 Kbytes/sec.
Command:
get /media/dvd1/boot/s390x/initrd sles11.initrd
200 PORT Command successful
150 Opening BINARY mode data connection for /media/dvd1/boot/s390x/initrd
(12654815 bytes)
226 Transfer complete.
12194534 bytes transferred in 16.520 seconds.
Transfer rate 766.70 Kbytes/sec.
Command:
ascii
200 Type set to A
Command:
get /media/dvd1/boot/s390x/parmfile sles11.parmfile
150 Opening ASCII mode data connection for /media/dvd1/boot/s390x/parmfile
(71 bytes)
226 Transfer complete.
71 bytes transferred in 0.092 seconds.
Transfer rate 0.71 Kbytes/sec.
Command:
get /media/dvd1/boot/s390x/sles11.exec sles11.exec
150 Opening ASCII mode data connection for /media/dvd1/boot/s390x/sles11.exec
(891 bytes)
226 Transfer complete.
891 bytes transferred in 0.097 seconds.
Transfer rate 0.89 Kbytes/sec.
Command:
quit</screen>
    </example>
    <para>
     Verwenden Sie das soeben heruntergeladene REXX-Skript sles11.exec, um den IPL-Vorgang für das Linux-Installationssystem auszuführen. Mit diesem Skript werden Kernel, parmfile sowie der anfängliche RAM-Datenträger für den IPL-Vorgang in den Reader geladen.
    </para>
    <example xml:id="sex-prep-ipling-vm-reader-startscript-slesexec">
     <title>SLES11 EXEC</title>
     <screen>/* REXX LOAD EXEC FOR SUSE LINUX S/390 VM GUESTS       */
/* LOADS SUSE LINUX S/390 FILES INTO READER            */
SAY ''
SAY 'LOADING SLES11 FILES INTO READER...'
'CP CLOSE RDR'
'PURGE RDR ALL'
'SPOOL PUNCH * RDR'
'PUNCH SLES11 IMAGE A (NOH'
'PUNCH SLES11 PARMFILE A (NOH'
'PUNCH SLES11 INITRD A (NOH'
'I 00C'</screen>
    </example>
    <para>
     Mithilfe dieses Skripts führen Sie den IPL-Vorgang für das <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>-Installationssystem mit dem Kommando <command>sles11</command> aus. Daraufhin wird der Linux-Kernel gestartet und gibt eine Boot-Meldung aus.
    </para>
    <para>
     Fahren Sie zur weiteren Installation mit <xref linkend="sec-prep-netcfg-vm"/> fort.
    </para>
   </section>
   <section>
    <title>IPL von per FCP angeschlossener SCSI-DVD</title>
    <para>
     Bereiten Sie für die Ausführung des IPL-Vorgangs in z/VM den SCSI-IPL-Vorgang mithilfe des Parameters SET LOADDEV vor:
    </para>
    <screen>SET LOADDEV PORTNAME 200400E8 00D74E00 LUN 00020000 00000000 BOOT 2</screen>
    <para>
     Führen Sie nach der Festlegung des LOADDEV-Parameters mit den entsprechenden Werten den IPL-Vorgang Ihres FCP-Parameters durch, z. B.:
    </para>
    <screen>IPL FC00</screen>
    <para>
     Fahren Sie zur weiteren Installation mit <xref linkend="sec-prep-netcfg-vm"/> fort.
    </para>
   </section>
   <section xml:id="sec-prep-ipling-vm-tape">
    <title>IPL von angeschlossenem ESCON- oder FICON-Band</title>
    <para>
     Wenn der IPL-Vorgang von einem z/VM-Reader nicht möglich ist, erstellen Sie ein Band mit Kanalverbindung, von dem aus der IPL-Vorgang des <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>-Installations-Image durchgeführt werden kann. Anleitungen finden Sie unter <xref linkend="sec-prep-ipling-lpar-tape"/>.
    </para>
    <para>
     Fahren Sie zur weiteren Installation mit <xref linkend="sec-prep-netcfg-vm"/> fort.
    </para>
   </section>
   <section xml:id="sec-prep-ipling-vm-zpxe">
    <title>IPL von einem Cobbler-Server mit zPXE</title>
    <para>
     Zur Ausführung von IPL über einen Cobbler-Server mit zPXE übertragen Sie das Skript <filename>zpxe.exec</filename> per FTP vom Cobbler-Server an den z/VM-Gast. Der z/VM-Gast benötigt eine funktionsfähige TCP/IP-Verbindung und ein FTP-Client-Programm.
    </para>
    <para>
     Melden Sie sich als z/VM Linux-Gast bei IPL an, und übertragen Sie das Skript mit einer festen Größe von 80 Zeichen im ASCII-Modus (ein Beispiel finden Sie unter <xref linkend="ex-prep-ipling-vm-reader-ftp-ftptrans"/>). Das Skript <filename>zpxe.exec</filename> befindet sich auf dem Cobbler-Server unter ftp://<replaceable>IP_OF_COBBLER_SERVER</replaceable>/<replaceable>zSERIES_INSTALLATION_DIRECTORY</replaceable>/boot/s390x/zpxe.exec. Der genaue Speicherort von <replaceable>zSERIES_INSTALLATION_DIRECTORY</replaceable> ist abhängig vom Speicherort auf dem Cobbler-Server, in den Sie die Installationsdaten kopiert haben (weitere Informationen siehe <xref linkend="sec-prep-makeavail-zpxe-cobbler-import"/>).
    </para>
    <para>
     <filename>zpxe.exec</filename> ersetzt die Datei <filename>PROFILE EXEC</filename> des Gastes. Fertigen Sie eine Sicherungskopie der vorhandenen Datei <filename>PROFILE EXEC</filename> an, und benennen Sie <filename>ZPXE EXEC</filename> in <filename>PROFILE EXEC</filename> um. Alternativ rufen Sie <filename>ZPXE EXEC</filename> aus der vorhandenen <filename>PROFILE EXEC</filename> auf. Geben Sie hierzu eine neue Zeile mit dem folgenden Inhalt ein: <literal>'ZPXE EXEC'</literal>.
    </para>
    <para>
     Im letzten Schritt erstellen Sie eine Konfigurationsdatei (<filename>ZPXE CONF</filename>), in der Sie <filename>ZPXE EXEC</filename> anweisen, welcher Cobbler-Server kontaktiert und für welchen Datenträger IPL ausgeführt werden soll. Führen Sie <command>xedit zpxe conf a</command> aus, und erstellen Sie <filename>ZPXE CONF</filename> mit dem folgenden Inhalt (Beispieldaten entsprechend ersetzen):
    </para>
    <screen>HOST cobbler.example.com
IPLDISK 600</screen>
    <para>
     Beim nächsten Anmelden beim z/VM-Gast wird eine Verbindung zum Cobbler-Server hergestellt. Wenn eine Installation auf dem Cobbler-Server geplant ist, so wird sie gestartet. Zum Planen der Installation führen Sie den folgenden Befehl auf dem Cobbler-Server aus:
    </para>
    <screen>cobbler system edit --name <replaceable>ID</replaceable><co xml:id="cobbler-sysedit-id"/> --netboot-enabled 1<co xml:id="cobbler-sysedit-netboot"/> --profile <replaceable>PROFILENAME</replaceable><co xml:id="cobbler-sysedit-profile"/></screen>
    <calloutlist>
     <callout arearefs="cobbler-sysedit-id">
      <para>
       z/VM-Benutzer-ID.
      </para>
     </callout>
     <callout arearefs="cobbler-sysedit-netboot">
      <para>
       Aktivieren der IPL-Ausführung vom Netzwerk.
      </para>
     </callout>
     <callout arearefs="cobbler-sysedit-profile">
      <para>
       Name eines vorhandenen Profils (siehe <xref linkend="sec-prep-makeavail-zpxe-cobbler-profile"/>).
      </para>
     </callout>
    </calloutlist>
   </section>
  </section>
 </section>

 <section xml:id="sec-prep-netcfg">
  <title>Netzwerkkonfiguration</title>
  <para/><indexterm> <primary>LPAR-Installation</primary> <secondary>Netzwerkkonfiguration</secondary> </indexterm> <indexterm> <primary>Netzwerkkonfiguration</primary> <secondary>LPAR-Installation</secondary> </indexterm>
  <para>
   Warten Sie, bis der Kernel seine Startroutinen abgeschlossen hat. Wenn Sie die Installation im Basismodus oder in einer LPAR vornehmen, rufen Sie in HMC bzw. SE <guimenu>Operating System Messages</guimenu> auf.
  </para>
  <para>
   Wählen Sie zunächst <guimenu>Start Installation or System</guimenu> im Linuxrc-Hauptmenü und dann <guimenu>Start Installation or Update</guimenu>, um den Installationsvorgang zu starten. Wählen Sie <guimenu>Netzwerk</guimenu> als Ihr Installationsmedium und danach den Netzwerkprotokolltyp aus, den Sie zur Installation verwenden möchten. <xref linkend="sec-prep-makeavail"/> beschreibt, wie die Installationsdaten für die unterschiedlichen Arten von Netzwerkverbindungen bereitgestellt werden. Zurzeit werden <guimenu>FTP</guimenu>, <guimenu>HTTP</guimenu>, <guimenu>NFS</guimenu> und <guimenu>SMB/CIFS</guimenu> (Windows-Dateifreigabe) unterstützt.
  </para>
  <para>
   Richten Sie nun das Netzwerkgerät ein, das die Installationsdaten empfangen soll: <guimenu>OSA-2 or OSA Express</guimenu> bzw. <guimenu>HiperSockets</guimenu>. Folgende Netzwerkadapter sind nach wie vor verfügbar und einsatzbereit, werden jedoch nicht mehr unterstützt: CTC, ESCON, IUCV. Wählen Sie anschließend die CCW-Bus-Schnittstelle und das physische Medium (<guimenu>Ethernet</guimenu>). Daraufhin wird der entsprechende Treiber installiert und die entsprechenden Kernel-Meldungen werden eingeblendet.
  </para>
  <para>
   Im Rahmen der weiteren Installation zeigt Linuxrc eine Liste potenziell einsatzfähiger Lese-, Schreib- und ggf. Datenkanäle an. Nachdem Sie die Adresse für die einzelnen Kanäle eingegeben haben, müssen Sie möglicherweise noch weitere Angaben machen, beispielsweise den Portnamen für OSA-Ethernet-Karten.
  </para>
  <para>
   Bestimmen Sie als Nächstes, ob die automatische DHCP-(Dynamic Host Configuration Protocol-)Konfiguration für die Einrichtung der Netzwerkschnittstellenparameter verwendet werden soll. Da DHCP nur auf einigen Geräten eingesetzt werden kann und eine spezielle Hardwarekonfiguration vorgenommen werden muss, empfiehlt sich in diesem Fall mit größter Wahrscheinlichkeit die Auswahl von <guimenu>NEIN</guimenu>. In diesem Fall werden Sie zur Eingabe der Netzwerkparameter Ihres Installationsnetzwerkgeräts aufgefordert:
  </para>
  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     IP-Adresse des zu installierenden Systems
    </para>
   </listitem>
   <listitem>
    <para>
     entsprechende Netzwerkmaske
    </para>
   </listitem>
   <listitem>
    <para>
     IP-Adresse eines Gateways zur Verbindung mit dem Server
    </para>
   </listitem>
   <listitem>
    <para>
     IP-Adresse Ihres Domain Name Server (DNS)
    </para>
   </listitem>
  </itemizedlist>
  <para>
   Bei Verwendung einer OSA Express Network Card werden Sie nun aufgefordert, eine <guimenu>relative Portnummer</guimenu> einzugeben. Diese wurde zur Unterstützung der neuen OSA Express 3 Network-Geräte mit zwei Ports hinzugefügt. Wenn Sie kein OSA Express 3-Gerät verwenden, geben Sie <literal>0</literal> ein. OSA Express-Karten besitzen auch die Option, in einem Modus mit <quote>Unterstützung von OSI-Schicht 2</quote> oder im älteren, gängigeren Modus für <quote>Schicht 3</quote> ausgeführt zu werden. Der Kartenmodus beeinflusst alle Systeme, die das Gerät gemeinsam nutzen, einschließlich Systeme auf anderen LPARs. Geben Sie im Zweifelsfall <literal>2</literal> an, um Kompatibilität mit dem Standardmodus zu erreichen, den andere Betriebssysteme wie z/VM und z/OS verwenden. Erfragen Sie weitere Informationen zu diesen Optionen bei Ihrem Hardware-Administrator.
  </para>
  <section xml:id="sec-prep-netcfg-vm">
   <title>z/VM-Installation</title><indexterm> <primary>z/VM-Installation</primary> <secondary>Netzwerkkonfiguration</secondary> </indexterm> <indexterm> <primary>Netzwerkkonfiguration</primary> <secondary>z/VM-Installation</secondary> </indexterm>
   <para>
    Nachdem der Kernel seine Startroutinen abgeschlossen hat, beantworten Sie einige Fragen zur Netzwerkeinrichtung. Wählen Sie zunächst die zu verwendende Netzwerkverbindung aus: OSA Express oder HiperSockets. Bei dieser Beispielinstallation wird OSA Express verwendet.
   </para>
   <para>
    Das System zeigt nun eine mögliche OSA-Konfiguration an. Wählen Sie zunächst, ob QDIO oder LCS OSA verwendet werden soll. Wählen Sie dann das physische Medium aus, das verwendet werden soll, und geben Sie die Geräteadresse ein. Wenn Sie bei der Einrichtung anders vorgehen möchten, geben Sie die Geräteadresse des OSA-Lese-Kanals (in diesem Beispiel 0.0.0700), dann die Adresse des OSA-Schreib-Kanals (0.0.0701) und des OSA-Steuer-Kanals (0.0.0702) ein. Geben Sie nach den Kanälen den Namen des Ports ein, mit dem die OSA-Karte verbunden ist.
   </para>
   <para>
    <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> versucht nun, das Netzwerkmodul zu laden, wobei eine Parameterzeile mit den bereitgestellten Informationen erstellt wird; danach werden alle geladenen Module angezeigt. Wenn die Ausgabe der folgenden gleicht, war das Laden erfolgreich:
   </para>
   <example xml:id="ex-prep-netcfg-vm-param">
    <title>Treiberparameter für das Netzwerkgerät</title>
    <screen>(portname YSW2)
(Port 0)
qdio: 0.0.0702 OSA on SC 3 using AI:1 QEBSM:0 PCI:1 TDD:1 SIGA:RW AO
qeth.736dae: 0.0.0700: Device is a Guest LAN QDIO card (level: V540)
with link type GuestLAN QDIO (portname: YSW2)
qeth.47953b: 0.0.0700: Hardware IP fragmentation not supported on eth0
qeth.066069: 0.0.0700: Inbound source MAC-address not supported on eth0
qeth.d7fdb4: 0.0.0700: VLAN enabled
qeth.e90c78: 0.0.0700: Multicast enabled
qeth.5a9d02: 0.0.0700: IPV6 enabled
qeth.184d8a: 0.0.0700: Broadcast enabled
qeth.dac2aa: 0.0.0700: Using SW checksumming on eth0.
qeth.9c4c89: 0.0.0700: Outbound TSO not supported on eth0
</screen>
   </example>
   <para>
    Geben Sie nun Ihre IP-Adresse, die Netzmaske sowie das standardmäßige Gateway ein. Geben Sie bei einer Installation über iucv oder ctc zusätzliche Informationen wie die Peer-Adresse (für einen Punkt-zu-Punkt-Adapter) oder den Portnamen ein.
   </para>
   <para>
    Abschließend werden die IP-Adresse des DNS-Servers sowie die Größe der Maximum Transmission Unit (MTU) erfragt. Die MTU-Größe sollte stets der Größe entsprechen, die von dem Netzwerk verwendet wird, mit dem die Verbindung aufgebaut wird.
   </para>
   <para>
    Nun wird eine Zusammenfassung angezeigt. Bestätigen Sie die Richtigkeit Ihrer Eingabe. Bevor das Netzwerk gestartet wird, geben Sie ein Passwort ein, das nur während der Installation Gültigkeit hat. Nachdem Sie den IPL-Vorgang für das installierte System durchgeführt haben, geben Sie das <emphasis>tatsächliche</emphasis> Root-Passwort ein.
   </para>
   <para>
    Nachdem nun alle grundlegenden Parameter eingerichtet sind, wird das Netzwerk gestartet. Überprüfen Sie die Ausgabe von ifconfig; hier sollten zwei Einträge enthalten sein: Eine loopback-(lo-)Verbindung und eine Verbindung (eth0, ctc0, escon0, iucv0 oder hsi0) mit den richtigen Einstellungen.
   </para>
   <example xml:id="ex-prep-netcfg-vm-ifconfig">
    <title>Beispiel-ifconfig</title>
    <screen>/sbin/ifconfig eth0 : 
	Link encap:Ethernet  HWaddr 02:00:01:00:00:27  
        inet addr:192.168.0.1  Bcast:192.168.0.255  Mask:255.255.255.0
        inet6 addr: fe80::200:100:100:27/64 Scope:Link
        UP BROADCAST RUNNING MULTICAST  MTU:1492  Metric:1
        RX packets:0 errors:0 dropped:0 overruns:0 frame:0
        TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
        collisions:0 txqueuelen:1000 
        RX bytes:0 (0.0 Mb)  TX bytes:0 (0.0 Mb)</screen>
   </example>
  </section>
 </section>

 <section xml:id="sec-prep-connect">
  <title>Herstellen einer Verbindung zum <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>-Installationssystem</title><indexterm> <primary>LPAR-Installation</primary> <secondary>Verbindungsaufbau zum Installationssystem</secondary> </indexterm> <indexterm> <primary>Verbindungsaufbau zum Installationssystem</primary> <secondary>LPAR-Installation</secondary> </indexterm> <indexterm> <primary>z/VM-Installation</primary> <secondary>Verbindungsaufbau zum Installationssystem</secondary> </indexterm> <indexterm> <primary>Verbindungsaufbau zum Installationssystem</primary> <secondary>z/VM-Installation</secondary> </indexterm>
  <para>
   Nach der Einrichtung Ihrer Netzwerkverbindung werden Sie von Linuxrc zur Eingabe von Details zu der Installationsquelle aufgefordert, die Sie zu einem früheren Zeitpunkt ausgewählt haben: Hierbei kann es sich beispielsweise um die IP-Adresse des Servers und das Verzeichnis handeln, in dem sich die Daten befinden.
  </para>
  <para>
   Abschließend müssen Sie angeben, mit welcher Art von Anzeige Sie die Installationsprozedur steuern möchten. Zur Auswahl stehen <literal>X11</literal> (X Window-System), <literal>VNC</literal> (Virtual Network Computing-Protokoll), <literal>SSH</literal> (Textmodus bzw. X11-Installation über Secure Shell und <literal>ASCII Console</literal> (ASCII-Konsole).
  </para>
  <para>
   Bei der Auswahl der letzten Option <literal>ASCII Console</literal> (ASCII-Konsole) wird YaST im Textmodus gestartet, und Sie können die Installation direkt in Ihrem Terminal durchführen. Anleitungen finden Sie hier: <xref linkend="cha-yast-text"/>.
  </para>
  <note>
   <title>Terminalemulation für die ASCII-Konsole</title>
   <para>
    Für die Zusammenarbeit mit YaST im Textmodus ist die Ausführung in einem Terminal mit VT220/Linux-Emulation (auch als <literal>ASCII Console</literal> (ASCII-Konsole) bezeichnet) erforderlich. In einem 3270-Terminal kann YaST beispielsweise nicht verwendet werden.
   </para>
  </note>
  <section xml:id="sec-inst-connect-vnc-inst">
   <title>Initiieren der Installation für VNC</title><indexterm> <primary>VNC</primary><secondary>Initiieren der Installation</secondary> </indexterm>
   <procedure>
    <step>
     <para>
      Nach Auswahl der Installationsoption <literal>VNC</literal> wird der VNC-Server gestartet. Aus einem kurzen Hinweis auf der Konsole geht hervor, welche IP-Adresse und Display-Nummer für eine Verbindung mit vncviewer erforderlich sind. Alternativ wird eine URL (Uniform Resource Locator) angegeben, die Sie in Ihrem Java-fähigen Browser eingeben und so eine Verbindung zum Installationssystem herstellen können.
     </para>
    </step>
    <step>
     <para>
      Starten Sie auf Ihrem Clientsystem eine VNC-Clientanwendung. Sie können entweder vncviewer oder den VNC-Java-Client und einen Java-fähigen Webbrowser verwenden.
     </para>
    </step>
    <step>
     <para>
      Geben Sie die IP-Adresse sowie die Display-Nummer des <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>-Installationssystems ein, wenn Sie dazu aufgefordert werden.
     </para>
     <para>
      Wenn Sie die Verbindung über einen Java-fähigen Browser herstellen, geben Sie eine URL mit der IP-Adresse des Installationssystems und die entsprechende Portnummer im folgenden Format ein:
     </para>
     <screen>http://&lt;IP address of installation system&gt;:5801/</screen>
    </step>
    <step>
     <para>
      Sobald die Verbindung hergestellt wurde, starten Sie die Installation von <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> mit YaST.
     </para>
    </step>
   </procedure>
  </section>
  <section xml:id="sec-inst-connect-x">
   <title>Initiieren der Installation für das X Window-System</title><indexterm> <primary>X</primary><secondary>Initiieren der Installation</secondary> </indexterm>
   <important>
    <title>X-Authentifizierungsmechanismus</title>
    <para>
     Die direkte Installation über das X Window System beruht auf einem einfachen auf Hostnamen basierenden Authentifizierungsmechanismus. Dieser Mechanismus ist in den aktuellen Versionen von <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> deaktiviert. Die Installation mit SSH oder VNC wird bevorzugt.
    </para>
   </important>
   <procedure>
    <step>
     <para>
      Vergewissern Sie sich, dass der X-Server dem Client (dem installierten System) den Verbindungsaufbau ermöglicht. Legen Sie die Variable <command>DISPLAYMANAGER_XSERVER_TCP_PORT_6000_OPEN=„yes“</command> in der Datei <filename>/etc/sysconfig/displaymanager</filename> fest. Starten Sie dann den X-Server und ermöglichen Sie dem Client die Verbindung mit dem Server, und zwar mit folgendem Kommando: <command>xhost &lt;client IP address&gt;</command>.
     </para>
    </step>
    <step>
     <para>
      Wenn Sie auf dem Installationssystem dazu aufgefordert werden, geben Sie die IP-Adresse des Rechners ein, auf dem der X-Server ausgeführt wird.
     </para>
    </step>
    <step>
     <para>
      Warten Sie, bis YaST geöffnet wird, und starten Sie dann die Installation.
     </para>
    </step>
   </procedure>
  </section>



  <section xml:id="sec-inst-connect-ssh">
   <title>Initiieren der Installation für SSH</title><indexterm> <primary>ssh</primary><secondary>Initiieren der Installation</secondary> </indexterm>
   <para>
    Um das Installationssystem mit dem Namen earth mithilfe von SSH zu verbinden, führen Sie <command>ssh -X earth</command> aus. Wenn auf Ihrem Arbeitsplatzrechner Microsoft Windows ausgeführt wird, verwenden Sie den SSH- und Telnet-Client und den Terminal-Emulator PuTTy, verfügbar unter <link xlink:href="http://www.chiark.greenend.org.uk/~sgtatham/putty/"/>. Aktivieren Sie <guimenu>Enable X11 forwarding</guimenu> (X11-Weiterleitung aktivieren) in PuTTy unter <menuchoice> <guimenu>Connection</guimenu> <guimenu>SSH</guimenu> <guimenu>X11</guimenu> </menuchoice>.
   </para>
   <para>
    Daraufhin wird eine Anmeldeeingabeaufforderung angezeigt. Geben Sie <literal>root</literal> ein und melden Sie sich mit Ihrem Passwort an. Starten Sie YaST mit <command>yast2</command>.
   </para>
   <para>
    Fahren Sie mit der detaillierten Beschreibung des Installationsvorgangs in <xref linkend="cha-inst"/> fort.
   </para>
  </section>
 </section>
</section>
