<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sect1 PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN"
"novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<sect1 xml:base="zseries_prep_i.xml" id="sec.zseries.prep">
 <title>インストールの準備</title>

 <para>
  このセクションでは、インストールに使用するデータをアクセス可能にする方法、さまざまな手段による<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>のインストール方法、および<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>のインストールシステムのIPLを準備して使用する方法について説明します。また、ネットワーク設定とネットワークインストールについても説明します。
 </para>

 <sect2 id="sec.prep.makeavail">
  <title>インストールデータを利用できるようにする</title><indexterm> <primary>準備</primary><secondary>インストールデータを使用できるようにする</secondary></indexterm> <indexterm><primary>インストールデータを使用できるようにする</primary></indexterm>
  <para>
   このセクションでは、<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>のIBM System z向けインストールデータをインストールの際にアクセス可能にする方法について詳しく説明します。コンピュータとシステム環境に応じて、NFSまたはFTPによるインストールを選択します。Microsoft Windowsワークステーションを実行している環境では、SMBプロトコルなどのWindowsネットワークを使用して、IBM System zシステムに<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>をインストールすることもできます。
  </para>
  <tip>
   <title>DVDからのIPL</title>
   <para>
    SUSE Linux Enterprise Server Version 10のService Pack 1以降は、DVDからのIPLが可能になり、DVDをインストールメディアとして使用できるようになっています。これは、ネットワークを介してインストールメディアを提供するインストールサーバを設定することに制約がある場合に、非常に便利です。前提条件はFCP接続SCSI DVDドライブです。
   </para>
  </tip>
  <note>
   <title><quote>ハードディスクから</quote>のインストールに非対応</title>
   <para>
    DVDのコンテンツをDASDのパーティションに格納することでハードディスクからインストールすることは不可能です。
   </para>
  </note>
  <sect3 id="sec.prep.makeavail.linuxws">
   <title>Linuxワークステーションまたは<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>のDVDの使用</title><indexterm> <primary>インストールデータを使用できるようにする</primary><secondary>Linuxワークステーション</secondary> </indexterm>
   <para>
    コンピュータ環境でLinuxワークステーションを実行している場合は、そのワークステーションを使用して、NFSまたはFTP経由でインストールデータをIBM System zインストールプロセスで使用できるようにします。<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>でLinuxワークステーションを実行している場合は、<xref linkend="sec.deployment.remoteinst.instserver.sles9"/>の説明にあるようにYaSTの<guimenu>インストールサーバ</guimenu>モジュールを使用して、インストールサーバ(NFSまたはFTP)を設定できます。
   </para>
   <sect4 id="sec.prep.makeavail.linuxws.nfs">
    <title>NFS経由</title>
    <para>
     NFS(ネットワークファイルシステム)を使用して、インストールメディアを使用できるようにします。
    </para>
    <important>
     <title>マウントされたデバイスのNFSを使用するエクスポート</title>
     <para>
      ファイルシステムのroot(<filename>/</filename>)をエクスポートしても、DVDなどのマウントされたデバイスのエクスポートが暗示指定されるわけではありません。次のように、<filename>/etc/exports</filename>でマウントポイントを明示的に指定します。
     </para>
     <screen>/media/dvd  *(ro)</screen>
     <para>
      このファイルの変更後に、<command>rcnfsserver</command> <option>restart</option>コマンドを使用してNFSサーバを再起動します。
     </para>
    </important>
   </sect4>
   <sect4 id="sec.prep.makeavail.linuxws.ftp">
    <title>FTP経由</title>
    <para>
     Linuxシステム上でFTPサーバを設定するには、サーバソフトウェア自体(wuftpdやproftpdなど)のインストール以外に、他の設定タスクを実行する必要があります。YaSTを使用すると、インストール手順が簡潔になります。インストールするパッケージを選択して、インストールを開始するだけです。匿名のFTPをインストールに使用しない場合は、FTPサーバの設定をスキップします。代わりに、有効なユーザ名とパスワードによるFTPログインを使用します。このタスクのみに使用するユーザアカウントを作成することもできます。FTPデーモンは、手動で起動する必要はありません。FTP接続が要求された場合に、inetdによって起動できます。新しい設定を有効にするには、<command>rcinetd</command> <option>restart</option>または<command>rcxinetd</command> <option>restart</option>を入力します。
    </para>
   </sect4>
   <sect4 id="sec.prep.makeavail.linuxws.oncd">
    <title>DVDに収録された<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase></title>
    <para>
     IBM System z対応の<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>のDVD1には、Intelベースのワークステーション向けのブート可能なLinuxイメージおよびSystem z向けのイメージが収録されています。
    </para>
    <para>
     Intelベースのワークステーションの場合はこのDVDからブートし、使用する言語とキーボード配列に関する質問に答えて、<guimenu>レスキューシステムを開始する</guimenu>を選択します。この操作には64MB以上のRAMが必要です。レスキューシステム全体がワークステーションのRAMに常駐するため、ディスク領域は必要ありません。この方法では、ワークステーションのネットワークキングを手動で設定する必要があるため、Linuxとネットワーキングに関する経験が要求されます。
    </para>
    <para>
     システムzの場合は、<xref linkend="sec.prep.ipling.lpar.dvd"/>に説明されているとおり、このDVDからLPAR/VMゲストをIPL処理します。ネットワークパラメータを入力したら、インストールシステムはDVDをインストールデータのソースとして処理します。System zでは、X11対応の端末を直接接続できないので、VNCによるインストールまたはSSHによるインストールを選択します。SSHはまた、<command>ssh -X</command>でX接続をSSHにトンネルさせることで、グラフィカルインストールを提供します。
    </para>
   </sect4>
  </sect3>
  <sect3 id="sec.prep.makeavail.windowsws">
   <title>Microsoft Windowsワークステーションの使用</title><indexterm> <primary>インストールデータを使用できるようにする</primary><secondary>Windowsワークステーション</secondary> </indexterm>
   <para>
    ネットワーク内でMicrosoft Windowsワークステーションが使用可能な場合は、そのコンピュータを使用して、インストールメディアを使用できるようにします。その最も簡単な方法は、Windowsオペレーティングシステムにすでに含まれているSMBプロトコルを使用することです。必ず<guimenu>SMB over TCP/IP</guimenu>を有効にしてください。この機能によって、SMBパッケージをTCP/IPパッケージにカプセル化できるようになります。詳細については、Windowsオンラインヘルプ、またはネットワーキングを対象にしたその他のWindows関連マニュアルを参照してください。もう1つのオプションは、FTPを使用することです。この場合は、Windows用のサードパーティソフトウェアも必要です。
   </para>
   <sect4 id="sec.prep.makeavail.windowsws.smb">
    <title>SMBを使用する</title>
    <para>
     SMBを使用してインストールメディアを使用可能にするには、WindowsワークステーションのDVDドライブに<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> DVD 1を挿入します。次に、DVD-ROMドライブの文字を使用して新しい共有を作成し、ネットワーク内のどのユーザでも使用できるようにします。
    </para>
    
    <para>YaSTでのインストールパスは次のとおりです。</para>
    <screen>smb://<replaceable>DOMAIN</replaceable>;<replaceable>USER</replaceable>:<replaceable>PW</replaceable>@<replaceable>SERVERNAME</replaceable>/<replaceable>SHAREPATH</replaceable></screen>
     <para>各プレースホルダは次のような意味です。</para>
     <variablelist>
       <varlistentry>
         <term><replaceable>DOMAIN</replaceable></term>
         <listitem>
           <para>ワークグループまたはActive Directoryのドメイン(オプション)。</para>
         </listitem>
       </varlistentry>
       <varlistentry>
         <term><replaceable>USER</replaceable></term><term><replaceable>PW</replaceable></term>
         <listitem>
           <para>このサーバとその共有にアクセスできるユーザのユーザ名およびパスワード(オプション)。</para>
         </listitem>
       </varlistentry>
       <varlistentry>
         <term><replaceable>SERVERNAME</replaceable></term>
         <listitem>
           <para>共有をホストするサーバの名前。</para>
         </listitem>
       </varlistentry>
       <varlistentry>
         <term><replaceable>SHAREPATH</replaceable></term>
         <listitem>
           <para>共有へのパス。</para>
         </listitem>
       </varlistentry>
     </variablelist>
     
     
     <para/>
    
     
   </sect4>
   <sect4 id="sec.prep.makeavail.windowsws.nfs">
    <title>NFSを使用する</title>
    <para>
     Windowsワークステーション用にNFSサーバサービスを有効にするサードパーティ製品のマニュアルを参照してください。<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>のDVDが含まれているDVD-ROMドライブを、使用可能なNFSパスで指定する必要があります。
    </para>
   </sect4>
   <sect4 id="sec.prep.makeavail.windowsws.ftp">
    <title>FTPを使用する</title>
    <para>
     Windowsワークステーション用にFTPサーバサービスを有効にするサードパーティ製品のマニュアルを参照してください。<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>のDVDが含まれているDVD-ROMドライブを、使用可能なFTPパスで指定する必要があります。
    </para>
    <para>
     Microsoft Windowsの一部のリリースにバンドルされているFTPサーバは、FTPコマンドセットのサブセットのみを実装するので、インストールデータの提供には適しません。ただし、他の製品(Hummingbird ExceedやWAR-FTPDに含まれているFTPサーバなど)は、十分に機能すると報告されています。
    </para>
   </sect4>
   <sect4>
    <title>FCP接続SCSI DVDドライブの使用</title>
    <para>
     <xref linkend="sec.info.iplopt.dvd"/>の説明に従ってSCSI DVDからIPLすると、インストールシステムによってDVDがインストールメディアとして使用されます。この場合、FTP、NFS、またはSMBサーバにはインストールメディアは必要ありません。ただし、VNCまたはX(SSH経由)によるグラフィカルインストールを実行するには、インストールの際にネットワークを設定する必要があるので、<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>のネットワーク設定データは必要です。
    </para>
   </sect4>
  </sect3>
  <sect3 id="sec.prep.makeavail.zpxe_cobbler">
   <title>zPXE用のCobblerサーバの使用</title>
   <para>
    ネットワークからのIPLingでは、カーネル、initrd、インストールデータを提供するためのCobblerサーバが必要です。Cobblerサーバを準備するには、次の4つのステップを実行する必要があります。
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      インストールデータのインポート
     </para>
    </listitem>
    <listitem>
     <para>
      配布の追加
     </para>
    </listitem>
    <listitem>
     <para>
      プロファイルの追加
     </para>
    </listitem>
    <listitem>
     <para>
      システムの追加
     </para>
    </listitem>
   </itemizedlist>
   
   <sect4 id="sec.prep.makeavail.zpxe_cobbler.import">
    <title>インストールデータのインポート</title>
    <para>
     メディアをインポートするには、DVDまたはネットワークソースにあるインストールソースをCobblerサーバ上で使用できるようにする必要があります。次のコマンドを実行してデータをインポートします。
    </para>
    <screen>cobbler import --path=<replaceable>PATH</replaceable><co id="cobbler.import.path"/> --name=<replaceable>IDENTIFIER</replaceable><co id="cobbler.import.dirname"/> --arch=s390x</screen>
    <calloutlist>
     <callout arearefs="cobbler.import.path">
      <para>
       インストールデータのマウントポイント。
      </para>
     </callout>
     <callout arearefs="cobbler.import.dirname">
      <para>
       インポートした製品を識別する文字列(例: <quote>sles11_sp3_s390x</quote>)。 この文字列は、インストールデータのコピー先のサブディレクトリとして使用されます。SUSE Linux Enterprise上で稼動しているCobblerサーバの場合は、この文字列として<filename>/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable></filename>を使用します。Cobblerが別のオペレーティングシステムで実行されている場合、これは別のパスになる可能性があります。
      </para>
     </callout>
    </calloutlist>
   </sect4>
   <sect4 id="sec.prep.makeavail.zpxe_cobbler.add_distro">
    <title>配布の追加</title>
    <para>
     配布を追加することで、IPLに必要なカーネルとinitrdをzPXEを介して提供するよう、Cobblerに指示します。Cobblerサーバ上で次のコマンドを実行して、IBM System z対応の<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>を追加します。
    </para>
    <screen>cobbler distro add --arch=s390x --breed=suse --name="<replaceable>IDENTIFIER</replaceable>"<co id="cobbler.add.identifier"/> \
  --os-version=sles10<co id="cobbler.add.os"/> \
  --initrd=/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>/boot/s390x/initrd<co id="cobbler.add.initrd"/> \
  --kernel=/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>/boot/s390x/vmrdr.ikr<co id="cobbler.add.kernel"/> \
  --kopts="install=http://cobbler.example.com/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>"<co id="cobbler.add.server"/>
    </screen>
    <calloutlist>
     <callout arearefs="cobbler.add.identifier">
      <para>
       配布のカスタム識別子(<quote>SLES <phrase role="productname"><phrase os="sles;sled;slerte">11 SP4</phrase></phrase> System z</quote>など)。一意にする必要があります。
      </para>
     </callout>
     <callout arearefs="cobbler.add.os">
      <para>
       オペレーティングシステムの識別子。<literal>sles10</literal>を使用します。
      </para>
     </callout>
     <callout arearefs="cobbler.add.initrd">
      <para>
       initrdへのパス。パスの最初の部分(<filename>/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>/</filename>)は、Cobblerによってデータがインポートされた場所と、インストールデータのインポート時に選択したサブディレクトリ名によって異なります。
      </para>
     </callout>
     <callout arearefs="cobbler.add.kernel">
      <para>
       カーネルへのパス。パスの最初の部分(<filename>/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>/</filename>)は、Cobblerによってデータがインポートされた場所と、インストールデータのインポート時に選択したサブディレクトリ名によって異なります。
      </para>
     </callout>
     <callout arearefs="cobbler.add.server">
      <para>
       Cobblerサーバ上のインストールディレクトリへのURI。  
      </para>
     </callout>
    </calloutlist>
   </sect4>
  </sect3>
  
  <sect3 id="sec.prep.makeavail.zpxe_cobbler.profile">
   <title>プロファイルの追加</title>
   <para>
    プロファイルを使用して、配布に別のオプションを追加できます。たとえば、自動インストールを可能にするAutoYaSTファイルの追加が考えられます。配布ごとに複数のプロファイルを指定でき、1つ以上は作成する必要があります。
   </para>
   <screen>cobbler profile add
   --name=<replaceable>PROFILENAME</replaceable><co id="cobbler.profile.name"/> --distro=<replaceable>DISTRIBUTION</replaceable><co id="cobbler.profile.distro"/> --kickstart=<replaceable>PATH_TO_AUTOYAST_FILE</replaceable><co id="cobbler.profile.kickstart"/></screen>
   <calloutlist>
    <callout arearefs="cobbler.profile.name">
     <para>
      プロファイルの一意の名前。
     </para>
    </callout>
    <callout arearefs="cobbler.profile.distro">
     <para>
      プロファイルの適用先の配布。ここのインポートステップでは、<option>--name=<replaceable>IDENTIFIER</replaceable></option>で指定した文字列を使用する必要があります。
     </para>
    </callout>
    <callout arearefs="cobbler.profile.kickstart">
     <para>
      ここには、自動インストールで使用するAutoYaSTファイルへのパスを指定します。このパラメータはオプションです。
     </para>
    </callout>
   </calloutlist>
  </sect3>
  
  <sect3 id="sec.prep.makeavail.zpxe_cobbler.system">
   <title>システムの追加</title>
   <para>
    最後に必要なステップは、Cobblerサーバへのシステムの追加です。zPXEを介して起動するSystem zゲストごとにシステムを追加する必要があります。ゲストは、z/VMのユーザIDによって識別されます(次の例では、<quote>LINUX01</quote>というIDが想定されています)。 システムを追加するには、次のコマンドを実行します。
   </para>

   <screen>cobbler system add --name=LINUX01 --hostname=linux01.example.com \
--ip=192.168.2.103 --subnet=192.168.2.255 --netmask=255.255.255.0 \
--name-servers=192.168.1.116 --name-servers-search=example.com \
--gateway=192.168.2.1 --kopts="<replaceable>KERNEL_OPTIONS</replaceable>"</screen>

   <para>
    <option>--kopts</option>オプションを使用して、通常はparmfile内で指定するカーネルとインストールパラメータを指定できます。パラメータは、<replaceable>PARAMETER1=VALUE1 PARAMETER2=VALUE2</replaceable>という形式のスペース区切りリストで入力します。欠落しているパラメータがあれば、インストーラにプロンプトが表示されます。完全な自動インストールを実現するには、ネットワークやDASDに対するすべてのパラメータを指定し、AutoYaSTファイルを用意する必要があります。次に、上記と同じネットワークパラメータを使用してOSAインタフェースを装備したゲストの例を示します。
   </para>
   <screen>--kopts=" \
AutoYaST=http://192.168.0.5/autoinst.xml \
Hostname=linux01.example.com \
Domain=example.com \
HostIP=192.168.2.103 \
Gateway=192.168.2.1 \
Nameserver=192.168.1.116 \
Searchdns=example.com \
InstNetDev=osa; \
Netmask=255.255.255.0 \
Broadcast=192.168.2.255 \
OsaInterface=qdio \
OsaMedium=eth \
Layer2=0 \
PortNo=0 \
ReadChannel=0.0.0600 \
WriteChannel=0.0601 \
DataChannel=0.0.0602 \
Portname=DT70 \
DASD=600"</screen>
  </sect3>
 </sect2>

 <sect2 id="sec.prep.inst_types">
  <title>インストールタイプ</title><indexterm><primary>インストール</primary><secondary>LPAR</secondary></indexterm><indexterm><primary>インストール</primary><secondary>z/VM</secondary></indexterm>
  <para>
   このセクションでは、それぞれのインストールモードで<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>をインストールする際に必要な手順および適切な情報の入手方法について説明します。これまでに説明した準備を完了したうえで、目的のインストールモードでのインストールの概要を確認し、<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>をシステムにインストールします。
  </para>
  <para>
   <xref linkend="sec.prep.makeavail"/>で説明したように、IBM System z上のLinuxのインストールモードには、次の2種類があります。
  </para>
  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     LPARインストール
    </para>
   </listitem>
   <listitem>
    <para>
     z/VMのインストール
    </para>
   </listitem>
  </itemizedlist>
  <procedure id="pro.prep.inst_types.lpar">
   <title>LPARインストールの概要</title><indexterm> <primary>LPARによるインストール </primary><secondary>概要</secondary></indexterm>
   <step performance="required">
    <para>
     インストールに必要なデバイスを準備します。<xref linkend="sec.prep.prep_ipl.natlpar"/>を参照してください。
    </para>
   </step>
   <step performance="required">
    <para>
     インストールシステムをIPL処理します。<xref linkend="sec.prep.ipling.lpar"/>を参照してください。
    </para>
   </step>
   <step performance="required">
    <para>
     ネットワークを設定します。<xref linkend="sec.prep.netcfg"/>を参照してください。
    </para>
   </step>
   <step performance="required">
    <para>
     <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>のインストールシステムに接続します。詳細については、<xref linkend="sec.prep.connect"/>を参照してください。
    </para>
   </step>
   <step performance="required">
    <para>
     YaSTを使用してインストールを開始し、インストールしたシステムをIPL処理します。詳細については、<xref linkend="cha.inst"/>を参照してください。
    </para>
   </step>
  </procedure>
  <procedure id="pro.prep.inst_types.vm">
   <title>z/VMインストールの概要</title><indexterm> <primary>z/VMのインストール </primary><secondary>概要</secondary></indexterm>
   <step performance="required">
    <para>
     インストールに必要なデバイスを準備します。<xref linkend="sec.prep.prep_ipl.vm"/>を参照してください。
    </para>
   </step>
   <step performance="required">
    <para>
     インストールシステムをIPL処理します。<xref linkend="sec.prep.ipling.vm"/>を参照してください。
    </para>
   </step>
   <step performance="required">
    <para>
     ネットワークを設定します。<xref linkend="sec.prep.netcfg.vm"/>を参照してください。
    </para>
   </step>
   <step performance="required">
    <para>
     <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>のインストールシステムに接続します。詳細については、<xref linkend="sec.prep.connect"/>を参照してください。
    </para>
   </step>
   <step performance="required">
    <para>
     YaSTを使用してインストールを開始し、インストールしたシステムをIPL処理します。詳細については、<xref linkend="cha.inst"/>を参照してください。
    </para>
   </step>
  </procedure>
 </sect2>

 <sect2 id="sec.prep.prep_ipl">
  <title><phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>のインストールシステムのIPLの準備</title>
  <para/>
  <sect3 id="sec.prep.prep_ipl.natlpar">
   <title>LPARインストール</title><indexterm> <primary>LPARインストール</primary><secondary>IPLの準備</secondary></indexterm><indexterm><primary>IPLの準備</primary><secondary>LPARインストール </secondary></indexterm>
   <para>
    適切な有効化プロファイルとIOCDSを使用して、ESA/S390モードまたはLinux専用モードで起動するようにIBM System zシステムを設定します。この方法の詳細については、IBMのマニュアルを参照してください。
   </para>
   <sect4 id="sec.prep.prep_ipl.natlpar.iocds">
    <title>IOCDS: デバイスの接続と設定</title>
    <para>
     <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>のインストールには、少なくともDASDとネットワーク接続デバイスの2つのデバイスが必要です。テープからIPLを実行する場合は、テープデバイスにもアクセスできるようにする必要があります。デバイスは設定されて、IOCDS(入出力設定データセット)内のLPARに接続されます。この例では、1つのDASD、1つのOSA-2ネットワークデバイス、および1つのLPAR Z1対応テープデバイスを定義しています。Linux用IOCDSの設定方法の詳細については、使用しているコンピュータのIBMハードウェアマニュアルを参照してください。
    </para>
    <example id="ex.prep.prep_ipl.natlpar.iocds">
     <title>IOCDSの例</title>
     <screen>CHPID PATH=(CSS(0),FD),PCHID=120,TYPE=FC
CHPID PATH=(CSS(0),FE),PCHID=320,TYPE=OSD
CHPID PATH=(CSS(0),10),PCHID=3A0,TYPE=CNC

CNTLUNIT CUNUMBR=FD00,PATH=((CSS(0),FD)),UNITADD=((00,1)),UNIT=2105
IODEVICE ADDRESS=(FD00,1),CUNUMBR=(FD00),UNIT=3390B,UNITADD=00

CNTLUNIT CUNUMBR=FE20,PATH=((CSS(0),FE)),UNIT=OSA
IODEVICE ADDRESS=(FE20,1),CUNUMBR=(FE20),UNIT=OSA
IODEVICE ADDRESS=(FEFE,1),CUNUMBR=(FE20),UNIT=OSAD

CNTLUNIT CUNUMBR=100A,PATH=((CSS(0),10)),UNIT=3480,UNITADD=((0A,1))
IODEVICE ADDRESS=(100A,1),CUNUMBR=(100A),UNIT=3480,UNITADD=00</screen>
    </example>
    <para>
     に従って手順を進めます。<xref linkend="sec.prep.ipling.lpar"/>
    </para>
   </sect4>
  </sect3>
  <sect3 id="sec.prep.prep_ipl.vm">
   <title>z/VMのインストール</title><indexterm> <primary>z/VMインストール</primary><secondary>IPLの準備</secondary></indexterm><indexterm><primary>IPLの準備</primary><secondary>z/VMインストール </secondary></indexterm>
   <sect4 id="sec.prep.prep_ipl.vm.linux_guest">
    <title>Linuxゲストの追加</title><indexterm> <primary>z/VM installation</primary> <secondary>Linuxゲスト</secondary> </indexterm>
    <para>
     最初の手順として、z/VM環境のLinuxゲストによって使用されるシステム内の1つ以上のDASDを接続してフォーマットします。次に、z/VMでの新しいユーザを作成します。この例は、パスワード<literal>LINPWD</literal>を使用するユーザ<literal>LINUX1</literal>のディレクトリ、256MBのメモリ(1024MBまで拡張可能)、32MBの拡張RAM(XSTORE)、複数のミニディスク(MDISK)、2つのCPU、OSA QDIOデバイスを示しています。
    </para>
    <tip>
     <title>z/VMゲストへのメモリの割り当て</title>
     <para>
      メモリをz/VMゲストに割り当てるときは、メモリサイズが、優先的に選択するインストールタイプのニーズに適していることを確認します。詳細については、<xref linkend="sec.info_sysreq.sysreq.hw.mem"/>を参照してください。メモリサイズを512MBに設定するには、<command>CP DEFINE STORAGE 512M</command>コマンドを使用します。インストールが完了したら、メモリサイズを必要な値に戻します。
     </para>
    </tip>
    <example id="ex.prep.prep_ipl.vm.linux_guest.config">
     <title>z/VMディレクトリの設定</title>
     <screen>USER LINUX1 LINPWD 256M 1024M G 
*____________________________________________
* LINUX1 
*____________________________________________
* This VM Linux guest has two CPUs defined.

CPU 01 CPUID 111111 
CPU 02 CPUID 111222 
IPL CMS PARM AUTOCR 
IUCV ANY 
IUCV ALLOW 
MACH ESA 10 
OPTION MAINTCCW RMCHINFO 
SHARE RELATIVE 2000 
XSTORE 32M 
CONSOLE 01C0 3270 A 
SPOOL 000C 2540 READER * 
SPOOL 000D 2540 PUNCH A 
SPOOL 000E 3203 A 
* OSA QDIO DEVICE DEFINITIONS 
DEDICATE 9A0 9A0 
DEDICATE 9A1 9A1 
DEDICATE 9A2 9A2 
* 
LINK MAINT 0190 0190 RR 
LINK MAINT 019E 019E RR 
LINK MAINT 019D 019D RR 
* MINIDISK DEFINITIONS 
MDISK 201 3390 0001 0050 DASD40 MR ONE4ME TWO4ME THR4ME 
MDISK 150 3390 0052 0200 DASD40 MR ONE4ME TWO4ME THR4ME 
MDISK 151 3390 0253 2800 DASD40 MR ONE4ME TWO4ME THR4ME</screen>
    </example>
    <para>
     この例では、ミニディスク201を、ゲストのホームディスクとして使用します。200のシリンダを持つミニディスク150は、Linux swapデバイスです。また、2800のシリンダを持つディスク151は、Linuxインストールデータを保持するメディアです。
    </para>
    <para>
     ここで、<command>DIRM FOR LINUX1 ADD</command>を使用して、(<systemitem class="username">MAINT</systemitem>ユーザとして)ゲストをユーザディレクトリに追加します。ゲストの名前(<literal>LINUX1</literal>)を入力して、<keycap>F5</keycap>キーを押します。次のように、ユーザの環境を設定します。
    </para>
    <screen>DIRM DIRECT 
DIRM USER WITHPASS</screen>
    <para>
     最後のコマンドは、リーダファイル番号を返します。次に示すように、この番号は、次のコマンドを実行するのに必要です。
    </para>
    <screen>RECEIVE &lt;number&gt; USER DIRECT A (REPL)</screen>
    <para>
     <command>DIRMAP USER DIRECT A</command>を使用して、ディレクトリをゲストに割り当てます。ユーザ <systemitem class="username">LINUX1 </systemitem>として、ゲスト上でログインできるようになります。
    </para>
    <para>
     <literal>dirmaint</literal>オプションが使用できない場合は、IBMのドキュメントを参照してこのユーザを設定してください。
    </para>
    <para>
     に従って手順を進めます。<xref linkend="sec.prep.ipling.vm"/>
    </para>
   </sect4>
  </sect3>
 </sect2>

 <sect2 id="sec.prep.ipling">
  <title><phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>のインストールシステムのIPL処理</title>
  <para/>
  <sect3 id="sec.prep.ipling.lpar">
   <title>LPARインストール</title><indexterm> <primary>LPARインストール</primary><secondary>IPLインストールシステム</secondary></indexterm><indexterm><primary>IPL</primary><secondary>LPARインストール </secondary></indexterm>
   <para>
    LPARに対して<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>をIPL処理するにはさまざまな方法があります。推奨されているのは、SEまたはHMCの<guimenu>Load from CD-ROM or server</guimenu>機能を使用する方法です。
   </para>
   <sect4 id="sec.prep.ipling.lpar.cdrom">
    <title>DVD-ROMからのIPL</title>
    <para>
     インストールするLPARをマークして、<guimenu>Load from CD-ROM or server</guimenu>を選択します。ファイルの場所を指定するフィールドを空白のままにするか、最初のCD ROMのルートディレクトリへのパスを入力して、［続行］を選択します。表示されるオプションのリストで、デフォルトの選択を受け入れます。<guimenu>ここで、</guimenu>［Operating system messages］によって、カーネルブートメッセージが表示されます。
    </para>
   </sect4>
   <sect4 id="sec.prep.ipling.lpar.dvd">
    <title>FCP接続SCSI DVDからのIPL</title>
    <para>
     <guimenu>SCSI</guimenu>を<guimenu>Load type</guimenu>として選択し、<guimenu>LOAD</guimenu>手順を使用して、SCSIからのIPLを実行できます。SCSIブリッジまたはSCSIストレージで指定されているWWPN (Worldwide port name)とLUN (Logical unit number)を入力します。これは16桁の数字ですが、末尾のゼロを省略しないようにします。ブートプログラムセレクタは2にする必要があります。FCPアダプタを<guimenu>Load address</guimenu>として使用し、IPLを実行します。
    </para>
   </sect4>
   <sect4 id="sec.prep.ipling.lpar.tape">
    <title>ESCONまたはFICON接続テープからのIPL</title>
    <para>
     DVDからIPLを実行できない場合は、<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>インストールイメージのIPL処理の実行元にするチャネル接続テープを作成します。テープデバイスアドレスをロードアドレスとして指定し、SEまたはHMCの<guimenu>LOAD</guimenu>ボタンを使用して、<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>インストールシステムのIPLを実行します。
    </para>
    <para>
     IPL可能テープを作成する方法にはさまざまな種類があります。その1つは、次のようにファイルをコピーすることです。
    </para>
    <screen>/boot/s390x/tapeipl.ikr
/boot/s390x/parmfile
/boot/s390x/initrd</screen>
    <para>
     DVD 1からバイナリファイルとして(たとえば、LinuxワークステーションからFTPを使用して)。
    </para>
    <para>
     名前を指定し、
    </para>
    <screen>SLES11 IMAGE
SLES11 PARM
SLES11 INITRD</screen>
    <para>
     この例のように、REXXを使用して、テープに書き込みます。
    </para>
    <important>
     <title>FTPによるバイナリの転送</title>
     <para>
      ファイルを<literal>fixed 80</literal>としてアップロードしないでください。ファイルを<literal>fixed 1024</literal>として格納します。FTPコマンド<command>locsite fix 1024</command>を使用します。
     </para>
    </important>
    <example id="sec.prep.ipling.lpar.tape.create">
     <title>REXXスクリプトによるIPL可能テープの作成</title>
     <screen>'REWIND 181'
'FILEDEF IN1 DISK' SLES11 IMAGE A
'FILEDEF IN2 DISK' SLES11 PARM A
'FILEDEF IN3 DISK' SLES11 INITRD A
'FILEDEF OUT TAP1 (RECFM F BLOCK 1024 LRECL 1024 PERM'
say 'Writing: ' left(file1,23)
'MOVEFILE IN1 OUT'
say 'Writing: ' left(file2,23)
'MOVEFILE IN2 OUT'
say 'Writing: ' left(file3,23)
'MOVEFILE IN3 OUT'
say 'Done.'
'REWIND 181'
 exit</screen>
    </example>
    <para>
     このスクリプトでのテープは、181として接続されます。必要に応じて、スクリプトを調整してください。
    </para>
   </sect4>
  </sect3>
  <sect3 id="sec.prep.ipling.vm">
   <title>z/VMのインストール</title><indexterm> <primary>z/VMインストール</primary><secondary>IPLインストールシステム</secondary></indexterm><indexterm><primary>IPL</primary><secondary>z/VMインストール</secondary></indexterm>
   <para>
    このセクションでは、z/VMシステムにIBM System z対応の<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>をインストールするようにインストールシステムをIPL処理する方法について説明します。
   </para>
   <sect4 id="sec.prep.ipling.vm.reader">
    <title>z/VMリーダからのIPL</title>
    <para>
     FTPを介してインストールシステムを転送するには、新規に定義されたz/VMゲスト内では、有効なTCP/IP接続とFTPクライアントプログラムが必要です。z/VM用のTCP/IPの設定は、このマニュアルの範囲を超えています。適切なIBMマニュアルを参照してください。
    </para>
    <para>
     z/VM Linuxゲストとしてログインし、IPLを実行します。IBM System z対応の<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>のDVD1にある<filename>/boot/s390x</filename>ディレクトリの内容を、ネットワークのFTPで使用できるようにします。このディレクトリから、ファイル<filename>vmrdr.ikr</filename>、<filename>initrd</filename>、<filename>parmfile</filename>、<filename>sles11.exec</filename>を取得します。80文字の固定ブロックサイズでファイルを転送します。サイズを指定するには、FTPコマンド <command>locsite fix 80 </command>を使用します。<filename>vmrdr.ikr</filename> (Linuxカーネル)と<filename>initrd</filename> (インストールイメージ)をバイナリファイルとしてコピーすることが重要です。したがって、<literal>バイナリ</literal>転送モードを使用します。<filename>parmfile</filename>と<filename>sles11.exec</filename>はASCIIモードで転送する必要があります。
    </para>
    <para>
     この例は、必要な手順を示しています。この例では、IPアドレス<literal>192.168.0.3</literal>を指定して、FTPサーバから、必要なファイルにアクセスできます。ログインは<systemitem class="username">lininst</systemitem>です。実際のネットワークでは異なる場合があります。
    </para>
    <example id="ex.prep.ipling.vm.reader.ftp.ftptrans">
     <title>FTP経由のバイナリ転送</title>
     <screen>FTP 192.168.0.3
VM TCP/IP FTP Level 530
Connecting to 192.168.0.3, port 21
220 ftpserver FTP server (Version wu-2.4.2-academ[BETA-18](1)
Thu Feb 11 16:09:02 GMT 2010) ready.
USER
lininst
331 Password required for lininst
PASS
******
230 User lininst logged in.
Command:
binary
200 Type set to I
Command:
locsite fix 80
Command:
get /media/dvd1/boot/s390x/vmrdr.ikr sles11.image
200 PORT Command successful
150 Opening BINARY mode data connection for /media/dvd1/boot/s390x/vmrdr.ikr
(6757376 bytes)
226 Transfer complete.
6757376 bytes transferred in 8.826 seconds.
Transfer rate 766.70 Kbytes/sec.
Command:
get /media/dvd1/boot/s390x/initrd sles11.initrd
200 PORT Command successful
150 Opening BINARY mode data connection for /media/dvd1/boot/s390x/initrd
(12654815 bytes)
226 Transfer complete.
12194534 bytes transferred in 16.520 seconds.
Transfer rate 766.70 Kbytes/sec.
Command:
ascii
200 Type set to A
Command:
get /media/dvd1/boot/s390x/parmfile sles11.parmfile
150 Opening ASCII mode data connection for /media/dvd1/boot/s390x/parmfile
(71 bytes)
226 Transfer complete.
71 bytes transferred in 0.092 seconds.
Transfer rate 0.71 Kbytes/sec.
Command:
get /media/dvd1/boot/s390x/sles11.exec sles11.exec
150 Opening ASCII mode data connection for /media/dvd1/boot/s390x/sles11.exec
(891 bytes)
226 Transfer complete.
891 bytes transferred in 0.097 seconds.
Transfer rate 0.89 Kbytes/sec.
Command:
quit</screen>
    </example>
    <para>
     先ほどダウンロードしたREXXスクリプトsles11.execを使用して、LinuxインストールシステムのIPLを実行します。このスクリプトは、次のように、カーネル、parmfile、およびRAMディスクを、IPL用のリーダにロードします。
    </para>
    <example id="sex.prep.ipling.vm.reader.startscript.slesexec">
     <title>SLES11 EXEC</title>
     <screen>/* REXX LOAD EXEC FOR SUSE LINUX S/390 VM GUESTS       */
/* LOADS SUSE LINUX S/390 FILES INTO READER            */
SAY ''
SAY 'LOADING SLES11 FILES INTO READER...'
'CP CLOSE RDR'
'PURGE RDR ALL'
'SPOOL PUNCH * RDR'
'PUNCH SLES11 IMAGE A (NOH'
'PUNCH SLES11 PARMFILE A (NOH'
'PUNCH SLES11 INITRD A (NOH'
'I 00C'</screen>
    </example>
    <para>
     このスクリプトでは、<phrase role="productname">sles11<phrase os="sles">コマンドを使用して、</phrase></phrase>SUSE Linux Enterprise Server<command/>のインストールシステムのIPLを実行できます。Linuxカーネルが起動し、そのブートメッセージが表示されます。
    </para>
    <para>
     インストールを続行するには、<xref linkend="sec.prep.netcfg.vm"/>の説明に従います。
    </para>
   </sect4>
   <sect4>
    <title>FCP接続SCSI DVDからのIPL</title>
    <para>
     z/VMでIPLを実行するには、次のように、 SET LOADDEV パラメータを使用して、SCSI IPLプロセスを準備します。
    </para>
    <screen>SET LOADDEV PORTNAME 200400E8 00D74E00 LUN 00020000 00000000 BOOT 2</screen>
    <para>
     たとえば、適切な値でLOADDEVパラメータを設定したら、FCPアダプタのIPLを実行します。
    </para>
    <screen>IPL FC00</screen>
    <para>
     インストールを続行するには、 <xref linkend="sec.prep.netcfg.vm"/>に従って処理を行います。
    </para>
   </sect4>
   <sect4 id="sec.prep.ipling.vm.tape">
    <title>ESCONまたはFICON接続テープからのIPL</title>
    <para>
     z/VMリーダからIPLを実行できない場合は、<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>インストールイメージのIPL処理の実行元にするチャネル接続テープを作成します。処理手順の詳細については、 <xref linkend="sec.prep.ipling.lpar.tape"/>を参照してください。
    </para>
    <para>
     インストールを続行するには、 <xref linkend="sec.prep.netcfg.vm"/>に従って処理を行います。
    </para>
   </sect4>
   <sect4 id="sec.prep.ipling.vm.zpxe">
    <title>zPXEによるCobblerサーバからのIPL</title>
    <para>
     zPXEによってCobblerサーバからIPLを実行するには、Cobblerサーバからz/VMゲストに対して、FTP経由で<filename>zpxe.exec</filename>スクリプトを転送する必要があります。z/VMゲストでは、TCP/IP接続とFTPクライアントプログラムが機能している必要があります。
    </para>
    <para>
     z/VM LinuxゲストとしてIPLにログインし、ASCIIモードの80文字の固定サイズでスクリプトを転送します(例は、<xref linkend="ex.prep.ipling.vm.reader.ftp.ftptrans"/>を参照)。<filename>zpxe.exec</filename>スクリプトは、Cobblerサーバ上のftp://<replaceable>IP_OF_COBBLER_SERVER</replaceable>/<replaceable>zSERIES_INSTALLATION_DIRECTORY</replaceable>/boot/s390x/zpxe.execで入手できます。<replaceable>zSERIES_INSTALLATION_DIRECTORY</replaceable>の正確な場所は、Cobblerサーバ上のインストールデータのインポート先によって決まります(詳細は、<xref linkend="sec.prep.makeavail.zpxe_cobbler.import"/>を参照)。
    </para>
    <para>
     <filename>zpxe.exec</filename>は、ご使用のゲストの<filename>PROFILE EXEC</filename>に取って代わることになっています。既存の<filename>PROFILE EXEC</filename>のバックアップコピーを作成し、<filename>ZPXE EXEC</filename>を<filename>PROFILE EXEC</filename>に名前変更します。 または、<literal>'ZPXE EXEC'</literal>というコンテンツを含む新しい行を使用して、既存の<filename>PROFILE EXEC</filename>から<filename>ZPXE EXEC</filename>を呼び出します。
    </para>
    <para>
     最後のステップでは、configファイル、<filename>ZPXE CONF</filename>を作成し、連絡をとるCobblerサーバとIPLを実行するディスクを<filename>ZPXE EXEC</filename>に知らせます。<command>xedit zpxe conf a</command>を実行して、次のコンテンツで<filename>ZPXE CONF</filename>を作成します(それに応じて例のデータを置き換えます)。
    </para>
    <screen>HOST cobbler.example.com
IPLDISK 600</screen>
    <para>
     次にz/VMゲストにログインすると、Cobblerサーバに接続します。Cobblerサーバ上でインストールがスケジュールされている場合は、それが実行されます。インストールをスケジュールするには、Cobblerサーバで次のコマンドを実行します。
    </para>
    <screen>cobbler system edit --name <replaceable>ID</replaceable><co id="cobbler.sysedit.id"/> --netboot-enabled 1<co id="cobbler.sysedit.netboot"/> --profile <replaceable>PROFILENAME</replaceable><co id="cobbler.sysedit.profile"/></screen>
    <calloutlist>
     <callout arearefs="cobbler.sysedit.id">
      <para>
       z/VMのユーザID。
      </para>
     </callout>
     <callout arearefs="cobbler.sysedit.netboot">
      <para>
       ネットワークからのIPLingを有効にします。
      </para>
     </callout>
     <callout arearefs="cobbler.sysedit.profile">
      <para>
       既存のプロファイルの名前(<xref linkend="sec.prep.makeavail.zpxe_cobbler.profile"/>を参照)。
      </para>
     </callout>
    </calloutlist>
   </sect4>
  </sect3>
 </sect2>

 <sect2 id="sec.prep.netcfg">
  <title>ネットワーク設定</title>
  <para/><indexterm> <primary>LPARインストール</primary><secondary>ネットワーク設定</secondary></indexterm><indexterm><primary>ネットワーク設定</primary><secondary>LPARインストール</secondary></indexterm>
  <para>
   カーネルがその起動ルーチンを完了するまで待機します。基本モードまたはLPARでインストールを行う場合は、HMCまたはSEの<guimenu>Operating System Messages</guimenu>を開きます。
  </para>
  <para>
   最初に、linuxrcメインメニューで<guimenu>Start Installation or System</guimenu>を選択し、次に<guimenu>Start Installation or Update</guimenu>を選択して、インストールプロセスを開始します。<guimenu>ネットワーク</guimenu>をインストールメディアとして選択し、次に、インストールに使用するネットワークプロトコルの種類を選択します。<xref linkend="sec.prep.makeavail"/>には、さまざまなタイプのネットワーク接続でインストールデータを使用できるようにする方法が説明されています。現在は、<guimenu>FTP</guimenu>、<guimenu>HTTP</guimenu>、<guimenu>NFS</guimenu>、<guimenu>SMB/CIFS</guimenu>(Windowsファイル共有)がサポートされています。
  </para>
  <para>
   ここで、次のように、インストールデータ<guimenu>OSA-2またはOSAエクスプレス</guimenu>または<guimenu>HiperSockets</guimenu>を受信するネットワークデバイスを設定します。CTC、ESCON、IUCVの各ネットワークアダプタは、引き続き使用できますが、サポートされなくなりました。次に、CCWバスインタフェースと物理メディア(<guimenu>Ethernet</guimenu>)を選択します。その結果、それぞれのドライバがインストールされて、対応するカーネルメッセージが表示されます。
  </para>
  <para>
   linuxrcインストールを続行すると、使用可能なREADチャネル、WRITEチャネル、および状況に応じてデータチャネルのリストが表示されます。それぞれのチャネルのアドレスを入力した後は、OSAイーサネットカード用のポート名などの追加情報の入力が必要になる場合もあります。
  </para>
  <para>
   次に、ネットワークインタフェースパラメータの設定に、DHCP自動設定を使用するかどうかを決定すします。DHCPは、設定可能なデバイスが少なく、特殊なハードウェア設定が必要なため、ここでは、<guimenu>NO </guimenu>を選択する可能性が高くなります。そのように選択する場合は、次のように、インストールネットワークデバイスのネットワーキングパラメータの指定を要求するメッセージが表示されます。
  </para>
  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     インストールするシステムのIPアドレス
    </para>
   </listitem>
   <listitem>
    <para>
     対応するネットマスク
    </para>
   </listitem>
   <listitem>
    <para>
     サーバにアクセスするためのゲートウェイのIPアドレス
    </para>
   </listitem>
   <listitem>
    <para>
     ドメイン名サーバ(DNS)のIPアドレス
    </para>
   </listitem>
  </itemizedlist>
  <para>
   OSA Express Network Cardを使用している場合、ここで<guimenu>relative port number</guimenu>の入力を求められます。これは新しい2つのポートOSA Express 3 Networkデバイスをサポートするために追加されます。OSA Express 3デバイスを使用していない場合は、「<literal>0</literal>」と入力してください。OSA Expressカードにはまた、<quote>OSI layer 2 support</quote>モードで実行したり、もっと一般的な従来の<quote>layer 3</quote>モードを使用するオプションもあります。カードのモードは、他のLPAR上のシステムを含むデバイスを共有するすべてのシステムに影響します。不明な場合は、z/VMおよびz/OSなど、他のオペレーティングシステムで使用されるデフォルトモードで互換性に<literal>2</literal>を指定してください。これらのオプションに関する詳細については、ハードウェア管理者にご相談ください。
  </para>
  <sect3 id="sec.prep.netcfg.vm">
   <title>z/VMのインストール</title><indexterm> <primary>z/VMインストール</primary><secondary>ネットワーク設定</secondary></indexterm><indexterm><primary>ネットワーク設定</primary><secondary>z/VMインストール </secondary></indexterm>
   <para>
    カーネルがその起動ルーチンを完了したら、ネットワーク設定に関するいくつかの質問に答えます。はじめに、OSA Express、HiperSocketsのうち、使用するネットワーク接続の種類を選択します。このインストールの例では、OSA Expressが使用されます。
   </para>
   <para>
    ここで、システムによって、可能なOSA設定が表示されます。最初に、QDIOとLCS OSAのどちらを使用するかを選択します。次に、使用する物理メディアを選択して、デバイスアドレスを入力します。別の設定にする場合は、OSA READチャネルのデバイスアドレスを入力し(この例では、0.0.0700)、次にOSA WRITEチャネル(0.0.0701)およびOSA制御チャネル(0.0.0702)のデバイスアドレスを入力します。チャネルを入力したら、OSAカードの接続先にするポートの名前を設定します。
   </para>
   <para>
    ここで、<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>は、提供された情報でパラメータ行を構築してネットワークモジュールのロードを試行し、ロードされたすべてのモジュールを表示します。次のような出力が返された場合は、ロードに成功しています。
   </para>
   <example id="ex.prep.netcfg.vm.param">
    <title>ネットワークデバイスドライバのパラメータ</title>
    <screen>(portname YSW2)
(Port 0)
qdio: 0.0.0702 OSA on SC 3 using AI:1 QEBSM:0 PCI:1 TDD:1 SIGA:RW AO
qeth.736dae: 0.0.0700: Device is a Guest LAN QDIO card (level: V540)
with link type GuestLAN QDIO (portname: YSW2)
qeth.47953b: 0.0.0700: Hardware IP fragmentation not supported on eth0
qeth.066069: 0.0.0700: Inbound source MAC-address not supported on eth0
qeth.d7fdb4: 0.0.0700: VLAN enabled
qeth.e90c78: 0.0.0700: Multicast enabled
qeth.5a9d02: 0.0.0700: IPV6 enabled
qeth.184d8a: 0.0.0700: Broadcast enabled
qeth.dac2aa: 0.0.0700: Using SW checksumming on eth0.
qeth.9c4c89: 0.0.0700: Outbound TSO not supported on eth0
</screen>
   </example>
   <para>
    次に、IPアドレス、ネットマスク、デフォルトゲートウェイを入力します。iucvまたはctc経由でインストールする場合は、ピアアドレス(ポイントツーポイントアダプタの場合)やポート名などの追加情報を入力します。
   </para>
   <para>
    最後に、DNSサーバのIPアドレスとMTUサイズが要求されます。MTUサイズは、接続先のネットワークで使用されるサイズと常に一致する必要があります。
   </para>
   <para>
    ここで、要約情報が表示されます。入力した内容が正しいかどうか確認します。ネットワークが起動される前に、インストール時のみに有効になるパスワードを入力します。インストールされたシステムのIPL処理が完了したら、<emphasis>「実際の」ルートパスワードを入力します。</emphasis>
   </para>
   <para>
    すべての基本パラメータが設定されると、ネットワークが起動されます。ifconfigの出力を確認します。ループバック(lo)接続と、正しく設定されている1つの接続(、eth0、ctc0、escon0、iucv0、またはhsi0)の、2つのエントリが含まれている必要があります。
   </para>
   <example id="ex.prep.netcfg.vm.ifconfig">
    <title>ifconfigの例</title>
    <screen>/sbin/ifconfig eth0 : 
	Link encap:Ethernet  HWaddr 02:00:01:00:00:27  
        inet addr:192.168.0.1  Bcast:192.168.0.255  Mask:255.255.255.0
        inet6 addr: fe80::200:100:100:27/64 Scope:Link
        UP BROADCAST RUNNING MULTICAST  MTU:1492  Metric:1
        RX packets:0 errors:0 dropped:0 overruns:0 frame:0
        TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
        collisions:0 txqueuelen:1000 
        RX bytes:0 (0.0 Mb)  TX bytes:0 (0.0 Mb)</screen>
   </example>
  </sect3>
 </sect2>

 <sect2 id="sec.prep.connect">
  <title><phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>のインストールシステムへの接続</title><indexterm> <primary>LPARインストール</primary><secondary>インストールシステムへの接続</secondary></indexterm><indexterm><primary>インストールシステムへの接続</primary><secondary>LPARインストール</secondary></indexterm><indexterm><primary>z/VMインストール</primary><secondary>インストールシステムへの接続</secondary></indexterm><indexterm><primary>インストールシステムへの接続</primary><secondary>z/VMインストール</secondary></indexterm>
  <para>
   ネットワーク接続を設定すると、linuxrcは、たとえばサーバIPアドレスやデータが保存されているディレクトリなど、すでに選択したインストールソースの詳細について確認するメッセージを表示します。
  </para>
  <para>
   最後に、Linuxrcは、どのような種類のディスプレイを使用してインストール手順を制御するかを確認するように指示します。可能な選択肢は、<literal>X11</literal> (X Window System)、<literal>VNC</literal> (Virtual Network Computingプロトコル)、<literal>SSH</literal> (テキストモード、またはSecure Shellを介したX11インストール)、または<literal>ASCII Console</literal>です。
  </para>
  <para>
   <literal>ASCII Console</literal>を選択すると、YaSTがテキストモードで起動するので、端末で直接インストールを実行できます。使用方法については、<xref linkend="cha.yast.text"/>を参照してください。
  </para>
  <note>
   <title>ASCII Console用端末エミュレーション</title>
   <para>
    テキストモードでYaSTを操作できるようにするには、VT220/Linuxエミュレーションを提供する端末(<literal>ASCII console</literal>ともいいます)でYaSTを実行する必要があります。たとえば、3270端末ではYaSTを使用できません。
   </para>
  </note>
  <sect3 id="sec.inst.connect.vnc_inst">
   <title>VNCでのインストールの開始</title><indexterm> <primary>VNC</primary><secondary>インストールの開始</secondary> </indexterm>
   <procedure>
    <step performance="required">
     <para>
      インストールオプション<literal>VNC</literal>を選択すると、VNCサーバが起動します。コンソールに表示される短いメッセージは、vncviewerとの接続にどのIPアドレスとディスプレイ番号が必要かを示します。または、Java対応ブラウザに移動して、インストールシステムに接続するためのURLが表示されます。
     </para>
    </step>
    <step performance="required">
     <para>
      クライアントシステム上のVNCクライアントアプリケーションを起動します。vncviewerまたはVNC JavaクライアントとJava対応Webブラウザを使用します。
     </para>
    </step>
    <step performance="required">
     <para>
      <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>のインストールシステムのIPアドレスとディスプレイ番号の入力を求められた場合は、これらの値を入力します。
     </para>
     <para>
      Java対応ブラウザを使用して接続する場合は、次の形式で、インストールシステムのIPアドレスと適切なポート番号が含まれているURLを入力します。
     </para>
     <screen>http://&lt;IP address of installation system&gt;:5801/</screen>
    </step>
    <step performance="required">
     <para>
      接続が確立された後、YaSTを使用して<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>のインストールを開始します。
     </para>
    </step>
   </procedure>
  </sect3>
  <sect3 id="sec.inst.connect.x">
   <title>X Window Systemでのインストールの開始</title><indexterm> <primary>X</primary><secondary>インストールの開始</secondary> </indexterm>
   <important>
    <title>X認証メカニズム</title>
    <para>
     X Window Systemを使用する直接インストールでは、ホスト名に基づくプリミティブな認証メカニズムに依存します。現在のバージョンの<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>では、このメカニズムが無効になっています。SSHまたはVNCによるインストールが推奨されています。
    </para>
   </important>
   <procedure>
    <step performance="required">
     <para>
      Xサーバを使用してクライアント(インストールされるシステム)の接続が可能なことを確認します。<command>DISPLAYMANAGER_XSERVER_TCP_PORT_6000_OPEN="yes"</command>変数を<filename>/etc/sysconfig/displaymanager</filename>ファイル内で設定します。その後に、Xサーバを再起動し、コマンド <command>xhost &lt;client IP address &gt;</command>を使用して、サーバへのクライアントのバインドを行うことができるようにします。
     </para>
    </step>
    <step performance="required">
     <para>
      インストールシステムで入力するように指示されたら、Xサーバが稼働するコンピュータのIPアドレスを入力します。
     </para>
    </step>
    <step performance="required">
     <para>
      YaSTが起動されるまで待機してから、インストールを開始します。
     </para>
    </step>
   </procedure>
  </sect3>
<?dbfo-need height="20em"?>


  <sect3 id="sec.inst.connect.ssh">
   <title>SSHでのインストールの開始</title><indexterm> <primary>ssh</primary><secondary>インストールの開始</secondary> </indexterm>
   <para>
    名前がearthであるインストールシステムにSSHを使用して接続するには、<command>ssh -X earth</command>を実行します。Microsoft Windows上でワークステーションを実行する場合は、<ulink url="http://www.chiark.greenend.org.uk/~sgtatham/putty/"/>にあるssh/telnetクライアント、およびターミナルエミュレータのputtyを使用します。<guimenu>Enable X11 forwarding</guimenu><menuchoice><guimenu>接続</guimenu><guimenu>SSH</guimenu><guimenu>X11</guimenu></menuchoice>
   </para>
   <para>
    ログインプロンプトが表示されます。「 <literal>root </literal>」と入力し、パスワードを使用してログインします。「<command>yast2</command>」と入力してYaSTを起動します。
   </para>
   <para>
    <xref linkend="cha.inst"/>に記載されているインストール処理手順の詳細な説明に従って、処理を行います。
   </para>
  </sect3>
 </sect2>
</sect1>
