<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sect1 PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN"
"novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<sect1 xml:base="grub_bootcd_i.xml" id="sec.grub.bootcd">
 <title>ブートCDの作成</title><indexterm><primary>ディスク</primary><secondary>ブート</secondary></indexterm>

 <para>
  ブートマネージャを使用してシステムをブートできない場合、またはハードディスクにブートマネージャをインストールできない場合は、Linux用の、すべての起動ファイルを収録したブート可能なCDを作成することもできます。そのためには、システムにCDライタがインストールされている必要があります。
 </para>

 <para>
  では、<filename>stage2_eltorito</filename>という特殊形式の<emphasis>stage2</emphasis>とカスタマイズされた<filename>menu.lst</filename> (オプション)を使用するだけで、ブート可能CD-ROMを作成することができます。従来のファイル<filename>stage1</filename>および<filename>stage2</filename>は不要です。
 </para>

 <procedure>
  <title>ブートCDの作成</title>
  <step performance="required">
   <para>
    ISOイメージの作成先ディレクトリに移動します。例:<command>cd</command> <filename> /tmp</filename>
   </para>
  </step>
  <step performance="required">
   <para>
    GRUBのサブディレクトリを作成し、新たに作成された<filename>iso</filename>ディレクトリに移動します。
   </para>
<screen>mkdir -p iso/boot/grub &amp;&amp; cd iso</screen>
  </step>
  <step performance="required">
   <para>
    カーネル、<filename>stage2_eltorito</filename>、<filename>initrd</filename>、<filename>menu.lst</filename>、および<filename>message</filename>ファイルを<filename>iso/boot/</filename>にコピーします。
   </para>
<screen>cp /boot/vmlinuz boot/
cp /boot/initrd boot/
cp /boot/message boot/
cp /usr/lib/grub/stage2_eltorito boot/grub
cp /boot/grub/menu.lst boot/grub</screen>
   <para>
    
    場合によっては(複数のオペレーティングシステムのブート時など)、<filename>/boot/grub/device.map</filename>も<filename>boot/grub</filename>にコピーすると便利です。  
   </para>
  </step>
  <step performance="required">
   <para>
    <literal>root (hd<replaceable>x</replaceable>、<replaceable>y</replaceable>)</literal>エントリを<literal>root (cd)</literal>で置き換えて、CD_ROMデバイスをポイントします。また、メッセージファイル、カーネル、およびinitrdに対するパスを調整することが必要になる場合があります。これらのパスはそれぞれ、<filename>/boot/message</filename>、<filename>/boot/vmlinuz</filename>、および<filename>/boot/initrd</filename>を指す必要があります。調整を行った後、<filename>menu.lst</filename>は次の例のようになります。
   </para>
<screen>timeout 8
default 0
gfxmenu (cd)/boot/message

title Linux
   root (cd)
   kernel /boot/vmlinuz root=/dev/sda5 vga=794 resume=/dev/sda1 \
   splash=verbose showopts
   initrd /boot/initrd</screen>
   <para>
    ブート処理時にブートメッセージの表示を防止するには、「<option>splash=verbose</option>」の代わりに「<option>splash=silent</option>」を使用します。
   </para>
  </step>
  <step performance="required">
   <para>
    次のコマンドでISOイメージを作成します。
   </para>
<screen>genisoimage -R -b boot/grub/stage2_eltorito -no-emul-boot \
-boot-load-size 4 -boot-info-table -iso-level 2 -input-charset utf-8 \
-o grub.iso /tmp/iso</screen>
  </step>
  <step performance="required">
   <para>
    好みのユーティリティを使用して、生成されたファイル<filename>grub.iso</filename>をCDに書き込みます。ISOイメージをデータファイルとして書き込まず、お使いのCD書き込みユーティリティのCDイメージ書き込みオプションを使用します。
   </para>
  </step>
 </procedure>
</sect1>
