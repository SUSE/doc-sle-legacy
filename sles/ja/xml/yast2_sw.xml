<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE chapter PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN"
"novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<chapter xml:base="yast2_sw.xml" id="cha.y2.sw">
 <title>ソフトウェアをインストールまたは削除する</title><indexterm> <primary>YaST</primary> <secondary>ソフトウェア</secondary> </indexterm> <indexterm> <primary>設定</primary> <secondary>ソフトウェア</secondary> </indexterm>
 <abstract>
  <para>
   YaSTのソフトウェア管理ツールを使用して、追加または削除するソフトウェアコンポーネントを検索します。YaSTでは、すべての依存関係を自動的に解決できます。インストールメディアに付属していないパッケージをインストールするには、追加のソフトウェアリポジトリをセットアップに追加して、それをYaSTで管理できるようにします。アップデートアプレットでソフトウェアの更新を管理することで、システムを最新の状態に保ちます。
  </para>
 </abstract>
 <para os="sles">
  YaSTのソフトウェアマネージャでシステムのソフトウェアコレクションを変更します。このYaSTモジュールには2種類のツールキット、Qtおよびncursesがあり、ここでQtについて説明します。
 </para>
 
 
 <note>
  <title>変更の確認とレビュー</title>
  <para>
   パッケージのインストール、更新、または削除を行う場合、ソフトウェアマネージャでの変更は、即座には適用されず、<guimenu>受諾</guimenu>または<guimenu>適用</guimenu>で確認後にだけ適用されます。YaSTでは、すべてのアクションを記録したリストが保持されているので、変更内容をシステムに適用する前に、それらを確認し、必要に応じて変更できます。
  </para>
 </note>
 <sect1 id="sec.onlineupdate.terms">
  <title>用語の定義</title>

  <variablelist>
   <varlistentry>
    <term>レポジトリ</term>
    <listitem>
     <para>
      パッケージとそれらのパッケージに関する追加情報(パッケージメタデータ)を含むローカルまたはリモートのディレクトリ。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>(リポジトリ)エイリアス</term>
    <listitem>
     <para>
      さまざまなZypperコマンドにより使用されるリポジトリの短い名前。このエイリアスは、リポジトリの追加時にユーザが選択できる名前であり、固有でなければなりません。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>製品</term>
    <listitem>
     <para>
      <phrase role="productname"><phrase os="sles">SUSE® Linux Enterprise Server</phrase></phrase>などの製品全体を指します。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>パターン</term>
    <listitem>
     <para>
      パターンは、特定の用途専用に設計されたパッケージのインストール可能なグループです。たとえば、<systemitem>Laptop</systemitem>パターンには、モバイルコンピューティング環境で必要なすべてのパッケージが含まれています。パターンは、パッケージ依存関係を定義し(必須パッケージや推奨パッケージなど)、インストール用としてマークされたパッケージが事前選択されている状態で提供されます。これによって、特定の用途に必要な最も重要なパッケージが、パターンのインストール後にシステムで使用可能になります。ただし、パターン内のすべてのパッケージがインストール用として事前選択されるわけではなく、ニーズと好みに従って、パターン内のパッケージを手動で選択または選択解除することができます。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>パッケージ</term>
    <listitem>
     <para>
      パッケージは、<literal>rpm</literal>形式の圧縮ファイルであり、特定のプログラムのファイルを含んでいます。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>パッチ</term>
    <listitem>
     <para>
      パッチは、１つ以上のパッケージから成り、deltarpmで適用されることがあります。また、まだインストールされていないパッケージへの依存関係を導入することもあります。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>解決可能</term>
    <listitem>
     <para>
      製品、パターン、パッケージ、またはパッチに関する一般的な用語。最も一般に使用される解決可能なタイプは、パッケージまたはパッチです。
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term>deltarpm</term>
    <listitem>
     <para>
      delatrpmは、2つの定義されたパッケージバージョンのバイナリ差分のみで構成されているので、ダウンロードサイズは最小です。インストールの前に、RPMのフルパッケージがローカルコンピュータ上で再構築されます。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>パッケージの依存関係</term>
    <listitem>
     <para>
      一定のパッケージは、共有ライブラリなどの他のパッケージに依存しています。言い換えれば、パッケージの中には、他のパッケージを<literal>必須</literal>としているものがあります。このようなパッケージは、必須パッケージがないとインストールできません。必須の依存関係(パッケージ要件)のほか、他のパッケージを<literal>推奨</literal>としているパッケージもあります。これらの推奨パッケージは、実際に利用できる場合のみインストールされます。そうでない場合は無視されますが、それらを推奨パッケージにしているパッケージはインストールされます。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect1>
 <sect1 id="sec.y2.sw.qt">
  <title>KDEインタフェース(Qt)の使用</title>

  

  <para>
   YaST Qtインターフェイスは、デスクトップKDE、icewmなどの使用時にデフォルトで起動します。これは、リモート端末からYaSTを呼び出す場合も使用されます。<menuchoice><guimenu>ソフトウェア</guimenu><guimenu>ソフトウェアマネージャ</guimenu></menuchoice>の順に選択して、YaSTコントロールセンターからソフトウェアマネージャを起動します。
  </para>

  <informalfigure>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="yast2_sw_manager.png" width="70%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="yast2_sw_manager.png" width="65%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </informalfigure>

  <sect2 id="sec.y2.sw.search">
   <title>パッケージまたはパターンの検索用ビュー</title>
   <para>
    YaSTソフトウェアマネージャでは、現在有効になっているすべてのリポジトリからパッケージやパターンをインストールできます。このソフトウェアマネージャは、検索対象のソフトウェアの検出を容易にするさまざまな表示とフィルタを提供します。<guimenu>検索</guimenu>ビューは、ウィンドウのデフォルト表示です。ビューを変更するには、<guimenu>表示</guimenu>をクリックし、以下のエントリの1つをドロップダウンリストから選択します。選択した表示が新しいタブで開きます。
   </para>
   <variablelist>
    <varlistentry>
     <term>Patterns（パターン）</term>
     <listitem>
      <para>
       システム上のインストールに使用できるすべてのパターンを一覧します。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>パッケージグループ</term>
     <listitem>
      <para>
       グループ別にソートしたすべてのパッケージを一覧します(<guimenu>グラフィックス</guimenu>、<guimenu>プログラミング</guimenu>、<guimenu>セキュリティ</guimenu>など）。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>RPMグループ</term>
     <listitem>
      <para>
       グループとサブグループの機能でソートされたすべてのパッケージを一覧します。たとえば、<menuchoice><guimenu>ネットワーク</guimenu><guimenu>電子メール</guimenu><guimenu>クライアント</guimenu> </menuchoice>の順にソートします。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>使用言語</term>
     <listitem>
      <para>
       新しいシステム言語の追加に必要なすべてのパッケージを一覧するようにフィルタします。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>リポジトリ</term>
     <listitem>
      <para>
       リポジトリ別にパッケージを一覧するようにフィルタします。複数のリポジトリを選択するには、&lt;<keycap function="control"/>&gt;キーを押しながらリポジトリ名をクリックします。<quote>擬似リポジトリ</quote><guimenu>@System</guimenu>を選択すると、現在インストールされているすべてのパッケージが一覧されます。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>検索</term>
     <listitem>
      <para>
       特定の基準に従って、パッケージを検索できます。検索する用語を入力し、<keycap function="enter"/>を押します。<guimenu>次の項目内で検索する</guimenu>で場所を指定し、<guimenu>検索モード</guimenu>を変更することにより、検索を絞り込みます。たとえば、パッケージ名は知らないが、検索するアプリケーションの名前だけは知っている場合は、検索プロセスにパッケージの<guimenu>説明</guimenu>を含めるようにします。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>インストールの概要</term>
     <listitem>
      <para>
       インストール、更新、または削除するパッケージを既に選択している場合は、このビューに、<guimenu>受諾</guimenu>をクリックするとすぐにシステムに適用される変更が表示されます。このビューで特定の状態にあるパッケージをフィルタするには、各チェックボックスを選択または選択解除します。<keycombo><keycap function="shift"/><keycap>F1</keycap></keycombo>を押して、ステータスフラグの詳細を表示します。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <tip>
    <title>アクティブなリポジトリに属さないパッケージの検出</title>
    <para>
     アクティブリポジトリに属さないすべてのパッケージを一覧するには、<menuchoice><guimenu>表示</guimenu><guimenu>リポジトリ</guimenu><guimenu>@System</guimenu> </menuchoice>の順に選択し、次に、<menuchoice><guimenu>セカンダリフィルタ</guimenu><guimenu>メンテナンスされていないパッケージ</guimenu></menuchoice>の順に選択します。これは、たとえば、リポジトリを削除し、そのリポジトリからのパッケージで、インストールされたまま残っているパッケージがないことを確認したい場合に有用です。
    </para>
   </tip>
  </sect2>

  <sect2 id="sec.y2.sw.install">
   <title>パッケージまたはパターンのインストールと削除</title>

   <para>
    一定のパッケージは、共有ライブラリなどの他のパッケージに依存しています。一方、システム上で他のパッケージと共存できないパッケージもあります。これらの依存関係や競合の解決が可能な場合は、YaSTによって自動的に解決されます。選択によって、自動的に解決できない依存関係の競合が発生した場合は、<xref linkend="sec.y2.sw.deps"/>の説明に従って、競合を手動で解決する必要があります。
   </para>
   <note>
    <title>パッケージの削除</title>
    <para>
     パッケージを削除する場合、デフォルトでは、選択したパッケージのみが削除されます。指定のパッケージの削除後に不要になった他のパッケージもYaSTに削除させたい場合は、<menuchoice><guimenu>オプション</guimenu><guimenu>パッケージの削除時にクリーンアップする</guimenu></menuchoice>の順に選択します。
    </para>
   </note>
   <procedure>
    <step performance="required">
     <para>
      パッケージを検索します(<xref linkend="sec.y2.sw.search"/>参照)。
     </para>
    </step>
    <step performance="required">
     <para>
      検出されたパッケージは、右側のペインに一覧されます。パッケージをインストールまたは削除するには、パッケージを右クリックして、<guimenu>インストール</guimenu>または<guimenu>削除</guimenu>を選択します。該当するオプションがない場合は、パッケージ名の先頭に表示された記号で示されているパッケージステータスを確認し、<keycombo><keycap function="shift"/><keycap>F1</keycap></keycombo>を押してヘルプを表示します。
     </para>
     <tip>
      <title>一覧されたすべてのパッケージにアクションを適用する方法</title>
      <para>
       右ペインに一覧されたすべてのパッケージにアクションを適用するには、<menuchoice><guimenu>パッケージ</guimenu><guimenu>このリスト内のすべて</guimenu></menuchoice>の順に選択して、アクションを選択します。
      </para>
     </tip>
    </step>
    <step performance="required">
     <para>
      パターンをインストールするには、パターン名を右クリックして、<guimenu>インストール</guimenu>を選択します。
     </para>
    </step>
    <step performance="required">
     <para>
      パターンそれ自体を削除することはできません。代わりに、削除したいパターンのパッケージを選択し、それらを削除用にマークします。
     </para>
    </step>
    <step performance="required">
     <para>
      さらにパッケージを選択するには、上記の手順を繰り返します。
     </para>
    </step>
    <step performance="required">
     <para>
      変更を適用する前に、<menuchoice><guimenu>表示</guimenu><guimenu>インストールの概要</guimenu> </menuchoice>の順にクリックすると、変更内容をレビューまたは変更できます。デフォルトでは、ステータスを変更するすべてのパッケージが一覧されます。
     </para>
    </step>
    <step performance="required">
     <para>
      パッケージの状態を元に戻すには、パッケージを右クリックし、次のエントリの１つを選択します。つまり、 パッケージの削除または更新が予定されている場合は<guimenu>保持</guimenu>を選択し、パッケージのインストールが予定されている場合は<guimenu>インストールしない</guimenu>を選択します。すべての変更を破棄し、ソフトウェアマネージャを閉じるには、<guimenu>キャンセル</guimenu>と<guimenu>中止</guimenu>をクリックします。
     </para>
    </step>
    <step performance="required">
     <para>
      完了したら、<guimenu>受諾</guimenu>をクリックして、変更を適用します。
     </para>
    </step>
    <step performance="required">
     <para>
      YaSTで他のパッケージへの依存関係が検出された場合は、インストール、更新、または削除の対象として追加で選択されているパッケージが一覧表示されます。<guimenu>続行</guimenu>をクリックして、それらを受け入れます。
     </para>
     <para>
      選択されているすべてのパッケージのインストール、更新、または削除が完了すると、YaSTソフトウェアマネージャが自動的に終了します。
     </para>
    </step>
   </procedure>
   <note>
    <title>ソースパッケージのインストール</title>
    <para>
     現時点では、YaSTソフトウェアマネージャを使用してソースパッケージをインストールすることはできません。このためには、コマンドラインツール<command>zypper</command>を使用します。詳細については、<xref linkend="sec.zypper.softman.sources"/>を参照してください。
    </para>
   </note>
  </sect2>

  <sect2 id="sec.y2.sw.update">
   <title>パッケージの更新</title>
   <para>
    個々のパッケージを更新する代わりに、インストールされているすべてのパッケージまたは特定リポジトリのすべてのパッケージを更新することもできます。パッケージの大量更新時には、一般に、次の側面を考慮します:
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      パッケージを提供するリポジトリの優先順位、
     </para>
    </listitem>
    <listitem>
     <para>
      パッケージのアーキテクチャ(たとえば、x86_64、i686、i586)、
     </para>
    </listitem>
    <listitem>
     <para>
      パッケージのバージョン番号、
     </para>
    </listitem>
    <listitem>
     <para>
      パッケージのベンダ。
     </para>
    </listitem>
   </itemizedlist>
   <para>
    更新の候補を選択する上でどの側面が最も重要であるかは、選択する個々の更新オプションに依存します。
   </para>
   <procedure>
    <step performance="required">
     <para>
      インストール済みのすべてのパッケージを最新バージョンに更新するには、メインメニューから、<menuchoice><guimenu>パッケージ</guimenu><guimenu>すべてのパッケージ </guimenu><guimenu>新しいバージョンがあれば更新する</guimenu></menuchoice>の順に選択します。
     </para>
     <para>
      一定のポリシーを使用して、使用できる更新候補がないかどうか、すべてのリポジトリがチェックされます。このポリシーでは、まずYaSTによる検索範囲を、インストール済みのパッケージと同じアーキテクチャおよびベンダのパッケージに限定します。検索でパッケージが見つかると、以下のプロセスに従って、見つかったパッケージから<quote>最良の</quote>更新候補が選択されます。ただし、同じベンダの同類のパッケージが見つからない場合は、同じアーキテクチャのすべてのパッケージに検索が拡大されます。それでも同類のパッケージが見つからない場合は、すべてのパッケージが対象となり、次の基準に従って、<quote>最良の</quote>更新候補が選択されます。
     </para>
     <orderedlist spacing="normal">
      <listitem>
       <para>
        リポジトリの優先度: 最高の優先度をもつリポジトリからのパッケージを優先します。
       </para>
      </listitem>
      <listitem>
       <para>
        この基準で複数のパッケージが選択される場合は、<quote>最良の</quote>アーキテクチャをもつパッケージを選択します。(最良の選択: インストール済みパッケージのアーキテクチャとの一致。一致しない場合は、x86_64 &gt; i686 &gt; i586の順に選択)。
       </para>
      </listitem>
     </orderedlist>
     <para>
      選択したパッケージのバージョンがインストール済みパッケージのバージョン番号より高い場合は、インストール済みパッケージが選択した更新候補で更新および置換されます。
     </para>
     <para>
      このオプションでは、インストール済みパッケージのアーキテクチャとベンダを変更しないようにしていますが、特定の条件下では、それらは許容されます。
     </para>
     <note>
      <title>強制的に更新する</title>
      <para>
       代わりに、<menuchoice><guimenu>パッケージ</guimenu><guimenu>すべてのパッケージ</guimenu><guimenu>強制的に更新する</guimenu></menuchoice>の順に選択すると、基本的に同じ基準が適用されますが、見つかった候補パッケージは無条件でインストールされます。したがって、このオプションを選択すると、実際には、一部のパッケージがダウングレードすることがあります。
      </para>
     </note>
    </step>
    <step performance="required">
     <para>
      大量更新用パッケージを特定のリポジトリからのパッケージにするには:
     </para>
     <substeps performance="required">
      <step performance="required">
       <para>
        <xref linkend="sec.y2.sw.search"/>の説明に従って、更新に使用するリポジトリを選択します。
       </para>
      </step>
      <step performance="required">
       <para>
        ウィンドウの右側で、<guimenu>システムパッケージをこのリポジトリ内のバージョンに切り替える</guimenu>をクリックします。この設定は、パッケージを入れ替えるときにパッケージベンダを変更することをYaSTに対して明示的に許可します。
       </para>
       <para>
        <guimenu>受諾</guimenu>で続行すると、すぐに、すべてのインストール済みパッケージが、このリポジトリ(使用可能な場合)からのパッケージで置換されます。これによって、ベンダとアーキテクチャが変更され、一部のパッケージがダウングレードすることがあります。
       </para>
      </step>
      <step performance="required">
       <para>
        これを回避するには、<guimenu>システムパッケージをこのリポジトリ内のバージョンに切り替えることをキャンセルする</guimenu>をクリックします。ただし、このキャンセルは、<guimenu>受諾</guimenu>ボタンを押す前にしかできません。
       </para>
      </step>
     </substeps>
    </step>
    <step performance="required">
     <para>
      変更を適用する前に、<menuchoice><guimenu>表示</guimenu><guimenu>インストールの概要</guimenu> </menuchoice>の順にクリックすると、変更内容をレビューまたは変更できます。デフォルトでは、ステータスを変更するすべてのパッケージが一覧されます。
     </para>
    </step>
    <step performance="required">
     <para>
      すべてのオプションを好みどおりに設定したら、<guimenu>受諾</guimenu>で変更内容を確認して大量更新を開始します。
     </para>
    </step>
   </procedure>
  </sect2>





  <sect2 id="sec.y2.sw.deps">
   <title>ソフトウェアの依存関係のチェック</title>
   <para>
    ほとんどのパッケージは、他のパッケージに依存しています。たとえば、共有ライブラリを使用するパッケージは、そのライブラリを提供するパッケージに依存します。一方、互いに共存できないパッケージがあり、競合を引き起こします。たとえば、メール転送エージェント(sendmailまたはpostfix)は、1つしかインストールできません。ソフトウェアのインストールまたは削除時には、ソフトウェアマネージャが未解決のままの依存関係や競合が残っていないことを確認してシステムの整合性を確保します。
   </para>
   <para>
    依存関係や競合の解決に1つのソリューションしかない場合は、その依存関係や競合は自動的に解決されます。複数のソリューションがあると必ず、手動で解決する必要のある競合が発生します。競合の解決にベンダやアーキテクチャの変更が必要な場合も、手動で解決する必要があります。<guimenu>受諾</guimenu>をクリックして、ソフトウェアマネージャで変更を適用すると、自動リゾルバでトリガされたすべてのアクションの概要が表示され、確認を要求されます。
   </para>
   <para>
    依存関係は、デフォルトで、自動的にチェックされます。パッケージのステータスを変更するたびに(たとえば、パッケージをインストールまたは削除用にマークする)、チェックが実行されます。これは、一般的には便利ですが、依存関係の競合を手動で解決する際にはわずらわしくなることがあります。この機能を無効にするには、<menuchoice><guimenu>依存関係</guimenu><guimenu>自動確認</guimenu></menuchoice>の順に選択して、自動確認をオフにします。依存関係の確認は、<menuchoice><guimenu>依存関係</guimenu><guimenu>今すぐ確認</guimenu></menuchoice>の順に選択して手動で実行します。整合性の確認は、<guimenu>受諾</guimenu>をクリックして選択を確定すると、必ず実行されます。
   </para>
   <para>
    パッケージの依存関係をレビューするには、パッケージを右クリックし、<guimenu>解決器の情報表示</guimenu>を選択します。依存関係を示すマップが開きます。すでにインストールされているパッケージは、緑の枠内に表示されます。
   </para>
   <note>
    <title>パッケージ競合の手動解決</title>
    <para>
     競合の処理に精通していない限り、パッケージの競合を処理する場合は、YaSTによる指示に従うようにします。そうしないと、競合を解決できないことがあります。行った変更はいずれも他の競合をトリガする可能性があり、結局、競合の数は確実に増加することに留意してください。このようになった場合は、<guimenu>キャンセル</guimenu>でソフトウェアマネージャをキャンセルし、すべての変更を<guimenu>中止</guimenu>で破棄して、やり直します。
    </para>
   </note>
   <figure id="fig.y2.sw.packconfl">
    <title>ソフトウェアマネージャの競合管理</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="yast2_package_conflict.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="yast2_package_conflict.png" width="65%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>
 </sect1>
 
 <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="yast2_sw_repo.xml" parse="xml"/>
 <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="opensuseupdater.xml" parse="xml"/>
</chapter>
