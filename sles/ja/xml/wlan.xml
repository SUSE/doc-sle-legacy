<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook51-profile.xsl"
    type="text/xml"
    title="Profiling step"
?>
<!DOCTYPE chapter
[
   <!ENTITY % entities SYSTEM "entity-decl.ent">
   %entities;
]>


<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.1" xml:base="wlan.xml" xml:id="cha-wireless-wlan"><title>無線LAN</title><info><abstract>
  <para>
   無線LAN(無線ローカルエリアネットワーク、WLAN)は、モバイルコンピューティングの必須要素になりました。現在、ほとんどのラップトップにはWLANカードが内蔵されています。この章では、YaSTでWLANカードを設定し、伝送を暗号化する方法とその使用に関するヒントについて説明します。
   
  </para>
 </abstract></info>
 <indexterm> <primary>WLAN</primary></indexterm><indexterm> <primary>無線LAN</primary></indexterm>
 
 <section xml:id="sec-wireless-wlan-standards">
  <title>WLAN標準</title>

  <para>
   無線LANカードは、IEEEが開発した802.11標準を使用して通信します。当初、この規格は最大伝送速度 2MBit/sについて提供されましたが、その後、データ伝送速度を高めるために複数の補足事項が追加されています。これらの補足事項では、モジュレーション、伝送出力、および伝送速度などの詳細が定義されています(<xref linkend="tab-wireless-std-overview"/>参照)。さらに、多数の企業が専有権またはドラフト機能を持つハードウェアを実装しています。
  </para>

  <table xml:id="tab-wireless-std-overview">
   <title>各種WLAN規格の概要</title>
   <tgroup cols="4">
    <thead>
     <row>
      <entry>
       <para>
        名前
       </para>
      </entry>
      <entry>
       <para>
        帯域(GHz)
       </para>
      </entry>
      <entry>
       <para>
        最大伝送速度(MBit/s)
       </para>
      </entry>
      <entry>
       <para>
        メモ
       </para>
      </entry>
     </row>
    </thead>
    <tbody>
     <row>
      <entry>
       <para>
        802.11レガシー
       </para>
      </entry>
      <entry>
       <para>
        2.4
       </para>
      </entry>
      <entry>
       <para>
        2
       </para>
      </entry>
      <entry>
       <para>
        廃止、実質上、使用可能なエンドデバイスはなし
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        802.11a
       </para>
      </entry>
      <entry>
       <para>
        5
       </para>
      </entry>
      <entry>
       <para>
        54
       </para>
      </entry>
      <entry>
       <para>
        干渉が少ない
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        802.11b
       </para>
      </entry>
      <entry>
       <para>
        2.4
       </para>
      </entry>
      <entry>
       <para>
        11
       </para>
      </entry>
      <entry>
       <para>
        あまり普及せず
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        28.29oz
       </para>
      </entry>
      <entry>
       <para>
        2.4
       </para>
      </entry>
      <entry>
       <para>
        54
       </para>
      </entry>
      <entry>
       <para>
        広く普及、11bと後方互換
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        802.11n
       </para>
      </entry>
      <entry>
       <para>
        2.4および/または5
       </para>
      </entry>
      <entry>
       <para>
        300
        
        
       </para>
      </entry>
      <entry>
       <para>
        Common(通常のネットワーキング)
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        802.11ad
       </para>
      </entry>
      <entry>
       <para>
        2.4/5/60
       </para>
      </entry>
      <entry>
       <para>
        最大7000
       </para>
      </entry>
      <entry>
       <para>
        2012年にリリース、現時点ではあまり普及せず
       </para>
      </entry>
     </row>
    </tbody>
   </tgroup>
  </table>

  <para>
   802.11レガシカードは、<phrase role="productname"><phrase os="sles">SUSE® Linux Enterprise Server</phrase></phrase>ではサポートされていません。802.11a、802.11b、802.11g、および 802.11nを使用する大半のカードがサポートされています。通常、新しいカードは 802.11n規格に準拠していますが、802.11gを使用するカードもまだあります。
  </para>
 </section>
 <section xml:id="sec-wireless-wlan-modes">
  <title>動作モード</title>

  <para>
   ワイヤレスネットワークでは、高速で高品質、そして安全な接続を確保するために、さまざまなテクニックや設定が使用されています。動作のタイプが違えば、それに適したセットアップ方式も異なります。適切な認証方式を選択するのは難しいことがあります。利用可能な暗号化方式には、それぞれ異なる利点と欠点があります。
  </para>

  <para>
   基本的に、無線ネットワークは次の3つのネットワークモードに分類できます。
  </para>

  <variablelist>
   <varlistentry>
    <term>管理対象アクセスポイントを経由するモード(インフラストラクチャモード) </term>
    <listitem>
     <para>
      管理ネットワークには、管理要素のアクセスポイントがあります。このモード(インフラストラクチャモードとも呼ばれます)では、ネットワーク内のWLAN局の接続はすべてアクセスポイント経由で行われ、イーサネットへの接続としても機能できます。権限のある局だけが接続できるようにするため、さまざまな認証メカニズム(WPAなど)が使用されます。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>アドホックモード(ピアツーピアネットワーク)</term>
    <listitem>
     <para>
      アドホックネットワークには、アクセスポイントはありません。アドホックネットワークでは、局同士が直接に通信するので、通常、アドホックネットワークは管理ネットワークより高速です。ただし、アドホックネットワークでは、参加局の伝送範囲と数が大幅に制限されます。それらのネットワークでは、WPA認証もサポートしません。WPAセキュリティを使用する場合は、アドホックモードを使用しないでください。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>マスタモード</term>
    <listitem>
     <para>
      マスタモードでは、ネットワークカードがアクセスポイントとして使用されます。無線LANカードでこのモードがサポートされる場合にのみ使用できます。無線LANカードの詳細については、<link xlink:href="http://linux-wless.passys.nl"/>を参照してください。
      
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </section>
 <section xml:id="sec-wireless-wlan-func-auth">
  <title>認証</title>

  <para>
   有線ネットワークよりも無線ネットワークの方がはるかに盗聴や侵入が容易なので、各種の規格には認証方式と暗号化方式が含まれています。IEEE 802.11規格のオリジナルバージョンでは、これらがWEP (Wired Equivalent Privacy)という用語で説明されています。ただし、WEPは安全でないことが判明したので(<xref linkend="sec-wireless-wlan-tant-sec"/>)、WLAN業界(<emphasis>Wi-Fi Alliance</emphasis>という団体名で協力)はWPAという拡張機能を定義しており、これによりWEPの弱点がなくなるものと思われます。より最近のIEEE 802.11i規格には、WPAとその他の認証/暗号化方式が含まれています。IEEE 802.11iは、WPA2とも呼ばれます。これは、WPAが802.11iのドラフトバージョンに基づいているからです。
  </para>

  <para>
   認可された局だけが接続できるように、管理ネットワークでは各種の認証メカニズムが使用されます。
  </para>

  <variablelist>
   <varlistentry>
    <term>なし(オープン)</term>
    <listitem>
     <para>
      オープンシステムとは、認証を必要としないシステムです。任意の局がネットワークに参加できます。それにも関わらず、WEP暗号化を使用できます(<xref linkend="sec-wireless-wlan-func-encr"/>参照)。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>共有キー(IEEE 802.11に準拠)</term>
    <listitem>
     <para>
      この方式では、認証にWEPキーが使用されます。ただし、WEPキーが攻撃にさらされやすくなるので、この方式はお勧めしません。攻撃者は、局とアクセスポイント間の通信を長時間リスニングするだけで、WEPキーを奪取できます。認証処理中には、通信の両側が1度は暗号化形式、1度は暗号化されていない形式で同じ情報を交換します。そのため、適当なツールを使えば、キーを再構成することが可能です。この方式では認証と暗号化に WEPキーを使用するので、ネットワークのセキュリティは強化されません。適切なWEPキーを持っている局は、認証、暗号化および復号化を行うことができます。キーを持たない局は、受信したパケットを復号化できません。したがって、自己認証を行ったかどうかに関係なく、通信を行うことができません。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>WPA-PSK(IEEE 802.1x準拠では、WPA-Personal)</term>
    <listitem>
     <para>
      WPA-PSK (PSKはpreshared keyの略)の機能は、共有キー方式と同様です。すべての参加局とアクセスポイントは、同じキーを必要とします。キーの長さは256ビットで、通常はパスフレーズとして入力されます。この方式では、WPA-EAPのような複雑なキー管理を必要とせず、個人で使用するのに適しています。したがって、WPA-PSKはWPA <quote>Home</quote>とも呼ばれます。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>WPA-EAP(IEEE 802.1x準拠では、WPA-Enterprise)</term>
    <listitem>
     <para>
      実際には、WPA-EAP(Extensible Authentication Protocol)は認証システムではなく、認証情報を転送するためのプロトコルです。WPA-EAPは、企業内の無線ネットワークを保護するために使用されます。プライベートネットワークでは、ほとんど使用されていません。このため、WPA-EAPはWPA <quote>Enterprise</quote>とも呼ばれます。
     </para>
     <para>
      WPA-EAPは、ユーザを認証するのにRadiusサーバを必要とします。EAPでは、サーバに接続および認証する3つの異なる方法を提供します。
     </para>
     <itemizedlist mark="bullet" spacing="normal">
      <listitem>
       <para>
        EAP-TLS (Transport Layer Security): TLS認証は、サーバ/クライアント両方の証明書の相互交換に依存しています。はじめに、サーバがクライアントに対して証明書を提示し、それが評価されます。証明書が有効であるとみなされた場合には、今度がクライアントがサーバに対して証明書を提示します。TLSはセキュアですが、ネットワーク内で証明書管理のインフラストラクチャを運用することが必要になります。このインフラストラクチャは、プライベートネットワークでは通常存在しません。
       </para>
      </listitem>
      <listitem>
       <para>
        EAP-TTSL (Tunneled Transport Layer Security)
       </para>
      </listitem>
      <listitem>
       <para>
        EAP-PEAP (Protected Extensible Authentication Protocol): TTLSとPEAPは、両方とも2段階のプロトコルです。最初の段階ではセキュリティ接続が確立され、2番目の段階ではクライアントの認証データが交換されます。これらの証明書管理のオーバヘッドは、もしあるとしても、TLSよりずっと小さいものです。
       </para>
      </listitem>
     </itemizedlist>
    </listitem>
   </varlistentry>
  </variablelist>
 </section>
 <section xml:id="sec-wireless-wlan-func-encr">
  <title>暗号化</title>

  <para>
   権限のないユーザが無線ネットワークで交換されるデータパケットを読み込んだりネットワークにアクセスしたりできないように、さまざまな暗号化方式が存在しています。
  </para>

  <variablelist>
   <varlistentry>
    <term>WEP (IEEE 802.11で定義)</term>
    <listitem>
     <para>
      この規格では、RC4暗号化アルゴリズムを使用します。当初のキー長は40ビットでしたが、その後104ビットも使用されています。通常、初期化ベクタの24ビットを含めるものとして、長さは64ビットまたは128ビットとして宣言されます。ただし、この規格には一部弱点があります。このシステムで生成されたキーに対する攻撃が成功する場合があります。それでも、ネットワークをまったく暗号化しないよりはWEPを使用する方が適切です。
     </para>
     <para>
      非標準の<quote>ダイナミックWEP</quote>を実装しているベンダーもいます。これは、WEPとまったく同様に機能し、同じ弱点を共有しますが、キーがキー管理サービスによって定期的に変更されます。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>TKIP (WPA/IEEE 802.11iで定義)</term>
    <listitem>
     <para>
      このキー管理プロトコルはWPA規格で定義されており、WEPと同じ暗号化アルゴリズムを使用しますが、弱点は排除されています。データパケットごとに新しいキーが生成されるので、これらのキーに対する攻撃は無駄になります。TKIPはWPA-PSKと併用されます。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>CCMP (IEEE 802.11iで定義)</term>
    <listitem>
     <para>
      CCMPは、キー管理を記述したものです。通常は、WPA-EAPに関連して使用されますが、WPA-PSKとも併用できます。暗号化はAESに従って行われ、WEP規格のRC4暗号化よりも厳密です。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </section>
 <section xml:id="sec-wireless-wlan-yast2">
  <title>YaSTでの設定</title>

  <important>
   <title>無線ネットワークでのセキュリティリスク</title>
   <para>
    暗号化されていないWLAN接続では、第三者がすべてのネットワークデータを盗聴することができます。必ず、サポートされている認証方式と暗号化方式を使用して、ネットワークトラフィックを保護してください。
   </para>
   <para>
    ご使用のハードウェアで使用できる最良の暗号化方式を使用してください。ただし、特定の暗号化方式を使用するには、ネットワーク内のすべてのデバイスでこの方式がサポートされる必要があります。さもないと、デバイスが相互に通信できません。たとえば、 ルータはWEPとWPAの両方をサポートしますが、WLANカードのドライバはWEPしかサポートしない場合は、WEPが使用できる最小公分母になります。WEPにおる弱い暗号化でも、まったくないよりましです。詳細については、<xref linkend="sec-wireless-wlan-func-encr"/>と<xref linkend="sec-wireless-wlan-tant-sec"/>を参照してください。
   </para>
  </important>

  <para>
   YaSTで無線LANを設定するには、次のパラメータを定義する必要があります。
  </para>

  <variablelist>
   <varlistentry>
    <term>IPアドレス</term>
    <listitem>
     <para>
      静的IPアドレスを使用するか、またはDHCPサーバでIPアドレスをインタフェースに動的に割り当てます。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>動作モード</term>
    <listitem>
     <para>
      ネットワークトポロジに応じて、コンピュータをWLANに統合する方法を定義します。の背景情報については、<xref linkend="sec-wireless-wlan-modes"/>を参照してください。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>ネットワーク名(ESSID)</term>
    <listitem>
     <para>
      ネットワークを識別するユニークな文字列。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>認証と暗号化の詳細</term>
    <listitem>
     <para>
      ネットワークが使用する認証および暗号化の方式に応じて、1つ以上のキーおよび/または証明書を入力する必要があります。
     </para>
     <para>
      各キーの入力については、次の入力オプションがあります。<guimenu>パスフレーズ</guimenu>、<guimenu>ASCII</guimenu>(WEP認証方式にのみ使用可能)、および<guimenu>16進</guimenu>。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>

  <section xml:id="sec-wireless-wlan-yast2-nm">
   <title>NetworkManagerを無効にする</title>
   <para>
    WLANカードは通常、インストール時に検出されます。コンピュータがモバイルの場合、デフォルトでは、通常、NetworkManagerが有効になっています。WLANカードをYaSTで設定したい場合は、まず、NetworkManagerを無効にする必要があります。
   </para>
   <procedure>
    <step xml:id="st-wireless-wlan-start">
     <para>
      ユーザ<systemitem class="username">root</systemitem>としてYaSTを起動します。
     </para>
    </step>
    <step>
     <para>
      YaSTコントロールセンターで、<menuchoice><guimenu>ネットワークデバイス</guimenu><guimenu>ネットワーク設定</guimenu></menuchoice>の順に選択して、<guimenu>ネットワーク設定</guimenu>ダイアログを開きます。
     </para>
     <para>
      ネットワークが現在、NetworkManagerによって制御されている場合は、ネットワーク設定をYaSTで編集できないことを警告するメッセージが表示されます。
     </para>
    </step>
    <step>
     <para>
      YaSTによる編集を可能にするには、<guimenu>￼OK</guimenu>￼］でメッセージから出て、<guimenu>グローバルオプション</guimenu>タブで、<guimenu>ifupを使用した従来の方法</guimenu>を有効にします。
     </para>
    </step>
    <step>
     <para>
      さらに設定を続けたい場合は、<xref linkend="sec-wireless-wlan-yast2-accesspoint"/> または <xref linkend="sec-wireless-wlan-yast2-adhocnet"/>に進みます。
     </para>
     <para>
      そうでない場合は、<guimenu>OK</guimenu>で変更を確認して、ネットワーク設定を書き込みます。
     </para>
    </step>
   </procedure>
  </section>

  <section xml:id="sec-wireless-wlan-yast2-accesspoint">
   <title>アクセスポイント用設定</title>
   <para>
    この項では、(外部)アクセスポイントに接続するようにWLANカードを設定する方法、またはWLANカードをアクセスポイントとして使用する方法(WLANカードがこの機能をサポートしている場合)について学習します。アクセスポイントのないネットワークの設定については、 <xref linkend="sec-wireless-wlan-yast2-adhocnet"/>を参照してください。
   </para>
   <procedure xml:id="pro-wlan-yast2-accesspoint">
    <title>アクセスポイントを使用するようにWLANカードを設定する</title>
    <step>
     <para>
      YaSTを起動し、<guimenu>ネットワーク設定</guimenu>ダイアログを開きます。
     </para>
    </step>
    <step>
     <para>
      <guimenu>概要</guimenu>タブに切り替えると、システムにより検出されたすべてのネットワークカードが表示されます。一般的なネットワーク設定の詳細については、<xref linkend="sec-basicnet-yast"/>を参照してください。
     </para>
    </step>
    <step xml:id="st-wireless-wlan-card">
     <para>
      リストから目的のワイヤレスカードを選択し、<guimenu>編集</guimenu>をクリックして、ネ<guimenu>ットワークカード設定</guimenu>ダイアログを開きます。
     </para>
    </step>
    <step>
     <para>
      <guimenu>アドレス</guimenu>タブで、コンピュータに動的IPまたは静的IPのどちらを使用するか設定します。通常は、<guimenu>DHCP</guimenu>を使用する<guimenu>可変IPアドレス</guimenu>で十分です。
     </para>
    </step>
    <step>
     <para>
      <guimenu>次へ</guimenu>をクリックして、<guimenu>無線ネットワークカードの環境設定</guimenu>ダイアログに進みます。
     </para>
    </step>
    <step>
     <para>
      WLANカードを使用してアクセスポイントに接続するには、<guimenu>動作モード</guimenu>を<guimenu>管理</guimenu>に設定します。
     </para>
     <para>
      ただし、WLANカードをアクセスポイントとして使用したい場合は、<guimenu>動作モード</guimenu> を<guimenu>マスタ</guimenu>に設定します。ただし、すべてのWLANカードがこのモードをサポートしているわけではないので注意してください。
     </para>
     <note>
      <title>WPA-PSKまたはWPA-EAPを使用する</title>
      <para>
       認証モードとしてWPA-PSKまたはWPA-EAPを使用する場合は、［動作モード］を<guimenu>管理</guimenu>に設定する必要があります。
      </para>
     </note>
    </step>
    <step>
     <para>
      特定のネットワークに接続するには、<guimenu>ネットワーク名(ESSID)</guimenu>に入力します。または、<guimenu>ネットワークの検索</guimenu>をクリックし、使用可能な無線ネットワークのリストからネットワークを選択します。
     </para>
     <para>
      無線ネットワークのすべての局が相互に通信するには、同じESSIDが必要です。ESSIDを指定しないと、WLANカードは、最良の信号強度を持つアクセスポイントに自動的に接続します。
     </para>
     <note>
      <title>WPA認証ではESSIDが必須</title>
      <para>
       <guimenu>WPA</guimenu>認証を選択した場合は、ネットワーク名(ESSID)を設定する必要があります。
      </para>
     </note>
    </step>
    <step>
     <para>
      ネットワークの<guimenu>認証モード</guimenu>を選択します。適切なモードは、WLANカードのドライバとネットワーク内の他のデバイスの機能によって決まります。
     </para>
    </step>
    <step>
     <para>
      <guimenu>認証モード</guimenu>を<guimenu>暗号化しない</guimenu>に設定することを選択した場合は、<guimenu>次へ</guimenu>をクリックして設定を完了してください。可能なセキュリティリスクに関するメッセージを確認し、<guimenu>OK</guimenu>をクリックして <guimenu>概要</guimenu>タブ(新しく設定されたWLANカードを表示)から出ます。
     </para>
     <para>
      他の認証モードを選択した場合は、<xref linkend="pro-wlan-yast2-enryption"/>に進んでください。
     </para>
    </step>
   </procedure>
   <figure xml:id="fig-wireless-wlan-yast">
    <title>YaST:無線ネットワークカードの設定</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata width="75%" fileref="yast2_wlan.png" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata width="55%" fileref="yast2_wlan.png" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <procedure xml:id="pro-wlan-yast2-enryption">
    <title>暗号化の詳細を入力する</title>
    <para>
     次の認証方式では、暗号化キーが必要です: <guimenu>WEP - オープン</guimenu>、<guimenu>WEP - 共有鍵</guimenu>、および<guimenu>WPA-PSK</guimenu>
    </para>
    <para>
     WEPの場合、通常、キーだけが必要です。ただし、ご使用の局に対して最大4つの異なるWEPキーを定義できます。それらの1つを、デフォルトキーとして設定し、暗号化に使用します。他のキーは復号化に使用します。デフォルトでは、128ビットのキー長が使用されますが、キー長を64ビットに設定することもできます。
    </para>
    <para>
     セキュリティを高めるため、WPA-EAPでは、RADIUSサーバでユーザを認証します。サーバでの認証では、3つの異なる方式(TLS、TTLS、PEAP)を使用できます。WPA-EAP用に必要な資格情報と証明書は、RADIUSサーバ用の認証方法によって異なります。必要な情報と資格情報については、システム管理者にその提供を要求してください。YaSTは<filename>/etc/cert</filename>から証明書を検索します。したがって、付与された証明書はこの場所に保存し、これらのファイルへのアクセスを<literal>0600</literal>(所有者による読み取り/書き込み)に制限してください。
    </para>
    <step>
     <para>
      To enter the key for <guimenu>WEP - オープン</guimenu>または<guimenu>WEP - 共有鍵</guimenu>のキーを入力するには:
     </para>
     <substeps performance="required">
      <step>
       <para>
        <guimenu>キーの入力タイプ</guimenu>を<guimenu>パスフレーズ</guimenu>、<guimenu>ASCII</guimenu>、または<guimenu>16進</guimenu>のいずれかに設定します。
       </para>
      </step>
      <step>
       <para>
        各<guimenu>暗号化キー</guimenu>を入力します(通常、1つのキーだけが使用されます)。
       </para>
       <para>
        <guimenu>パスフレーズ</guimenu>を選択した場合は、指定のキー長(デフォルトで128ビット)に従って、キーになるワードまたは文字列を入力します。
       </para>
       <para>
        <guimenu>ASCII</guimenu>を選択した場合は、 64ビットキーであれば 5文字、 128ビットキーであれば 13文字を入力する必要があります。
       </para>
       <para>
        <guimenu>Hexadecimal</guimenu>を選択した場合は、64ビットキーであれば10文字、128ビットキーであれば26文字を16進表記で入力します。
       </para>
      </step>
      <step>
       <para>
        キー長を最も低いビットレートに調節するには(古いハードウェア用に必要な場合)、<guimenu>WEPキー</guimenu>をクリックして、<guimenu>キー長</guimenu>を<guimenu>64</guimenu>ビットに設定します。<guimenu>WEPキー</guimenu>ダイアログに、今まで入力されたWEPキーも表示されます。別のキーがデフォルトとして明示的に設定されていない限り、YaSTでは、常に最初のキーがデフォルトとして使用されます。
       </para>
      </step>
      <step>
       <para>
        WEPの追加キーを入力したり、キーの1つを変更するには、各エントリを選択して、<guimenu>編集</guimenu>をクリックします。<guimenu>キーの入力タイプ</guimenu>を選択して、キーを入力します。
       </para>
      </step>
      <step>
       <para>
        <guimenu>OK</guimenu>をクリックして、変更を確認します。
       </para>
      </step>
     </substeps>
    </step>
    <step>
     <para>
      <guimenu>WPA-PSK</guimenu>のキーを入力するには:
     </para>
     <substeps performance="required">
      <step>
       <para>
        入力方式として、<guimenu>パスフレーズ</guimenu>または<guimenu>16進</guimenu>を選択します。
       </para>
      </step>
      <step>
       <para>
        各<guimenu>暗号化キー</guimenu>を入力します。
       </para>
       <para>
        <guimenu>Passphrase</guimenu>モードでは、 8から 63文字を入力する必要があります。<guimenu>16進</guimenu>モードでは、64文字を入力します。
       </para>
      </step>
     </substeps>
    </step>
    <step>
     <para>
      <guimenu>WPA-EAP</guimenu>認証を選択した場合は、<guimenu>次へ</guimenu>をクリックして<guimenu>WPA-EAP</guimenu>ダイアログに切り替えます。このダイアログでは、ネットワーク管理者によって与えられた資格情報と証明書を入力します。
     </para>
     <substeps performance="required">
      <step>
       <para>
        RADIUSサーバが認証に使用する<guimenu>EAPモード</guimenu>を選択します。以下で入力する必要のある詳細情報は、選択した<guimenu>EAPモード</guimenu>によって決まります。
       </para>
      </step>
      <step>
       <para>
        TLSの場合は、<guimenu>識別情報</guimenu>、<guimenu>クライアント証明書</guimenu>、<guimenu>クライアント鍵</guimenu>、および<guimenu>クライアント鍵パスワード</guimenu>に適切な値を入力します。セキュリティを増大するには、サーバの信憑性の検証に使用される<guimenu>サーバ証明書</guimenu>を設定することもできます。
       </para>
       <para>
        TTLSおよびPEAPでは、<guimenu>識別情報</guimenu>と<guimenu>パスワード</guimenu>は必須ですが、<guimenu>サーバ証明書</guimenu>と<guimenu>匿名識別情報</guimenu>はオプションです。
       </para>
      </step>
      <step>
       <para>
        WPA-EAPセットアップ用の高度な認証ダイアログに入るには、<guimenu>詳細</guimenu>をクリックします。
       </para>
      </step>
      <step>
       <para>
        EAP-TTLSまたはEAP-PEAP通信の第2段階(内部認証)の<guimenu>認証方法</guimenu>を選択します。選択する方式は、前のダイアログで選択したRADIUSサーバの認証方法によって決まります。
       </para>
      </step>
      <step>
       <para>
        自動的決定された設定が適切でない場合は、特定の<guimenu>PEAPバージョン</guimenu>を選択して、特定のPEAP実装の使用を強制してください。
       </para>
      </step>
     </substeps>
    </step>
    <step>
     <para>
      <guimenu>OK</guimenu>をクリックして、変更を確認します。<guimenu>概要 </guimenu>タブに、新しく設定したWLANカードの詳細が表示されます。
     </para>
    </step>
    <step>
     <para>
      <guimenu>OK</guimenu>をクリックして設定を確定し、ダイアログを終了します。
     </para>
    </step>
   </procedure>
  </section>

  <section xml:id="sec-wireless-wlan-yast2-adhocnet">
   <title>アドホックネットワークの確立</title>
   <para>
    場合によっては、無線LANカードを装着した2つのコンピュータを接続すると便利です。YaSTによりアドホックネットワークを確立するには、次の操作を行います。
   </para>
   <procedure>
    <step>
     <para>
      YaSTを起動し、<guimenu>ネットワーク設定</guimenu>ダイアログを開きます。
     </para>
    </step>
    <step>
     <para>
      <guimenu>概要</guimenu>タブに切り替え、リストから無線カードを選択し、<guimenu>編集</guimenu>をクリックして<guimenu>ネットワークカードの設定</guimenu>ダイアログを開きます。
     </para>
    </step>
    <step>
     <para>
      <guimenu>固定IPアドレス</guimenu>を選択し、次のデータを入力します。
     </para>
     <itemizedlist mark="bullet" spacing="normal">
      <listitem>
       <para>
        <guimenu>IPアドレス</guimenu>:<systemitem class="ipaddress">192.168.1.1</systemitem>。たとえば、第2のコンピュータでこのアドレスを<systemitem class="ipaddress">192.168.1.2</systemitem>に変更します。
       </para>
      </listitem>
      <listitem>
       <para>
        <guimenu>サブネットマスク</guimenu>: <systemitem class="ipaddress">/24</systemitem>
       </para>
      </listitem>
      <listitem>
       <para>
        <guimenu>ホスト名</guimenu>: 自由に名前を選択します。
       </para>
      </listitem>
     </itemizedlist>
    </step>
    <step>
     <para>
      <guimenu>次へ</guimenu>で続行します。
     </para>
    </step>
    <step>
     <para>
      <guimenu>動作モード</guimenu>を<guimenu>アドホック</guimenu>に設定します。
     </para>
    </step>
    <step>
     <para>
      <guimenu>ネットワーク名(ESSID)</guimenu>を選択します。これは任意の名前にすることできますが、アドホックネットワーク内のすべてのコンピュータでこの名前を使用する必要があります。
     </para>
    </step>
    <step>
     <para>
      ネットワークの<guimenu>認証モード</guimenu>を選択します。適切なモードは、WLANカードのドライバとネットワーク内の他のデバイスの機能によって決まります。
     </para>
    </step>
    <step>
     <para>
      <guimenu>認証モード</guimenu>を<guimenu>暗号化しない</guimenu>に設定することを選択した場合は、<guimenu>次へ</guimenu>をクリックして設定を完了してください。この設定に潜在するセキュリティリスクに関するメッセージを確認し、<guimenu>OK</guimenu>をクリックして、新しく設定したWLANカードが表示されている<guimenu>概要</guimenu>タブを出ます。
     </para>
     <para>
      他の認証モードを選択した場合は、<xref linkend="pro-wlan-yast2-enryption"/>に進んでください。
     </para>
    </step>
    <step>
     <para>
      <systemitem class="resource">smpppd</systemitem>をインストールしていない場合は、YaSTによりsmpppdをインストールするように求められます。
     </para>
    </step>
    <step>
     <para>
      ネットワーク内の他のWLANカードを、同じ<guimenu>ネットワーク名(ESSID)</guimenu>と同じ<guimenu>認証モード</guimenu>、異なる IPアドレスを使用して、適宜設定します。
     </para>
    </step>
   </procedure>
  </section>

  <section xml:id="sec-wireless-wlan-yast2-advanced">
   <title>追加の環境設定パラメータを設定する</title>
   <para>
    通常、WLANカードの設定時には、事前設定された設定値を変更する必要はありません。ただし、WLAN接続の詳細な環境設定が必要な場合は、YaSTでは、次の設定を微調整できます。
   </para>
   <variablelist>
    <varlistentry>
     <term>チャネル</term>
     <listitem>
      <para>
       WLAN局が使用するチャネルの仕様。これは、<guimenu>アドホック</guimenu>モードと<guimenu>マスタ</guimenu>モードにいる場合のみ必要です。<guimenu>管理</guimenu>モードでは、カードはアクセスポイントに使用可能なチャネルを自動的に検索します。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>転送ビットレート</term>
     <listitem>
      <para>
       ネットワークのパフォーマンスに応じて、あるポイントから別のポイントへの伝送について特定のビットレートを設定できます。デフォルト設定の<guimenu>自動</guimenu>では、システムは最大許容データ伝送速度を使用しようとします。ビットレートの設定をサポートしていないWLANカードもあります。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>アクセスポイント</term>
     <listitem>
      <para>
       複数のアクセスポイントがある環境では、MACアドレスを指定することで、その1つを事前に選択できます。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>電源管理</term>
     <listitem>
      <para>
       旅行中は、電力節減技術でバッテリの動作時間を最大限にすることができます。<phrase os="sles;sled">電源管理に関する詳細については<xref linkend="cha-pmanage"/>を参照してください。</phrase>電源管理を使用すると、接続品質に影響したり、ネットワーク待ち時間が増大する場合があります。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <procedure>
    <para>
     高度なオプションにアクセスするには:
    </para>
    <step>
     <para>
      YaSTを起動し、<guimenu>ネットワーク設定</guimenu>ダイアログを開きます。
     </para>
    </step>
    <step>
     <para>
      <guimenu>概要</guimenu>タブに切り替え、リストから無線カードを選択し、<guimenu>編集</guimenu>をクリックして<guimenu>ネットワークカードの設定</guimenu>ダイアログを開きます。
     </para>
    </step>
    <step>
     <para>
      <guimenu>次へ</guimenu>をクリックして、<guimenu>無線ネットワークカードの環境設定</guimenu>ダイアログに進みます。
     </para>
    </step>
    <step>
     <para>
      <guimenu>エキスパート設定</guimenu>をクリックします。
     </para>
    </step>
    <step>
     <para>
      <guimenu>アドホック</guimenu>モードでは、自局と他局との通信用に提供されているチャンネル(国によって11から14局)から1つを選択します。<guimenu>マスタ</guimenu>モードで、カードがどの<guimenu>チャネル</guimenu>でアクセスポイントの機能を提供するか決定します。このオプションのデフォルト設定は<guimenu>自動</guimenu>です。
     </para>
    </step>
    <step>
     <para>
      使用する<guimenu>ビットレート</guimenu>を選択します。
     </para>
    </step>
    <step>
     <para>
      接続したい<guimenu>アクセスポイント</guimenu>のMACアドレスを入力します。
     </para>
    </step>
    <step>
     <para>
      <guimenu>電源管理を使用する</guimenu>かどうか選択します。
     </para>
    </step>
    <step>
     <para>
      <guimenu>OK</guimenu>で変更を確認し、<guimenu>次へ</guimenu>と<guimenu>OK</guimenu>をクリックして設定を完了します。
     </para>
    </step>
   </procedure>
  </section>
 </section>
 <section xml:id="sec-wireless-wlan-tant">
  <title>WLANのセットアップに関するヒントとテクニック</title>

  <para>
   次のツールとヒントを使用すると、WLANの速度と安定性だけでなく、セキュリティの側面についても監視と改善が容易になります。
  </para>

  <section xml:id="sec-wireless-wlan-tant-tools">
   <title>ユーティリティ</title>

   <para>
    パッケージ<systemitem class="resource">wireless-tools</systemitem>には、無線LAN固有のパラメータの設定と統計の取得を可能にするユーティリティが含まれています。詳細については、<link xlink:href="http://www.hpl.hp.com/personal/Jean_Tourrilhes/Linux/Tools.html"/>を参照してください。
   </para>
   
  </section>

  <section xml:id="sec-wireless-wlan-tant-stab">
   <title>安定性と速度</title>
   <para>
    無線ネットワークのパフォーマンスと信頼性は、主として参加局が他局からクリーンな信号を受信するかどうかに依存します。壁などの障害物があると、信号が大幅に弱くなります。信号強度が低下するほど、伝送速度も低下します。操作中に、コマンドライン(<literal>Link Quality</literal>フィールド)で、<command>iwconfig</command>ユーティリティを指定するか、またはKDEまたはGNOMEで提供されるNetworkManagerアプレットを使用して、信号強度をチェックします。信号品質に問題がある場合は、他の場所でデバイスをセットアップするか、またはアクセスポイントのアンテナ位置を調整してください。多くのPCMCIA WLANカードの場合、受信品質を実質的に向上させる補助アンテナを利用できます。メーカ指定のレート(54MBit/sなど)は、理論上の上限を表す公称値です。実際の最大データスループットは、この値の半分以下です。
   </para>
   <para>
    <command>iwspy</command>コマンドを使用すると、WLANの統計情報を表示できます。
   </para>
<screen>iwspy wlan0
wlan0      Statistics collected:
    00:AA:BB:CC:DD:EE : Quality:0  Signal level:0  Noise level:0
    Link/Cell/AP      : Quality:60/94  Signal level:-50 dBm   Noise level:-140 dBm (updated)
    Typical/Reference : Quality:26/94  Signal level:-60 dBm   Noise level:-90 dBm</screen>
  </section>

  <section xml:id="sec-wireless-wlan-tant-sec">
   <title>セキュリティ</title>
   <para>
    無線ネットワークをセットアップする際には、セキュリティ対策を導入しなければ、伝送範囲内の誰もが簡単にアクセスできることを忘れないでください。したがって、必ず暗号化方式をアクティブにする必要があります。すべてのWLANカードとアクセスポイントが、WEP暗号化をサポートしています。これでも完全に安全とは言えませんが、潜在的な攻撃者に対する障害物は存在することになります。
   </para>
   <para>
    個人使用には、利用できる場合はWPA-PSKを使用します。Linuxは大半のハードウェアコンポーネントでWPAをサポートしますが、WPAに対応しないドライバもあります。WPAは、WLAN機能をもつ古いアクセスポイントやルータで使用できない場合もあります。そのようデバイスでは、ファームウェアの更新によってWPAを実装できるかどうかチェックしてください。WPAが使用できない場合、暗号化しないよりはWEPを使用することをお勧めします。高度なセキュリティ要件を持つ企業では、無線ネットワークの運用にWPAを使用する必要があります。
   </para>
   <para>
    認証方法に強力なパスワードを使用します。たとえば、Webページ<link xlink:href="https://www.grc.com/passwords.htm"/>では、ランダムな64文字のパスワードが生成されます。
   </para>
  </section>
 </section>
 <section xml:id="sec-wireless-wlan-probs">
  <title>トラブルシューティング</title>

  

  <para>
   WLANカードの応答がない場合は、次の前提条件をチェックします。
  </para>

  <orderedlist spacing="normal">
   <listitem>
    <para>
     WLANカードのデバイス名を知っていますか?通常、デバイス名は<systemitem>wlan0</systemitem>です。ツール<command>ifconfig</command>でチェックします。
    </para>
   </listitem>
   <listitem>
    <para>
     必要なファームウェアをチェックしましたか?詳細については、<filename>/usr/share/doc/packages/wireless-tools/README.firmware</filename>を参照してください。
    </para>
   </listitem>
   <listitem>
    <para>
     ルータのESSIDはブロードキャストされ、表示されますか(非表示ではありませんか)?
    </para>
   </listitem>
  </orderedlist>

  <section xml:id="sec-wireless-wlan-probs-iwconfi">
   <title>ネットワークステータスをチェックする</title>
   <para>
    コマンド<command>iwconfig</command>で、無線接続に関する重要な情報が得られます。たとえば、次の行にはESSID、無線モード、周波数、信号が暗号化されているかどうか、リンク品質などの情報が表示されます
   </para>
<screen><command>iwconfig</command> wlan0
wlan0  IEEE 802.11abg  ESSID:"guest"
       Mode:Managed   Frequency:5.22GHz  Access Point: 00:11:22:33:44:55
       Bit Rate:54 Mb/s   Tx-Power=13 dBm
       Retry min limit:7   RTS thr:off   Fragment thr:off
       Encryption key:off
       Power Management:off
       Link Quality:62/92   Signal level:-48 dBm  Noise level:-127 dBm
       Rx invalid nwid:0  Rx invalid crypt:0  Rx invalid frag:0
       Tx excessive retries:10  Invalid misc:0   Missed beacon:0</screen>
   <para>
    また、<command>iwlist</command>コマンドで前回の情報を取得できます。たとえば、次の行には現在のビットレートが表示されます。
   </para>
<screen><command>iwlist</command> wlan0 rate
wlan0    unknown bit-rate information.
         Current Bit Rate=54 Mb/s</screen>
   <para>
    使用可能なアクセスポイント数の概要が必要な場合についても、<command>iwlist</command>コマンドを使用できます。これにより、次のような<quote>セル</quote>のリストが表示されます。
   </para>
<screen><command>iwlist</command> wlan0 scanning
wlan0   Scan completed:
   Cell 01 - Address: 00:11:22:33:44:55
             Channel:40
             Frequency:5.2 GHz (Channel 40)
             Quality=67/70  Signal level=-43 dBm
             Encryption key: off
             ESSID:"Guest"
             Bit Rates: 6 Mb/s; 9 Mb/s; 12 Mb/s; 18 Mb/s;
                        24 Mb/s; 36 Mb/s; 48 Mb/s
             Mode: Master
             Extra:tsf=0000111122223333
             Extra: Last beacon: 179ms ago
             IE: Unknown: ...</screen>
  </section>

  <section xml:id="sec-wireless-wlan-probs-multi">
   <title>複数のネットワークデバイス</title>
   <para>
    通常、最近のラップトップにはネットワークカードとWLANカードが搭載されています。DHCP (自動アドレス割り当て)を使用して両方のデバイスを構成すると、名前解決とデフォルトゲートウェイに問題が発生することがあります。これは、ルータはpingできるがインターネット上でナビゲーションできないことを示しています。詳細については、<link xlink:href="http://old-en.opensuse.org/SDB:Name_Resolution_Does_Not_Work_with_Several_Concurrent_DHCP_Clients"/>にあるSupport Databas (サポートデータベース)を参照してください。
   </para>
  </section>

  <section xml:id="sec-wireless-wlan-probs-prism">
   <title>Prism2カードの問題</title>
   <para>
    Prism2<phrase role="productname">チップ搭載のデバイスには、複数のドライバが用意されています。</phrase>各種カードがスムーズに動作するかどうかは、ドライバに応じて異なります。この種のカードの場合、WPAに使用できるのはhostapドライバだけです。この種のカードが正常に動作しない場合、まったく動作しない場合、またはWPAを使用する必要がある場合は、<filename>/usr/share/doc/packages/wireless-tools/README.prism2</filename>を参照してください。
   </para>
  </section>
 </section>
 <section xml:id="sec-wireless-wlan-info">
  <title>詳細情報</title>

  <para>
   詳細については、次のページを参照してください。
  </para>

  <variablelist>
   <varlistentry>
    <term><link xlink:href="http://www.hpl.hp.com/personal/Jean_Tourrilhes/Linux/Wireless.html"/>
    </term>
    <listitem>
     <para>
      Linux用の<emphasis>無線ツール</emphasis>を開発したJean Tourrilhesのインターネットページには、無線ネットワークに関して役立つ情報が多数提供されています。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><link xlink:href="http://tuxmobil.org"/>
    </term>
    <listitem>
     <para>
      Linuxを使用するモバイルコンピュータの有用な実践情報
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><link xlink:href="http://www.linux-on-laptops.com"/>
    </term>
    <listitem>
     <para>
      ラップトップ上のLinuxの詳細情報
     </para>
    </listitem>
   </varlistentry>
   
   
  </variablelist>
 </section>
</chapter>
