<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sect1 PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN"
"novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<sect1 xml:base="zypper.xml" id="sec-zypper">
 <title>Zypperの使用</title><indexterm id="idx-zypper" class="startofrange"> <primary>zypper</primary> </indexterm> <indexterm> <primary>コマンド</primary> <secondary>zypper</secondary> </indexterm> <indexterm> <primary>ソフトウェア</primary> <secondary>管理</secondary> <tertiary>コマンドライン</tertiary> </indexterm>

 <para>
  
  
  Zypperは、パッケージのインストール、更新、削除、およびリポジトリの管理を行うためのコマンドラインパッケージマネージャです。<phrase os="sles;sled">zypperの構文はrugに類似しています。rugとは対照的に、zypperではzmdデーモンが背後で実行している必要はありません。rugの互換性の詳細は、<command>man zypper</command>、<quote>COMPATIBILITY WITH RUG</quote>の項を参照してください。</phrase> これは特に、リモートソフトウェア管理タスクの実行、またはシェルスクリプトからのソフトウェアの管理で役立ちます。
 </para>

 <sect2 id="sec-zypper-usage">
  <title>一般的な使用方法</title>
  <para>
   Zypperの一般的な構文は次のとおりです。
  </para>
<screen>zypper <option>[global-options]</option><replaceable>command</replaceable><option>[command-options]</option><option>[arguments]</option> ...</screen>
  <para>
   ブラケットで囲まれたコンポーネントは必須ではありません。Zypperを実行する最も簡単な方法は、その名前の後にコマンドを入力することです。たとえば、システムに必要なすべてのパッチを適用するには、次のコマンドを入力します。
  </para>
<screen>zypper patch</screen>
  <para>
   さらに、グローバルオプションをコマンドの直前に入力することによって、1つ以上のグローバルオプションから選択することができます。たとえば<option>--non-interactive</option>では、何も入力を求められることなく、コマンドを実行できます(自動的にデフォルトの解答が適用されます)。
  </para>
<screen>zypper --non-interactive patch</screen>
  <para>
   特定のコマンドに固有のオプションを使用する場合は、コマンドの直後にそのオプションを入力します。たとえば、<option>--auto-agree-with-licenses</option>は、ライセンスの確認を求めることなく、システムで必要なすべてのパッチを適用します(自動的に受け入れられます)。
  </para>
<screen>zypper patch --auto-agree-with-licenses</screen>
  <para>
   一部のコマンドでは、1つ以上の引数が必要です。たとえば、インストールコマンドを使用する場合、インストールするパッケージを指定する必要があります。
  </para>
<screen>zypper install mplayer</screen>
  <para>
   また一部のオプションでは、引数が必要です。次のコマンドでは、すべての既知のパターンが表示されます。
  </para>
<screen>zypper search -t pattern</screen>
  <para>
   上記のすべてを結合できます。たとえば、次のコマンドは、冗長モードで、<literal>factory</literal>リポジトリから<systemitem>mplayer</systemitem>と <systemitem>amarok</systemitem>パッケージをインストールします。
  </para>
<screen>zypper -v install --from factory mplayer amarok</screen>
  <para>
   <option>--from</option>オプションは、指定されたリポジトリからパッケージを要求する際に、すべてのリポジトリを(依存関係の解決のため)有効に保ちます。
  </para>
  <para>
   ほとんどのZypperコマンドには、指定のコマンドのシミュレーションを行う<literal>dry-run</literal>オプションがあります。このオプションは、テストの目的で使用できます。
  </para>
<screen>zypper remove --dry-run MozillaFirefox</screen>
  <para>
   zypperは、トランザクションを識別する目的で、グローバルオプション<option>--userdata <replaceable>string</replaceable></option>をサポートします。ユーザ定義文字列が、<filename>/var/log/zypp/history</filename>のZypper履歴ログおよびSnapperに渡されます。
  </para>
<screen>zypper --userdata <replaceable>string</replaceable> patch</screen>
 </sect2>

 <sect2 id="sec-zypper-softman">
  <title>Zypperを使ったソフトウェアのインストールと削除</title>
  <para>
   パッケージをインストールまたは削除するには、次のコマンドを使用します。
  </para>
<screen>zypper install <replaceable>package_name</replaceable>
zypper remove <replaceable>package_name</replaceable></screen>
  <para>
   Zypperでは、インストールコマンドおよび削除コマンドでパッケージを指定するために、次のようなさまざまな方法が可能です。
  </para>
  <variablelist>
   <varlistentry>
    <term>正確なパッケージ名(およびバージョン番号)を指定する方法</term>
    <listitem>
<screen>zypper install MozillaFirefox</screen>
     <para>
      または
     </para>
<screen>zypper install MozillaFirefox-3.5.3</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>リポジトリエイリアスおよびパッケージ名を指定する方法</term>
    <listitem>
<screen>zypper install mozilla:MozillaFirefox</screen>
     <para>
      ここで<literal>mozilla</literal>は、インストールするリポジトリのエイリアスです。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>ワイルドカードを使用してパッケージ名を指定する方法</term>
    <listitem>
     <para>
      次のコマンドでは、名前の先頭に<quote>Moz</quote>が付くすべてのパッケージがインストールされます。特にパッケージを削除する場合には、慎重に行うことが必要です。
     </para>
<screen>zypper install 'Moz*'</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>機能によって指定する方法</term>
    <listitem>
     <para>
      たとえば、パッケージ名を知らずにperlモジュールをインストールする場合は、機能による指定が有用です。
     </para>
<screen>zypper install 'perl(Time::ParseDate)'</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>機能、アーキテクチャ、および(または)バージョンを指定します</term>
    <listitem>
     <para>
      機能とともに、アーキテクチャ(<literal>i586</literal>または<literal>x86_64</literal>など)、および(または)バージョンを指定できます。バージョンの前には、演算子として、<literal>&lt;</literal>(未満)、<literal>&lt;=</literal>(以下)、<literal>=</literal>(等しい)、<literal>=&gt;</literal>(以上)、または<literal>&gt;</literal>(より大きい)を付ける必要があります:
     </para>
<screen>zypper install 'firefox.x86_64'
zypper install 'firefox&gt;=3.5.3'
zypper install 'firefox.x86_64&gt;=3.5.3'</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>RPMファイルのパスで指定する方法</term>
    <listitem>
     <para>
      また、パッケージに対するローカルパスまたはリモートパスを指定できます。
     </para>
<screen>zypper install /tmp/install/MozillaFirefox.rpm
zypper install http://download.opensuse.org/repositories/mozilla/SUSE_Factory/x86_64/MozillaFirefox-3.5.3-1.3.x86_64.rpm</screen>
    </listitem>
   </varlistentry>
  </variablelist>
  <para>
   パッケージのインストールおよび削除を同時に行うには、<literal>+/-</literal>修飾子を使用します。<systemitem>emacs</systemitem>のインストールと<systemitem>vim</systemitem>の削除を同時に行うには、次のコマンドを使用します。
  </para>
<screen>zypper install emacs -vim
</screen>
  <para>
   <systemitem>emacs</systemitem>の削除と<systemitem>vim</systemitem>のインストールを同時に行うには、次のコマンドを使用します。
  </para>
<screen>zypper remove emacs +vim
</screen>
  <para>
   名前の先頭に<literal>-</literal>が付くパッケージ名がコマンドオプションとして解釈されないようにするには、常に第2引数としてその名前を使用します。これが可能でない場合は、名前の前に<literal>--</literal>を付けます。
  </para>
<screen>zypper install -emacs +vim       # Wrong
zypper install vim -emacs        # Correct
zypper install -- -emacs +vim    # same as above
zypper remove emacs +vim         # same as above</screen>
  <para>
   指定したパッケージの削除後に、(その特定のパッケージとともに)不要になったパッケージを自動的に削除したい場合は、<option>--clean-deps</option>オプションを使用します。
  </para>
<screen>rm <replaceable>package_name</replaceable> --clean-deps</screen>
  <para>
   Zypperではデフォルトで、選択したパッケージのインストールまたは削除の前に、あるいは問題が発生した際には、確認が求められます。この動作は、<option>--non-interactive</option>オプションを使用することで上書きされます。このオプションは、次のように、実際のコマンド(<command>install</command>、<command>remove</command>、<command>patch</command>)の前に指定する必要があります。
  </para>
<screen>zypper <option>--non-interactive</option> install <replaceable>package_name</replaceable></screen>
  <para>
   このオプションは、スクリプトおよびcronジョブでZypperを使用できます。
  </para>

  <warning>
   <title>必須システムパッケージは削除しないでください。</title>
   <para>
    <systemitem>glibc</systemitem>、<systemitem>zypper</systemitem>、<systemitem>kernel</systemitem>などのパッケージは削除しないでください。これらのパッケージはシステムで必須であり、削除するとシステムが不安定になったり、すべての動作が停止したりする場合があります。
   </para>
  </warning>
  <sect3 id="sec-zypper-softman-sources">
   <title>ソースパッケージのインストールまたはダウンロード</title>
   <para>
    <indexterm> <primary>software</primary> <secondary>installing</secondary> <tertiary>source package</tertiary> </indexterm>パッケージの対応するソースパッケージをインストールする場合は、次を使用します。
   </para>
<screen>zypper source-install <replaceable>package_name</replaceable></screen>
   <para>
    このコマンドにより、指定したパッケージの構築依存もインストールされます。この処理が必要でない場合は、次のようにスイッチ<literal>-D</literal>を追加します。ビルドの依存関係のみをインストールするには、<literal>-d</literal>を使用します。
   </para>
<screen>zypper source-install -D <replaceable>package_name</replaceable> # source package only
zypper source-install -d <replaceable>package_name</replaceable> # build dependencies only</screen>
   <para>
    もちろん、リポジトリリストで有効にしたソースパッケージを含むリポジトリが存在する場合にのみ動作します(ソースパッケージはデフォルトで追加されますが、有効にはなりません)。リポジトリの管理の詳細については、<xref linkend="sec-zypper-instrepo"/>を参照してください。
   </para>
   <para>
    リポジトリで使用可能なすべてのソースパッケージのリストは、次のコマンドで参照できます。
   </para>
<screen>zypper search -t srcpackage</screen>
   <para>
    また、すべてのインストール済みパッケージのソースパッケージをローカルディレクトリにダウンロードすることもできます。ソースパッケージをダウンロードするには、以下を使用します。
   </para>
<screen>zypper source-download</screen>
   <para>
    デフォルトのダウンロードディレクトリは<filename>/var/cache/zypper/source-download</filename>です。これは、<option>--directory</option>オプションを使って変更できます。ダウンロードや削除を行わず、不足パッケージや不要パッケージの表示のみを行う場合は、<option>--status</option>オプションを使用します。不要なソースパッケージを削除するには、<option>--delete</option>オプションを使用します。削除を無効にするには、<option>--no-delete</option>オプションを使用します。
   </para>
  </sect3>
  <sect3 id="sec-zypper-softman-util">
   <title>ユーティリティ</title>
   <para>
    すべての依存関係が依然として満たされていることを確認し、欠如する依存関係を修復するには、次のコマンドを使用します。
   </para>
<screen>zypper verify</screen>
   <para>
    必要とされる依存関係に加えて、一部のパッケージでは他のパッケージが<quote>推奨されます</quote>。これらの推奨対象パッケージは、実際に使用可能でインストール可能な場合のみインストールされます。推奨側のパッケージがインストールされた後で、(パッケージまたはハードウェアの追加により)推奨対象パッケージが使用可能になった場合は、次のコマンドを使用します。
   </para>
<screen>zypper install-new-recommends</screen>
   <para>
    このコマンドは、WebcamまたはWLANデバイスにプラグインした後で非常に役に立ちます。このコマンドは、デバイスのドライバと関連ソフトウェアが利用できる場合には、それらをインストールします。ドライバと関連ソフトウェアは、一定のハードウェア依存関係が満たされている場合のみインストールできます。
   </para>
  </sect3>
 </sect2>

 <sect2 id="sec-zypper-softup">
  <title>Zypperによるソフトウェアの更新</title>
  <para>
   Zypperを使用してソフトウェアを更新するには3つの方法があります。パッチをインストールする、パッケージの新しいバージョンをインストールする、または配布全体を更新する方法です。最後の方法は、<xref linkend="sec-update-zypper"/>で説明されている<command>zypper dist-upgrade</command>コマンドで行うことができます。
  </para>
  <sect3 id="sec-zypper-softup-patch">
   <title>パッチのインストール</title>
   <para>
    正式にリリースされたすべてのパッチをインストールしてシステムに適用するには、次のコマンドを実行するだけです。
   </para>
<screen>zypper patch</screen>
   <para>
    この場合、リポジトリで利用可能なすべてのパッチが関連性についてチェックされ、必要に応じてインストールされます。<phrase os="sles;sled"><phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>を登録すると、このようなパッチを含む公式なアップデートリポジトリがシステムに追加されます。</phrase>上記のコマンドを入力すれば、いつでも必要なときにこれらを適用できます。
   </para>
   <para>
    Zypperでは、パッチの可用性について問い合わせるための3つの異なるコマンドが認識されます。
   </para>
   <variablelist>
    <varlistentry>
     <term><command>zypper patch-check</command>
     </term>
     <listitem>
      <para>
       必要なパッチの数を示します(システムに適用されていてもまだインストールされていないパッチ)。
      </para>
<screen>~ # zypper patch-check
Loading repository data...
Reading installed packages...
5 patches needed (1 security patch)</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>zypper list-patches</command>
     </term>
     <listitem>
      <para>
       必要なすべてのパッチを示します(システムに適用されていてもまだインストールされていないパッチ)。
      </para>
<screen><?dbsuse-fo font-size="0.70em"?>

~ # zypper list-patches
Loading repository data...
Reading installed packages...
 
Repository                          | Name      | Version | Category | Status
------------------------------------+-----------+---------+----------+-------
Updates for openSUSE 11.3 11.3-1.82 | lxsession | 2776    | security | needed
</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>zypper patches</command>
     </term>
     <listitem>
      <para>
       インストール済みかどうかや、インストール環境に適用済みかどうかに関係なく、<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>で使用可能なすべてのパッチを表示します。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    また、特定の問題に関連するパッチを表示およびインストールすることもできます。特定のパッチを表示するには、次のオプションで<command>zypper list-patches</command>コマンドを使用します。
   </para>
   <variablelist>
    <varlistentry>
     <term><option>--bugzilla[=<replaceable>number</replaceable>] </option>
     </term>
     <listitem>
      <para>
       Bugzilla発信番号で必要なすべてのパッチを表示します。オプションとして、この特定のバグのパッチを一覧するだけの場合は、バグ番号を指定できます。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><option>--cve[=<replaceable>番号</replaceable>]</option>
     </term>
     <listitem>
      <para>
       CVE (Common Vulnerabilities and Exposures)問題に関して必要なすべてのパッチ、または特定のCVE番号に一致するパッチだけ(番号を指定した場合)を一覧します。デフォルトでは、未適用のパッチのみがリストされます。すべてのパッチをリストするには、<option>-a</option>を使用します。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    特定のBugzillaまたはCVEの問題に対するパッチをインストールするには、次のコマンドを使用します。
   </para>
<screen>zypper patch --bugzilla=<replaceable>number</replaceable></screen>
   <para>
    または
   </para>
<screen>zypper patch --cve=<replaceable>number</replaceable></screen>
   <para>
    たとえば、CVE番号が<literal>CVE-2010-2713</literal>のセキュリティパッチをインストールするには、次のコマンドを実行します。
   </para>
<screen>zypper patch --cve=CVE-2010-2713</screen>
  </sect3>
  <sect3 id="sec-zypper-softup-update">
   <title>更新のインストール</title>
   <para>
    リポジトリに新しいパッケージのみが存在し、パッチが提供されていない場合は、<command>zypper patch</command>は無効です。インストールされているパッケージをすべて新しく入手可能なバージョンで更新するには、次を使用します。
   </para>
<screen>zypper update</screen>
   <para>
    個別のパッケージをアップデートするには、updateコマンドまたはinstallコマンドのいずれかでパッケージを指定します。
   </para>
<screen>zypper update <replaceable>package_name</replaceable>
zypper install <replaceable>package_name</replaceable></screen>
   <para>
    インストール可能なすべての新しいパッケージのリストを、次のコマンドで取得できます。
   </para>
<screen>zypper list-updates</screen>
   <para>
    ただし、このコマンドは、次の基準と一致するパッケージのみ一覧します。
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      すでにインストール済みのパッケージと同じベンダである
     </para>
    </listitem>
    <listitem>
     <para>
      すでにインストール済みのパッケージと同等以上の優先度をもつリポジトリによって提供される
     </para>
    </listitem>
    <listitem>
     <para>
      インストール可能である(すべての依存関係が満たされている)
     </para>
    </listitem>
   </itemizedlist>
   <para>
    次のコマンドを使用すると、(インストール可能かどうかに関わらず)<emphasis>すべての</emphasis>新しい使用可能なパッケージのリストを取得できます。
   </para>
<screen>zypper list-updates --all</screen>
   <para>
    新しいパッケージをインストールできない理由を見つけるには、上記で説明されているように、<command>zypper install</command>コマンドまたは<command>zypper update</command>コマンドを使用します。
   </para>
  </sect3>
  <sect3 id="sec-zypper-softup-upgrade">
   <title>新しい製品バージョンへのアップグレード</title>
   <para>
    インストールを新しい製品バージョンに簡単にアップグレードするには<phrase os="sles;sled">(たとえば、SUSE Linux Enterprise Server 11からSUSE Linux Enterprise Server 11 SP1へのアップグレード)</phrase>、まず、現在の<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>リポジトリに一致するようにリポジトリを調整します。詳細については、<xref linkend="sec-zypper-instrepo"/>を参照してください。次に、必要なリポジトリに関して<command>zypper dist-upgrade</command>コマンドを使用します。このコマンドにより、現在有効なリポジトリからすべてのパッケージがインストールされます。詳細の説明については、<xref linkend="sec-update-zypper"/>を参照してください。
   </para>
   <para>
    ディストリビューションアップグレードを特定のリポジトリのパッケージに制限しながら、他のリポジトリも考慮に入れて依存関係を満たすには、<option>--from</option>オプションを使用して、リポジトリをその別名、番号、またはURIで指定します。
   </para>
   <note>
    <title><command>zypper update</command>と<command>zypper dist-upgrade</command>の相違</title>
    <para>
     システムの整合性を維持しながら製品のバージョンで使用可能な新しいバージョンにパッケージを更新する場合は、<command>zypper update</command>を選択します。<command>zypper update</command>は、次のルールに従います。
    </para>
    <simplelist>
     <member>ベンダは変更されません</member> <member>アーキテクチャは変更されません</member> <member>ダウングレードされません</member> <member>インストール済みパッケージが保持されます</member>
    </simplelist>
    <para>
     <command>zypper dist-upgrade</command>を実行すると、すべてのパッケージが現在有効なリポジトリからインストールされます。このルールを適用した場合、パッケージによりベンダまたはアーキテクチャが変更されるか、ダウングレードされる場合もあります。アップグレード後に依存関係が満たされていないすべてのパッケージはアンインストールされます。
    </para>
   </note>
  </sect3>
 </sect2>

 <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="zypper_upgrade.xml" parse="xml"/>

 <sect2 id="sec-zypper-instrepo">
  <title>zypperによるリポジトリの管理</title>
   
  <para>
   Zypperのすべてのインストールまたはパッチのコマンドは、既知のリポジトリのリストに応じて異なります。システムで既知のすべてのリポジトリのリストを表示するには、次のコマンドを使用します。
  </para>
<screen>zypper repos</screen>
  <para>
   結果は、次の出力のようになります。
  </para>
  <example id="ex-zypper-repos">
   <title>Zypper—既知のリポジトリのリスト</title>
<screen os="sles;sled"><?dbsuse-fo font-size="0.80em"
?>


# | Alias                             | Name                              | Enabled | Refresh
--+-----------------------------------+-----------------------------------+---------+--------
1 | SUSE-Linux-Enterprise-Server 11-0 | SUSE-Linux-Enterprise-Server 11-0 | Yes     | No
2 | SLES-11-Updates                   | SLES 11 Online Updates            | Yes     | Yes
3 | broadcomdrv                       | Broadcom Drivers                  | Yes     | No      </screen>

  </example>
  <para>
   各種コマンドのリポジトリを指定するには、エイリアス、URI、またはリポジトリ番号を<command>zypper repos</command>コマンド出力から使用できます。リポジトリの別名は、リポジトリ操作コマンド用の短いリポジトリ名です。ただし、リポジトリリストの変更後に、リポジトリ番号が変わる可能性があります。エイリアスは変更されることはありません。
  </para>
  <para>
   デフォルトでは、URIやリポジトリの優先度など、詳細情報は表示されません。すべての詳細を表示するには、次のコマンドを使用します。
  </para>
<screen>zypper repos -d</screen>
  <para>
   ときには、リストに含まれる多数のリポジトリが有効化されていないため、混乱を招くことがあります。有効化されたリポジトリのみを表示するには、次のコマンドを使用します。
  </para>
<screen>zypper repos -E</screen>
  <sect3 id="sec-zypper-instrepo-add">
   <title>リポジトリの追加</title>
    <warning>
     <title>Zypperを使用してリポジトリを追加すると、システム障害が発生する可能性があります。</title>
     <para>デフォルトでは、SUSEによって提供されるリポジトリにあるパッケージのダイジェストと署名に対し、整合性と発行元のチェックが行われます。この<quote>GPGチェック</quote>は、リポジトリを提供するサーバ上のリポジトリ設定ファイルで有効化されます。 </para>
     <para><command>zypper ar</command>コマンドでリポジトリを追加すると、この設定ファイルは<filename>/etc/zypp/repos.d</filename>にダウンロードされます。Zypperは、GPGチェックのオプションについても通知します。</para>
     <screen>GPG check: Yes</screen>
     <para>GPGチェックの出力は、常に<quote>Yes</quote>に設定してください。<quote>No</quote>に設定すると、システムで障害が発生する可能性があります。たとえば、以前に修正した脆弱性を再度発生させるパッケージのダウングレードが実行されます。このオプションが<quote>No</quote>に設定されている場合、レポジトリを信頼しないことをお勧めします。GPGチェックを誤って無効にしたことが確かな場合は、<filename>/etc/zypp/repos.d</filename>にあるそれぞれのリポジトリ設定ファイルに次の行を追加して、オプションを再度有効にしてください。</para>
     <screen>gpgcheck=1</screen>
   </warning>    
   <para>
    リポジトリを追加するには、次を実行します。
   </para>
<screen>zypper addrepo <replaceable>URI</replaceable><replaceable>alias</replaceable></screen>
   <para>
    <replaceable>URI</replaceable>は、インターネットリポジトリ、ネットワークリソース、ディレクトリ、CDまたはDVDのいずれかです(詳細については、<ulink url="http://en.opensuse.org/openSUSE:Libzypp_URIs"/>を参照してください)。<replaceable>別名</replaceable>は、リポジトリの短い固有のIDです。このIDは、固有であること以外は自由に選択できます。すでに使用されているエイリアスを指定した場合、Zypperでは警告が発行されます。
   </para>
  </sect3>
  <sect3 id="sec-zypper-instrepo-rm">
   <title>リポジトリの削除</title>
   <para>
    リストからリポジトリを削除する場合は、コマンド<command>zypper removerepo</command>を使用し、削除するリポジトリのエイリアスまたは番号を指定します。たとえば<xref linkend="ex-zypper-repos"/>の3番目のエントリとして表示されているリポジトリを削除するには、次のコマンドを使用します。
   </para>
<screen>zypper removerepo 3</screen>
  </sect3>
  <sect3 id="sec-zypper-instrepo-mofify">
   <title>リポジトリの変更</title>
   <para>
    <command>zypper modifyrepo</command>によりリポジトリを有効または無効にします。また、このコマンドにより、リポジトリのプロパティ(動作、名前、優先度の更新など)を変更できます。次のコマンドは、<literal>updates</literal>という名前のリポジトリを有効にし、自動更新をオンにし、リポジトリの優先度を 20に設定します。
   </para>
<screen>zypper modifyrepo -er -p 20 'updates'</screen>
   <para>
    リポジトリを変更する場合、1つのリポジトリだけなく、リポジトリのグループも操作できます。
   </para>
   <simplelist>
    <member><option>-a</option>: すべてのリポジトリ</member> <member><option>-l</option>: ローカルリポジトリ</member> <member><option>-t</option>: リモートリポジトリ</member> <member><option>-m <replaceable>タイプ</replaceable></option>:特定のタイプのリポジトリ(ここで、<replaceable>タイプ</replaceable>には、次のいずれかを指定できます:  <literal>http</literal>、<literal>https</literal>、<literal>ftp</literal>、<literal>cd</literal>、<literal>dvd</literal>、<literal>dir</literal>、<literal>file</literal>、<literal>cifs</literal>、<literal>smb</literal>、<literal>nfs</literal>、<literal>hd</literal>、<literal>iso</literal>)。 </member>
   </simplelist>
   <para>
    リポジトリエイリアスの名前を変更するには、<literal>renamerepo</literal>コマンドを使用します。次の例では、エイリアスを<literal>Mozilla Firefox</literal>から単なる<literal>firefox</literal>に変更しています。
   </para>
<screen>zypper renamerepo 'Mozilla Firefox' firefox</screen>
  </sect3>
 </sect2>

 <sect2 id="sec-zypper-query">
  <title>Zypperによるリポジトリおよびパッケージのクエリ</title>
  <para>
   Zypperでは、リポジトリまたはパッケージをクエリするためのさまざまな方法が提供されています。使用可能なすべての製品、パターン、パッケージ、またはパッチのリストを取得するには、次のコマンドを使用します。
  </para>
<screen>zypper products
zypper patterns
zypper packages
zypper patches</screen>
  <para>
   特定のパッケージについてすべてのリポジトリをクエリするには、<literal>search</literal>を使用します。searchは、パッケージの名前、またはパッケージの概要と説明(オプション)に関して機能します。検索用語では、ワイルドカード<literal>*</literal>と<literal>?</literal>を使用できます。デフォルトでは、検索で大文字と小文字が区別されません。
  </para>
<screen>zypper search firefox       # simple search for "firefox"
zypper search "*fire*"      # using wild cards
zypper search -d fire       # also search in package descriptions and summaries
zypper search -u firefox    # only display packages not already installed</screen>
  <para>
   特定の機能を提供するパッケージを検索するには、コマンド<literal>what-provides</literal>を使用します。たとえば、どのパッケージがperlモジュール<literal>SVN::Core</literal>を提供するか確認したい場合は、次のコマンドを使用します。
  </para>
<screen>zypper what-provides 'perl(SVN::Core)'</screen>
  <para>
   単一のパッケージをクエリするには、<command>info</command>を使用し、引数として正確なパッケージ名を指定します。パッケージに関する詳細情報を表示します。パッケージの要求や推奨も表示するには、<option>--requires</option>オプションや<option>--recommends</option>オプションを使用します。
  </para>
<screen>zypper info --requires MozillaFirefox</screen>
  <para>
   <literal>what-provides<replaceable>パッケージ</replaceable></literal>は<command>rpm -q --whatprovides<replaceable>パッケージ</replaceable></command>に似ていますが、RPMではRPMデータベース(つまり、すべてのインストール済みパッケージのデータベース)のみを問い合わせることができます。それに対してZypperは、インストール済みのパッケージだけでなく、すべてのリポジトリから機能のプロバイダに関する情報を表示します。
  </para><indexterm class="endofrange" startref="idx-zypper"/>
 </sect2>

 <sect2 id="sec-zypper-configure">
  <title>Zypperの設定</title>
  <para>
   Zypperには、現在、設定ファイルが付属しています。この設定ファイルを使用すれば、Zypperの動作を(システム全体またはユーザ固有のでどちらかで)永続的に変更できます。システム全体に渡って変更する場合は、<filename>/etc/zypp/zypper.conf</filename>を編集します。ユーザ固有に変更する場合は、<filename>~/.zypper.conf</filename>を編集します。<filename>~/.zypper.conf</filename>がまだ存在していない場合は、テンプレートとして<filename>/etc/zypp/zypper.conf</filename>を使用できます。このテンプレートを<filename>~/.zypper.conf</filename>にコピーして、好みに合わせて調整してください。利用できるオプションのヘルプについては、ファイル内のコメントを参照してください。
  </para>
 </sect2>

 <sect2 id="sec-zypper-trouble">
  <title>トラブルシューティング</title>
  <para>
   設定済みのリポジトリからのパッケージへのアクセスに問題がある場合(たとえば、一定のパッケージがリポジトリの1つに存在することを知っていても、Zypperでそのリポジトリを見つけられない場合など)は、次のコマンドでリポジトリを更新すると有効なことがあります。
  </para>
<screen>zypper refresh</screen>
  <para>
   それも役に立たない場合は、次のコマンドを試してください。
  </para>
<screen>zypper refresh -fdb</screen>
  <para>
   このコマンドは、生メタデータの強制ダウンロードを含むデータベースの完全な更新と再構築を強制します。
  </para>
 </sect2>

 <sect2>
  <title>btrfsファイルシステムでのZypperロールバック機能</title>
  <para>
   ルートパーティションでbtrfsファイルシステムが使用され、<command>snapper</command>がインストールされている場合に、ファイルシステムに対する変更をコミットして適切なファイルシステムスナップショットを作成すると、Zypperは(<command>snapper</command>によってインストールされるスクリプト経由で)自動的に<command>snapper</command>を呼び出します。これらのスナップショットは、zypperによって行われた変更を元に戻す場合に使用できます。<command>snapper</command>の詳細については、<command>man snapper</command>を参照してください。
  </para>
  <para>
   現時点で、zypper(およびYaST)ではルートファイルシステムのスナップショットのみ作成できます。それ以外のサブボリュームは設定できません。この機能は、デフォルトファイルシステムではサポートされていません。
  </para>
 </sect2>

 
</sect1>
