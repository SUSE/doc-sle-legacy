<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE chapter PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN"
"novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<chapter xml:base="automated_upgrade.xml" id="cha-update-auto" os="sles">
 <title>SUSE Linux Enterprise 11 SP2에서 11 SP3으로 자동 업그레이드</title>
 <para>
  다음 절차를 통해 SUSE Linux Enterprise 11 SP2에서 SUSE Linux Enterprise 11 SP3으로의 대량 업그레이드를 자동으로 수행할 수 있습니다. 적합한 AutoYaST 프로파일을 생성하는 데에는 몇 가지 준비 단계가 필요합니다. 마지막으로 AutoYaST에서 업그레이드 프로세스를 실행합니다.
 </para>
 <sect1 id="sec-update-auto-prep-autoyast">
  <title>AutoYaST 프로파일 준비</title>

  <para>
   자동 업그레이드용 AutoYaST 프로파일은 AutoYaST 설치와 동일한 파일 형식을 사용합니다. <phrase os="sled;sles">AutoYaST에 대한 자세한 내용은 <xref linkend="cha-deployment-autoinst"/> 및 <xref linkend="book-autoyast"/> 항목을 참조하십시오.</phrase>
  </para>

  <para>
   그러나 업그레이드 도중 구성하는 것이 적합하지 않은 시스템의 부분(예: 파티셔닝)이 있습니다. 반면, AutoYaST 프로파일을 통해 업그레이드별 옵션을 설정할 수 있습니다.
  </para>

  <sect2>
   <title>업그레이드</title>
   <para>
    업그레이드 옵션은 업그레이드 도중 종속성 해결 프로그램의 동작을 정의합니다.
   </para>
<screen>&lt;upgrade&gt;
  &lt;only_installed_packages
    config:type="boolean"&gt;false&lt;/only_installed_packages&gt;
  &lt;stop_on_solver_conflict
    config:type="boolean"&gt;true&lt;/stop_on_solver_conflict&gt;
&lt;/upgrade&gt;</screen>
   <variablelist>
    <varlistentry>
     <term><literal>only_installed_packages</literal>
     </term>
     <listitem>
      <para>
       패키지 기반 업그레이드(동일한 제품의 다음 서비스 팩으로 업그레이드하는 경우 권장됨)의 경우 <literal>true</literal>로 설정하거나, 패턴 기반 업그레이드(SLES10에서 SLES11로와 같이 제품 버전 간 업그레이드의 경우 권장됨)의 경우 <literal>false</literal>로 설정합니다.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><literal>stop_on_solver_conflict</literal>
     </term>
     <listitem>
      <para>
       실패 시 제안을 표시할지 여부를 정의하여 대화식으로 패키지 종속성을 해결합니다(<literal>true</literal>로 설정하는 것이 권장되지만, 이 경우 대화식 프로세스가 실행되고 이 과정에서 사용자는 수동으로 충돌을 해결해야 합니다).
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2>
   <title>소프트웨어 선택</title>
   <para>
    소프트웨어 선택 옵션은 해결 프로그램의 결과 외에도 선택하거나 선택 취소할 구성요소를 정의합니다.
   </para>
<screen>&lt;software&gt;
  &lt;packages config:type="list"&gt;
    &lt;package&gt;autoyast2-installation&lt;/package&gt;
    &lt;package&gt;apparmor-profile-editor&lt;/package&gt;
  &lt;/packages&gt;
  &lt;patterns config:type="list"&gt;
    &lt;pattern&gt;base&lt;/pattern&gt;
  &lt;/patterns&gt;
  &lt;remove-packages config:type="list"/&gt;
  &lt;remove-patterns config:type="list"/&gt;
&lt;/software&gt;</screen>
   <para>
    특히, 대화식 조정이 필요하지 않도록 패키지 충돌을 해결하려면 선택하거나 선택 취소할 패키지 또는 패턴을 설정하는 것이 중요합니다. 업그레이드가 수행되면 새로 생성된 <filename>autoupg_updated.xml</filename> 파일이 이러한 패키지 및 패턴과 함께 선택되거나 선택 취소된 항목을 포함합니다.
   </para>
  </sect2>

  <sect2>
   <title>업그레이드 전 백업</title>
   <para>
    업그레이드 전 백업 옵션은 업그레이드 제안의 이러한 기능과 일치시킵니다.
   </para>
<screen>&lt;backup&gt;
  &lt;sysconfig config:type="boolean"&gt;true&lt;/sysconfig&gt;
  &lt;modified config:type="boolean"&gt;true&lt;/modified&gt;
  &lt;remove_old config:type="boolean"&gt;false&lt;/remove_old&gt;
&lt;/backup&gt;</screen>
   <variablelist>
    <varlistentry>
     <term><literal>sysconfig</literal>
     </term>
     <listitem>
      <para>
       - 업그레이드하기 전 sysconfig의 백업 여부를 정의합니다.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><literal>modified</literal>
     </term>
     <listitem>
      <para>
       - 업그레이드하기 전 수정된 구성 파일의 백업 여부를 정의합니다.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><literal>remove_old</literal>
     </term>
     <listitem>
      <para>
       - 이전 업그레이드에서 이전 백업을 제거할 지 여부를 정의합니다.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>
 </sect1>
 <sect1 id="sec-update-auto-run">
  <title>자동 업그레이드 실행</title>

  <para>
   자동 업그레이드를 시작하려면 설치 미디어를 부팅하고 AutoYaST 프로파일을 전달합니다. 프로파일을 시스템에 전달하는 다음의 두 가지 방법이 있습니다.
  </para>

  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     AutoYaST 설치에서와 동일한 방식으로 프로파일을 커널 명령줄로 전달합니다(<literal>autoupgrade=1</literal> <filename>autoyast=http://host/path/profile.xml</filename> 파라미터를 사용함). System z의 경우 이 방법만 사용할 수 있습니다.
    </para>
   </listitem>
   <listitem>
    <para>
     <literal>autoupgrade=1</literal> 파라미터를 커널 명령줄로 전달합니다. 업그레이드를 시작하기 전에 프로파일을 <filename>/root/autoupg.xml</filename>에 복사합니다. 그러면 추가 커널 파라미터가 필요 없습니다.
    </para>
   </listitem>
  </itemizedlist>

  <para>
   후자의 접근방식을 사용하여 다른 시스템에 대해서도 단일 설치 커널 명령줄을 가질 수 있습니다. 적합한 프로파일을 파일 시스템에 복사하십시오.
  </para>

  <para>
   사용자의 시스템에 SUSE Linux Enterprise 시스템이 하나만 설치되어 있고 패키지 충돌이 없으며, 업그레이드 제안에 중지할 프로파일을 설정하지 않았으면 전체 프로세스는 비대화식으로 진행됩니다. 업그레이드 제안을 입력할 경우 업그레이드에 대한 설정을 수정할 수 있습니다.
  </para>

  <para>
   업그레이드가 끝나면 YaST에서 제안의 소프트웨어 선택 변경 사항을 적용한 프로파일이 포함된 <filename>/root/autoupg-updated.xml</filename> 파일을 씁니다. 특히 이것은 패키지 선택이 동일한 시스템을 대량 업그레이드할 경우 유용합니다. 이 방법을 통해 한 시스템의 충돌 해결을 다른 시스템에 쉽게 적용할 수 있으며, 결과적으로 충돌이 자동으로 해결되고 업그레이드 자체가 비대화식으로 진행됩니다.
  </para>

  <para>
   시스템에 더 많은 SUSE Linux Enterprise 시스템이 설치되어 있을 경우 항상 업그레이드할 시스템을 묻습니다. 이 시스템을 미리 선택할 수는 없습니다.
  </para>
 </sect1>
 <sect1 id="sec-update-auto-grub">
  <title>업그레이드로 부팅하기 위한 GRUB 메뉴 섹션</title>

  <para>
   시스템을 부팅하는 다른 방법은 GRUB 메뉴에 추가 섹션을 만들어 설치를 시작하는 것입니다(기타 부트 로더 및 기타 아키텍처에서도 비슷함). 다음 예에서는 GRUB에서 <literal>(hd0,0)</literal>으로 나타나는 개별 <filename>/boot</filename> 파티션이 있다고 가정합니다.
  </para>

<screen>title Upgrade
    root (hd0,0)
    kernel /upgrade/linux
    install=<replaceable>inst_source_url</replaceable> autoupgrade=1
    autoyast=<replaceable>autoyast_profile_url</replaceable> vga=0x314
    initrd /upgrade/initrd
  </screen>

  <para>
   위의 예에서는 설치 커널과 설치 <systemitem>initrd</systemitem>가 <filename>/boot/upgrade</filename> 디렉토리에 있다고 가정합니다.
  </para>

  <para>
   System z에서는 PARM 파일에 파라미터를 추가해야 합니다. AutoYaST 기반 설치를 수행할 때와 동일한 방식으로 진행하십시오.
  </para>
 </sect1>
 <sect1 id="sec-update-auto-2nd-stage">
  <title>업그레이드의 두 번째 단계</title>

  <para>
   기본적으로 자동 업그레이드는 업그레이드의 두 번째 단계에서 구성 변경 사항을 적용하지 않습니다. 그러나 네트워크 구성은 AutoYaST 업그레이드 프로파일에서 보존하도록 설정되어야 합니다.
  </para>

  <para>
   업그레이드 후 일부 시스템의 구성 조정이 필요한 경우(예: 새 서비스 구성) 업그레이드용 AutoYaST 프로파일에 관련 섹션을 추가합니다. 선택한 시스템의 구성이 업그레이드 도중 저장됩니다.
  </para>

  <warning>
   <title>AutoYaST 제공 구성이 기존 구성을 대체함</title>
   <para>
    해당 시스템 영역의 기존 구성이 AutoYaST 구성으로 대체되고 삭제됨을 경고합니다.
   </para>
  </warning>

  <para>
   일반적으로 AutoYaST 프로파일에 표시되어야 하는 유일한 구성 조정은 SMT(Subscription Management Tool) 또는 NCC(Novell Customer Center)를 사용한 시스템 등록입니다. 이 구성이 없는 경우 시스템은 업데이트 리포지토리를 가져오지 못하고, 나중에 다시 구성하지 않으면 업데이트를 수행할 수 없습니다.
  </para>
 </sect1>
 <sect1 id="sec-update-auto-limitations">
  <title>제한사항 및 힌트</title>

  <para/>

  <sect2>
   <title>NetworkManager 및 등록</title>
   <para>
    네트워크 장치 및 네트워크 연결을 관리하기 위해 NetworkManager를 사용하는 경우, 업그레이드의 두 번째 단계에서는 네트워크 연결을 사용할 수 없습니다. 이렇게 되면 시스템이 등록을 수행할 수 없습니다.
   </para>
  </sect2>

  <sect2>
   <title>업그레이드 설정 정리</title>
   <para>
    업그레이드 프로세스를 실행하기 위해 시스템을 변경할 경우(예: 부트 로더 메뉴에 새 섹션 추가) 업그레이드한 후 변경사항을 제거할 수 있습니다.
   </para>
   <para>
    사후 설치 스크립트를 사용하여 이 작업을 자동으로 수행할 수 있습니다. <xref linkend="createprofile-scripts"/>에서 예제를 참조하십시오. GRUB의 <filename>menu.lst</filename>를 정리하는 샘플 스크립트는 샘플 <filename>autoupg.xml</filename> 파일에 포함되어 있습니다. 스크립트가 특정 설정과 일치하고 실제로 제거할 필요가 없는 설정은 제거하지 않습니다!
   </para>
  </sect2>

  <sect2>
   <title>추가 정보</title>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Linuxrc 설명서: <ulink url="http://en.opensuse.org/SDB:Linuxrc"/>
     </para>
    </listitem>
   </itemizedlist>
  </sect2>
 </sect1>
</chapter>
