<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook51-profile.xsl"
    type="text/xml"
    title="Profiling step"
?>
<!DOCTYPE chapter
[
   <!ENTITY % entities SYSTEM "entity-decl.ent">
   %entities;
]>


<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.1" xml:base="depl_smt.xml" xml:id="cha-smt"><title>구독 관리</title><info/>
 

 <para>
  SUSE Linux Enterprise Server 11 또는 SUSE Linux Enterprise Desktop 11을 실행 중인 모든 시스템은 로컬 Subscription Management Tool 서버에 대해 등록하고 직접 Novell 고객 센터 및 NU 서버와 통신하는 대신 소프트웨어 업데이트를 다운로드하도록 구성할 수 있습니다. 클라이언트 등록을 위해 SMT 서버를 로컬 업데이트 소스로 사용하려면 먼저 네트워크에서 SMT 서버를 구성해야 합니다. SMT 서버 소프트웨어는 SUSE Linux Enterprise Server에 대한 추가 기능으로 배포되며 해당 구성은 <emphasis>Subscription Management Tool 가이드</emphasis>에서 설명합니다. SMT 서버에 대해 등록하도록 구성할 클라이언트에서 추가 기능을 설치할 필요는 없습니다.
 </para>
 <para>
  SMT 서버에 대해 클라이언트를 등록하려면 클라이언트에 서버의 URL이 포함되어야 합니다. 클라이언트와 서버는 등록하는 동안 HTTPS 프로토콜을 통해 통신하므로 클라이언트에서 서버의 인증서를 트러스트하는지도 확인해야 합니다. SMT 서버가 기본 서버 인증서를 사용하도록 설정된 경우 CA 인증서는 <literal>http://<replaceable>FQDN</replaceable>/smt.crt</literal>의 HTTP 프로토콜을 통해 SMT 서버에서 사용할 수 있습니다. 이 경우 인증서에 대해 걱정할 필요가 없습니다. 인증서가 다르게 구성되지 않은 경우 CA 인증서는 등록 프로세스를 통해 여기서 자동으로 다운로드되기 때문입니다. 인증서가 외부 인증서 기관에서 발급된 경우 서버의 CA 인증서 경로를 입력해야 합니다.
 </para>
 <note>
  <title><literal>*.novell.com</literal> 하위 도메인에 대해 등록</title>
  <para>
   <literal>*.novell.com</literal> 하위 도메인에 대해 등록하려고 시도하면 인증서는 보안상의 이유로 등록 중에 다운로드되지 않고 인증서가 처리되지 않습니다. 이 경우 다른 도메인 이름 또는 일반 IP 주소를 사용하십시오.
  </para>
 </note>
 <para>
  이 정보를 제공하고 SMT를 사용하도록 클라이언트 시스템을 구성하는 방법에는 몇 가지가 있습니다. 첫 번째 방법은 부팅 시 커널 파라미터를 통해 필요한 정보를 제공하는 것입니다. 두 번째 방법은 AutoYaST 프로파일을 사용하여 클라이언트를 구성하는 것입니다. 또한 Subscription Management Tool인 <command>clientSetup4SMT.sh</command>를 사용하여 배포된 스크립트도 있습니다. 이 도구는 지정된 SMT 서버에 대해 등록할 수 있도록 클라이언트에서 실행할 수 있습니다. 이러한 방법들은 다음 절에서 설명됩니다.
 </para>
 <section xml:id="smt-client-parameters">
  <title>커널 파라미터를 사용하여 SMT 서버에 액세스</title>

  <para>
   모든 클라이언트는 시스템 부팅 중에 커널 파라미터 <literal>regurl</literal> 및 <literal>regcert</literal>를 제공함으로써 SMT를 사용하도록 구성할 수 있습니다. 첫 번째 파라미터는 필수이고 후자는 선택 사항입니다.
  </para>

  <variablelist>
   <varlistentry>
    <term>regurl</term>
    <listitem>
     <para>
      SMT 서버의 URL입니다. URL의 형식은 <literal>https://<replaceable>FQDN</replaceable>/center/regsvc/</literal>여야 합니다. 여기서 <replaceable>FQDN</replaceable>은 SMT 서버의 전체 호스트 이름으로, SMT 서버에서 사용된 서버 인증서의 FQDN과 동일해야 합니다. 예:
     </para>
<screen>regurl=https://smt.example.com/center/regsvc/</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>regcert</term>
    <listitem>
     <para>
      SMT 서버의 CA 인증서 위치입니다. 다음 위치 중 하나를 지정하십시오.
     </para>
     <variablelist>
      <varlistentry>
       <term>URL</term>
       <listitem>
        <para>
         인증서를 다운로드할 수 있는 원격 위치(http, https 또는 ftp)입니다. 예:
        </para>
<screen>regcert=http://smt.example.com/smt.crt</screen>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>플로피</term>
       <listitem>
        <para>
         플로피에 대한 위치를 지정합니다. 플로피는 부팅 시 삽입해야 합니다. 플로피가 없으면 삽입하라는 메시지가 표시되지 않습니다. 값은 <literal>floppy</literal> 스트링으로 시작하고 인증서 경로가 뒤에 나와야 합니다. 예:
        </para>
<screen>regcert=floppy/smt/smt-ca.crt</screen>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>로컬 경로</term>
       <listitem>
        <para>
         로컬 시스템에서 인증서에 대한 절대 경로입니다. 예:
        </para>
<screen>regcert=/data/inst/smt/smt-ca.cert</screen>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>대화형</term>
       <listitem>
        <para>
         설치하는 동안 인증서에 대한 경로를 지정할 수 있는 팝업 메뉴를 열려면 <literal>ask</literal>를 사용하십시오. 이 옵션은 AutoYaST와 함께 사용하지 마십시오. 예:
        </para>
<screen>regcert=ask</screen>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>인증서 설치 비활성화</term>
       <listitem>
        <para>
         인증서가 추가 기능 제품에 설치되거나, 공식 인증 기관에서 발급한 인증서를 사용하는 경우 <literal>done</literal>을 사용하십시오. 예:
        </para>
<screen>regcert=done</screen>
       </listitem>
      </varlistentry>
     </variablelist>
    </listitem>
   </varlistentry>
  </variablelist>

  <warning>
   <title>입력 오류 주의</title>
   <para>
    입력한 값이 정확한지 확인하십시오. <literal>regurl</literal>을 올바르게 지정하지 않으면 업데이트 소스가 등록되지 않습니다.
   </para>
   <para>
    <literal>regcert</literal>에 대해 잘못된 값을 입력하면 인증서에 대한 로컬 경로를 입력하라는 메시지가 표시됩니다. <literal>regcert</literal>가 지정되어 있지 않으면 <literal>http://<replaceable>FQDN</replaceable>/smt.crt</literal>로 기본 설정됩니다. 여기서 <literal>FQDN</literal>은 SMT 서버의 이름입니다.
   </para>
  </warning>

  <warning>
   <title>SMT 서버 인증서 변경</title>
   <para>
    SMT 서버가 트러스트되지 않은 새로운 CA로부터 새 인증서를 얻는 경우 클라이언트는 새로운 CA 인증서 파일을 가져와야 합니다. 이 작업은 URL이 설치 시 인증서를 가져오도록 사용되거나 <literal>regcert</literal> 파라미터가 생략되어 기본 URL이 사용될 경우에만 등록 프로세스를 통해 자동으로 수행됩니다. 인증서가 플로피 또는 로컬 경로와 같은 다른 방법을 사용하여 로드된 경우 CA 인증서는 업데이트되지 않습니다.
   </para>
  </warning>
 </section>
 <section xml:id="smt-client-autoyast">
  <title>AutoYaST 프로파일을 사용하여 클라이언트 구성</title>

  <para>
   클라이언트는 AutoYaST 프로파일을 통해 SMT 서버에 등록하도록 구성할 수 있습니다. AutoYaST 프로파일 생성과 자동 설치 준비에 대한 일반적인 내용은 <xref linkend="cha-deployment-autoinst"/>를 참조하십시오. 이 절에서는 SMT별 구성만 설명합니다.
  </para>

  <para>
   AutoYaST를 사용하여 SMT별 데이터를 구성하려면 다음 단계를 따르십시오.
  </para>

  <procedure>
   <step>
    <para>
     <systemitem class="username">root</systemitem>로 YaST를 시작하고 <menuchoice> <guimenu>기타</guimenu> <guimenu>자동 설치</guimenu> </menuchoice>를 선택하여 그래픽 AutoYaST 프런트 엔드를 시작합니다.
    </para>
    <para>
     명령줄에서 <command>yast2 autoyast</command> 명령을 사용하여 그래픽 AutoYaST 프런트 엔드를 시작할 수 있습니다.

    </para>
   </step>
   <step>
    <para>
     <menuchoice><guimenu>파일</guimenu><guimenu>열기</guimenu></menuchoice>를 사용하여 기존 프로파일을 열고 <menuchoice><guimenu>도구</guimenu><guimenu>참조 프로파일 생성</guimenu></menuchoice>을 사용하여 현재 시스템의 구성에 따라 프로파일을 생성하거나 빈 프로파일로 작업합니다.
    </para>
   </step>
   <step>
    <para>
     <menuchoice><guimenu>지원</guimenu><guimenu>Novell 고객 센터 구성</guimenu></menuchoice>을 선택합니다. 현재 구성의 개요가 표시됩니다.
    </para>
   </step>
   <step>
    <para>
     <guimenu>편집</guimenu>을 클릭합니다.
    </para>
   </step>
   <step>

    <para>
     자동으로 설치하는 동안 등록하려면 <guimenu>제품 등록 실행</guimenu>을 선택합니다. <guimenu>하드웨어 프로파일</guimenu> 및 <guimenu>선택적 정보</guimenu>를 통해 시스템의 정보를 포함할 수 있습니다.
    </para>
   </step>
   <step>
    <para>
     <guimenu>SMT 서버</guimenu>의 URL을 설정합니다. <guimenu>SMT 인증서</guimenu>의 위치를 설정할 수도 있습니다. 가능한 값은 커널 파라미터 <literal>regurl</literal> 및 <literal>regcert</literal>에서와 동일합니다(<xref linkend="smt-client-parameters"/> 참조). 단, <literal>regcert</literal>의 <literal>ask</literal> 값에는 사용자 작업이 필요하기 때문에 AutoYaST에서 작동하지 않는다는 점만 다릅니다. 이 값을 사용할 경우 등록 프로세스는 건너뛰게 됩니다.
    </para>
   </step>
   <step>
    <para>
     시스템을 배포하는 데 필요한 기타 다른 구성을 수행합니다.
    </para>
   </step>
   <step>
    <para>
     <menuchoice> <guimenu>파일</guimenu> <guimenu>다른 이름으로 저장</guimenu> </menuchoice>을 선택하고 <filename>autoinst.xml</filename>과 같이 프로파일에 대한 파일 이름을 입력합니다.
    </para>
   </step>
  </procedure>
 </section>
 <section xml:id="smt-client-clientsetupscript">
  <title>clientSetup4SMT.sh 스크립트를 사용하여 클라이언트 구성</title>

  <para>
   <command>/usr/share/doc/packages/smt/clientSetup4SMT.sh</command> 스크립트는 SMT에서 제공됩니다. 이 스크립트를 사용하면 클라이언트 시스템에서 SMT 서버를 사용하도록 구성하거나, 다른 SMT 서버를 사용하도록 재구성할 수 있습니다.
  </para>

  <para>
   클라이언트 시스템에서 <command>clientSetup4SMT.sh</command> 스크립트를 통해 SMT를 사용하도록 구성하려면 다음 단계를 따르십시오.
  </para>

  <procedure>
   <step>
    <para>
     SMT 서버에서 클라이언트 시스템으로 <filename>/usr/share/doc/packages/smt/clientSetup4SMT.sh</filename> 스크립트를 복사합니다.
    </para>
   </step>
   <step>
    <para>
     <systemitem class="username">root</systemitem>로 클라이언트 시스템에서 스크립트를 실행합니다. 스크립트는 두 가지 방법으로 실행할 수 있습니다. 하나는 스크립트 이름 뒤에 등록 URL을 추가하는 것입니다. <command>./clientSetup4SMT.sh</command> <replaceable>registration_URL</replaceable>, 예: <command>./clientSetup4SMT.sh https://smt.example.com/center/regsvc</command>. 두 번째는 스크립트 이름 뒤에 <option>--host</option> 옵션을 추가한 다음 SMT 서버의 호스트 이름을 추가하는 것입니다. <command>./clientSetup4SMT.sh --host</command> <replaceable>server_hostname</replaceable>, 예: <command>./clientSetup4SMT.sh --host smt.example.com</command>.
    </para>
    
    <important>
     <title><option>--host</option> 파라미터</title>
     <para>
      <option>--host</option> 파라미터와 함께 입력해야 하는 호스트 이름은 인증서가 발급된 대상의 이름과 같아야 합니다. 또한 인증서의 이름이 전체 호스트 이름인 경우(예: smt.example.com) 이와 같이 입력해야 합니다. <quote>짧은</quote> 이름(smt)을 입력하면 <command>clientSetup4SMT.sh</command> 스크립트가 실패합니다. 
     </para>
    </important>
    
   </step>
   <step>
    <para>
     스크립트는 서버의 CA 인증서를 다운로드합니다. <keycap>y</keycap>를 눌러 이 작업을 수락합니다.
    </para>
   </step>
   <step>
    <para>
     스크립트가 클라이언트에서 모든 필요한 작업을 수정합니다. 그러나 등록 자체는 스크립트에서 수행되지 않습니다.
    </para>
   </step>
   <step>
    <para>
     클라이언트에서 <command>suse_register</command>를 실행하거나 <command>yast2 inst_suse_register</command> 모듈을 실행하여 등록을 수행합니다.
    </para>
   </step>
  </procedure>




 </section>
 <section>
  <title>SMT 테스트 환경에 대해 클라이언트 등록</title>

  <para>
   실운영 환경 대신 테스트 환경에 대해 등록할 클라이언트를 구성하려면 다음 값을 설정하여 클라이언트 시스템에서 <filename>/etc/suseRegister.conf</filename>를 수정합니다.
   
   
  </para>

<screen>register = command=register&amp;testenv=1</screen>

  <para>
   테스트 환경에서 SMT 사용에 대한 자세한 내용은 <emphasis>Subscription Management Tool 가이드</emphasis>를 참조하십시오.
  </para>
 </section>
</chapter>
