<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE chapter PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN"
"novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<chapter xml:base="deployment_firstboot.xml" id="cha.deployment_firstboot">
 <title>Distribuzione di preinstallazioni personalizzate</title>
 <para>
  
  La distribuzione di preinstallazioni personalizzate di <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> in un numero elevato di computer identici consente di evitare singole installazioni separate e consente di ottenere un'installazione standardizzata per gli utenti finali. A differenza di YaST, che consente di effettuare installazioni completamente automatiche, con firstboot YaST è possibile creare le immagini delle preinstallazioni personalizzate e determinare il workflow per i passaggi di personalizzazione finali che richiedono l'interazione dell'utente finale. Per ulteriori informazioni, vedere <xref linkend="cha.deployment.autoinst"/>.
  
 </para>
 <para>
  La creazione di un'installazione personalizzata, la distribuzione sul proprio hardware e la personalizzazione del prodotto finale, prevedono i passaggi seguenti:
 </para>
 <procedure>
  <step performance="required">
   <para>
    Preparare il computer master i cui dischi devono essere clonati sui computer client. Per ulteriori informazioni, fare riferimento alla <xref linkend="sec.fb.master"/>.
   </para>
  </step>
  <step performance="required">
   <para>
    Personalizzare il workflow firstboot. Per ulteriori informazioni, fare riferimento alla <xref linkend="sec.fb.customize"/>.
   </para>
  </step>
  <step performance="required">
   <para>
    Clonare il disco del computer master e distribuire questa immagine ai dischi dei client. Per ulteriori informazioni, fare riferimento alla <xref linkend="sec.fb.clone"/>.
   </para>
  </step>
  <step performance="required">
   <para>
    Fare in modo che l'utente finale personalizzi l'istanza di <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>. Per ulteriori informazioni, fare riferimento alla <xref linkend="sec.fb.personalize"/>.
   </para>
  </step>
 </procedure>
 <sect1 id="sec.fb.master">
  <title>Preparazione del computer master</title>

  <para>
   Per preparare un computer master per un workflow firstboot, eseguire le operazioni riportate di seguito:
  </para>

  <procedure>
   <step id="st.master1" performance="required">
    <para>
     Inserire il supporto di installazione nel computer master.
    </para>
   </step>
   <step id="st.master2" performance="required">
    <para>
     Avviare il computer.
    </para>
   </step>
   <step id="st.master3" performance="required">
    <para>
     
     Eseguire una normale installazione compresi tutti i passaggi necessari di configurazione e attendere l'avvio del computer installato. Installare anche il pacchetto <systemitem>yast2-firstboot</systemitem>.
    </para>
   </step>
   <step id="st.master4" performance="required">
    <para>
     Per definire il proprio workflow per i passaggi di configurazione di YaST per l'utente finale o per aggiungere i propri moduli YaST a questo workflow, procedere alla <xref linkend="sec.fb.customize"/>. In caso contrario procedere direttamente al <xref linkend="st.master5"/>.
    </para>
   </step>
   <step id="st.master5" performance="required">
    <para>
     Abilitare firstboot come <systemitem class="username">root</systemitem>:
    </para>


    <para>
     Creare un file vuoto <filename>/var/lib/YaST2/reconfig_system</filename> per avviare l'esecuzione di firstboot. Questo file viene eliminato dopo che firstboot è stato configurato correttamente. Creare il file utilizzando il seguente comando:
    </para>
<screen>touch /var/lib/YaST2/reconfig_system</screen>







   </step>
   <step performance="required">
    <para>
     Passare alla <xref linkend="sec.fb.clone"/>.
    </para>
   </step>
  </procedure>
 </sect1>
 <sect1 id="sec.fb.customize">
  <title>Personalizzazione dell'installazione di firstboot</title>

  <para>
   La personalizzazione del workflow di installazione di Firstboot può interessare più componenti differenti. La loro personalizzazione è facoltativa. Se non si eseguono modifiche, firstboot esegue l'installazione utilizzando le impostazioni di default. Sono disponibili le seguenti opzioni:
  </para>

  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     Personalizzazione dei messaggi per l'utente, come descritto nella <xref linkend="sec.fb.customize.msg"/>.
    </para>
   </listitem>
   <listitem>
    <para>
     Personalizzazione delle licenze e delle relative azioni, come descritto nella <xref linkend="sec.fb.customize.license"/>.
    </para>
   </listitem>
   <listitem>
    <para>
     Personalizzazione delle note sulla versione da visualizzare, come descritto nella <xref linkend="sec.fb.customize.rn"/>.
    </para>
   </listitem>
   <listitem>
    <para>
     Personalizzazione dell'ordine e del numero di componenti interessati all'installazione, come descritto nella <xref linkend="sec.fb.customize.wf"/>.
    </para>
   </listitem>
   <listitem>
    <para>
     Configurazione degli script facoltativi aggiuntivi, come descritto nella <xref linkend="sec.fb.customize.script"/>.
    </para>
   </listitem>
  </itemizedlist>

  <para>
   Per personalizzare uno qualsiasi di questi componenti, modificare i seguenti file di configurazione:
  </para>

  <variablelist>
   <varlistentry>
    <term><filename>/etc/sysconfig/firstboot</filename>
    </term>
    <listitem>
     <para>
      Configurare i vari aspetti di firstboot (come le note sulla versione, gli script e le azioni della licenza).
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>/etc/YaST2/firstboot.xml</filename>
    </term>
    <listitem>
     <para>
      Configurare il workflow di installazione abilitando o disabilitando componenti o aggiungendone di personalizzati.
     </para>
     <para>
      Fornire le traduzioni per tale flusso di installazione personalizzato, come descritto nella <xref linkend="sec.fb.provide.trans"/>.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>



  

  <para>
   Se si desidera personalizzare altri componenti oltre a quelli coinvolti nel workflow, fare riferimento alla documentazione relativa a <filename>control.xml</filename> all'indirizzo <phrase os="sled;sles"><ulink url="http://doc.opensuse.org/projects/YaST/SLES11/tdg/inst_in_general_chap.html#product_control"/></phrase>.
  </para>

  <sect2 id="sec.fb.customize.msg">
   <title>Personalizzazione dei messaggi YaST</title>
   <para>
    Per default, un'installazione di <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> contiene vari messaggi di default localizzati e visualizzati in determinate fasi del processo di installazione. Questi comprendono un messaggio di benvenuto, un messaggio di licenza e un messaggio di congratulazioni al termine dell'installazione. Questi messaggi possono essere sostituiti nell'installazione con le proprie versioni e possono essere localizzati. Per includere il proprio messaggio di benvenuto, procedere come segue:
   </para>
   <procedure>
    <step performance="required">
     <para>
      Eseguire il login come utente <systemitem class="username">root</systemitem>.
     </para>
    </step>
    <step performance="required">
     <para>
      Aprire il file di configurazione <filename>/etc/sysconfig/firstboot</filename> e apportare le seguenti modifiche:
     </para>
     <substeps performance="required">
      <step performance="required">
       <para>
        Impostare <envar>FIRSTBOOT_WELCOME_DIR</envar> con il percorso della directory dove si desidera memorizzare i file contenenti il messaggio di benvenuto e le versioni localizzate. Ad esempio:
       </para>
<screen>FIRSTBOOT_WELCOME_DIR="/usr/share/firstboot/"
</screen>
      </step>
      <step performance="required">
       <para>
        Se il nome file del messaggio di benvenuto è differente da <filename>welcome.txt</filename> e <filename>welcome_<replaceable>locale</replaceable>.txt</filename> (dove <replaceable>locale</replaceable> corrisponde ai codici ISO 639 per la lingua, ad esempio, <quote>cs</quote> o <quote>de</quote>), specificare il modello del nome file in <envar>FIRSTBOOT_WELCOME_PATTERNS</envar>. Ad esempio:
       </para>
<screen>FIRSTBOOT_WELCOME_PATTERNS="mywelcome.txt"</screen>
       <para>
        Se non impostato, viene utilizzato il valore di default di <filename>welcome.txt</filename>.
       </para>
      </step>
     </substeps>
    </step>
    <step performance="required">
     <para>
      Creare il file di benvenuto e le versioni localizzate e posizionarli nella directory specificata nel file di configurazione <filename>/etc/sysconfig/firstboot</filename>.
     </para>
    </step>
   </procedure>
   <para>
    Procedere in modo analogo per configurare la licenza personalizzata e i messaggi di completamento. Queste variabili sono <envar>FIRSTBOOT_LICENSE_DIR</envar> e <envar>FIRSTBOOT_FINISH_FILE</envar>.
   </para>
   <para>
    Impostare <envar>SHOW_Y2CC_CHECKBOX</envar> su <quote>Sì</quote> se l'utente ha l'esigenza di avviare YaST subito dopo l'installazione.
   </para>
  </sect2>

  <sect2 id="sec.fb.customize.license">
   <title>Personalizzazione dell'azione della licenza</title>
   <para>
    È possibile personalizzare la risposta del sistema di installazione nel caso in cui l'utente rifiuti di accettare il contratto di licenza. Il sistema può reagire in tre modi a questo scenario:
   </para>
   <variablelist>
    <varlistentry>
     <term>halt</term>
     <listitem>
      
      <para>
       L'installazione di firstboot viene interrotta e il sistema si spegne. È l'impostazione di default.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>continue</term>
     <listitem>
      <para>
       L'installazione di firstboot continua.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>abort</term>
     <listitem>
      <para>
       L'installazione di firstboot viene interrotta, ma il sistema tenta di effettuare l'avvio.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    Eseguire la propria scelta e impostare <envar>LICENSE_REFUSAL_ACTION</envar> al valore desiderato.
   </para>
  </sect2>

  <sect2 id="sec.fb.customize.rn">
   <title>Personalizzazione delle note di rilascio</title>
   <para>
    A seconda del fatto che sia stata modificata o meno l'istanza di <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> che si sta distribuendo con firstboot, è possibile che sia necessario fornire agli utenti finali informazioni su alcuni aspetti importanti del nuovo sistema operativo. Un'installazione standard utilizza le note sulla versione (visualizzate durante le fasi finali dell'installazione) per fornire informazioni importanti agli utenti. Per visualizzare le proprie note di rilascio modificate come parte di un'installazione firstboot, procedere come segue:
   </para>
   <procedure>
    <step performance="required">
     <para>
      Creare il proprio file con le note di rilascio. Utilizzare il formato RTF come nel file di esempio in <filename>/usr/share/doc/release-notes</filename> e salvare il risultato come <filename>RELEASE-NOTES.en.rtf</filename> (per l'inglese).
     </para>
    </step>
    <step performance="required">
     <para>
      Memorizzare le versioni localizzate facoltative assieme alla versione originale e sostituire la parte <literal>en</literal> del nome file con il codice ISO 639 per la lingua, ad esempio <literal>de</literal> per il tedesco.
     </para>
    </step>
    <step performance="required">
     <para>
      Aprire il file di configurazione di firstboot in <filename>/etc/sysconfig/firstboot</filename> e impostare <envar>FIRSTBOOT_RELEASE_NOTES_PATH</envar> per la directory dove sono memorizzate le note di rilascio.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec.fb.customize.wf">
   <title>Personalizzazione del workflow</title>
   <para>
    Per default, un workflow firstboot standard comprende i componenti seguenti:
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Selezione della lingua
     </para>
    </listitem>
    <listitem>
     <para>
      Introduzione
     </para>
    </listitem>

    <listitem>
     <para>
      Contratto di licenza
     </para>
    </listitem>
    <listitem>
     <para>
      Nome host
     </para>
    </listitem>

    <listitem>
     <para>
      Rete
     </para>
    </listitem>

    <listitem>
     <para>
      Ora e data
     </para>
    </listitem>

    <listitem>
     <para>
      Desktop
     </para>
    </listitem>

    <listitem>
     <para>
      Password root
     </para>
    </listitem>
    <listitem>
     <para>
      UAM (User Authentication Method)
     </para>
    </listitem>
    <listitem>
     <para>
      Gestione utenti
     </para>
    </listitem>
    <listitem>
     <para>
      Configurazione hardware
     </para>
    </listitem>
    <listitem>
     <para>
      Termine configurazione
     </para>
    </listitem>
   </itemizedlist>
   <para>
    Il layout standard per il workflow di un'installazione firstboot non è obbligatorio. È possibile abilitare o disabilitare alcuni componenti oppure integrare i propri moduli nel workflow. Per modificare il workflow di firstboot, modificare manualmente il file di configurazione di firstboot <filename>/etc/YaST2/firstboot.xml</filename>. Questo file XML è un sottoinsieme del file <filename>control.xml</filename> standard, utilizzato da YaST per controllare il workflow di installazione.
   </para>
   <para>
    Per una panoramica delle proposte, vedere l'<xref linkend="ex.fb.proposal"/>, che fornisce informazioni sufficienti per modificare il workflow di installazione di firstboot e spiega la sintassi di base del file di configurazione di firstboot e la configurazione degli elementi chiave. La sintassi di base del file di configurazione firstboot (e la modalità di configurazione degli elementi chiave) è illustrata in questo esempio.
   </para>
   <example id="ex.fb.proposal">
    <title>Configurazione degli schermi di proposta</title>
<screen>
    …
    &lt;proposals config:type="list"&gt;<co id="co.fb.plist"/>
        &lt;proposal&gt;<co id="co.fb.p"/>
            &lt;name&gt;firstboot_hardware&lt;/name&gt;<co id="co.fb.pname"/>
            &lt;mode&gt;installation&lt;/mode&gt;<co id="co.fb.pmode"/>
            &lt;stage&gt;firstboot&lt;/stage&gt;<co id="co.fb.pstage"/>
            &lt;label&gt;Hardware Configuration&lt;/label&gt;<co id="co.fb.plabel"/>
            &lt;proposal_modules config:type="list"&gt;<co id="co.fb.pmodl"/>
                &lt;proposal_module&gt;printer&lt;/proposal_module&gt;<co id="co.fb.pmod"/>
            &lt;/proposal_modules&gt;
        &lt;/proposal&gt;
        &lt;proposal&gt;
        …
        &lt;/proposal&gt;
    &lt;/proposals&gt;
   </screen>
   </example>
   <calloutlist>
    <callout arearefs="co.fb.plist">
     <para>
      Il container per tutte le proposte che dovrebbero essere parte del workflow di firstboot.
     </para>
    </callout>
    <callout arearefs="co.fb.p">
     <para>
      Il container per una proposta singola.
     </para>
    </callout>
    <callout arearefs="co.fb.pname">
     <para>
      Il nome interno della proposta.
     </para>
    </callout>
    <callout arearefs="co.fb.pmode">
     <para>
      La modalità della proposta. Non eseguire modifiche in questo punto. Per l'installazione con firstboot, impostare su <literal>install</literal>.
     </para>
    </callout>
    <callout arearefs="co.fb.pstage">
     <para>
      La fase del processo di installazione durante la quale viene richiamata la proposta. Non eseguire modifiche in questo punto. Per l'installazione con firstboot, impostare su <literal>firstboot</literal>.
     </para>
    </callout>
    <callout arearefs="co.fb.plabel">
     <para>
      L'etichetta da visualizzare sulla proposta.
     </para>
    </callout>
    <callout arearefs="co.fb.pmodl">
     <para>
      Il container per tutti i moduli che sono parte della schermata delle proposte.
     </para>
    </callout>
    <callout arearefs="co.fb.pmod">
     <para>
      Uno o più moduli che sono parte della schermata delle proposte.
     </para>
    </callout>
   </calloutlist>
   <para>
    La sezione successiva del file di configurazione di firstboot consiste nella definizione del workflow. Tutti i moduli che dovrebbero essere parte del workflow di installazione con firstboot devono essere elencati qui.
   </para>
   <example id="ex.fb.wf">
    <title>Configurazione della sezione workflow</title>
<screen>
    &lt;workflows  config:type="list"&gt;
        &lt;workflow&gt;
            &lt;defaults&gt;
                &lt;enable_back&gt;yes&lt;/enable_back&gt;
                &lt;enable_next&gt;yes&lt;/enable_next&gt;
                &lt;archs&gt;all&lt;/archs&gt;
            &lt;/defaults&gt;
            &lt;stage&gt;firstboot&lt;/stage&gt;
            &lt;label&gt;Configuration&lt;/label&gt;
            &lt;mode&gt;installation&lt;/mode&gt;
            … &lt;!–– list of modules  ––&gt;
            &lt;/modules&gt;
        &lt;/workflow&gt;
    &lt;/workflows&gt;
    …
  </screen>
   </example>
   <para>
    La struttura generale della sezione <literal>workflows</literal> è molto simile a quella della sezione <literal>proposals</literal>. Un container contiene gli elementi del workflow, che contengono tutte le informazioni sulle fasi, l'etichetta e la modalità (come le proposte descritte nell'<xref linkend="ex.fb.proposal"/>). La differenza più evidente è nella sezione <filename>defaults</filename>, contenente informazioni di base per la progettazione dei componenti del workflow:
   </para>
   <variablelist>
    <varlistentry>
     <term><literal>enable_back</literal>
     </term>
     <listitem>
      <para>
       Include il pulsante <guimenu>Indietro</guimenu> in tutte le finestre di dialogo.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><literal>enable_next</literal>
     </term>
     <listitem>
      <para>
       Include il pulsante <guimenu>Avanti</guimenu> in tutte le finestre di dialogo.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><literal>archs</literal>
     </term>
     <listitem>
      <para>
       Specifica le architetture hardware sulle quali deve essere utilizzato questo workflow.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <example id="ex.fb.wfmod">
    <title>Configurazione dell'elenco di componenti del workflow</title>
<screen>
    &lt;modules  config:type="list"&gt;<co id="co.fb.modl"/>
        &lt;module&gt;<co id="co.fb.mod"/>
            &lt;label&gt;Language&lt;/label&gt;<co id="co.fb.label"/>
            &lt;enabled config:type="boolean"&gt;false&lt;/enabled&gt;<co id="co.fb.en"/>
            &lt;name&gt;firstboot_language&lt;/name&gt;<co id="co.fb.name"/>
        &lt;/module&gt;
    &lt;modules&gt;
  </screen>
   </example>
   <calloutlist>
    <callout arearefs="co.fb.modl">
     <para>
      Il container per tutti i componenti del workflow.
     </para>
    </callout>
    <callout arearefs="co.fb.mod">
     <para>
      La definizione del modulo.
     </para>
    </callout>
    <callout arearefs="co.fb.label">
     <para>
      L'etichetta visualizzata con il modulo.
     </para>
    </callout>
    <callout arearefs="co.fb.en">
     <para>
      Lo switch per abilitare o disabilitare questo componente nel workflow.
     </para>
    </callout>
    <callout arearefs="co.fb.name">
     <para>
      Il nome del modulo. Il modulo effettivo si trova in <filename>/usr/share/YaST2/clients</filename> e possiede il suffisso <filename>.ycp</filename>.
     </para>
    </callout>
   </calloutlist>
   <para>
    Per eseguire modifiche al numero o all'ordine degli schermi di proposte durante il processo di installazione con firstboot, procedere come segue:
   </para>
   <procedure>
    <step performance="required">
     <para>
      Aprire il file di configurazione di firstboot in <filename>etc/YaST2/firstboot.xml</filename>.
     </para>
    </step>
    <step performance="required">
     <para>
      Eliminare o aggiungere gli schermi o cambiare l'ordine di quelli esistenti:
     </para>
     <itemizedlist mark="bullet" spacing="normal">
      <listitem>
       <para>
        Per eliminare un'intera proposta, rimuovere l'elemento <literal>proposal</literal>, compresi tutti i relativi componenti secondari dalla sezione <literal>proposals</literal> e rimuovere il rispettivo elemento <literal>module</literal> (con elementi secondari) dal workflow.
       </para>
      </listitem>
      <listitem>
       <para>
        Per aggiungere una nuova proposta, creare un nuovo elemento <literal>proposal</literal> e immettere gli elementi secondari richiesti. Accertarsi che la proposta esista come modulo YaST in <filename>/usr/share/YaST2/clients</filename>.
       </para>
      </listitem>
      <listitem>
       <para>
        Per modificare l'ordine delle proposte, spostare nel workflow i rispettivi elementi <literal>module</literal> contenenti le schermate delle proposte. Notare che vi potrebbero essere dipendenze con altri passaggi che richiedono un determinato ordine di componenti proposte e workflow.
       </para>
      </listitem>
     </itemizedlist>
    </step>
    <step performance="required">
     <para>
      Applicare le modifiche e chiudere il file di configurazione.
     </para>
    </step>
   </procedure>
   <para>
    È sempre possibile modificare il workflow dei passaggi di configurazione quando quello di default non soddisfa le proprie necessità. Abilitare o disabilitare alcuni moduli nel workflow (oppure aggiungere dei moduli personalizzati).
   </para>
   <para>
    Per alternare lo stato di un modulo nel workflow di firstboot, procedere come segue:
   </para>
   <procedure>
    <step performance="required">
     <para>
      Aprire il file di configurazione <filename>/etc/YaST2/firstboot.xml</filename>.
     </para>
    </step>
    <step performance="required">
     <para>
      Modificare il valore per l'elemento <literal>enabled</literal> da <literal>true</literal> a <filename>false</filename> per disabilitare il modulo, oppure da <literal>false</literal> a <literal>true</literal> per abilitarlo nuovamente.
     </para>
<screen>
&lt;module&gt;
    &lt;label&gt;Time and Date&lt;/label&gt;
    &lt;enabled config:type="boolean"&gt;true&lt;/enabled&gt;
    &lt;name&gt;firstboot_timezone&lt;/name&gt;
&lt;/module&gt;
</screen>
    </step>
    <step performance="required">
     <para>
      Applicare le modifiche e chiudere il file di configurazione.
     </para>
    </step>
   </procedure>
   <para>
    Per aggiungere un modulo personalizzato al workflow, eseguire le operazioni riportate di seguito:
   </para>
   <procedure>
    <step performance="required">
     <para>
      Creare il proprio modulo YaST e memorizzare il file del modulo <filename><replaceable>module_name</replaceable>.ycp</filename> in <filename>/usr/share/YaST2/clients</filename>.
     </para>
    </step>
    <step performance="required">
     <para>
      Aprire il file di configurazione <filename>/etc/YaST2/firstboot.xml</filename>.
     </para>
    </step>
    <step performance="required">
     <para>
      Determinare in quale punto del workflow deve essere eseguito il nuovo modulo. Accertarsi che le possibili dipendenze con altri passaggi nel workflow siano considerate e risolte.
     </para>
    </step>
    <step performance="required">
     <para>
      Creare un nuovo elemento <literal>modulo</literal> all'interno del container di <literal>moduli</literal>, quindi aggiungere i corretti elementi secondari:
     </para>
<screen>&lt;modules config:type="list"&gt;
     …
     &lt;module&gt;
        &lt;label&gt;<replaceable>my_module</replaceable>&lt;/label&gt;
        &lt;enabled config:type="boolean"&gt;true&lt;/enabled&gt;
        &lt;name&gt;<replaceable>filename_my_module</replaceable>&lt;/name&gt;
     &lt;/module&gt;
&lt;/modules&gt;
</screen>
     <substeps performance="required">
      <step performance="required">
       <para>
        Immettere l'etichetta da visualizzare sul modulo nell'elemento <literal>label</literal>.
       </para>
      </step>
      <step performance="required">
       <para>
        Accertarsi che <literal>enabled</literal> sia impostato su <literal>true</literal> per fare in modo che il modulo sia incluso nel workflow.
       </para>
      </step>
      <step performance="required">
       <para>
        Nell'elemento <literal>name</literal>, immettere il nome file del modulo. Omettere il percorso completo e il suffisso <filename>.ycp</filename>.
       </para>
      </step>
     </substeps>
    </step>
    <step performance="required">
     <para>
      Applicare le impostazioni e chiudere il file di configurazione.
     </para>
    </step>
   </procedure>
   <tip>
    <title>individuazione dell'interfaccia di rete connessa per la configurazione automatica</title>
    <para>
     Se l'hardware di destinazione può includere più di un'interfaccia di rete, aggiungere il pacchetto <systemitem>network-autoconfig</systemitem> all'immagine dell'applicazione. Il pacchetto <systemitem>network-autoconfig</systemitem> garantisce che durante l'esecuzione di Firstboot vengano utilizzate ciclicamente tutte le interfacce ethernet disponibili, fino a quando non ne viene configurata una con DHCP.
    </para>
   </tip>
  </sect2>

  <sect2 id="sec.fb.customize.script">
   <title>Configurazione di script aggiuntivi</title>
   
   <para>
    È possibile configurare firstboot perché esegua script aggiuntivi al termine del workflow di firstboot. Per aggiungere ulteriori script alla sequenza di firstboot, eseguire le operazioni riportate di seguito:
   </para>
   <procedure>
    <step performance="required">
     <para>
      Aprire il file di configurazione <filename>/etc/sysconfig/firstboot</filename> e verificare che il percorso specificato per <envar>SCRIPT_DIR</envar> sia corretto. Il valore di default è <filename>/usr/share/firstboot/scripts</filename>.
     </para>
    </step>
    <step performance="required">
     <para>
      Creare lo script shell, memorizzarlo nella directory specificata e applicare i permessi corretti per i file.
     </para>
    </step>
   </procedure>
  </sect2>



  <sect2 id="sec.fb.provide.trans">
   <title>Creazione di traduzioni del workflow di installazione</title>
   <para>
    A seconda dell'utente finale, potrebbe essere opportuno fornire traduzioni del workflow personalizzato. Queste traduzioni potrebbero essere necessarie se si è personalizzato il workflow modificando il file <filename>/etc/YaST2/firstboot.xml</filename>, come descritto nella <xref linkend="sec.fb.customize.wf"/>. Questa operazione è diversa dalla localizzazione dei messaggi personalizzati di YaST, che è già stata descritta in <xref linkend="sec.fb.customize.msg"/>.
   </para>
   <para>
    Se è stato modificato <filename>/etc/YaST2/firstboot.xml</filename> e sono state apportate modifiche alle stringhe, generare un nuovo file dei modelli di traduzione (file <filename>.pot</filename>) e utilizzare la tool chain <systemitem>gettext</systemitem> per tradurre i file, quindi installare i file tradotti nelle directory YaST locali (<filename>/usr/share/YaST2/locale</filename>) come file <filename>.mo</filename> compilati. Procedere come segue:
   </para>
   <procedure>
    <step performance="required">
     <para>
      Modificare l'impostazione <systemitem>textdomain</systemitem> da:
     </para>
<screen>&lt;textdomain&gt;firstboot&lt;/textdomain&gt;</screen>
     <para>
      Per (esempio)
     </para>
<screen>&lt;textdomain&gt;firstboot-oem&lt;/textdomain&gt;</screen>
    </step>
    <step performance="required">
     <para>
      Usare <command>xgettext</command> per estrarre le stringhe traducibili in un file dei modelli di traduzione (file <filename>.pot</filename>); ad esempio in <filename>firstboot-oem.pot</filename>:
     </para>
<screen>xgettext -L Glade -o firstboot-oem.pot /etc/YaST2/firstboot.xml</screen>
    </step>
    <step performance="required">
     <para>
      Avviare il processo di traduzione. Quindi, comprimere i file tradotti in un pacchetto (file <filename><replaceable>LL_code</replaceable>.po</filename>) al pari delle traduzioni di altri progetti e installare i file <filename>firstboot-oem.mo</filename> compilati.
     </para>
    </step>
   </procedure>
   <para>
    Se si necessita di traduzioni per moduli YaST aggiuntivi o modificati, inserire le traduzioni nel modulo stesso. Se si è modificato solo un modulo esistente, accertarsi di modificare anche la rispettiva dichiarazione text domain per evitare effetti collaterali indesiderati.
   </para>
   <tip>
    <title>Ulteriori informazioni</title>
    <para>
     Per ulteriori informazioni sullo sviluppo di YaST, vedere <ulink url="http://en.opensuse.org/openSUSE:YaST_development"/>. Informazioni dettagliate su YaST e firstboot sono disponibili all'indirizzo <phrase os="sled;sles"><ulink url="http://doc.opensuse.org/projects/YaST/SLES11/tdg/bk09ch01s02.html"/></phrase>.
    </para>
   </tip>
  </sect2>
 </sect1>

 <sect1 id="sec.fb.clone">
  <title>Clonazione dell'installazione master</title>

  <para>
   È possibile clonare il disco del computer master utilizzando uno qualsiasi dei meccanismi di imaging disponibili e distribuirlo sui computer di destinazione. Per ulteriori informazioni sull'imaging, consultare <xref linkend="cha.kiwi"/>.
  </para>
 </sect1>
 <sect1 id="sec.fb.personalize">
  <title>Personalizzazione dell'installazione</title>

  <para>
   Non appena l'immagine del disco clonato viene avviata, firstboot si avvia e l'installazione procede esattamente come indicato nella <xref linkend="sec.fb.customize.wf"/>. Vengono avviati solo i componenti inclusi nella configurazione del workflow di firstboot. Tutti gli altri passaggi dell'installazione vengono ignorati. L'utente finale seleziona le impostazioni di lingua, tastiera, rete e password per personalizzare la workstation. Al completamento di questo processo, un sistema installato firstboot si comporta come qualsiasi altra istanza di <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>.
  </para>
 </sect1>
</chapter>
