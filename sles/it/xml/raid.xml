<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook51-profile.xsl"
    type="text/xml"
    title="Profiling step"
?>
<!DOCTYPE sect1
[
   <!ENTITY % entities SYSTEM "entity-decl.ent">
   %entities;
]>


<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<section xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.1" xml:base="raid.xml" xml:id="sec-yast2-system-raid">
 <title>Configurazione di RAID software</title><indexterm> <primary>YaST</primary><secondary>RAID</secondary></indexterm><indexterm><primary>RAID</primary><secondary>Software RAID</secondary></indexterm><indexterm><primary>YaST</primary><see>RAID</see></indexterm>



 <para>
  I RAID (Redundant Array of Independent Disks) vengono configurati allo scopo di combinare più partizioni di dischi rigidi in un unico disco rigido<emphasis>virtuale</emphasis> per ottimizzare le prestazioni e/o la sicurezza dei dati. La maggior parte dei controller RAID utilizza il protocollo SCSI perché è in grado di indirizzare un maggior numero di dischi rigidi in modo più efficiente rispetto al protocollo IDE. Questo protocollo è inoltre più indicato per l'elaborazione parallela dei comandi. Alcuni RAID supportano comunque i dischi rigidi IDE o SATA. I RAID software forniscono gli stessi vantaggi dei sistemi RAID senza i costi dei controller RAID hardware. Tuttavia, ciò richiede molto tempo della CPU e requisiti di memoria che li rendono non adatti ai computer ad alte prestazioni.
 </para>

 <para>
  Con <phrase role="productname"><phrase os="sles">SUSE® Linux Enterprise Server</phrase></phrase>, è possibile combinare diversi dischi rigidi in un unico sistema RAID software. Le strategie coinvolte nella configurazione di un sistema RAID che includa diversi dischi rigidi sono numerose e ognuna consente di conseguire particolari obiettivi e vantaggi e si distingue per determinate caratteristiche. Queste varianti sono note in genere come <emphasis>livelli RAID</emphasis>.
 </para>

 <para>
  I livelli RAID più comuni sono:
 </para>

 <variablelist>
  <varlistentry>
   <term>RAID 0</term>
   <listitem>
    <para>
     Questo livello consente di migliorare le prestazioni di accesso ai dati mediante la suddivisione dei blocchi di ogni file tra più unità disco. Non si tratta di un RAID vero e proprio poiché non prevede il backup dei dati. Tuttavia, il nome <emphasis>RAID 0</emphasis> è diventato di uso comune per questo tipo di sistema. RAID 0 consente di riunire in pool due o più dischi rigidi. Le prestazioni risultano migliori, ma è sufficiente che si verifichi un problema in uno solo dei dischi rigidi perché il sistema RAID venga distrutto e i dati perduti.
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>RAID 1</term>
   <listitem>
    <para>
     Questo livello garantisce sicurezza adeguata per i dati poiché ne viene eseguita una copia integrale su un altro disco rigido. Questa tecnica è nota come <emphasis>copia speculare del disco rigido</emphasis>. Se un disco viene danneggiato, è sempre disponibile una copia dei rispettivi contenuti in un'altra unità. È sufficiente che un solo disco rimanga integro affinché non si verifichino perdite di dati. Tuttavia, se il danno non viene rilevato, è possibile eseguire una copia speculare dei dati danneggiati sul disco non danneggiato. Ciò potrebbe comportare ugualmente la perdita di dati. Durante il processo di copia, le prestazioni in scrittura risultano minori rispetto a quando si utilizza l'accesso a un solo disco (dal 10 al 20% più lente), ma l'accesso in lettura è molto più veloce rispetto a uno qualsiasi dei dischi rigidi fisici normali. Ciò dipende dal fatto che è possibile effettuare la scansione dei dati duplicati in parallelo. In generale, è possibile affermare che il livello 1 offre una velocità di trasferimento circa doppia in lettura e sostanzialmente pari in scrittura rispetto ai dischi rigidi singoli.
    </para>
   </listitem>
  </varlistentry>

  <varlistentry>
   <term>RAID 5</term>
   <listitem>
    <para>
     Il RAID 5 è una soluzione di compromesso tra i livelli 0 e 1, ottimizzata in termini di prestazioni e ridondanza. Lo spazio su disco rigido equivale al numero di dischi utilizzati meno uno. I dati vengono distribuiti sui dischi rigidi come con il RAID 0. I <emphasis>blocchi di parità</emphasis>, creati su una delle partizioni vengono utilizzati a scopo di sicurezza. Questi sono collegati tra loro tramite XOR che consente di ricostruire i contenuti in base al blocco di parità corrispondente in caso di malfunzionamento del sistema. Con RAID 5, non è possibile che si verifichino guasti in più dischi contemporaneamente. Pertanto, in caso di errore in un disco rigido, è necessario sostituirlo nel minor tempo possibile per evitare che si verifichino perdite di dati.
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>RAID 6</term>
   <listitem>
    <para>
     È possibile aumentare ulteriormente l'affidabilità del sistema RAID utilizzando RAID 6. In questo livello, anche se due dischi non funzionano, è comunque possibile ricostruire la matrice. Con RAID 6, per eseguire la matrice sono necessari almeno 4 dischi rigidi. Quando viene eseguita come software raid, questa configurazione richiede una quantità considerevole di tempo e memoria della CPU.
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>RAID 10 (RAID 1+0)</term>
   <listitem>
    <para>
     Questa implementazione RAID combina funzionalità di RAID 0 e RAID 1: viene prima eseguita la copia speculare dei dati in array di dischi separati, che vengono inseriti in una nuova matrice di tipo RAID 0;. In ciascuna matrice RAID 1 secondaria l'errore di un solo disco non provoca danni ai dati. Per eseguire un RAID 10, è necessario un minimo di quattro dischi e un numero pari di dischi. Questo tipo di RAID viene utilizzato per l'applicazione di database in cui si prevede che vengano inseriti volumi molto elevati di dati.
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>Altri livelli RAID</term>
   <listitem>
    <para>
     Sono stati sviluppati vari altri livelli RAID (ad esempio RAID 2, RAID 3, RAID 4, RAIDn, RAID 10, RAID 0+1, RAID 30, RAID 50 e così via), alcuni dei quali sono implementazioni proprietarie realizzate dai produttori di hardware. Si tratta di livelli non molto diffusi, la cui descrizione viene pertanto tralasciata.
    </para>
   </listitem>
  </varlistentry>
 </variablelist>

 <section xml:id="sec-yast2-system-raid-conf">
  <title>Configurazione di RAID software con YaST</title>
  <para>
   La configurazione <guimenu>RAID</guimenu> YaST può essere eseguita dalla Modalità di partizionamento per esperti YaST, descritta nella <xref linkend="sec-yast2-i-y2-part-expert"/>. Questo strumento di partizionamento consente di modificare e cancellare le partizioni esistenti, nonché di crearne di nuove da utilizzare con i RAID software:
  </para>
  <procedure>
   <step>
    <para>
     Selezionare un disco rigido da <guimenu>Dischi rigidi</guimenu>
    </para>
   </step>
   <step>
    <para>
     Passare alla scheda <guimenu>Partizioni</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Fare clic su <guimenu>Aggiungi</guimenu> e specificare la dimensione desiderata per la partizione raid sul disco.
    </para>
   </step>
   <step>
    <para>
     Utilizzare <guimenu>Non formattare la partizione</guimenu> e modificare l'<guimenu>ID del file system</guimenu> in <guimenu>0xFD Linux RAID</guimenu>. Non montare questa partizione.
    </para>
   </step>
   <step>
    <para>
     Ripetere questa procedura finché non si sono definiti tutti i volumi fisici desiderati dei dischi disponibili.
    </para>
   </step>
  </procedure>
  <para>
   Per i RAID 0 e RAID 1, sono necessarie almeno due partizioni. Per il RAID 1, in genere, solo due. Se viene utilizzato RAID 5, sono necessarie almeno tre partizioni, mentre RAID 6 e RAID 10 richiedono almeno quattro partizioni. È consigliabile utilizzare solo partizioni aventi le stesse dimensioni. Le partizioni RAID devono essere ubicate su dischi diversi per ridurre il rischio di perdite di dati in caso di guasto di un disco (RAID 1 e 5) e ottimizzare le prestazioni di RAID 0. Una volta create tutte le partizioni da utilizzare con RAID, fare clic su <menuchoice><guimenu>RAID</guimenu><guimenu>Aggiungi RAID</guimenu></menuchoice> per iniziare la configurazione RAID.
  </para>
  <para>
   Nella finestra di dialogo successiva, scegliere tra i livelli RAID 0, 1, 5, 6 e 10. Quindi, selezionare tutte le partizioni di tipo <quote>RAID Linux</quote> o <quote>nativo Linux</quote> da utilizzare con il sistema RAID. Non vengono visualizzate partizioni di scambio o DOS.
  </para>
  <tip>
   <para>
    Per i tipi di RAID in cui è importante l'ordine dei dischi aggiunti, è possibile contrassegnare i singoli dischi con una lettera compresa tra la A e la E. Fare clic sul pulsante <guimenu>Classifica</guimenu>, selezionare il disco, quindi fare clic su uno dei pulsanti <guimenu>Classe X</guimenu>, dove X è la lettera da assegnare al disco. Assegnare tutti i dischi RAID disponibili in questo modo e confermare con <guimenu>OK</guimenu>. È possibile ordinare facilmente i dischi classificati mediante i pulsanti <guimenu>Ordinato</guimenu> o <guimenu>Inframmezzato</guimenu>, oppure aggiungere un modello di ordinamento da un file di testo selezionando <guimenu>File di modello</guimenu>.
   </para>
  </tip>
  <figure xml:id="fig-yast2-system-raid-conf">
   <title>Partizioni RAID</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="yast2_raid4.png" width="75%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="yast2_raid4.png" width="75%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>
  <para>
   Per aggiungere una partizione precedentemente non assegnata al volume RAID selezionato, fare clic sulla partizione e quindi su <guimenu>Aggiungi</guimenu>. Assegnare tutte le partizioni riservate al RAID. In caso contrario, lo spazio disponibile nella partizione rimane inutilizzato. Dopo aver assegnato tutte le partizioni, fare clic su <guimenu>Avanti</guimenu> per selezionare le <guimenu>opzioni RAID</guimenu> disponibili.
  </para>
  <para>
   Nell'ultimo passaggio, impostare il file system per l'uso della cifratura e del punto di montaggio per il volume RAID. Fare clic su <guimenu>Fine</guimenu> per completare la configurazione e verificare che in Modalità di partizionamento per esperti il dispositivo <filename>/dev/md0</filename> e gli altri siano indicati con il <emphasis>RAID</emphasis>.
  </para>
 </section>

 <section>
  <title>Risoluzione dei problemi</title>
  <para>
   Verificare nel file <filename>/proc/mdstat</filename> se una partizione RAID è stata danneggiata. In caso di malfunzionamento del sistema, chiudere Linux e sostituire il disco rigido difettoso con una nuova unità partizionata in modo identico. Riavviare quindi il sistema e immettere il comando <command>mdadm /dev/mdX --add /dev/sdX</command>. Sostituire "X" con l'identificatore del dispositivo in questione. In questo modo, il disco rigido viene automaticamente integrato nel sistema RAID e ricostruito completamente.
  </para>
  <para>
   Tenere presente che, sebbene sia possibile accedere ai dati durante la ricostruzione, è possibile riscontrare qualche problema di prestazioni fino a quando non viene completamente ricostruito il sistema RAID.
  </para>
 </section>





 <section>
  <title>Ulteriori informazioni</title>
  <para>
   Per ulteriori informazioni e istruzioni sulla configurazione di RAID software, vedere la documentazione HOWTO in:
  </para>
  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     <filename>/usr/share/doc/packages/mdadm/Software-RAID.HOWTO.html</filename>
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="http://raid.wiki.kernel.org"/>
    </para>
   </listitem>
  </itemizedlist>
  <para>
   Sono disponibili diverse mailing list relative ai RAID Linux, come <link xlink:href="http://marc.info/?l=linux-raid"/>.
  </para>
 </section>
</section>
