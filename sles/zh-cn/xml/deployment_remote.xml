<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook51-profile.xsl"
    type="text/xml"
    title="Profiling step"
?>
<!DOCTYPE chapter
[
   <!ENTITY % entities SYSTEM "entity-decl.ent">
   %entities;
]>


<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.1" xml:base="deployment_remote.xml" role="General" xml:id="cha-deployment-remoteinst"><title>远程安装</title><info/>
 
 <para>
  可以用多种不同的方法安装 <phrase role="productname"><phrase os="sles">SUSE® Linux Enterprise Server</phrase></phrase>。除了<xref linkend="cha-inst"/>中介绍的常用媒体安装方式之外，还可以选择多种基于网络的安装方式，甚至可以用完全无人值守的方式来安装 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>。
 </para>
 <para>
  两种方法各通过两个简短的核对清单进行介绍：一个列出此方法的先决条件，另一个则说明基本过程。随后，将会就这些安装方案用到的所有技术提供更详细的信息。
 </para>
 <note>
  <para>
   以下几节中将要存放新安装的 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 的系统称为<emphasis>目标系统</emphasis>或<emphasis>安装目标</emphasis>。术语<emphasis>安装源</emphasis>（repository，以前称为 <quote>installation source</quote>）用于所有的安装数据源。这包括物理媒体（如 CD 和 DVD）以及在网络中分发安装数据的网络服务器。
  </para>
 </note>
 <section xml:id="sec-deployment-remoteinst-scenario">
  <title>远程安装的安装方案</title>

  <para>
   本节将介绍远程安装的最常用安装方案。对于每种方案，请仔细查看先决条件列表并遵循该方案的概述过程。如果需要特定步骤的详细说明，请访问各种方案的链接。
  </para>

  <important>
   <para>
    X Window 系统的配置不是任何远程安装过程的一部分。在安装完成后，请以 <systemitem class="username">root</systemitem> 身份登录到目标系统，输入 <command>telinit 3</command>，然后启动 SaX2 配置图形硬件。
   </para>
  </important>

  <section xml:id="sec-deployment-remoteinst-scenario-vncstat">
   <title>通过 VNC 进行简单远程安装 － 静态网络配置</title>
   <para>
    此类型安装仍然需要对物理系统进行一定程度的访问以便引导安装。安装本身完全由使用 VNC 连接到安装程序的远程工作站控制。在使用<xref linkend="cha-inst"/>中的手动安装方式时需要用户干预。
   </para>
   <para>
    对于此类型安装，请确保满足以下要求：
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      远程安装源：带有有效网络连接的 NFS、HTTP、FTP 或 SMB。
     </para>
    </listitem>
    <listitem>
     <para>
      具有有效网络连接的目标系统。
     </para>
    </listitem>
    <listitem>
     <para>
      具有有效网络连接和 VNC 查看器软件或支持 Java 的浏览器（Firefox、Konqueror、Internet Explorer、Opera 等）的控制系统。
     </para>
    </listitem>
    <listitem>
     <para>
      用于引导目标系统的物理引导媒体（CD、DVD 或 USB 闪存驱动器）。
     </para>
    </listitem>
    <listitem>
     <para>
      有效的静态 IP 地址已指派给储存库和控制系统。
     </para>
    </listitem>
    <listitem>
     <para>
      可分配到目标系统的有效静态 IP 地址。
     </para>
    </listitem>
    <listitem>
     <para>
      如果通过 VNC 安装，则系统不会配置 X11，而是将输出重定向到本地计算机。要使用 SaX2，请使用 <command>export DISPLAY=:0 &amp;&amp; sax:2 -a -r</command>
     </para>
    </listitem>
   </itemizedlist>
   <para>
    要执行此种安装，请执行如下操作：
   </para>
   <procedure xml:id="proc-deployment-remoteinst-scenario-vncstat">
    <step>
     <para>
      按<xref linkend="sec-deployment-remoteinst-instserver"/>中所述设置储存库。选择 NFS、HTTP 或 FTP 网络服务器。关于 SMB 储存库，请参见<xref linkend="sec-deployment-remoteinst-instserver-smb"/>。
     </para>
    </step>
    <step>
     
     <para os="sled;sles">
      使用 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 媒体包的 DVD1 引导目标系统。

     </para>
    </step>
    <step>
     <para>
      在出现目标系统的引导屏幕时，使用引导选项提示来设置相应的 VNC 选项和储存库的地址。<xref linkend="sec-deployment-remoteinst-bootinst"/>中对此有详细描述。
     </para>
     <para>
      目标系统引导后进入一个基于文本的环境，它给出了网络地址和显示编号，任何 VNC 查看器应用程序或浏览器都可以藉此寻址到图形安装环境。VNC 安装将通过 OpenSLP 自行发布，且如果防火墙设置允许，可以在 <literal>service:/</literal> 或 <literal>slp:/</literal> 模式下使用 Konqueror 找到它们。
     </para>
    </step>
    <step>
     <para>
      在控制工作站上，按<xref linkend="sec-deployment-remoteinst-monitor-vnc"/>中所述打开 VNC 查看应用程序或 Web 浏览器，并连接到目标系统。
     </para>
    </step>
    <step>
     <para>
      按<xref linkend="cha-inst"/>中所述执行安装。在目标系统重引导从而完成安装的最后一部分后，需要重连接到目标系统。
     </para>
    </step>
    <step>
     <para>
      完成安装。
     </para>
    </step>
   </procedure>
  </section>

  <section xml:id="sec-deployment-remoteinst-scenario-vncdyn">
   <title>通过 VNC 进行简单远程安装 － 动态网络配置</title>
   <para>
    此类型安装仍然需要对物理系统进行一定程度的访问以便为安装进行引导。网络配置是通过 DHCP 进行的。安装本身完全由使用 VNC 连接到安装程序的远程工作站控制，但是仍需要用户对实际配置工作进行干预。
   </para>
   <para>
    对于此类型安装，请确保满足以下要求：
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      远程储存库：带有有效网络连接的 NFS、HTTP、FTP 或 SMB。
     </para>
    </listitem>
    <listitem>
     <para>
      具有有效网络连接的目标系统。
     </para>
    </listitem>
    <listitem>
     <para>
      具有有效网络连接和 VNC 查看器软件或支持 Java 的浏览器（Firefox、Konqueror、Internet Explorer 或 Opera）的控制系统。
     </para>
    </listitem>
    <listitem>
     
     <para os="sled;sles">
      使用 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 媒体包的 DVD1 引导目标系统。
     </para>
    </listitem>
    <listitem>
     <para>
      运行提供 IP 地址的 DHCP 服务器。
     </para>
    </listitem>
    <listitem>
     <para>
      如果通过 VNC 安装，则系统不会配置 X11，而是将输出重定向到本地计算机。要使用 SaX2，请使用 <command>export DISPLAY=:0 &amp;&amp; sax:2 -a -r</command>
     </para>
    </listitem>
   </itemizedlist>
   <para>
    要执行此种安装，请执行如下操作：
   </para>
   <procedure xml:id="proc-deployment-remoteinst-scenario-vncdyn">
    <step>
     <para>
      按<xref linkend="sec-deployment-remoteinst-instserver"/>中所述设置储存库。选择 NFS、HTTP 或 FTP 网络服务器。关于 SMB 储存库，请参见<xref linkend="sec-deployment-remoteinst-instserver-smb"/>。
     </para>
    </step>
    <step>
     
     <para os="sled;sles">
      使用 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 媒体包的 DVD1 引导目标系统。
     </para>
    </step>
    <step>
     <para>
      在出现目标系统的引导屏幕时，使用引导选项提示来设置相应的 VNC 选项和储存库的地址。<xref linkend="sec-deployment-remoteinst-bootinst"/>中对此有详细描述。
     </para>
     <para>
      目标系统引导后进入一个基于文本的环境，它给出了网络地址和显示编号，任何 VNC 查看器应用程序或浏览器都可以藉此寻址到图形安装环境。VNC 安装将通过 OpenSLP 自行发布，且如果防火墙设置允许，可以在 <literal>service:/</literal> 或 <literal>slp:/</literal> 模式下使用 Konqueror 找到它们。
     </para>
    </step>
    <step>
     <para>
      在控制工作站上，按<xref linkend="sec-deployment-remoteinst-monitor-vnc"/>中所述打开 VNC 查看应用程序或 Web 浏览器，并连接到目标系统。
     </para>
    </step>
    <step>
     <para>
      按<xref linkend="cha-inst"/>中所述执行安装。在目标系统重引导从而完成安装的最后一部分后，需要重连接到目标系统。
     </para>
    </step>
    <step>
     <para>
      完成安装。
     </para>
    </step>
   </procedure>
  </section>

  <section xml:id="sec-deployment-remoteinst-scenario-vncpxe">
   <title>通过 VNC 进行远程安装 － PXE 引导和网络唤醒</title>
   <para>
    此类型安装是完全无人值守的。目标计算机是远程启动和引导的。只有实际安装时才需要用户交互。此方式适用于跨站点部署。
   </para>
   <para>
    要执行此类型安装，请确保满足以下要求：
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      远程储存库：带有有效网络连接的 NFS、HTTP、FTP 或 SMB。
     </para>
    </listitem>
    <listitem>
     <para>
      TFTP 服务器.
     </para>
    </listitem>
    <listitem>
     <para>
      为网络运行 DHCP 服务器.
     </para>
    </listitem>
    <listitem>
     <para>
      目标系统支持 PXE 引导、联网和网络唤醒，且已插入并连接到网络.
     </para>
    </listitem>
    <listitem>
     <para>
      具有有效网络连接和 VNC 查看器软件或支持 Java 的浏览器（Firefox、Konqueror、Internet Explorer 或 Opera）的控制系统。
     </para>
    </listitem>
    <listitem>
     <para>
      如果通过 VNC 安装，则系统不会配置 X11，而是将输出重定向到本地计算机。要使用 SaX2，请使用 <command>export DISPLAY=:0 &amp;&amp; sax:2 -a -r</command>
     </para>
    </listitem>
   </itemizedlist>
   <para>
    要执行此类型安装，请执行如下操作：
   </para>
   <procedure xml:id="proc-deployment-remoteinst-scenario-vncpxe">
    <step>
     <para>
      按<xref linkend="sec-deployment-remoteinst-instserver"/>中所述设置储存库。选择 NFS、HTTP、或 FTP 网络服务器或按<xref linkend="sec-deployment-remoteinst-instserver-smb"/>中所述配置 SMB 储存库。
     </para>
    </step>
    <step>
     <para>
      设置存放引导映像（可被目标系统拉出）的 TFTP 服务器。<xref linkend="sec-deployment-remoteinst-boot-tftp"/>中对此进行了描述。
     </para>
    </step>
    <step>
     <para>
      设置 DHCP 服务器以向所有计算机提供 IP 地址，并向目标系统显示 TFTP 服务器的位置。<xref linkend="sec-deployment-remoteinst-boot-dhcp"/>中对此进行了描述。
     </para>
    </step>
    <step>
     <para>
      准备目标系统的 PXE 引导。<xref linkend="sec-deployment-remoteinst-boot-pxeprep"/>中对此有详细描述。
     </para>
    </step>
    <step>
     <para>
      使用“网络唤醒”开始目标系统的引导过程 <xref linkend="sec-deployment-remoteinst-boot-wol"/>中对此进行了描述。
     </para>
    </step>
    <step>
     <para>
      在控制工作站上，按<xref linkend="sec-deployment-remoteinst-monitor-vnc"/>中所述打开 VNC 查看应用程序或 Web 浏览器，并连接到目标系统。
     </para>
    </step>
    <step>
     <para>
      按<xref linkend="cha-inst"/>中所述执行安装。在目标系统重引导从而完成安装的最后一部分后，需要重连接到目标系统。
     </para>
    </step>
    <step>
     <para>
      完成安装。
     </para>
    </step>
   </procedure>
  </section>

  <section xml:id="sec-deployment-remoteinst-scenario-sshstat">
   <title>通过 SSH 进行简单远程安装 － 静态网络配置</title>
   <para>
    此类型安装仍然需要对目标系统进行一定程度的访问，以便为安装进行引导以及确定安装目标的 IP 地址。安装本身完全由使用 SSH 连接到安装程序的远程工作站控制。在使用<xref linkend="cha-inst"/>中所述的常规安装时需要用户干预。
   </para>
   <para>
    对于此类型安装，请确保满足以下要求：
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      远程储存库：带有有效网络连接的 NFS、HTTP、FTP 或 SMB。
     </para>
    </listitem>
    <listitem>
     <para>
      具有有效网络连接的目标系统。
     </para>
    </listitem>
    <listitem>
     <para>
      具有有效网络连接和有效 SSH 客户端软件的控制系统。
     </para>
    </listitem>
    <listitem>
     
     <para os="sled;sles">
      使用 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 媒体包的 DVD1 引导目标系统。
     </para>
    </listitem>
    <listitem>
     <para>
      有效的静态 IP 地址已指派给储存库和控制系统。
     </para>
    </listitem>
    <listitem>
     <para>
      可分配到目标系统的有效静态 IP 地址。
     </para>
    </listitem>
    <listitem>
     <para>
      如果通过 SSH 安装，则系统不会配置 X11，而是将输出重定向到本地计算机。要使用 SaX2，请使用 <command>export DISPLAY=:0 &amp;&amp; sax:2 -a -r</command>
     </para>
    </listitem>
   </itemizedlist>
   <para>
    要执行此种安装，请执行如下操作：
   </para>
   <procedure xml:id="proc-deployment-remoteinst-scenario-sshstat">
    <step>
     <para>
      按<xref linkend="sec-deployment-remoteinst-instserver"/>中所述设置储存库。选择 NFS、HTTP 或 FTP 网络服务器。关于 SMB 储存库，请参见<xref linkend="sec-deployment-remoteinst-instserver-smb"/>。
     </para>
    </step>
    <step>
     
     <para os="sled;sles">
      使用 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 媒体包的 DVD1 引导目标系统。
     </para>
    </step>
    <step>
     <para>
      在出现目标系统的引导屏幕时，使用引导选项提示来设置相应的网络连接参数、储存库地址以及 SSH 支持。<xref linkend="sec-deployment-remoteinst-bootinst-custom"/>中对此有详细描述。
     </para>
     <para>
      目标系统引导后进入一个基于文本的环境，它给出了一个网络地址，通过该地址，任何 SSH 客户端都可以寻址到图形安装环境。
     </para>
    </step>
    <step>
     <para>
      在控制工作站上，按<xref linkend="sec-deployment-remoteinst-monitor-ssh-connect"/>中所述打开终端窗口并连接到目标系统。
     </para>
    </step>
    <step>
     <para>
      按<xref linkend="cha-inst"/>中所述执行安装。在目标系统重引导从而完成安装的最后一部分后，需要重连接到目标系统。
     </para>
    </step>
    <step>
     <para>
      完成安装。
     </para>
    </step>
   </procedure>
  </section>

  <section xml:id="sec-deployment-remoteinst-scenario-sshdyn">
   <title>通过 SSH 进行简单远程安装 － 动态网络配置</title>
   <para>
    此类型安装仍然需要对目标系统进行一定程度的访问，以便为安装进行引导以及确定安装目标的 IP 地址。安装本身完全由使用 SSH 连接到安装程序的远程工作站控制，但是仍需要用户对实际配置工作进行干预。
   </para>
   <note>
    <title>第二步（安装）后要避免丢失连接</title>
    <para>
     在网络设置对话框中，选中<guimenu>通过 ifup 的传统方法</guimenu>并取消选中 NetworkManager。否则，安装期间会丢失 SSH 连接。安装完成后，将设置重设置为<guimenu>通过 NetworkManager 的用户控制方法</guimenu>。
    </para>
   </note>
   <para>
    对于此类型安装，请确保满足以下要求：
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      远程储存库：带有有效网络连接的 NFS、HTTP、FTP 或 SMB。
     </para>
    </listitem>
    <listitem>
     <para>
      具有有效网络连接的目标系统。
     </para>
    </listitem>
    <listitem>
     <para>
      具有有效网络连接和有效 SSH 客户端软件的控制系统。
     </para>
    </listitem>
    <listitem>
     <para>
      用于引导目标系统的物理引导媒体（CD、DVD 或 USB 闪存驱动器）。
     </para>
    </listitem>
    <listitem>
     <para>
      运行提供 IP 地址的 DHCP 服务器。
     </para>
    </listitem>
    <listitem>
     <para>
      如果通过 SSH 安装，则系统不会配置 X11，而是将输出重定向到本地计算机。要使用 SaX2，请使用 <command>export DISPLAY=:0 &amp;&amp; sax:2 -a -r</command>
     </para>
    </listitem>
   </itemizedlist>
   <para>
    要执行此种安装，请执行如下操作：
   </para>
   <procedure xml:id="proc-deployment-remoteinst-scenario-sshdyn">
    <step>
     <para>
      按<xref linkend="sec-deployment-remoteinst-instserver"/>中所述设置储存库。选择 NFS、HTTP 或 FTP 网络服务器。关于 SMB 储存库，请参见<xref linkend="sec-deployment-remoteinst-instserver-smb"/>。
     </para>
    </step>
    <step>
     
     <para os="sled;sles">
      使用 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 媒体包的 DVD1 引导目标系统。
     </para>
    </step>
    <step>
     <para>
      在出现目标系统的引导屏幕时，使用引导选项提示来设置相应的网络连接参数、安装源位置以及 SSH 支持。关于如何使用这些参数的详细说明，请参见<xref linkend="sec-deployment-remoteinst-bootinst-custom"/>。
     </para>
     <para>
      目标系统引导后进入一个基于文本的环境，它给出了一个网络地址，通过该地址，任何 SSH 客户端都可以寻址到图形安装环境。
     </para>
    </step>
    <step>
     <para>
      在控制工作站上，按<xref linkend="sec-deployment-remoteinst-monitor-ssh-connect"/>中所述打开终端窗口并连接到目标系统。
     </para>
    </step>
    <step>
     <para>
      按<xref linkend="cha-inst"/>中所述执行安装。在目标系统重引导从而完成安装的最后一部分后，需要重连接到目标系统。
     </para>
    </step>
    <step>
     <para>
      完成安装。
     </para>
    </step>
   </procedure>
  </section>

  <section xml:id="sec-deployment-remoteinst-scenario-sshpxe">
   <title>通过 SSH 进行远程安装 － PXE 引导和网络唤醒</title>
   <para>
    此类安装是完全无人值守的。目标计算机是远程启动和引导的。
   </para>
   <para>
    要执行此类型安装，请确保满足以下要求：
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      远程储存库：带有有效网络连接的 NFS、HTTP、FTP 或 SMB。
     </para>
    </listitem>
    <listitem>
     <para>
      TFTP 服务器。
     </para>
    </listitem>
    <listitem>
     <para>
      为网络运行 DHCP 服务器，向需要安装的主机提供一个静态 IP。
     </para>
    </listitem>
    <listitem>
     <para>
      目标系统支持 PXE 引导、联网和网络唤醒，且已插入并连接到网络。
     </para>
    </listitem>
    <listitem>
     <para>
      具有有效网络连接和 SSH 客户端软件的控制系统。
     </para>
    </listitem>
    <listitem>
     <para>
      如果通过 SSH 安装，则系统不会配置 X11，而是将输出重定向到本地计算机。要使用 SaX2，请使用 <command>export DISPLAY=:0 &amp;&amp; sax:2 -a -r</command>
     </para>
    </listitem>
   </itemizedlist>
   <para>
    要执行此类型安装，请执行如下操作：
   </para>
   <procedure xml:id="proc-deployment-remoteinst-scenario-sshpxe">
    <step>
     <para>
      按<xref linkend="sec-deployment-remoteinst-instserver"/>中所述设置储存库。选择 NFS、HTTP 或 FTP 网络服务器。有关 SMB 储存库的配置，请参见<xref linkend="sec-deployment-remoteinst-instserver-smb"/>。
     </para>
    </step>
    <step>
     <para>
      设置存放引导映像（可被目标系统拉出）的 TFTP 服务器。<xref linkend="sec-deployment-remoteinst-boot-tftp"/>中对此进行了描述。
     </para>
    </step>
    <step>
     <para>
      设置 DHCP 服务器以向所有计算机提供 IP 地址，并向目标系统显示 TFTP 服务器的位置。<xref linkend="sec-deployment-remoteinst-boot-dhcp"/>中对此进行了描述。
     </para>
    </step>
    <step>
     <para>
      准备目标系统的 PXE 引导。<xref linkend="sec-deployment-remoteinst-boot-pxeprep"/>中对此有详细描述。
     </para>
    </step>
    <step>
     <para>
      使用“网络唤醒”开始目标系统的引导过程 <xref linkend="sec-deployment-remoteinst-boot-wol"/>中对此进行了描述。
     </para>
    </step>
    <step>
     <para>
      在控制工作站上，按<xref linkend="sec-deployment-remoteinst-monitor-ssh"/>中所述启动 SSH 客户端并连接到目标系统。
     </para>
    </step>
    <step>
     <para>
      按<xref linkend="cha-inst"/>中所述执行安装。在目标系统重引导从而完成安装的最后一部分后，需要重连接到目标系统。
     </para>
    </step>
    <step>
     <para>
      完成安装。
     </para>
    </step>
   </procedure>
  </section>
 </section>

 <section xml:id="sec-deployment-remoteinst-instserver">
  <title>设置存放安装源的服务器</title>



  <para>
   根据用作 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 网络安装源的计算机上所运行的操作系统的不同，服务器配置可有多种选择。设置安装服务器最简单的方法是使用 <phrase os="sled;sles">SUSE Linux Enterprise Server <phrase role="productname"><phrase os="sles;sled;slerte">11 SP4</phrase></phrase> 或 </phrase>openSUSE 11.1 及更高版本上的 YaST。
  </para>

  <tip>
   <para>
    您甚至可以将 Microsoft Windows 计算机用作 Linux 部署的安装服务器。有关详细信息，请参见<xref linkend="sec-deployment-remoteinst-instserver-smb"/>。
   </para>
  </tip>

  <section xml:id="sec-deployment-remoteinst-instserver-sles9">
   <title>使用 YaST 设置安装服务器</title>
   <para>
    YaST 提供了一个用于创建网络储存库的图形工具。它支持 HTTP、FTP 和 NFS 网络安装服务器。
   </para>
   <procedure xml:id="proc-deployment-remoteinst-instserver-sles9">
    <step>
     <para>
      以 <systemitem class="username">root</systemitem> 登录到充当安装服务器的机器上。
     </para>
    </step>
    
    <step>
     <para>
      启动 <menuchoice><guimenu>YaST</guimenu> <guimenu>杂项</guimenu> <guimenu>安装服务器</guimenu></menuchoice>。
     </para>
    </step>
    <step>
     <para>
      选择储存库类型（HTTP、FTP 或 NFS）。所选的服务将在系统每次启动时自动启动。如果所选服务器类型中的某项服务已经在系统上运行，但您希望对该服务器进行手动配置，则请通过<guimenu>不配置任何网络服务</guimenu>来停用服务器服务的自动配置。在这两种情况下，都需要定义服务器上可用安装数据所在的目录。
     </para>
    </step>
    <step>
     <para>
      配置所需的储存库类型。此步骤与服务器服务的自动配置相关。如果停用自动配置，则将跳过此步骤。
     </para>
     <para>

      定义安装数据所在的 FTP 或 HTTP 服务器的 root 目录的别名。该储存库以后将放在 <literal>ftp://<replaceable>Server-IP</replaceable>/<replaceable>Alias</replaceable>/<replaceable>name</replaceable></literal>(ftp) 或 <literal>http://<replaceable>Server-IP</replaceable>/<replaceable>Alias</replaceable>/<replaceable>Name</replaceable></literal>(HTTP) 下。<replaceable>Name</replaceable> 代表储存库的名称，该名称将在下面的步骤中定义。如果您在上一步中选择了 NFS，请定义通配符和导出选项。可在 <literal>nfs://<replaceable>Server-IP</replaceable>/<replaceable>Name</replaceable></literal> 下访问 NFS 服务器。有关 NFS 和导出选项的详细信息，请参见<xref linkend="cha-nfs"/>。
     </para>
     <tip>
      <title>防火墙设置</title>
      <para>
       务必使服务器系统的防火墙设置允许 HTTP、NFS 和 FTP 端口的数据流量。先启用<guimenu>打开防火墙中的端口</guimenu>或选中<guimenu>防火墙细节</guimenu>（如果当前尚未启用或选中）。
      </para>
     </tip>
    </step>
    <step>
     <para>
      配置储存库。在将安装媒体复制到其目标位置前，请先定义该储存库的名称（最好是容易记忆的产品和版本的缩写）。YaST 允许提供安装媒体的 ISO 映像来取代安装 DVD 副本。如果希望使用 ISO 映像，请激活相关的复选框并指定 ISO 文件所在的本地目录路径。依据使用此安装服务器分发的产品而定，可能需要更多外接式附件 CD 或服务包 CD，且可能需要将这些 CD 添加为额外的储存库。要通过 OpenSLP 在网络中就安装服务器发布通告，请激活相应的选项。
     </para>
     <tip>
      <para>
       如果您的网络设置支持此选项，请考虑通过 OpenSLP 发布储存库通告。这样就无需在每台目标计算机上输入网络安装路径。将使用 SLP 引导选项引导这些目标系统，并且无需进一步的配置就可以找到网络储存库。有关该选项的详细信息，请参见<xref linkend="sec-deployment-remoteinst-bootinst"/>。
      </para>
     </tip>
    </step>
    <step>
     <para>
      上载安装数据。配置安装服务器过程中最耗时的一步是复制实际的安装媒体。按 YaST 要求的顺序插入媒体，然后等待复制过程结束。当储存库完全复制完毕后，选择<guimenu>完成</guimenu>返回到现有储存库的概述并关闭配置。
     </para>
     <para>
      现在您的安装服务器就已完全配置好并准备提供服务了。它将在每次系统启动时自动启动。不需要执行额外操作。如果您在最初的步骤中使用 YaST 取消了所选网络服务的自动配置，则只需正确地手工配置和启动该服务即可。
     </para>
    </step>
   </procedure>
   <para>
    要停用储存库，可以选择要删除的储存库，然后选择<guimenu>删除</guimenu>。安装数据将从系统删除。要取消对网络服务的激活，请使用相应的 YaST 模块。
   </para>
   <para>
    如果您的安装服务器需要提供用于相同版本的多个产品的安装数据，请启动 YaST 安装服务器模块并在现有储存库的概述中选择<guimenu>添加</guimenu>，以便配置新的储存库。
   </para>
  </section>

  <section xml:id="sec-deployment-remoteinst-instserver-nfs">
   <title>手动设置 NFS 储存库</title>
   
   <para>
    设置 NDS 安装源大致分为两步执行。第一步：创建存放安装数据的目录结构，然后将安装媒体全部复制到该结构中。第二步：将存放安装数据的目录导出到网络。
   </para>
   <para>
    要创建存放安装数据的目录，请执行如下操作：
   </para>
   <procedure xml:id="proc-deployment-remoteinst-instserver-nfs-cdir">
    <step>
     <para>
      以 <systemitem class="username">root</systemitem> 身份登录。
     </para>
    </step>
    <step>
     <para>
      创建稍后用于存放所有安装数据的目录，然后切换到该目录。例如：
     </para>
<screen>mkdir install/<replaceable>product</replaceable>/<replaceable>productversion</replaceable>
cd install/<replaceable>product</replaceable>/<replaceable>productversion</replaceable></screen>
     <para>
      将 <replaceable>product</replaceable> 替换为产品名称的缩写，将 <replaceable>productversion</replaceable> 替换为包含该产品名称和版本的字符串。
     </para>
    </step>
    <step>
     <para>
      对媒体包中的每张 DVD，执行以下命令：
     </para>
     <substeps performance="required">
      <step>
       <para>
        将安装 DVD 的所有内容复制到安装服务器目录中：
       </para>
<screen>cp -a /media/<replaceable>path_to_your_DVD_drive .</replaceable></screen>
       <para>
        将 <replaceable>path_to_your_DVD_drive</replaceable> 替换为 DVD 驱动器所在的实际路径。该路径可以是 <filename>cdrom</filename>、<filename>cdrecorder</filename>、<filename>dvd</filename> 或 <filename>dvdrecorder</filename>，这取决于系统中使用的驱动器类型。
       </para>
      </step>
      <step>
       <para>
        将目录重命名为 DVD 编号：
       </para>
<screen>mv <replaceable>path_to_your_DVD_drive</replaceable> DVD<replaceable>x</replaceable></screen>
       <para>
        将其中的 <replaceable>x</replaceable> 替换您 DVD 的实际编号。
       </para>
      </step>
     </substeps>
    </step>
   </procedure>
   <para>
    在 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 上，可以使用 YaST 通过 NFS 导出储存库。按如下所示继续：
   </para>
   <procedure xml:id="proc-deployment-remoteinst-instserver-nfs-export">
    <step>
     <para>
      以 <systemitem class="username">root</systemitem> 身份登录。
     </para>
    </step>
    <step>
     <para>
      启动 <menuchoice><guimenu>YaST</guimenu> <guimenu>网络服务</guimenu> <guimenu>NFS 服务器</guimenu></menuchoice>。
     </para>
    </step>
    <step>
     <para>
      选择<guimenu>启动</guimenu>和<guimenu>打开防火墙中的端口</guimenu>，然后单击<guimenu>下一步</guimenu>。
     </para>
    </step>
    <step>
     <para>
      选择<guimenu>添加目录</guimenu>并浏览含有安装源的目录，此情况下指 <filename><replaceable>productversion</replaceable></filename>。
     </para>
    </step>
    <step>
     <para>
      选择<guimenu>添加主机</guimenu>，然后输入用于存放导出的安装数据的计算机的主机名。除了在此处指定主机名之外，还可以使用通配符、网络地址范围或只用网络的域名。输入合适的导出选项或保留默认值，在大多数设置中默认值可有效工作。关于在导出 NFS 共享中使用的语法的更多信息，请阅读<systemitem>导出</systemitem>手册页。
     </para>
    </step>
    <step>
     <para>
      单击<guimenu>完成</guimenu>。存放 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 储存库的 NFS 服务器将自动启动并集成到引导过程中。
     </para>
    </step>
   </procedure>
   <para>
    如果您希望通过 NFS 手动导出储存库，而不使用 YaST NFS 服务器模块，请执行如下操作：
   </para>
   <procedure xml:id="proc-deployment-remoteinst-instserver-nfs-exportman">
    <step>
     <para>
      以 <systemitem class="username">root</systemitem> 身份登录。
     </para>
    </step>
    <step>
     <para>
      打开文件 <filename>/etc/exports</filename>，然后输入以下行：
     </para>
<screen>/<replaceable>productversion</replaceable> *(ro,root_squash,sync)</screen>
     <para>
      这将把目录 <filename>/<replaceable>productversion</replaceable></filename> 导出到该网络中的任意主机或能够连接到该服务器的任意主机。为了限制对该服务器的访问，请使用网络掩码或域名取代常规通配符 <literal>*</literal>。请参见<systemitem>导出</systemitem>手册页获取详细信息。保存并退出该配置文件。
     </para>
    </step>
    <step>
     <para>
      要将 NFS 服务添加到系统引导期间已启动的服务器的列表中，请执行以下命令：
     </para>
<screen>insserv /etc/init.d/nfsserver</screen>
    </step>
    <step>
     <para>
      使用 <command>rcnfsserver start</command> 启动 NFS。如果需要在以后更改 NFS 服务器的配置，请修改配置文件，然后通过 <command>rcnfsserver restart</command> 命令重启动 NFS 守护程序。
     </para>
    </step>
   </procedure>
   <para>
    通过 OpenSLP 就该 NFS 服务器发布通告，可使网络中的所有客户端都获知其地址。
   </para>
   <procedure xml:id="proc-deployment-remoteinst-instserver-nfs-slpann">
    <step>
     <para>
      以 <systemitem class="username">root</systemitem> 身份登录。
     </para>
    </step>
    <step>
     <para>
      使用以下命令行创建 <filename>/etc/slp.reg.d/install.suse.nfs.reg</filename> 配置文件：
     </para>
<screen><?dbsuse-fo font-size="7pt"?>

# Register the NFS Installation Server
service:install.suse:nfs://$HOSTNAME/<replaceable>path_to_repository</replaceable>/DVD1,en,65535 
description=NFS Repository</screen>
     <para>
      将 <replaceable>path_to_repository</replaceable> 替换为服务器上的安装源的实际路径。
     </para>
    </step>
    <step>
     <para>
      使用 <command>rcslpd start</command> 启动 OpenSLP 守护程序。
     </para>
    </step>
   </procedure>
   <para>
    关于 OpenSLP 的更多信息，请参见位于 <filename>/usr/share/doc/packages/openslp/</filename> 下的包文档，或参见<xref linkend="cha-slp"/>。有关 NFS 的更多信息，请参见<xref linkend="cha-nfs"/>。
   </para>
  </section>

  <section xml:id="sec-deployment-remoteinst-instserver-ftp">
   <title>手动设置 FTP 储存库</title>
   <para>
    创建 FTP 储存库的方式与创建 NFS 储存库非常类似。也可以通过 OpenSLP 在整个网络上发布 FTP 储存库通告。
   </para>
   <procedure xml:id="proc-deployment-remoteinst-instserver-ftp">
    <step>
     <para>
      按<xref linkend="sec-deployment-remoteinst-instserver-nfs"/>中所述创建存放安装源的目录。
     </para>
    </step>
    <step>
     <para>
      配置 FTP 服务器以分发安装目录的内容：
     </para>
     <substeps performance="required">
      <step>
       <para>
        以 <systemitem class="username">root</systemitem> 身份登录，然后使用 YaST 软件管理功能安装 <systemitem>vsftpd</systemitem> 包。
       </para>
      </step>
      <step>
       <para>
        输入 FTP 服务器 root 目录：
       </para>
<screen>cd <option>/srv/ftp</option></screen>
      </step>
      <step>
       <para>
        在 FTP root 目录中创建存放安装源的子目录：
       </para>
<screen>mkdir <replaceable>repository</replaceable></screen>
       <para>
        将 <replaceable>repository</replaceable> 替换为产品名称。
       </para>
      </step>
      <step>
       <para>
        将已经存在的储存库的内容装入该 FTP 服务器的更改 root 目录环境中。
       </para>
<screen>mount --bind <replaceable>path_to_repository</replaceable> /srv/ftp/<replaceable>repository</replaceable></screen>
       <para>
        将 <replaceable>path_to_repository</replaceable> 和 <replaceable>repository</replaceable> 替换为符合您设置的值。如果需要将其永久保留，请将其添加到 <filename>/etc/fstab</filename>。
       </para>
      </step>
      <step>
       <para>
        通过 <command>vsftpd</command> 启动 vsftpd。
       </para>
      </step>
     </substeps>
    </step>
    <step>
     <para>
      通过 OpenSLP 发布储存库通告（如果网络设置支持此操作）：
     </para>
     <substeps performance="required">
      <step>
       <para>
        使用以下命令行创建 <filename>/etc/slp.reg.d/install.suse.ftp.reg</filename> 配置文件：
       </para>
<screen><?dbsuse-fo font-size="7pt"?>

# Register the FTP Installation Server
service:install.suse:ftp://$HOSTNAME/<replaceable>repository</replaceable>/DVD1,en,65535 
description=FTP Repository</screen>
       <para>
        将 <replaceable>repository</replaceable> 替换为服务器上的储存库目录的实际名称。<literal>service:</literal> 行应作为一个连续无中断的行输入。
       </para>
      </step>
      <step>
       <para>
        使用 <command>rcslpd start</command> 启动 OpenSLP 守护程序。
       </para>
      </step>
     </substeps>
    </step>
   </procedure>
   <tip os="sles;osuse">
    <title>使用 YaST 配置 FTP 服务器</title>
    <para>
     如果您更倾向于通过手动配置 FTP 安装服务器来使用 YaST，请参见<xref linkend="cha-ftp"/>了解有关如何使用 YaST FTP 服务器模块的更多信息。
    </para>
   </tip>
  </section>

  <section xml:id="sec-deployment-remoteinst-instserver-http">
   <title>手动设置 HTTP 储存库</title>
   <para>
    创建 HTTP 储存库的方式与创建 NFS 储存库非常类似。也可以通过 OpenSLP 在整个网络上发布 HTTP 储存库通告。
   </para>
   <procedure xml:id="proc-deployment-remoteinst-instserver-http">
    <step>
     <para>
      按<xref linkend="sec-deployment-remoteinst-instserver-nfs"/>中所述创建存放储存库的目录。
     </para>
    </step>
    <step>
     <para>
      配置 HTTP 服务器以分发安装目录的内容：
     </para>
     <substeps performance="required">
      <step>
       <para>
        <phrase os="sles;osuse">如<xref linkend="sec-apache2-quickstart-installation"/>所述安装 Web 服务器 Apache。</phrase>
       </para>
      </step>
      <step>
       <para>
        进入 HTTP 服务器的 root 目录 (<filename>/srv/www/htdocs</filename>) 并创建用于存放安装源的子目录：
       </para>
<screen>mkdir <replaceable>repository</replaceable></screen>
       <para>
        将 <replaceable>repository</replaceable> 替换为产品名称。
       </para>
      </step>
      <step>
       <para>
        创建一个从安装源位置到 Web 服务器 root 目录（<filename>/srv/www/htdocs</filename>）的符号链接：
       </para>
<screen>ln -s <replaceable>/path_to_repository </replaceable>/srv/www/htdocs/<replaceable>repository</replaceable></screen>
      </step>
      <step>
       <para>
        修改 HTTP 服务器的配置文件（<filename>/etc/apache2/default-server.conf</filename>），使其遵循符号链接。替换以下行：
       </para>
<screen>Options None</screen>
       <para>
        使用
       </para>
<screen>Options Indexes FollowSymLinks</screen>
      </step>
      <step>
       <para>
        使用 <command>rcapache2 reload</command> 重装载 HTTP 服务器配置。
       </para>
      </step>
     </substeps>
    </step>
    <step>
     <para>
      通过 OpenSLP 发布储存库通告（如果网络设置支持此操作）：
     </para>
     <substeps performance="required">
      <step>
       <para>
        使用以下命令行创建 <filename>/etc/slp.reg.d/install.suse.http.reg</filename> 配置文件：
       </para>
<screen><?dbsuse-fo font-size="6.5pt"?>

# Register the HTTP Installation Server
service:install.suse:http://$HOSTNAME/<replaceable>repository</replaceable>/DVD1/,en,65535 
description=HTTP Repository</screen>
       <para>
        将 <replaceable>repository</replaceable> 替换为服务器上的储存库的实际路径。<literal>service:</literal> 行应作为一个连续无中断的行输入。
       </para>
      </step>
      <step>
       <para>
        使用 <command>rcslpd restart</command> 启动 OpenSLP 守护程序。
       </para>
      </step>
     </substeps>
    </step>
   </procedure>
  </section>

  <section xml:id="sec-deployment-remoteinst-instserver-smb">
   <title>管理 SMB 储存库</title>
   <para>
    通过使用 SMB，您可以从 Microsoft Windows 服务器导入储存库，甚至可以在周围没有 Linux 计算机的情况下开始 Linux 部署。
   </para>
   <para>
    要设置存放 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 储存库的导出 Windows 共享，请执行以下操作：
   </para>
   <procedure xml:id="proc-deployment-remoteinst-instserver-smb-export">
    <step>
     <para>
      登录到 Windows 计算机。
     </para>
    </step>
    <step>
     <para>
      新建一个用于存放整个安装树的文件夹，并将其指定为诸如 <filename>INSTALL</filename> 的名称。
     </para>
    </step>
    <step>
     <para>
      根据 Windows 文档中所述的过程导入此共享。
     </para>
    </step>
    <step>
     <para>
      输入此共享，创建名为 <filename><replaceable>product </replaceable></filename> 的子文件夹。请将 <replaceable>product</replaceable> 替换为实际产品名。
     </para>
    </step>
    <step>
     <para>
      输入 <filename>INSTALL/<replaceable>product</replaceable></filename> 文件夹，并将每张 DVD 复制到独立的文件夹，比如 <literal>DVD1</literal> 和 <literal>DVD2</literal>。
     </para>
    </step>
   </procedure>
   <para>
    要将 SMB 装入共享用作储存库，请执行如下操作：
   </para>
   <procedure xml:id="proc-deployment-remoteinst-instserver-smb-use">
    <step>
     <para>
      引导安装目标。
     </para>
    </step>
    <step>
     <para>
      选择<guimenu>安装</guimenu>：
     </para>
    </step>
    <step>
     <para>
      按 <keycap>F4</keycap> 选择储存库。
     </para>
    </step>
    <step>
     <para>
      选择 SMB，然后输入 Windows 计算机的名称或 IP 地址、共享名（在本例中为 <filename>INSTALL/<replaceable>product</replaceable>/DVD1</filename>）、用户名和口令。语法类似于下列形式：
     </para>
<screen>smb://workdomain;user:password@server/INSTALL/DVD1</screen>
     <para>
      按 <keycap function="enter">Enter</keycap> 键，YaST 将启动，然后您就可以执行安装了。
     </para>
    </step>
   </procedure>
  </section>

  <section xml:id="sec-deployment-remoteinst-iso">
   <title>使用服务器上安装媒体的 ISO 映像</title>
   <para>
    您不用将物理媒体手动复制到服务器目录下，而是可以将安装媒体的 ISO 映像装入安装服务器中并将它们用作储存库。要设置使用 ISO 映像，而不是媒体副本的 HTTP、NFS 或 FTP 服务器，请执行以下操作：
   </para>
<?dbfo-need height="10em"?>


   <procedure>
    <step>
     <para>
      下载 ISO 映像并将它们保存到用作安装服务器的计算机上。
     </para>
    </step>
    <step>
     <para>
      以 <systemitem class="username">root</systemitem> 身份登录。
     </para>
    </step>
    <step>
     <para>
      按照<xref linkend="sec-deployment-remoteinst-instserver-nfs"/>、<xref linkend="sec-deployment-remoteinst-instserver-ftp"/>或<xref linkend="sec-deployment-remoteinst-instserver-http"/>中的描述，选择并创建安装数据的合适位置。
     </para>
    </step>
    <step>
     <para>
      创建对应于每个 DVD 的子目录。
     </para>
    </step>
    <step>
     <para>
      要将各个 ISO 映像安装和解开到最终位置，请发出以下命令：
     </para>
<screen>mount -o loop <replaceable>path_to_iso</replaceable><replaceable>path_to_repository</replaceable>/<replaceable>product</replaceable>/<replaceable>mediumx</replaceable></screen>
     <para>
      将 <replaceable>path_to_iso</replaceable> 替换为 ISO 映像本地副本的路径，将 <replaceable>path_to_repository</replaceable> 替换为服务器的目录，将 <replaceable>product</replaceable> 替换为产品名称以及将 <replaceable>mediumx</replaceable> 替换为您正使用的媒体类型（CD 或 DVD）和编号。
     </para>
    </step>
    <step>
     <para>
      多次重复上述步骤，以安装产品所需的全部 ISO 映像。
     </para>
    </step>
    <step>
     <para>
      按照<xref linkend="sec-deployment-remoteinst-instserver-nfs"/>、<xref linkend="sec-deployment-remoteinst-instserver-ftp"/>或<xref linkend="sec-deployment-remoteinst-instserver-http"/>中的描述，与往常一样启动安装服务器。
     </para>
    </step>
   </procedure>
   <para>
    要在引导时自动装入各 ISO 映像，请将各自的装入项添加到 <filename>/etc/fstab</filename> 中。依照上一示例的项显示如下：
   </para>
<screen><replaceable>path_to_iso</replaceable> <replaceable>path_to_repository</replaceable>/<replaceable>product</replaceable><replaceable>medium</replaceable> auto loop</screen>
  </section>
 </section>
 <section xml:id="sec-deployment-remoteinst-boot">
  <title>准备目标系统的引导</title>

  <para>
   此部分讨论复杂引导场景中需要的配置任务。其中包含了 DHCP、PXE 引导、TFTP 和网络唤醒的“准备应用”配置示例。
  </para>

  <section xml:id="sec-deployment-remoteinst-boot-dhcp">
   <title>设置 DHCP 服务</title>
   <para>
    有两种方法设置 DHCP 服务器。YaST 为 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 提供了图形界面用于完成该过程。用户也可以手动编辑配置文件。<phrase os="osuse;sles">关于 DHCP 服务器的更多信息，另请参见<xref linkend="cha-dhcp"/>。</phrase>
   </para>

   <section xml:id="sec-deployment-remoteinst-boot-dhcp-yast">
    <title>用 YaST 设置 DHCP 服务器</title>
    <para>
     要宣布到网络用户机的 TFTP 服务器位置并指定安装目标应该使用的引导映像文件，请向 DHCP 服务器配置添加两个声明。
    </para>
<?dbfo-need height="10em"?>


    <procedure xml:id="proc-deployment-remoteinst-boot-dhcp-yast">
     <step>
      <para>
       以 <systemitem class="username">root</systemitem> 登录到主管 DHCP 服务器的计算机。
      </para>
     </step>
     
     <step>
      <para>
       启动 <menuchoice><guimenu>YaST</guimenu> <guimenu>网络服务</guimenu> <guimenu>DHCP 服务器</guimenu></menuchoice>。
      </para>
     </step>
     <step>
      <para>
       完成基本 DHCP 服务器安装的安装向导。
      </para>
     </step>
     <step xml:id="st-deployment-remoteinst-boot-dhcp-yast-expert">
      <para>
       当遇到退出启动对话框的警告时，选择<guimenu>专家设置</guimenu>并选择<guimenu>是</guimenu>。
      </para>
     </step>
     <step>
      <para>
       在<guimenu>配置声明</guimenu>对话框中，选择新系统所在的子网并单击<guimenu>编辑</guimenu>。
      </para>
     </step>
     <step>
      <para>
       在<guimenu>子网配置</guimenu>对话框中，选择<guimenu>添加</guimenu>来向子网配置添加新选项。
      </para>
     </step>
     <step>
      <para>
       选择 <option>filename</option> 并输入 <literal>pxelinux.0</literal> 作为值。
      </para>
     </step>
     <step>
      <para>
       添加另一选项 (<option>next-server</option>) 并设置 TFTP 服务器地址的值。
      </para>
     </step>
     <step>
      <para>
       选择<guimenu>确定</guimenu>和<guimenu>完成</guimenu>以完成 DHCP 服务器配置。
      </para>
     </step>
    </procedure>
    <para>
     要配置 DHCP 以向特定主机提供静态 IP 地址，请输入 DHCP 服务器配置模块（<guimenu>）的</guimenu>专家设置<xref linkend="st-deployment-remoteinst-boot-dhcp-yast-expert" xrefstyle="StepOnPage"/>并添加主机类型的新声明。将选项 <option>hardware</option> 和 <option>fixed-address</option> 添加到此主机声明并提供适当的值。
    </para>
   </section>
   <section xml:id="sec-deployment-remoteinst-boot-dhcp-man">
    <title>手动设置 DHCP 服务器</title>
    <para>
     除了向网络客户端提供自动地址分配外，所有 DHCP 服务器还需要就 TFTP 服务器 IP 地址和需要由目标计算机上的安装例程导入的文件发布通告。
    </para>
    <procedure xml:id="proc-deployment-remoteinst-boot-dhcp-man">
     <step>
      <para>
       以 <systemitem class="username">root</systemitem> 登录到主管 DHCP 服务器的计算机。
      </para>
     </step>
     <step>
      <para>
       向位于 <filename>/etc/dhcpd.conf</filename> 的 DHCP 服务器配置文件中的子网配置追加以下几行：
      </para>
<screen>subnet 192.168.1.0 netmask 255.255.255.0 { 
  range dynamic-bootp 192.168.1.200 192.168.1.228;
  # PXE related stuff 
  # 
  # "next-server" defines the TFTP server that will be used 
  next-server <replaceable>ip_tftp_server</replaceable>; 
  #
  # "filename" specifies the pxelinux image on the TFTP server
  # the server runs in chroot under /srv/tftpboot 
  filename  "pxelinux.0";
}</screen>
      <para>
       将 <replaceable>ip_of_the_tftp_server</replaceable> 替换为 TFTP 服务器的实际 IP 地址。关于 <filename>dhcpd.conf</filename> 中可用选项的更多信息，请参见 <systemitem>dhcpd.conf</systemitem> 手册页。
      </para>
     </step>
     <step>
      <para>
       执行 <command>rcdhcpd restart</command> 重启动 DHCP 服务器。
      </para>
     </step>
    </procedure>
    <para>
     如果打算或正在将 SSH 用于 PXE 和网络唤醒安装的远程控制，请专门指定 DHCP 应提供给安装目标的 IP 地址。要实现此设置，请根据以下示例修改上述的 DHCP 配置：
    </para>
<screen>group { 
  # PXE related stuff 
  # 
  # "next-server" defines the TFTP server that will be used 
  next-server <replaceable>ip_tftp_server</replaceable>:
  # 
  # "filename" specifies the pxelinux image on the TFTP server 
  # the server runs in chroot under /srv/tftpboot
  filename "pxelinux.0";
  host test {
    hardware ethernet <replaceable>mac_address</replaceable>; 
    fixed-address <replaceable>some_ip_address</replaceable>;
    }
}
</screen>
    <para>
     host 语句引入了安装目标的主机名。要将主机名和 IP 地址与特定主机绑定，则必须了解系统的硬件 (NAC) 地址并指定它。请将本例中使用的所有变量替换为符合您环境的实际值。
    </para>
    <para>
     在重启动 DHCP 服务器之后，它将向所指定的主机提供一个静态 IP，从而使您能够通过 SSH 连接到该系统。
    </para>
   </section>
  </section>

  <section xml:id="sec-deployment-remoteinst-boot-tftp">
   <title>设置 TFTP 服务器</title>
   <para>
    使用 YaST 在 <phrase os="sled;sles">SUSE Linux Enterprise Server 和 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase></phrase> 上设置 TFTP 服务器，或者在任何其他支持 xinetd 和 TFTP 的 Linux 操作系统上手动设置 TFTP 服务器。一旦目标系统成功引导并发出请求，FTP 服务器就会将引导映像发送到该目标系统。
   </para>
   <section xml:id="sec-deployment-remoteinst-boot-tftp-yast">
    <title>使用 YaST 设置 TFTP 服务器</title>
    <procedure xml:id="proc-deployment-remoteinst-boot-tftp-yast">
     <step>
      <para>
       以 <systemitem class="username">root</systemitem> 身份登录。
      </para>
     </step>
     
     <step>
      <para>
       启动 <menuchoice><guimenu>YaST</guimenu><guimenu>网络服务</guimenu><guimenu>TFTP 服务器</guimenu></menuchoice>，并安装请求的包。
      </para>
     </step>
     <step>
      <para>
       单击<guimenu>启用</guimenu>以确保服务器启动并包含在引导例程中。之后您就无需为此再进行任何操作。xinetd 将在引导时启动。
      </para>
     </step>
     <step>
      <para>
       单击<guimenu>打开防火墙中的端口</guimenu>以在您计算机上运行的防火墙中打开相应的端口。如果您的服务器上未运行任何防火墙，则该选项不可用。
      </para>
     </step>
     <step>
      <para>
       单击<guimenu>浏览</guimenu>以查找引导映像目录。默认目录 <filename>/tftpboot</filename> 是自动创建并选定的。
      </para>
     </step>
     <step>
      <para>
       单击<guimenu>完成</guimenu>以应用设置并启动服务器。
      </para>
     </step>
    </procedure>
   </section>
   <section xml:id="sec-deployment-remoteinst-boot-tftp-man">
    <title>手动设置 TFTP 服务器</title>
    <procedure xml:id="proc-deployment-remoteinst-boot-tftp-man">
     <step>
      <para>
       以 <systemitem class="username">root</systemitem> 登录，然后安装 <systemitem>tftp</systemitem> 包和 <systemitem>xinetd</systemitem> 包。
      </para>
     </step>
     <step>
      <para>
       如果这两个包不可用，请创建 <filename>/srv/tftpboot</filename> 目录和 <filename>/srv/tftpboot/pxelinux.cfg</filename> 目录。
      </para>
     </step>
     <step>
      <para>
       按<xref linkend="sec-deployment-remoteinst-boot-pxe"/>中所述添加引导映像所需的相应文件。
      </para>
     </step>
     <step>
      <para>
       修改位于 <filename>/etc/xinetd.d</filename> 下的 xinetd 的配置，以确保 TFTP 服务器在引导时启动：
      </para>
      <substeps performance="required">
       <step>
        <para>
         如果该配置文件不存在，请使用 <filename>touch tftp</filename> 命令在该目录下创建一个名为 <command>tftp</command> 的文件。然后运行 <command>chmod 755 tftp</command>。
        </para>
       </step>
       <step>
        <para>
         打开文件 <filename>tftp</filename>，添加以下几行：
        </para>
<screen>service tftp 
{ 
        socket_type            = dgram
        protocol               = udp 
        wait                   = yes 
        user                   = root 
        server                 = /usr/sbin/in.tftpd 
        server_args            = -s /srv/tftpboot 
        disable                = no 
}
</screen>
       </step>
       <step>
        <para>
         保存该文件，然后使用 <command>rcxinetd restart</command> 命令重启动 xinetd。
        </para>
       </step>
      </substeps>
     </step>
    </procedure>
   </section>
  </section>

  <section xml:id="sec-deployment-remoteinst-boot-pxe">
   <title>使用 PXE 引导</title>
   <para>
    在 Preboot Execution Environment (PXE) Specification(<link xlink:href="http://www.pix.net/software/pxeboot/archive/pxespec.pdf"/>) 中可获取一些技术背景信息以及 PXE 的完整规范。
   </para>
   <procedure xml:id="proc-deployment-remoteinst-boot-pxe">
    <step>
     <para>
      切换到储存库所在目录 <filename>boot/&lt;architecture&gt;/loader</filename>，然后输入以下命令将 <filename>linux</filename>、<filename>initrd</filename>、<filename>message</filename>、<filename>biostest</filename> 和 <filename>memtest</filename> 文件复制到 <filename>/srv/tftpboot</filename> 目录：
     </para>
<screen>cp -a linux initrd message biostest memtest /srv/tftpboot</screen>
    </step>
    <step>
     <para>
      通过 YaST 直接从安装 DVD 安装 <systemitem>syslinux</systemitem> 包。
     </para>
    </step>
    <step>
     <para>
      输入以下命令来将 <filename>/usr/share/syslinux/pxelinux.0</filename> 文件复制到 <filename>/srv/tftpboot</filename> 目录中：
     </para>
<screen>cp -a /usr/share/syslinux/pxelinux.0 /srv/tftpboot
     </screen>
    </step>
    <step>
     <para>
      切换到储存库所在目录，然后输入以下命令，将 <filename>isolinux.cfg</filename> 文件复制到 <filename>/srv/tftpboot/pxelinux.cfg/default</filename>：
     </para>
<screen>cp -a boot/&lt;architecture&gt;/loader/isolinux.cfg /srv/tftpboot/pxelinux.cfg/default
     </screen>
    </step>
    <step>
     <para>
      编辑 <filename>/srv/tftpboot/pxelinux.cfg/default</filename> 文件，并删除以 <literal>readinfo</literal> 和 <literal>framebuffer</literal> 开头的行。
     </para>
    </step>
    <step>
     <para>

      在默认的 <option>failsafe</option> 和 <option>apic</option> 标签的追加行中插入以下条目：
     </para>
     <variablelist>
      <varlistentry>
       <term><option>insmod=<replaceable>kernel module</replaceable></option>
       </term>
       <listitem>
        <para>
         通过此命令项，输入所需的网络内核模块以支持 PXE 客户端上的网络安装。用您的网络设备的适当模块名替代 <replaceable>kernel module</replaceable>。
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><option>netdevice=<replaceable>interface</replaceable></option>
       </term>
       <listitem>
        <para>
         此条目定义了必须用于网络安装的客户端网络接口。它只在客户端配备了多块网卡的情况下才需要，且必须根据具体情况采用相应的值。如果客户端安装了一块网卡，则该条目可以省略。
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>
<option>install=nfs://<replaceable>ip_instserver</replaceable>/<replaceable>path_to_repository</replaceable>/DVD1</option>
       </term>
       <listitem>
        <para>
         该条目定义了用于客户端安装的 NFS 服务器和储存库。将 <replaceable>ip_instserver</replaceable> 替换为安装服务器的实际 IP 地址。<replaceable>path_to_repository</replaceable> 应替换为储存库的实际路径。对于 HTTP、FTP 或 SMB 储存库，除了应将协议前缀分别替换为 <literal>http</literal>、<literal>ftp</literal> 或 <literal>smb</literal>，其他操作都是相似的。
        </para>
        <important>
         <para>
          如果需要向安装例程指定其他引导选项，如 SSH 或 VNC 引导参数，请将它们追加到 <option>install</option> 条目中。在 <xref linkend="sec-deployment-remoteinst-bootinst"/> 提供了参数的概述和一些例子。
         </para>
        </important>
       </listitem>
      </varlistentry>
     </variablelist>
     <tip>
      <title>更改内核和 initrd 文件名</title>
      <para>
       可以对内核和 initrd 映像使用不同文件名。如果要从同一引导服务器提供不同操作系统，则此功能非常有用。但是，应注意 TFTP 提供的用于 PXE 引导的文件名中仅允许使用一个点。
      </para>
     </tip>
     <para>
      以下是一个 <option>/srv/tftpboot/pxelinux.cfg/default</option> 文件示例。请根据自己的网络设置调整储存库的协议前缀，并通过向 <literal>install</literal> 条目添加 <literal>vnc</literal> 和 <literal>vncpassword</literal> 选项，或者添加 <literal>usessh</literal> 和 <literal>sshpassword</literal> 选项来指定要用于连接到安装程序的首选方法。由 <literal>\</literal> 分隔的多个行必须分别作为一个连续的行输入，其中不能有换行符，也不能有 <literal>\</literal>。
     </para>
<screen os="sles;sled">default hard disk 
        
# default
label linux 
  kernel linux 
  append initrd=initrd ramdisk_size=65536 \
     install=nfs://<replaceable>ip_instserver</replaceable>/<replaceable>path_to_repository</replaceable>/<replaceable>product</replaceable>/DVD1 
	    
# repair
label repair
  kernel linux
  append initrd=initrd splash=silent repair=1 showopts

# rescue 
label rescue 
  kernel linux 
  append initrd=initrd ramdisk_size=65536 rescue=1 

# bios test
label firmware
  kernel linux
  append initrd=biostest,initrd splash=silent install=exec:/bin/run_biostest showopts

#  memory test 
label memtest 
  kernel memtest 

#  hard disk 
label hard disk
  localboot 0

implicit     0 
display      message
prompt       1 
timeout      100</screen>

    </step>
    <step>
     <para>
      将 <replaceable>ip_instserver</replaceable> 和 <replaceable>path_to_repository</replaceable> 替换为您安装中使用的值。
     </para>
     <para>
      以下一节简要介绍了在此设置中使用的 PXELINUX 选项。关于可用选项的更多信息，在位于 <filename>/usr/share/doc/packages/syslinux/</filename> 下的 <systemitem>syslinux</systemitem> 包中。
     </para>
    </step>
   </procedure>
  </section>

  <section xml:id="sec-deployment-remoteinst-boot-pxeopts">
   <title>PXELINUX 配置选项</title>
   <para>
    此处列出的选项是 PXELINUX 配置文件中所有可用选项中的一部分。
   </para>
   <variablelist>
    <varlistentry>
     <term><option>APPEND <replaceable>options... </replaceable></option>
     </term>
     <listitem>
      <para>
       用于向内核命令行添加一个或多个选项。添加的这些选项对自动引导和手动引导都适用。这些选项添加在内核命令行的最前面，通常允许用显式输入的内核选项覆盖它们。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><option>APPEND -</option>
     </term>
     <listitem>
      <para>
       表示不追加任何内容。在 <option>LABEL</option> 段中用一个连字符作为参数的 <option>APPEND</option> 可用于覆盖全局 <option>APPEND</option>。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><option>DEFAULT <replaceable>kernel options</replaceable>...</option>
     </term>
     <listitem>
      <para>
       用于设置默认内核命令行。如果 PXELINUX 自动引导，则该选项的作用相当于已在引导提示符处输入了在 DEFAULT 后输入的所有内容（表示自动引导的 auto 选项除外，它是自动添加的）。
      </para>
      <para>
       如果不存在配置文件或配置文件中没有 DEFAULT 项，则默认为内核名称<quote>linux</quote>且不带任何选项。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>

     <term><option>IFAPPEND <replaceable>标志</replaceable></option>
     </term>
     <listitem>
      <para>
       根据<replaceable>标志</replaceable>值将特定项添加到内核命令行。只有 PXELINUX 提供 <option>IFAPPEND</option> 项。<replaceable>标志</replaceable>需赋一个值，具体如<xref linkend="tab-deployment-boot-pxeopts-ifappend"/>所述：
      </para>
      <table xml:id="tab-deployment-boot-pxeopts-ifappend">
       <title>从 <option>IFAPPEND</option> 中生成并添加内核命令行选项。</title>
       <tgroup cols="2">
        <colspec colwidth="1*"/>
        <colspec colwidth="4*"/>
        <thead>
         <row>
          <entry valign="middle">
           <para>
            自变量
           </para>
          </entry>
          <entry>
           <para>
            生成内核命令行/说明
           </para>
          </entry>
         </row>
        </thead>
        <tbody>
         <row>
          <entry>
           <para>
            <option>1</option>
           </para>
          </entry>
          <entry>
<screen>ip=<replaceable>CLIENT_IP</replaceable>:<replaceable>BOOT_SERVER_IP</replaceable>:<replaceable>GW_IP</replaceable>:<replaceable>NETMASK</replaceable></screen>
           <para>
            根据从 DHCP//BOOTP 或 PXE 引导服务器输入的内容替换占位符。
           </para>
           <para>
            注，此选项不可替换为在引导系统中运行 DHCP 客户端。若不定期更新，PXE BIOS 所获得的租用将失效，致使 DHCP 服务器可重新使用该 IP 地址。
           </para>
          </entry>
         </row>
         <row>
          <entry>
           <para>
            <option>2</option>
           </para>
          </entry>
          <entry>
<screen>BOOTIF=<replaceable>MAC_ADDRESS_OF_BOOT_INTERFACE</replaceable></screen>
           <para>
            当安装服务器在探测一个又一个的 LAN 接口直至收到 DHCP 服务器答复时，在这段期间若要有效避免超时现象，可使用该选项。使用此选项可允许 initrd 程序确定从哪个接口引导系统。linuxrc 会读取此选项并使用该网络接口。
           </para>
          </entry>
         </row>
         <row>
          <entry>
           <para>
            <option>4</option>
           </para>
          </entry>
          <entry>
<screen>SYSUUID=<replaceable>SYSTEM_UUID</replaceable></screen>
           <para>
            以小写十六进制添加 UUIDs，具体请参见 <filename>/usr/share/doc/packages/syslinux/pxelinux.txt</filename>
           </para>
          </entry>
         </row>
        </tbody>
       </tgroup>
      </table>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><option>LABEL <replaceable>label</replaceable> KERNEL <replaceable>image</replaceable> APPEND <replaceable>options</replaceable>...</option>
     </term>
     <listitem>
      <para>
       表示如果将<replaceable>标签</replaceable>输入为要引导的内核，则 PXELINUX 将取代引导<replaceable>映像</replaceable>，并且将使用指定的 <option>APPEND</option> 选项代替文件的全局部分中指定的选项（在首个 <option>LABEL</option> 命令之前）。<replaceable>image</replaceable> 的默认值与 <replaceable>label</replaceable> 的相同，如果未指定 <option>APPEND</option>，则默认情况下使用全局条目（如果有）。最多允许 128 个 <option>LABEL</option> 条目。
      </para>
      <para>
       请注意 GRUB 使用以下语法：
      </para>
<screen>title mytitle 
  kernel <replaceable>my_kernel</replaceable><replaceable>my_kernel_options</replaceable> 
  initrd <replaceable>myinitrd</replaceable></screen>
<?dbfo-need height="10em"?>


      <para>
       PXELINUX 使用以下语法：
      </para>
<screen>label <replaceable>mylabel</replaceable> 
  kernel <replaceable>mykernel</replaceable> 
  append <replaceable>myoptions</replaceable></screen>
      <para>
       
       标签的数据报处理如同文件名一样，且在数据报处理之后，它们必定是唯一的。例如，<quote>v2.6.30</quote> 和 <quote>v2.6.31</quote> 这两个标签在 PXELINUX 下是无法区分的，因为它们在数据报处理之后成为同一个 DOS 文件名。
      </para>
      <para>
       内核不必是 Linux 内核，它可以是引导扇区或 COMBOOT 文件。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><option>LOCALBOOT <replaceable>type</replaceable></option>
     </term>
     <listitem>
      <para>
       在 PXELINUX 上，指定 <option>LOCALBOOT 0</option> 而非 <option>KERNEL</option> 选项表示调用该特定标签，这样就会从本地磁盘引导而不是从内核引导。
      </para>
      <informaltable frame="topbot" rowsep="0">
       <tgroup cols="2">

        <thead>
         <row>
          <entry colname="1">
           <para>
            自变量
           </para>
          </entry>
          <entry colname="2">
           <para>
            描述
           </para>
          </entry>
         </row>
        </thead>
        <tbody>
         <row>
          <entry colname="1">
           <para>
            <literal>0</literal>
           </para>
          </entry>
          <entry colname="2">
           <para>
            执行正常引导
           </para>
          </entry>
         </row>
         <row>
          <entry colname="1">
           <para>
            <literal>4</literal>
           </para>
          </entry>
          <entry colname="2">
           <para>
            在“通用网络驱动程序接口”（UNDI）驱动程序仍然驻留在内存中的情况下执行本地引导
           </para>
          </entry>
         </row>
         <row>
          <entry colname="1">
           <para>
            <literal>5</literal>
           </para>
          </entry>
          <entry colname="2">
           <para>
            在整个 PXE 堆栈（包括 UNDI 驱动程序）仍然驻留于内存中的情况下执行本地引导
           </para>
          </entry>
         </row>
        </tbody>
       </tgroup>
      </informaltable>
      <para>
       不定义所有其他的值。如果对 UNDI 或 PXE 堆栈不甚了解，请指定 <literal>0</literal>。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><option>TIMEOUT <replaceable>time-out</replaceable></option>
     </term>
     <listitem>
      <para>
       表示在自动引导之前在引导提示符下等待的时间（以 1/10 秒为单位）。一旦用户按了键盘上的任意键，超时将立即取消（假设从用户完成命令开始）。如果超时值为零，则将完全禁用超时（这也是默认值）。允许的最大超时值为 35996（即小于一小时）。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><option>PROMPT<replaceable> flag_val</replaceable></option>
     </term>
     <listitem>
      <para>
       如果 <option>flag_val</option> 为 0，则仅当按下 <keycap function="shift">Shift</keycap> 或 <keycap function="alt">Alt</keycap> 键，或者在 <keycap>Caps Lock</keycap> 或 <keycap>Scroll Lock</keycap> 状态下，才显示引导提示符（这是默认设置）。如果 <option>flag_val</option> 为 1，则始终显示引导提示符。
      </para>
<screen>F2  <replaceable>filename</replaceable>
F1  <replaceable>filename</replaceable> 
..etc... 
F9  <replaceable>filename</replaceable>
F10 <replaceable>filename</replaceable></screen>
      <para>
       当在引导提示符下按下功能键时，将显示指定的文件。这可以用于实施预引导联机帮助（大致是关于内核命令行选项）。为了向后兼容先前的发行版，<keycap>F10</keycap> 也可以输入为 <keycap>F0</keycap>。请注意目前尚无法将文件名与 <keycap>F11</keycap> 和 <keycap>F12</keycap> 绑定。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </section>

  <section xml:id="sec-deployment-remoteinst-boot-pxeprep">
   <title>准备目标系统的 PXE 引导</title>
   <para>
    请将 PXE 选项包含在 BIOS 引导序列中来为系统 BIOS 的 PXE 引导作准备。
   </para>
   <warning>
    <title>BIOS 引导顺序</title>
    <para>
     在 BIOS 中，不要将 PXE 选项置于硬盘引导选项的前面。否则，每次引导系统时，系统都会尝试重新自我安装。
    </para>
   </warning>
  </section>

  <section xml:id="sec-deployment-remoteinst-boot-wolprep">
   <title>准备目标系统的网络唤醒</title>
   <para>
    网络唤醒 (WOL) 要求在安装之前启用相应的 BIOS 选项。此外，请记下目标系统的 MAC 地址。该数据是启动网络唤醒所需要的。
   </para>
  </section>

  <section xml:id="sec-deployment-remoteinst-boot-wol">
   <title>局域网唤醒</title>
   <para>
    “网络唤醒”允许通过一个发送时包含计算机 MAC 地址的特定网络包来打开该计算机的电源。由于全球的每台计算机都有一个唯一的 MAC 标识，所以无需担心会意外地错开计算机的电源。
   </para>
   <important>
    <title>不同网段的“网络唤醒”</title>
    <para>
     如果控制计算机与要唤醒的安装目标不在同一网段，请将要发送的 WOL 请求配置为多点广播，或远程控制该网段上的某台计算机充当这些请求的发送方。
    </para>
   </important>
   <para os="sled;sles">
    SUSE Linux Enterprise Server 的用户可以使用名为 WOL 的 YaST 模块来方便地配置网络唤醒。基于 SUSE Linux 操作系统的其他版本的用户可以使用命令行工具。
   </para>
  </section>

  <section xml:id="sec-deployment-remoteinst-boot-wolyast" os="sled;sles">
   <title>使用 YaST 的“网络唤醒”</title>
   <procedure xml:id="proc-deployment-remoteinst-boot-wolyast">
    <step>
     <para>
      以 <systemitem class="username">root</systemitem> 身份登录。
     </para>
    </step>
    <step>
     <para>
      启动 <menuchoice><guimenu>YaST</guimenu> <guimenu>网络服务</guimenu> <guimenu>WOL</guimenu></menuchoice>。
     </para>
    </step>
    <step>
     <para>
      单击<guimenu>添加</guimenu>并输入目标系统的主机名和 MAC 地址。
     </para>
    </step>
    <step>
     <para>
      要打开此计算机，请选择适当的输入框并单击<guimenu>唤醒</guimenu>。
     </para>
    </step>
   </procedure>
  </section>


 </section>
 <section xml:id="sec-deployment-remoteinst-bootinst">
  <title>引导用于安装的目标系统</title>

  <para>
   除了在<xref linkend="sec-deployment-remoteinst-boot-wol"/>和<xref linkend="sec-deployment-remoteinst-boot-pxe"/>中提到的那些方法之外，主要有两种方法来自定义用于安装的引导过程。您既可以使用默认的引导选项和功能键，也可以使用安装引导屏幕上的引导选项提示来指定安装内核对该特定硬件可能需要的任何引导选项。
  </para>

  <section xml:id="sec-deployment-remoteinst-bootinst-opts">
   <title>使用默认的引导选项</title>
   <para>
    引导选项在<xref linkend="cha-inst"/>中有详细描述。通常，只需选择<guimenu>安装</guimenu>即可开始安装引导过程。
   </para>
   <para>
    如果发生问题，请使用 <guimenu>Installation—ACPI Disabled</guimenu> 或 <guimenu>Installation—Safe Settings</guimenu>。有关安装过程故障诊断的更多信息，请参见<xref linkend="sec-trouble-install"/>。
   </para>
   <para>
    屏幕底部的菜单栏提供了某些安装中所需的几项高级功能。使用 F 键可以指定其他选项以传递到安装例程，而不需要了解这些参数的详细语法（参见<xref linkend="sec-deployment-remoteinst-bootinst-custom"/>）。可用功能键的详细描述可参见<xref linkend="sec-i-yast2-bootscreen"/>。
   </para>
  </section>



  <section xml:id="sec-deployment-remoteinst-bootinst-custom">
   <title>使用自定义引导选项</title>
   <para>
    使用合适的引导选项将帮助简化安装过程。许多参数也可以在以后使用 linuxrc 例程进行配置，但是使用引导选项则更方便。在一些自动安装中，引导选项可通过 <filename>initrd</filename> 或 <filename>info</filename> 文件提供。
   </para>
   <para>
    下表列出了本章中提到的所有安装方案及其所需的引导参数和对应的引导选项。完全按它们在该表中出现的顺序予以全部追加，可获取一个引导选项字符串，该字符串将交给安装例程。例如（全部在一行上）：
   </para>
<screen>install=<replaceable>xxx</replaceable> netdevice<replaceable>=xxx</replaceable> hostip=<replaceable>xxx</replaceable> netmask=<replaceable>xxx</replaceable> vnc=<replaceable>xxx</replaceable> vncpassword=<replaceable>xxx</replaceable></screen>

   <para>
    将该字符串中所有的 <replaceable>xxx</replaceable> 值替换为适用于您的安装的值。
   </para>
   <table xml:id="tab-deployment-remoteinst-bootinst-custom">
    <title>本章中使用的安装（引导）方案</title>
    <tgroup cols="3">

     <thead>
      <row>
       <entry colname="1">
        <para>
         安装方案
        </para>
       </entry>
       <entry colname="2">
        <para>
         引导时所需的参数
        </para>
       </entry>
       <entry colname="3">
        <para>
         引导选项
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry colname="1">
        <para>
         <xref linkend="cha-inst"/>
        </para>
       </entry>
       <entry colname="2">
        <para>
         无：系统自动引导
        </para>
       </entry>
       <entry colname="3">
        <para>
         不需要任何选项
        </para>
       </entry>
      </row>

      <row>
       <entry colname="1">
        <para>
         <xref linkend="sec-deployment-remoteinst-scenario-vncstat"/>
        </para>
       </entry>
       <entry colname="2">
        <itemizedlist spacing="compact" mark="bullet">
         <listitem>
          <para>
           安装服务器的位置
          </para>
         </listitem>
         <listitem>
          <para>
           网络设备
          </para>
         </listitem>
         <listitem>
          <para>
           IP 地址
          </para>
         </listitem>
         <listitem>
          <para>
           网络掩码
          </para>
         </listitem>
         <listitem>
          <para>
           网关
          </para>
         </listitem>
         <listitem>
          <para>
           VNC 支持
          </para>
         </listitem>
         <listitem>
          <para>
           VNC 口令
          </para>
         </listitem>
        </itemizedlist>
       </entry>
       <entry colname="3">
        <itemizedlist spacing="compact" mark="bullet">
         <listitem>
          <para>
           <filename>install=(nfs,http, ftp,smb)://<replaceable>path_to_instmedia</replaceable></filename>
          </para>
         </listitem>
         <listitem>
          <para>
           <filename>netdevice=<replaceable>some_netdevice</replaceable></filename>(仅当有多个网络设备可用时才需要）
          </para>
         </listitem>
         <listitem>
          <para>
           <filename>hostip=<replaceable>some_ip</replaceable> </filename>
          </para>
         </listitem>
         <listitem>
          <para>
           <filename>netmask=<replaceable>some_netmask</replaceable> </filename>
          </para>
         </listitem>
         <listitem>
          <para>
           <filename>gateway=<replaceable>ip_gateway</replaceable> </filename>
          </para>
         </listitem>
         <listitem>
          <para>
           <filename>vnc=1</filename>
          </para>
         </listitem>
         <listitem>
          <para>
           <filename>vncpassword=<replaceable>some_password</replaceable> </filename>
          </para>
         </listitem>
        </itemizedlist>
       </entry>
      </row>
      <row>
       <entry colname="1">
        <para>
         <xref linkend="sec-deployment-remoteinst-scenario-vncdyn"/>
        </para>
       </entry>
       <entry colname="2">
        <itemizedlist spacing="compact" mark="bullet">
         <listitem>
          <para>
           安装服务器的位置
          </para>
         </listitem>
         <listitem>
          <para>
           VNC 支持
          </para>
         </listitem>
         <listitem>
          <para>
           VNC 口令
          </para>
         </listitem>
        </itemizedlist>
       </entry>
       <entry colname="3">
        <itemizedlist spacing="compact" mark="bullet">
         <listitem>
          <para>
           <filename>install=(nfs,http, ftp,smb)://<replaceable>path_to_instmedia</replaceable></filename>
          </para>
         </listitem>
         <listitem>
          <para>
           <literal>vnc=1</literal>
          </para>
         </listitem>
         <listitem>
          <para>
           <filename>vncpassword=<replaceable>some_password</replaceable> </filename>
          </para>
         </listitem>
        </itemizedlist>
       </entry>
      </row>
      <row>
       <entry colname="1">
        <para>
         <xref linkend="sec-deployment-remoteinst-scenario-vncpxe"/>
        </para>
       </entry>
       <entry colname="2">
        <itemizedlist spacing="compact" mark="bullet">
         <listitem>
          <para>
           安装服务器的位置
          </para>
         </listitem>
         <listitem>
          <para>
           TFTP 服务器的位置
          </para>
         </listitem>
         <listitem>
          <para>
           VNC 支持
          </para>
         </listitem>
         <listitem>
          <para>
           VNC 口令
          </para>
         </listitem>
        </itemizedlist>
       </entry>
       <entry colname="3">
        <para>
         不适用；进程通过 PXE 和 DHCP 管理
        </para>
       </entry>
      </row>
      <row>
       <entry colname="1">
        <para>
         <xref linkend="sec-deployment-remoteinst-scenario-sshstat"/>
        </para>
       </entry>
       <entry colname="2">
        <itemizedlist spacing="compact" mark="bullet">
         <listitem>
          <para>
           安装服务器的位置
          </para>
         </listitem>
         <listitem>
          <para>
           网络设备
          </para>
         </listitem>
         <listitem>
          <para>
           IP 地址
          </para>
         </listitem>
         <listitem>
          <para>
           网络掩码
          </para>
         </listitem>
         <listitem>
          <para>
           网关
          </para>
         </listitem>
         <listitem>
          <para>
           SSH 支持
          </para>
         </listitem>
         <listitem>
          <para>
           SSH 口令
          </para>
         </listitem>
        </itemizedlist>
       </entry>
       <entry colname="3">
        <itemizedlist spacing="compact" mark="bullet">
         <listitem>
          <para>
           <filename>install=(nfs,http, ftp,smb)://<replaceable>path_to_instmedia</replaceable></filename>
          </para>
         </listitem>
         <listitem>
          <para>
           <filename>netdevice=<replaceable>some_netdevice</replaceable></filename>(仅当有多个网络设备可用时才需要）
          </para>
         </listitem>
         <listitem>
          <para>
           <filename>hostip=<replaceable>some_ip</replaceable> </filename>
          </para>
         </listitem>
         <listitem>
          <para>
           <filename>netmask=<replaceable>some_netmask</replaceable> </filename>
          </para>
         </listitem>
         <listitem>
          <para>
           <filename>gateway=<replaceable>ip_gateway</replaceable> </filename>
          </para>
         </listitem>
         <listitem>
          <para>
           <literal>usessh=1</literal>
          </para>
         </listitem>
         <listitem>
          <para>
           <filename>sshpassword=<replaceable>some_password</replaceable> </filename>
          </para>
         </listitem>
        </itemizedlist>
       </entry>
      </row>
      <row>
       <entry colname="1">
        <para>
         <xref linkend="sec-deployment-remoteinst-scenario-sshdyn"/>
        </para>
       </entry>
       <entry colname="2">
        <itemizedlist spacing="compact" mark="bullet">
         <listitem>
          <para>
           安装服务器的位置
          </para>
         </listitem>
         <listitem>
          <para>
           SSH 支持
          </para>
         </listitem>
         <listitem>
          <para>
           SSH 口令
          </para>
         </listitem>
        </itemizedlist>
       </entry>
       <entry colname="3">
        <itemizedlist spacing="compact" mark="bullet">
         <listitem>
          <para>
           <filename>install=(nfs,http, ftp,smb)://<replaceable>path_to_instmedia</replaceable></filename>
          </para>
         </listitem>
         <listitem>
          <para>
           <filename>usessh=1</filename>
          </para>
         </listitem>
         <listitem>
          <para>
           <filename>sshpassword=<replaceable>some_password</replaceable> </filename>
          </para>
         </listitem>
        </itemizedlist>
       </entry>
      </row>
      <row>
       <entry colname="1">
        <para>
         <xref linkend="sec-deployment-remoteinst-scenario-sshpxe"/>
        </para>
       </entry>
       <entry colname="2">
        <itemizedlist spacing="compact" mark="bullet">
         <listitem>
          <para>
           安装服务器的位置
          </para>
         </listitem>
         <listitem>
          <para>
           TFTP 服务器的位置
          </para>
         </listitem>
         <listitem>
          <para>
           SSH 支持
          </para>
         </listitem>
         <listitem>
          <para>
           SSH 口令
          </para>
         </listitem>
        </itemizedlist>
       </entry>
       <entry colname="3">
        <para>
         不适用；进程通过 PXE 和 DHCP 管理
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </table>
   <tip>
    <title>有关 linuxrc 引导选项的更多信息</title>
    <para>
     在 <link xlink:href="http://en.opensuse.org/SDB:Linuxrc"/> 中可找到更多用于引导 Linux 系统的 linuxrc 引导选项的信息。
    </para>
   </tip>
   <section xml:id="sec-deployment-remoteinst-bootinst-custom-addon">
    <title>安装外接式附件产品及驱动程序更新</title>
    <para>
     <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 支持安装附加产品，以提供扩展（如 SUSE Linux Enterprise High Availability Extension）、第三方产品及驱动程序或附加软件。要在远程部署 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 时自动安装附加产品，请指定 <literal>addon=<replaceable>REPOSITORY</replaceable></literal> 参数。
    </para>
    <para>
     <replaceable>REPOSITORY</replaceable> 必须为位于主机上可供 YaST（YaST2 或 YUM (rpm-md)）读取的储存库。目前不支持 ISO 映像。
    </para>
    <tip>
     <title>驱动程序更新</title>
     <para>
      驱动程序更新请参见 <link xlink:href="http://drivers.suse.com/"/>。并非所有驱动程序更新都以储存库的形式提供，其中的一部分只以 ISO 映像提供，因此无法通过 <literal>addon</literal> 参数进行安装。有关如何通过 ISO 映像安装驱动程序更新的指导，请参见 <link xlink:href="http://drivers.suse.com/doc/kit_usage.html"/>。
     </para>
    </tip>
   </section>
  </section>
 </section>
 <section xml:id="sec-deployment-remoteinst-monitor">
  <title>监视安装过程</title>

  <para>
   有多个用于远程监视安装过程的选项。如果在引导安装时已指定了正确的引导选项，则可以使用 VNC 或 SSH 从远程工作站控制安装和系统配置。
  </para>

  <section xml:id="sec-deployment-remoteinst-monitor-vnc">
   <title>VNC 安装</title>
   <para>
    您可以使用任意 VNC 查看器软件从几乎所有的操作系统远程控制 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 的安装。本节介绍如何使用 VNC 查看器应用程序或 Web 浏览器进行安装。
   </para>
   <section xml:id="sec-deployment-remoteinst-monitor-vnc-prep">
    <title>准备进行 VNC 安装</title>
    <para>
     在准备 VNC 安装时，只需要为安装目标指定合适的引导选项供初始安装引导过程使用即可。（请参见<xref linkend="sec-deployment-remoteinst-bootinst-custom"/>）。目标系统引导后进入一个基于文本的环境中，并等待 VNC 客户端连接到安装程序。
    </para>
    <para>
     安装程序就 IP 地址发布通告，并显示需要连接用于安装的编号。如果您具有对目标系统的物理访问权，该信息将在系统完成安装引导后立即显示。在 VNC 客户端软件出现提示时，请输入该数据，并输入 VNC 口令。
    </para>
    <para>
     因为安装目标通过 OpenSLP 发布自身通告，所以您可以通过 SLP 浏览器检索安装目标的地址信息，而无需通过物理方式连接到安装程序本身（只要您的网络设置和所有计算机都支持 OpenSLP）：
    </para>
    <procedure xml:id="proc-deployment-remoteinst-monitor-vnc-prep">
     <step>
      <para>
       启动 KDE 文件和 Web 浏览器 Konqueror。
      </para>
     </step>
     <step>
      <para>
       在位置栏中输入 <literal>service://yast.installation.suse</literal>。随后目标系统将在 Konqueror 屏幕中显示为一个图标。单击该图标启动 KDE VNC 查看器，在其中可以执行安装。或者，使用提供的 IP 地址运行 VNC 查看器软件，并在 IP 地址的末尾添加 <literal>:1</literal> 以显示安装正在运行。
      </para>
     </step>
    </procedure>
   </section>
   <section xml:id="sec-deployment-remoteinst-monitor-vnc-connect">
    <title>连接到安装程序</title>
    <para>
     主要有两种方法可连接到 VNC 服务器（本例中为安装目标）。您既可以在任意操作系统上启动单独的 VNC 查看器应用程序，也可以使用支持 Java 的 Web 浏览器进行连接。
    </para>
    <para>
     您可以使用 VNC 从任意其他操作系统（包括其他 Linux flavors、Windows 或 Mac OS）控制 Linux 系统的安装。
    </para>
    <para>
     请确保在 Linux 计算机上已安装了 <systemitem>tightvnc</systemitem> 包。在 Windows 计算机上，请安装此应用程序的 Windows 端口，它可在 TightVNC 主页上获取（<link xlink:href="http://www.tightvnc.com/download.html"/>）。
    </para>
    <para>
     要连接到目标计算机上运行的安装程序，请执行如下操作：
    </para>
    <procedure xml:id="proc-deployment-remoteinst-monitor-vnc-connect-app">
     <step>
      <para>
       启动 VNC 查看器。
      </para>
     </step>
     <step>
      <para>
       输入由 SLP 浏览器或安装程序自身提供的安装目标的 IP 地址和显示编号。

      </para>
<screen><replaceable>ip_address</replaceable>:<replaceable>display_number</replaceable></screen>
      <para>
       随后会在桌面上打开一个窗口，其中显示的 YaST 屏幕与正常本地安装中所显示的相同。
      </para>
     </step>
    </procedure>
    <para>
     使用 Web 浏览器连接到安装程序，将使您完全不必依赖任何 VNC 软件或底层操作系统。只要浏览器应用程序启用了 Java 支持，就可以使用任意浏览器（Firefox、Internet Explorer、Konqueror、Opera 等等）来执行 Linux 系统的安装。
    </para>
    <para>
     要执行 VNC 安装，请执行如下操作：
    </para>
    <procedure xml:id="proc-deployment-remoteinst-monitor-vnc-connect-brow">
     <step>
      <para>
       启动首选的 Web 浏览器。
      </para>
     </step>
     <step>
      <para>
       在地址栏中输入以下内容：

      </para>
<screen>http://<replaceable>ip_address_of_target</replaceable>:5801</screen>
     </step>
     <step>
      <para>
       在看到输入 VNC 口令的提示时输入此口令。浏览器窗口此刻显示的 YaST 屏幕与正常本地安装中所显示的相同。
      </para>
     </step>
    </procedure>
   </section>
  </section>

  <section xml:id="sec-deployment-remoteinst-monitor-ssh">
   <title>SSH 安装</title>
   <para>
    通过使用 SSH，您可以使用任意 SSH 客户端软件远程控制 Linux 计算机的安装。
   </para>
   <section xml:id="sec-deployment-remoteinst-monitor-ssh-prep">
    <title>准备进行 SSH 安装</title>
    <para>
     除了安装相应的软件包（用于 Linux 的 OpenSSH 和用于 Windows 的 PuTTY），您只需指定相应的引导选项来为安装启用 SSH。有关细节，请参见<xref linkend="sec-deployment-remoteinst-bootinst-custom"/>。默认情况下，OpenSSH 安装在所有基于 SUSE Linux 的操作系统上。
    </para>
   </section>
   <section xml:id="sec-deployment-remoteinst-monitor-ssh-connect">
    <title>连接到安装程序</title>
    <procedure xml:id="proc-deployment-remoteinst-monitor-ssh-connect">
     <step>
      <para>
       检索安装目标的 IP 地址。如果您具有对目标计算机的物理访问权，就请采用初始引导后安装例程显示在控制台上的 IP 地址。否则，请采用 DHCP 服务器配置中分配给此特定主机的 IP 地址。
      </para>
     </step>
     <step>
      <para>
       在命令行中输入以下命令：
      </para>
<screen>ssh -X root@<replaceable>
ip_address_of_target</replaceable></screen>
      <para>
       将 <replaceable>ip_address_of_target</replaceable> 替换为安装目标的实际 IP 地址。
      </para>
     </step>
     <step>
      <para>
       在看到输入用户名的提示时，输入 <literal>root</literal>。
      </para>
     </step>
     <step>
      <para>
       在系统提示输入口令时，输入已通过 SSH 引导选项设置的口令。在成功通过身份验证之后，将出现一个安装目标的命令行提示符。
      </para>
     </step>
     <step>
      <para>
       输入 <command>yast</command> 起动安装程序。将打开一个窗口，其中显示如<xref linkend="cha-inst"/>中所述的正常 YaST 屏幕。
      </para>
     </step>
    </procedure>
   </section>
  </section>
 </section>
</chapter>
