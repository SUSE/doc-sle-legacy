<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sect1 PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN"
"novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<sect1 xml:base="yast2_manpart.xml" id="sec.yast2.i_y2_part_expert">
 <title>使用 YaST 分区程序</title><indexterm> <primary>YaST</primary> <secondary>分区</secondary> </indexterm> <indexterm> <primary>分区</primary> <secondary>创建</secondary> </indexterm>

 <para>
  使用如<xref linkend="fig.yast2.i_y2_disk_part"/>所示的专家分区程序，可以手动修改一个或多个硬盘的分区。可以添加、删除、编辑分区并调整分区大小，以及访问软 RAID 和 LVM 配置。
 </para>

 <warning>
  <title>对运行中的系统重新分区</title>
  <para>
   尽管可以在系统运行时对其进行重分区，但发生导致数据丢失的错误的风险很高。尽量避免对已安装的系统进行重分区，在对已安装的系统进行重分区前请始终对数据进行完全备份。
  </para>
 </warning>

 <figure id="fig.yast2.i_y2_disk_part">
  <title>YaST 分区程序</title>
  <mediaobject>
   <imageobject role="fo">
    <imagedata fileref="i_y2_disk_part.png" width="75%" format="PNG"/>
   </imageobject>
   <imageobject role="html">
    <imagedata fileref="i_y2_disk_part.png" width="75%" format="PNG"/>
   </imageobject>
  </mediaobject>
 </figure>

 <tip arch="zseries" os="sles">
  <title>IBM System z：设备名称</title>
  <para>
   IBM System z 只能识别 DASD 和 SCSI 硬盘。不支持 IDE 硬盘。因此，如果这些设备是第一个识别出的设备，它们将在分区表中显示为 <filename>dasda</filename> 或 <filename>sda</filename>。
  </para>
 </tip>

 <para>
  YaST <guimenu>专家分区程序</guimenu>对话框中的<guimenu>可用储存区</guimenu>列表中列出了所有已连接硬盘上的全部现有分区或建议分区。将整个硬盘作为不带编号的设备列出，如 <filename>/dev/sda</filename><phrase arch="zseries" os="sles">（或 <filename>/dev/dasda</filename></phrase>）。将分区作为这些设备的一部分列出，如 <filename>/dev/sda1</filename><phrase arch="zseries" os="sles">（或相应的 <filename>/dev/dasda1</filename></phrase>）。此外还会显示硬盘的大小、类型、加密状态、文件系统和安装点以及硬盘的分区。安装点描述分区在 Linux 文件系统树中的位置。
 </para>

 <para>
  左侧<guimenu>系统视图</guimenu>中提供了若干功能视图。使用这些视图收集有关现有储存配置的信息，或者配置 <literal>RAID</literal>、<literal>卷管理</literal>、<literal>加密文件</literal>之类的功能，或使用 <literal>BTRFS</literal>、<literal>NFS</literal> 或 <literal>TMPFS</literal> 之类的其他功能查看文件系统。
 </para>

 <para>
  如果在安装期间运行专家对话框，还会列出并自动选中所有可用硬盘空间。要为 <phrase role="productname"><phrase os="sles">SUSE® Linux Enterprise Server</phrase></phrase> 提供更多磁盘空间，请在列表中自下而上（从硬盘的最后一个分区向上到第一个分区）释放所需空间。
 </para>

 <sect2 id="sec.IB.part.typen">
  <title>分区类型</title><indexterm> <primary>分区</primary><secondary>类型</secondary> </indexterm>
  <tip arch="zseries" os="sles">
   <title>IBM System z：硬盘</title>
   <para>
    在 IBM System z 平台上，SUSE Linux Enterprise Server 支持 SCSI 硬盘以及 DASD（直接访问储存设备）。虽然可以按照以下介绍的方式对 SCSI 磁盘进行分区，但 DASD 在其分区表中的分区项不能超过 3 个。
   </para>
  </tip>
  <para>
   每个硬盘都有一个分区表，其中有 4 个项。分区表中的一项对应于一个主分区或一个扩展分区。但只允许有一个扩展分区项。
  </para>
  <para>
   主分区由指派给特定操作系统的一系列连续的柱面（物理磁盘区域）组成。使用主分区时，限制每个硬盘最多具有 4 个分区，因为超过 4 个分区就不能与分区表相符。这就是使用扩展分区的原因。扩展分区同样是一系列连续的磁盘柱面，但扩展分区本身可以再分为多个<emphasis>逻辑分区</emphasis>。逻辑分区不要求在分区表中有对应的项。换句话说，扩展分区是逻辑分区的容器。
  </para>
  <para>
   如果需要 4 个以上的分区，请创建一个扩展分区作为第 4 个分区（或第 4 个分区之前的分区）。这个扩展分区应占用全部剩余的可用柱面范围。然后在扩展分区中创建多个逻辑分区。逻辑分区的最大数是 63，与磁盘类型无关。对 Linux 使用哪种类型的分区没有什么关系。主分区和逻辑分区均可正常工作。
  </para>
  <tip os="sles">
   <title>GPT 分区表</title>
   <para>
    如果需要在一个硬盘上创建 4 个以上的主分区，则必须使用 GPT 分区类型。此类型没有主分区数限制，并且还支持大于 2 TB 的分区。
   </para>
   <para>
    要使用 GPT，请运行 YaST 分区程序，在<guimenu>系统视图</guimenu>中单击相关磁盘名称，并选择<menuchoice><guimenu>专家</guimenu> <guimenu>新建分区表</guimenu> <guimenu>GPT</guimenu></menuchoice>。
   </para>
  </tip>
 </sect2>

 <sect2 id="sec.yast2.i_y2_part_expert.newpart">
  <title>创建分区</title><indexterm> <primary>分区</primary> <secondary>创建</secondary> </indexterm>
  <para>
   要从头创建分区，请选择<guimenu>硬盘</guimenu>，然后选择具有可用空间的硬盘。可以在<guimenu>分区</guimenu>选项卡中执行实际的修改：
  </para>
  <procedure>
   <step performance="required">
    <para>
     选择<guimenu>添加</guimenu>并指定分区类型（主分区或扩展分区）。最多可以创建 4 个主分区或 3 个主分区和 1 个扩展分区。在扩展分区内，可以创建多个逻辑分区（请参见 <xref linkend="sec.IB.part.typen"/>）。
    </para>
   </step>
   <step performance="required">
    <para>
     指定新分区的大小。可以选择占用所有可用的未分区空间，或输入自定义大小。
    </para>
   </step>
   <step performance="required">
    <para>
     如有必要，选择要使用的文件系统和安装点。YaST 会为所创建的每个分区建议一个安装点。要使用其他装入方法（如按标签装入），请选择 <guimenu>Fstab 选项</guimenu>。有关支持的文件系统的更多信息，请参见 <systemitem class="username">root</systemitem>。
    </para>
   </step>
   <step performance="required">
    <para>
     如果您的设置需要其他文件系统选项，请指定它们。例如，如果您需要永久设备名称，则此操作是必需的。关于可用选项的细节，请参见<xref linkend="sec.yast2.i_y2_part_expert.options"/>。
    </para>
   </step>
   <step performance="required">
    <para>
     单击<guimenu>完成</guimenu>应用分区设置并退出分区模块。
    </para>
    <para>
     如果安装期间创建了分区，将返回到安装概述屏幕。
    </para>
   </step>
  </procedure>
  <sect3 id="yast2.btrfs">
   <title>Btrfs 分区</title>
   <para>
    如果您想使用 Btrfs（请参见<xref linkend="cha.snapper"/><phrase os="sles">和<xref linkend="filesystems"/></phrase>了解 Btrfs 的更多信息）作为新安装系统的默认文件系统，请单击<guimenu>安装设置</guimenu>屏幕中的<guimenu>分区</guimenu>，然后选中<guimenu>使用 Btrfs 作为默认文件系统</guimenu>。安装系统随后建议创建一个格式化为 Ext3 文件系统的 <filename>/boot</filename> 分区，以及一个格式化为 Btrfs 并保留一组默认子卷的根 <filename>/</filename> 分区（该分区稍后可以通过<guimenu>专家分区程序</guimenu>工具修改）。
   </para>
   <para>
    根文件系统为默认子卷，它不会列于已创建的子卷列表中。作为默认的 Btrfs 子卷，它可以作为常规文件系统进行装入。
   </para>
   <para>
    您也可以根据系统情况手动或自动创建 Btrfs 子卷快照。例如，对文件系统进行更改时，在更改前后 <command>zypper</command> 会调用 <command>snapper</command> 命令来创建快照。如果您对 <command>zypper</command> 所做更改不满意，而且希望恢复为先前的状态，则此方法非常实用。因为由 <command>zypper</command> 调用的 <command>snapper</command> 在默认情况下会对<emphasis>根</emphasis>文件系统获取快照，所以，您可以正当地根据目录所保存的数据性质将特定目录排除在快照目标范围之外。正因为此，YaST 建议创建以下单独子卷。
   </para>
   <variablelist>
    <title>建议的 Btrfs 子卷</title>
    <varlistentry>
     <term><filename>/tmp /var/tmp /var/run</filename>
     </term>
     <listitem>
      <para>
       频繁更改内容的目录。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><filename>/var/spool</filename>
     </term>
     <listitem>
      <para>
       包含用户数据，例如邮件。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><filename>/var/log</filename>
     </term>
     <listitem>
      <para>
       包含不可回滚的系统及应用程序的日志文件。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><filename>/var/crash</filename>
     </term>
     <listitem>
      <para>
       包含已崩溃内核的内存转储。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><filename>/srv</filename>
     </term>
     <listitem>
      <para>
       包含属于 FTP 和 HTTP 服务器的数据文件。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><filename>/opt</filename>
     </term>
     <listitem>
      <para>
       包含第三方软件。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <tip>
    <title>Btrfs 分区的大小</title>
    <para>
     由于保存快照需要更多的磁盘空间，因此与无法生成快照的分区（如 Ext3）相比，建议您为 Btrfs 分区保留更多的空间。建议包含所推荐子卷的根 Btrfs 分区的大小为 20GB。
    </para>
   </tip>
   <sect4 id="yast2.btrfs.yast">
    <title>使用 YaST 管理 Btrfs 子卷</title>
    <para>
     现可使用 YaST <guimenu>专家分区程序</guimenu>模块管理 Btrfs 分区的子卷。您可以添加新子卷或删除现有子卷。
    </para>
    <procedure>
     <title>使用 YaST 管理的 Btrfs 子卷</title>
     <step performance="required">
      <para>
       使用<guimenu/>系统<menuchoice><guimenu>分区程序</guimenu><guimenu>启动 YaST </guimenu></menuchoice>专家分区程序。
      </para>
     </step>
     <step performance="required">
      <para>
       选择<guimenu>系统视图</guimenu>窗格左侧的 <guimenu>BTRFS</guimenu>。
      </para>
     </step>
     <step performance="required">
      <para>
       选择您需要管理的子卷所在的 Btrfs 分区，并单击<guimenu>编辑</guimenu>。
      </para>
     </step>
     <step performance="required">
      <para>
       单击<guimenu>子卷处理</guimenu>。您可以查看所选 Btrfs 分区中所有现有子卷的列表。您会看到多个 <literal>@/.snapshots/xyz/snapshot</literal> 项，每个子卷均属于一个现有的快照。
      </para>
     </step>
     <step performance="required">
      <para>
       根据您是否想添加或删除子卷来执行以下操作：
      </para>
      <substeps performance="required">
       <step performance="required">
        <para>
         要删除子卷，从<guimenu>现有子卷</guimenu>列表中选择该子卷，然后单击<guimenu>删除</guimenu>。
        </para>
       </step>
       <step performance="required">
        <para>
         要添加新的子卷，将子卷名称输入<guimenu>新子卷</guimenu>文本字段，并单击<guimenu>新增</guimenu>。
        </para>
        <figure id="fig.yast2.btrfs.subvolumes">
         <title>YaST 分区程序中的 Btrfs 子卷</title>
         <mediaobject>
          <imageobject role="fo">
           <imagedata fileref="yats2_btrfs_subvolumes.png" width="75%" format="PNG"/>
          </imageobject>
          <imageobject role="html">
           <imagedata fileref="yats2_btrfs_subvolumes.png" width="75%" format="PNG"/>
          </imageobject>
         </mediaobject>
        </figure>
       </step>
      </substeps>
     </step>
     <step performance="required">
      <para>
       单击<guimenu>确定</guimenu>和<guimenu>完成</guimenu>进行确认。
      </para>
     </step>
     <step performance="required">
      <para>
       单击<guimenu>完成</guimenu>退出分区程序。
      </para>
     </step>
    </procedure>
   </sect4>
  </sect3>
 </sect2>

 <sect2 id="sec.yast2.i_y2_part_expert.options">
  <title>编辑分区</title><indexterm><primary>分区</primary><secondary>参数</secondary></indexterm>
  <para>
   在创建新分区或修改现有分区时，可以设置各种参数。对于新分区，YaST 设置的默认参数通常已经足够，不需要任何修改。要手动编辑您的分区设置，请按以下步骤继续：
  </para>
  <procedure>
   <step performance="required">
    <para>
     选择分区。
    </para>
   </step>
   <step performance="required">
    <para>
     单击<guimenu>编辑</guimenu>来编辑分区并设置以下参数：
    </para>
    <variablelist>
     <varlistentry>
      <term>文件系统 ID</term>
      <listitem>
       <para>
        <indexterm><primary>分区</primary><secondary>LVM</secondary></indexterm><phrase os="sles"/><indexterm><primary>分区</primary><secondary>RAID</secondary></indexterm>即使不希望在此阶段格式化分区，仍需要为它指派一个文件系统 ID 来确保正确注册分区。典型值包括 <guimenu>Linux</guimenu>、<guimenu>Linux swap</guimenu>、<guimenu>Linux LVM</guimenu> 和 <guimenu>Linux RAID</guimenu>。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>
       文件系统
      </term>
      <listitem>
       <para>
        <indexterm> <primary>文件系统</primary> <secondary>更改</secondary> </indexterm> <indexterm> <primary>分区</primary> <secondary>重新格式化</secondary> </indexterm>要更改分区文件系统，可以单击<guimenu>格式化分区</guimenu>，并在<guimenu>文件系统</guimenu>列表中选择文件系统类型。
       </para>
       <para>
        <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 支持多种类型的文件系统。Btrfs 因其高级功能而成为首选 Linux 文件系统。它支持写时复制功能、创建快照、多设备跨接、子卷和其他有用的技术。Reiserfs、JFS、XFS 和 Ext3 是日记文件系统。通过利用在操作期间记录的写进程，这些文件系统能够在系统崩溃后非常快地恢复系统。Ext2 不是日记文件系统，但它适用于较小的分区，因为不需要管理大量磁盘空间。
       </para>
       <note>
        <title>Ext4 文件系统支持</title>
        <para>
         经实践证实，Btrfs 在效率和缩放能力上均优于 Ext4，而且 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> SP2 对 Ext4 分区仅支持只读访问权限。不过，您仍可在读写模式下访问 Ext4 分区，前提是安装了 <systemitem>ext4-writeable</systemitem> 包。请注意，此操作不受支持，它会损坏内核。
        </para>
       </note>
       <para>
        交换是允许将分区用作虚拟内存的特殊格式。创建大小至少为 256 MB 的交换分区。但是如果用完了交换分区，则考虑向系统添加更多内存而不是添加更多交换空间。
       </para>
       <warning>
        <title>更改文件系统</title>
        <para>
         更改文件系统和重格式化分区将不可逆地从该分区删除所有数据。
        </para>
       </warning>
       <para>
        有关各种文件系统的细节，请参见《<emphasis>储存管理指南</emphasis>》。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>
       加密设备 
      </term>
      <listitem>
       <para>
        如果激活加密，则将所有数据以加密形式写入硬盘。这可以提高敏感数据的安全性，但会降低系统速度，因为加密需要一些时间。有关文件系统加密的详细信息，请参见<xref linkend="cha.security.cryptofs"/>。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>
       安装点
      </term>
      <listitem>
       <para>
        指定应将分区装入文件系统树中的哪个目录。请从 YaST 建议中选择，或输入任何其他名称。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>
       Fstab 选项
      </term>
      <listitem>
       <para>
        指定在全局文件系统管理文件 (<filename>/etc/fstab</filename>) 中包含的各种参数。默认设置对大多数安装已经足够。例如，您可以将文件系统标识从设备名称更改为卷标。在卷标中，可以使用除 <literal>/</literal> 和空格之外的所有字符。
       </para>
       <para>
        要获取永久的设备名称，请使用装入选项<guimenu>设备 ID</guimenu>、<guimenu>UUID</guimenu> 或<guimenu>标签</guimenu>。在 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 中，已按默认启用永久设备名称。
       </para>
       <note os="sles" arch="zseries">
        <title>IBM System z：通过路径装入</title>
        <para>
         由于在 IBM System z 上通过 ID 装入会产生问题（使用磁盘到磁盘复制进行克隆），因此默认情况下 IBM System z 上通过路径 <filename>/etc/fstab</filename> 装入设备。
        </para>
       </note>
       <para>
        如果更愿意按标签装入分区，则需要在<guimenu>卷标</guimenu>文本项中定义一个标签。例如，可以为计划装入 <filename>/home</filename> 的分区使用分区标签 <literal>HOME</literal>。
       </para>
       <para>
        如果要在文件系统中使用定额，请使用装入选项<guimenu>启用定额支持</guimenu>。必须先执行此操作，才能在 YaST 的<guimenu>用户管理</guimenu>模块中为用户定义定额。有关如何配置用户定额的更多信息，请参见<xref linkend="sec.y2.userman.adv.quota"/>。
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </step>
   <step performance="required">
    <para>
     选择<guimenu>完成</guimenu>保存更改。
    </para>
   </step>
  </procedure>
  <note>
   <title>调整文件系统大小</title>
   <para>
    要调整现有文件系统的大小，请选择分区并使用<guimenu>调整大小</guimenu>。请注意，不能在装入时调整分区大小。要调整分区大小，请在运行分区程序之前卸载相应的分区。
   </para>
  </note>
 </sect2>

 <sect2 id="sec.yast2.i_y2_part_expert.options2">
  <title>专家选项</title>
  <para>
   在<guimenu>系统视图</guimenu>窗格中选择硬盘设备（例如 <guimenu>sda</guimenu>）之后，可以访问<guimenu>专家分区程序</guimenu>窗口右下角部分的<guimenu>专家...</guimenu>菜单。菜单包含以下命令：
  </para>
  <variablelist>
   <varlistentry>
    <term>创建新分区表</term>
    <listitem>
     <para>
      该选项帮助您在选定设备上创建新的分区表。
     </para>
     <warning>
      <title>创建新分区表</title>
      <para>
       在设备上创建新分区表会从设备中不可逆地删除所有分区及其数据。
      </para>
     </warning>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>克隆此磁盘</term>
    <listitem>
     <para>
      该选项帮助您将设备分区布局（而不是数据）复制到其他可用磁盘设备上。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect2>

 <sect2 id="sec.yast2.i_y2_part_expert.configure_options">
  <title>高级选项</title>
  <para>
   选择计算机主机名（<guimenu>系统视图</guimenu>窗格中树的顶层）后，可以访问<guimenu>专家分区程序</guimenu>窗口右下部分的<guimenu>配置...</guimenu> 菜单。菜单包含以下命令：
  </para>
  <variablelist>
   <varlistentry>
    <term>配置 iSCSI</term>
    <listitem>
     <para>
      要通过 IP 块设备访问 SCSI，必须先配置 iSCSI。这会导致主要分区列表中显示附加的可用设备。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>配置多路径</term>
    <listitem>
     <para>
      选择该选项可以帮助您为受支持的大容量储存设备配置多路径增强。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect2>

 <sect2 id="sec.yast2.i_y2_part_expert.info">
  <title>更多分区提示</title>
  <para>
   以下部分包含有关分区的一些提示，它们会在您设置系统时帮助您做出正确决定。
  </para>
  <tip>
   <title>柱面值</title>
   <para>
    注意，不同的分区工具可能从 <literal>0</literal> 或 <literal>1</literal> 开始计算分区的柱面。计算柱面数时，应始终使用最后一个和第一个柱面值之间的差，并加上 1。
   </para>
  </tip>

  <sect3>
   <title>使用<literal>交换</literal></title>
   <para>
    交换用于扩展可用物理内存。之后，可以使用比可用物理 RAM 更多的内存。2.4.10 之前的内核的内存管理系统需要交换作为安全措施。当时，如果交换中没有两倍大小的 RAM，系统性能将大受影响。这些限制不再存在。
   </para>
   <para>
    Linux 使用称为<quote>近期最少使用算法</quote> (LRU) 的页面来选择可以从内存移到磁盘的页面。因此，正在运行的应用程序的可用内存更多，其缓存也运行得更为顺畅。
   </para>
   <para>
    如果某个应用程序尝试分配允许的最大内存，则会发生交换问题。需要了解三种主要情形：
   </para>
   <variablelist>
    <varlistentry>
     <term>无交换的系统</term>
     <listitem>
      <para>
       应用程序获取了允许的最大内存。所有缓存均已释放，因此其他所有运行中的应用程序速度下降。几分钟之后，内核的内存不足终止机制会激活，并终止该进程。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>中等大小交换 (128 MB-512 MB) 的系统</term>
     <listitem>
      <para>
       最初，该系统将与无交换的系统一样速度下降。所有物理 RAM 均已分配之后，也将使用交换空间。此时，系统速度变得非常慢，不能从远程运行命令。根据运行交换空间的硬盘的速度，系统可能保持此状态约 10 到 15 分钟，直到内存不足终止机制解决该问题。请注意，如果计算机需要执行<quote>暂挂到磁盘</quote>，则需要一定量的交换。在这种情况下，交换大小应该足够大，可以容纳来自内存的必需数据 (512MB-1GB)。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>具有大量交换（GB 量级）的系统</term>
     <listitem>
      <para>
       在这种情况下，最好不要使用会失控并进行大量交换的应用程序。如果使用此类应用程序，系统将需要许多小时后才能恢复。在该进程中，其他进程可能超时并出错，导致系统处于未定义状态，即使是在终止出错进程之后。这种情况下，请执行硬性计算机重引导，并尝试再次运行它。仅当有应用程序依赖此项功能时，才需要使用大量交换。此类应用程序（如数据库或图形处理程序）通常有一个选项，用于直接使用硬盘空间满足其需要。建议使用此选项，不要使用大量交换空间。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    如果系统未失控，但是一段时间之后需要更多交换，可能需要联机扩展交换空间。如果为交换空间准备了分区，只需使用 YaST 添加此分区。如果没有可用分区，可能只能使用交换文件来扩展交换。交换文件的速度通常低于分区，但与物理 RAM 相比，两者的速度都是极慢的，所以实际差别可以忽略。
   </para>
   <procedure>
    <title>手动添加交换文件</title>
    <para>
     要在运行的系统中添加交换文件，请执行以下操作：
    </para>
    <step performance="required">
     <para>
      在系统中创建一个空文件。例如，如果要在 <filename>/var/lib/swap/swapfile</filename> 添加交换为 128 MB 的交换文件,请使用命令：
     </para>
<screen>mkdir -p /var/lib/swap
dd if=/dev/zero of=/var/lib/swap/swapfile bs=1M count=128</screen>
    </step>
    <step performance="required">
     <para>
      初始化此交换文件，命令为
     </para>
<screen>mkswap /var/lib/swap/swapfile</screen>
    </step>
    <step performance="required">
     <para>
      激活交换，命令为
     </para>
<screen>swapon /var/lib/swap/swapfile</screen>
     <para>
      要禁用此交换文件，请使用命令
     </para>
<screen>swapoff /var/lib/swap/swapfile</screen>
    </step>
    <step performance="required">
     <para>
      检查当前可用的交换空间，命令为
     </para>
<screen>cat /proc/swaps</screen>
     <para>
      请注意，目前这只是临时交换空间。下一次重引导之后，将不再使用它。
     </para>
    </step>
    <step performance="required">
     <para>
      要永久启用此交换文件，请将以下行添加到 <filename>/etc/fstab</filename>：
     </para>
     
     
<screen>/var/lib/swap/swapfile swap swap defaults 0 0</screen>
    </step>
   </procedure>
  </sect3>
 </sect2>

 <sect2>
  <title>分区和 LVM</title>
  <para>
   从<guimenu>专家分区程序</guimenu>，通过单击<guimenu>系统视图</guimenu>窗格中的<guimenu>卷管理</guimenu>项目访问 LVM 配置。但是，如果系统上已存在生效的 LVM 配置，则在进入会话的初始 LVM 配置时会自动激活它。这种情况下，包含分区（属于已激活的卷组）的所有磁盘都不能进行重分区。如果某个硬盘上的任意分区正在使用中，则 Linux 内核无法重新读取该硬盘经过修改的分区表。如果系统上已存在有效的 LVM 配置，则不必进行物理重分区。但需要更改逻辑卷的配置。
  </para>
  <para>
   在物理卷 (PV) 的开始位置，将有关卷的信息写入到分区中。要将这样的分区重用于 LVM 之外的其他用途，最好删除此卷的开始位置。例如，在 VG <literal>system</literal> 和 PV <filename>/DEV/sda2</filename> 中，可以通过命令 <command>dd</command><option>if=/dev/zero of=/dev/sda2 bs=512 count=1 </option>完成此操作。
  </para>
  <warning>
   <title>用于引导的文件系统</title>
   <para>
    用于引导的文件系统（root 文件系统或 <filename>/boot</filename>）不能储存在 LVM 逻辑卷上。而应将其储存在通常的物理分区中。
   </para>
  </warning>
  <para os="sles">
   有关 LVM 的更多细节，请参见<xref linkend="stor_admin"/>。
  </para>
 </sect2>
</sect1>
