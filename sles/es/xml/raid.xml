<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sect1 PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN"
"novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<sect1 xml:base="raid.xml" id="sec-yast2-system-raid">
 <title>Configuración de RAID de software</title><indexterm> <primary>YaST</primary> <secondary>RAID</secondary></indexterm><indexterm> <primary>RAID</primary> <secondary>YaST</secondary></indexterm><indexterm> <primary>RAID por software</primary> <see>RAID</see></indexterm>



 <para>
  El propósito de RAID (Redundant Array of Independent Disks, Formación redundante de discos independientes) es combinar varias particiones de disco duro en un disco duro <emphasis>virtual</emphasis> para optimizar el rendimiento o la seguridad de los datos. La mayoría de los controladores RAID usan el protocolo SCSI, ya que puede direccionar un mayor número de discos duros y de forma más eficaz que el protocolo IDE. También es más adecuado para el procesamiento paralelo de comandos. Hay algunos controladores RAID que admiten discos duros IDE o SATA. El software RAID ofrece las ventajas de los sistemas RAID, pero sin el coste adicional de los controladores de hardware RAID. Sin embargo, esto supone tiempo de la CPU y exige unos requisitos de memoria que lo hace inadecuado para equipos con un rendimiento alto.
 </para>

 <para>
  Con <phrase role="productname"><phrase os="sles">SUSE® Linux Enterprise Server</phrase></phrase> es posible combinar varios discos duros en un sistema RAID por software. RAID hace uso de varias estrategias para combinar varios discos duros en un sistema RAID, cada una de las cuales tiene diferentes objetivos, ventajas y características. Las variaciones se denominan normalmente <emphasis>niveles de RAID</emphasis>.
 </para>

 <para>
  Los niveles normales de RAID son:
 </para>

 <variablelist>
  <varlistentry>
   <term>RAID 0</term>
   <listitem>
    <para>
     Este nivel mejora el rendimiento del acceso a los datos difundiendo los bloques de cada archivo por varias unidades de disco. En realidad, no se trata de un RAID, porque no proporciona copias de seguridad de los datos, pero el nombre <emphasis>RAID 0</emphasis> para este tipo de sistema se usa habitualmente. Con RAID 0, se agrupan dos o más discos duros. El rendimiento mejora, pero el sistema RAID se destruye y los datos se pierden solo con que falle un disco duro.
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>RAID 1</term>
   <listitem>
    <para>
     Este nivel proporciona una seguridad adecuada para los datos, porque estos se copian en otro disco duro 1:1. Esto se denomina <emphasis>copia de discos duros en espejo</emphasis>. Si se destruye un disco, hay disponible una copia de su contenido en otro. Todos los discos excepto uno podrían resultar dañados sin poner los datos en peligro. Sin embargo, si no se detecta el daño, los datos dañados se podrían duplicar en el disco intacto. Esto podría dar como resultado una perdida de datos. El rendimiento de escritura sufre en el proceso de copia en comparación al uso de un único acceso a disco (es de un 10% a un 20% más lento), pero el acceso de lectura es mucho más rápido en comparación a cualquier otro disco duro físico normal. Esto se debe a que los datos duplicados se pueden explorar en paralelo. En general, se puede decir que el nivel 1 proporciona casi el doble de velocidad de lectura y casi la misma velocidad de escritura que en los discos únicos.
    </para>
   </listitem>
  </varlistentry>

  <varlistentry>
   <term>RAID 5</term>
   <listitem>
    <para>
     El RAID 5 es un compromiso optimizado entre el Nivel 0 y el Nivel 1 en cuanto a rendimiento y seguridad de los datos. Un espacio de disco duro equivale al número de discos utilizados menos uno. Los datos se distribuyen por los discos duros de igual manera que con RAID 0. Los <emphasis>bloques de paridad,</emphasis> creados en una de las particiones, existen por motivos de seguridad. Se enlazan entre sí con XOR, lo que permite que el bloque de paridad correspondiente reconstruya el contenido en caso de que se produzca un error en el sistema. Con RAID 5, no puede fallar más de un disco duro a la vez. Si un disco duro falla, debe sustituirse en cuanto sea posible para evitar el riesgo de perder datos.
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>RAID 6</term>
   <listitem>
    <para>
     Para aumentar la fiabilidad del sistema RAID, es posible utilizar RAID 6. En este nivel, aunque fallen dos discos, seguirá siendo posible reconstruir la matriz. Con RAID 6, se necesitan al menos 4 discos duros para ejecutar la matriz. Tenga en cuenta que si se ejecuta como RAID de software, esta configuración requerirá una cantidad considerable de tiempo de CPU y memoria.
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>RAID 10 (RAID 1+0)</term>
   <listitem>
    <para>
     Esta implementación de RAID combina funciones de RAID 0 y RAID 1: los datos se duplican en primer lugar en matrices de disco independientes, que se introducen en una nueva matriz de tipo RAID 0. En cada sub.matriz RAID 1, uno de los discos puede fallar sin provocar daños en los datos. Se necesita un mínimo de cuatro discos y un número par de discos para ejecutar RAID 10. Este tipo de RAID se utiliza para aplicaciones de base de datos en las que se espera una carga intensiva.
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>Otros niveles de RAID</term>
   <listitem>
    <para>
     Se han desarrollado algunos otros niveles de RAID (RAID 2, RAID 3, RAID 4, RAIDn, RAID 10, RAID 0+1, RAID 30, RAID 50, etc.). Algunos de ellos son implementaciones propias creadas por proveedores de hardware. Estos niveles no son muy comunes, de modo que no se explican aquí.
    </para>
   </listitem>
  </varlistentry>
 </variablelist>

 <sect2 id="sec-yast2-system-raid-conf">
  <title>Configuración de RAID de software con YaST</title>
  <para>
   A la configuración de <guimenu>RAID</guimenu> de YaST se accede desde la herramienta Particionamiento en modo experto de YaST, descrita en la <xref linkend="sec-yast2-i-y2-part-expert"/>. Esta herramienta de particionamiento permite editar y suprimir las particiones existentes y crear otras nuevas para que se utilicen con el software RAID:
  </para>
  <procedure>
   <step performance="required">
    <para>
     Seleccione un disco duro en <guimenu>Discos duros.</guimenu>
    </para>
   </step>
   <step performance="required">
    <para>
     Acceda a la pestaña <guimenu>Particiones.</guimenu>
    </para>
   </step>
   <step performance="required">
    <para>
     Haga clic en <guimenu>Añadir</guimenu> y escriba el tamaño que desee asignar a la partición RAID en el disco.
    </para>
   </step>
   <step performance="required">
    <para>
     Utilice <guimenu>No formatear</guimenu> para no formatear la partición y cambie el valor de <guimenu>ID del sistema de archivos</guimenu> a <guimenu>0xFD Linux RAID</guimenu>. No monte la partición.
    </para>
   </step>
   <step performance="required">
    <para>
     Repita este procedimiento hasta que haya definido todos los volúmenes físicos que desee en los discos disponibles.
    </para>
   </step>
  </procedure>
  <para>
   Para RAID 0 y RAID 1, se necesitan al menos dos particiones: para RAID 1, suelen ser exactamente dos. Si se usa RAID 5, se necesitan al menos tres particiones; RAID 6 y RAID 10 necesitan al menos cuatro particiones. Se recomienda usar solo particiones del mismo tamaño. Las particiones RAID deben encontrarse en discos duros distintos para reducir el riesgo de que se pierdan datos si una de ellas es defectuosa (RAID 1 y 5) y para optimizar el rendimiento de RAID 0. Cuando se hayan creado todas las particiones que se deseen utilizar con RAID, haga clic en <menuchoice><guimenu>RAID</guimenu><guimenu>Añadir RAID</guimenu></menuchoice> para comenzar la configuración.
  </para>
  <para>
   En el recuadro de diálogo siguiente, elija entre los niveles de RAID 0, 1, 5, 6 y 10. A continuación, seleccione todas las particiones de los tipos <quote>Linux RAID</quote> o <quote>Linux nativo</quote> que deba utilizar el sistema RAID. No se muestran intercambios ni particiones DOS.
  </para>
  <tip>
   <para>
    Para tipos de RAID en los que el orden al añadir los discos es importante, puede marcar los discos con las letras de la A a la E. Haga clic en el botón <guimenu>Clasificar,</guimenu> seleccione el disco y haga clic en uno de los botones <guimenu>Clase X,</guimenu> donde X es la letra que quiere asignar al disco. Asigne todos los discos RAID disponibles de este modo y seleccione <guimenu>Aceptar</guimenu> para confirmar. Puede ordenar fácilmente los discos clasificados con los botones <guimenu>Ordenado</guimenu> o <guimenu>Intercalado,</guimenu> o bien añadir un patrón de orden a partir de un archivo de texto con <guimenu>Archivo de patrones.</guimenu>
   </para>
  </tip>
  <figure id="fig-yast2-system-raid-conf">
   <title>Particiones RAID</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="yast2_raid4.png" width="75%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="yast2_raid4.png" width="75%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>
  <para>
   Para añadir una partición no asignada previamente al volumen RAID seleccionado, haga clic primero en la partición y, a continuación, en <guimenu>Añadir</guimenu>. Asigne todas las particiones reservadas para RAID. De lo contrario, el espacio de la partición permanecerá inutilizado. Una vez que haya asignado todas las particiones, haga clic en <guimenu>Siguiente</guimenu> para seleccionar los valores que desee en <guimenu>Opciones RAID.</guimenu>
  </para>
  <para>
   En este último paso, defina el sistema de archivos que se debe utilizar, así como el método de cifrado y el punto de montaje para el volumen RAID. Después de completar la configuración con <guimenu>Finalizar</guimenu>, compruebe el dispositivo <filename>/dev/md0</filename> y los demás indicados con <emphasis>RAID</emphasis> en el particionamiento en modo avanzado.
  </para>
 </sect2>

 <sect2>
  <title>Resolución de problemas</title>
  <para>
   Compruebe el archivo <filename>/proc/mdstat</filename> para averiguar si se ha dañado una partición RAID. En caso de que el sistema falle, apague el sistema Linux y sustituya el disco duro por uno nuevo particionado del mismo modo. A continuación, reinicie el sistema e introduzca el comando <command>mdadm /dev/mdX --add /dev/sdX</command>. Sustituya "X" por sus propios identificadores de dispositivos. Esto integra el disco duro de forma automática en el sistema RAID y lo reconstruye completamente.
  </para>
  <para>
   Tenga en cuenta que, si bien es posible acceder a todos los datos durante el proceso, puede que el rendimiento sea menor hasta que se haya realizado la reconstrucción por completo.
  </para>
 </sect2>

<?dbfo-need height="10em"?>



 <sect2>
  <title>Información adicional</title>
  <para>
   Las instrucciones de configuración y más información acerca del RAID de software se pueden encontrar en las ayudas en:
  </para>
  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     <filename>/usr/share/doc/packages/mdadm/Software-RAID.HOWTO.html</filename>
    </para>
   </listitem>
   <listitem>
    <para>
     <ulink url="http://raid.wiki.kernel.org"/>
    </para>
   </listitem>
  </itemizedlist>
  <para>
   Hay disponibles listas de correo de Linux RAID, como <ulink url="http://marc.info/?l=linux-raid"/>.
  </para>
 </sect2>
</sect1>
