<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE chapter PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN"
"novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<chapter xml:base="sle_update.xml" id="cha-update-sle">
 <title>Actualización de SUSE Linux Enterprise</title>
 <abstract>
  <para>
   SUSE® Linux Enterprise (SLE) proporciona la posibilidad de actualizar un sistema existente a la nueva versión sin realizar una reinstalación completa. No es preciso realizar una nueva instalación. Los datos que ya existan, como los directorios personales y la configuración del sistema, permanecen intactos. Durante el ciclo de vida del producto, puede aplicar paquetes de servicios para mejorar la seguridad del sistema, corregir defectos de software y acceder a nuevas funciones. La instalación se puede realizar desde una unidad local de CD o DVD o desde un origen de instalación de red.
  </para>
 </abstract>
 <sect1 id="sec-update-terminology">
  <title>Terminología</title>

  <para>
   Esta capítulo utiliza varios términos especializados. Para comprender la información, lea las siguientes definiciones:
  </para>

  <variablelist>
   <varlistentry>
    <term>Backport</term>
    <listitem>
     <para>
      El proceso de backport significa adaptar cambios específicos de una versión reciente del software y aplicarlos a una versión anterior. El caso más habitual es reparar problemas de seguridad en componentes de software con cierta antigüedad. Normalmente, forma parte de un modelo de mantenimiento que consiste en ofrecer mejoras o (con menor frecuencia) nuevas funciones.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>

    <term>Deltarpm</term>
    <listitem>
     <para>
      Un paquete deltarpm está compuesto únicamente por los archivos binarios que no tienen en común dos versiones definidas de un mismo paquete, por lo que presenta el tamaño de descarga más pequeño. Antes de la instalación, el paquete RPM completo se reconstruye en el equipo local.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Sentido descendente</term>
    <listitem>
     <para>
      Una metáfora del modo en que se desarrolla el software en el mundo del código abierto (consulte también <emphasis>"sentido ascendente"</emphasis>). El término <emphasis>"sentido descendente"</emphasis> hace referencia a personas u organizaciones como SUSE, que integran el código que "viene de arriba" con otros productos de software para crear distribuciones que luego emplean los usuarios finales. Así, el software fluye en "sentido descendente" desde sus desarrolladores hasta los usuarios finales, pasando por los integradores.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Migración en línea</term>
    <listitem>
     <para>
      Actualización a un paquete de servicios o Service Pack (SP) mediante las herramientas de actualización en línea (en vez de los medios de instalación) para instalar los parches correspondientes. Actualiza todos los paquetes de los sistemas instalados a la última versión (actualizaciones incluidas) de actualizaciones SP3 más SP2.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>

    <term>Paquete</term>
    <listitem>
     <para>
      Un paquete es un archivo comprimido en formato <literal>rpm</literal> que contiene todos los archivos de un programa en concreto, incluidos componentes opcionales como configuraciones, ejemplos y documentación.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>

    <term>Parche</term>
    <listitem>
     <para>
      Un parche consiste en uno o más paquetes y puede aplicarse mediante deltarpms. También puede introducir dependencias de paquetes que aún no estén instalados.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Paquetes de servicios (Service Packs)</term>
    <listitem>
     <para>
      Combina varios parches en un formato que es fácil de instalar o distribuir. Los paquetes de servicios están numerados y suelen incluir soluciones de seguridad, actualizaciones o mejoras de programas.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Sentido ascendente</term>
    <listitem>
     <para>
      Una metáfora del modo en que se desarrolla el software en el mundo del código abierto (consulte también <emphasis>"sentido descendente"</emphasis>). El término <emphasis>"sentido ascendente"</emphasis> hace referencia al proyecto original o al autor o persona que mantiene un software distribuido como código fuente. Los comentarios, los parches, las mejoras de funciones u otras mejoras fluyen desde los usuarios finales o colaboradores hasta los desarrolladores en "sentido ascendente". Los desarrolladores deciden si las peticiones deben integrarse o rechazarse.
     </para>
     <para>
      Si los miembros del proyecto deciden integrar una petición, se incluirá en las versiones más recientes del software. Las peticiones aceptadas benefician a todas las partes implicadas.
     </para>
     <para>
      Si una petición no se acepta, puede deberse a diferentes motivos. Puede que incumpla las directrices del proyecto, que no sea válido, que ya esté integrado o que no sea de interés o se desvíe del plan de ruta del proyecto. Una petición no aceptada dificulta el trabajo de los desarrolladores en sentido ascendente, ya que tienen que mantener sus parches sincronizados con el código en sentido ascendente. Esta práctica suele evitarse, pero a veces es necesario emplearla.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term>Actualización</term>
    <listitem>
     <para>
      Instalación de una nueva versión <emphasis>menor</emphasis> de un paquete.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Actualización (upgrade)</term>
    <listitem>
     <para>
      Instalación de una nueva versión <emphasis>importante</emphasis> de un paquete o una distribución que incorpora <emphasis>nuevas funciones.</emphasis>
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect1>
 <sect1 id="sec-update-nmm">
  <title>Modelo de mantenimiento de SUSE Linux Enterprise 11</title>

  <para>
   El modelo de mantenimiento de SUSE Linux Enterprise 11 combina flexibilidad y control de los paquetes de servicios. Ofrece las siguientes ventajas:
  </para>

  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     Los paquetes de servicios son más ligeros y fáciles de probar y distribuir.
    </para>
   </listitem>
   <listitem>
    <para>
     Es posible conservar las versiones anteriores, pero con compatibilidad para el sistema completo.
    </para>
   </listitem>
   <listitem>
    <para>
     Se ofrece una respuesta a las necesidades del mercado entre paquetes de servicios, mediante mejoras selectivas y la posibilidad de ofrecer más actualizaciones en el repositorio general. Al seleccionar las mejoras se reducen los períodos prolongados entre los sucesivos paquetes de servicios.
    </para>
   </listitem>
  </itemizedlist>

  <sect2 id="sec-update-background">
   <title>Información básica</title>
   <para>
    En los últimos años, con un claro deseo de mejora basado en los comentarios de los clientes, SUSE ha implementado diversos cambios en relación con el modo en que proporcionamos actualizaciones a nuestros usuarios:
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      En SLES 9, tan solo existía un repositorio de actualizaciones que las reunía todas. La versión más reciente era la única que se ofrecía.
     </para>
    </listitem>
    <listitem>
     <para>
      A partir de SLES 10 SP1, se introdujo el concepto de un <quote>repositorio específico para cada SP</quote>. Esto significa que todas las actualizaciones de un Service Pack concreto se entregan desde un repositorio específico. Cuando los usuarios migran a un Service Pack más reciente, pierden acceso a los repositorios anteriores si se han registrado directamente en el Centro de servicios al cliente de Novell. Como es habitual, los usuarios de SMT o SUSE Manager pueden suscribirse libremente a cualquier canal de Service Pack. El motivo principal de este cambio es el concepto de periodo de solapamiento de 6 meses (asistencia para el Service Pack n-1), a fin de permitir la validación del Service Pack publicado y ofrecer una ventana de migración para los clientes, durante la cual pueden seguir disfrutando de asistencia y mantenimiento total para el SP anterior.
     </para>
    </listitem>
    <listitem>
     <para>
      SLES 11 GA y SLES 11 SP1 siguieron el modelo de SLES 10. Con SLES 11 SP2, incorporamos un nuevo modelo de repositorios basado en lo siguiente:
     </para>
     <orderedlist numeration="lowerroman" spacing="normal">
      <listitem>
       <para>
        Se mantienen las suscripciones del repositorio de actualizaciones de SLES 11 SP1. Todas las actualizaciones aplicables también al SP2 se publicaban además o en exclusiva en el repositorio de actualizaciones del SP1. Esto significa que todas las actualizaciones que no afectaran a la compatibilidad ABI y API se seguían entregando desde allí.
       </para>
      </listitem>
      <listitem>
       <para>
        El repositorio de actualizaciones de SLES 11 SP2 solo incluye las actualizaciones más recientes e innovadoras que no se pueden aplicar desde el repositorio de actualizaciones del SP1 (por diversos motivos). Además, hemos añadido un repositorio central que proporciona un <quote>hueco</quote> para los paquetes que no se han publicado en los repositorios de actualizaciones del SP1 ni el SP2.
       </para>
      </listitem>
      <listitem>
        <para>SLES 11 SP4 contará con un modelo de canal similar al de SLES 10. El modelo se consideró la forma más fácil y rápida de enviar actualizaciones para un paquete de servicios específico. Todas las actualizaciones se enviarán a través de un canal de actualización especial. Habrá disponibles canales adicionales en la máquina, pero los canales antiguos se eliminarán. </para>
      </listitem>
     </orderedlist>
    </listitem>
   </itemizedlist>
   <para>
    La <xref linkend="fig-update-maintenance-evolution"/> muestra algunos de los aspectos mencionados.
   </para>
   <figure id="fig-update-maintenance-evolution">
    <title>Evolución de la entrega de mantenimiento (también aplicable a SLED)</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="new-maintenance-model.svg" width="75%"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="new-maintenance-model.png" width="75%"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Nuestros productos tienen un ciclo de vida de 10 años: 10 años de asistencia general y 3 años de asistencia extendida. Publicamos versiones principales cada 4 años y paquetes de servicios cada 18 meses. La asistencia de paquetes de servicios a largo plazo (Long Term Service Pack Support o LTSS) es un plazo extendido o una ampliación del ciclo de vida de las versiones principales <xref linkend="fig-update-maintenance-long-term-service-pack"/>).
   </para>
   <figure id="fig-update-maintenance-long-term-service-pack">
    <title>Asistencia de paquetes de servicios a largo plazo (Long Term Service Pack Support, LTSS)</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="long-term-service-pack-support.svg" width="75%"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="long-term-service-pack-support.png" width="75%"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    LTSS requiere una suscripción activa, ya sea normal o prioritaria. No afecta a los plazos de suscripción L1 y L2. Las actualizaciones de seguridad se gestionan de forma <quote>proactiva</quote>: se trata de vulnerabilidades críticas que no dependen del usuario, vulnerabilidades locales en el núcleo u otras vulnerabilidades del sistema raíz ejecutables directamente sin interacción del usuario.
   </para>
  </sect2>

  <sect2 id="sec-update-supportlevel-lifecycle">
   <title>Niveles de asistencia</title>
   <para>
    El intervalo de los niveles de asistencia extendidos empieza el octavo año y termina el décimo. Implica un diagnóstico continuado de nivel de ingeniería L3 y reacciones para solucionar errores críticos. Estos niveles de asistencia técnica actualizan de forma proactiva las vulnerabilidades del sistema raíz en el núcleo y cualquier otra vulnerabilidad ejecutable directamente sin interacción del usuario. Además, son compatibles con las cargas de trabajo existentes, las pilas de software y el hardware con listas limitadas de exclusión de paquetes. Consulte una descripción general en la <xref linkend="tab-security-and-bug-fixes"/>.
   </para>
   <table id="tab-security-and-bug-fixes">
    <title>Actualizaciones de seguridad y correcciones de errores</title>
    <tgroup cols="6">
     <colspec colname="c1"/>
     <colspec colname="c2"/>
     <colspec colname="c3"/>
     <colspec colname="c4"/>
     <colspec colname="c5"/>
     <colspec colname="c6"/>
     <thead>
      <row>
       <entry/>
       <entry namest="c2" nameend="c5" align="center">
        <para>
         —Asistencia general—
        </para>
       </entry>
       <entry>
        <para>
         Asistencia técnica ampliada
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Tema
        </para>
       </entry>
       <entry>
        <para>
         SP actual
        </para>
       </entry>
       <entry>
        <para>
         SP (n-1)
<?dblinebreak ?>


         6 meses
        </para>
       </entry>
       <entry>
        <para>
         SP (n-1)
<?dblinebreak ?>


         con LTSS
        </para>
       </entry>
       <entry>
        <para>
         Años 6 y 7
<?dblinebreak ?>


         con LTSS
        </para>
       </entry>
       <entry>
        <para>
         Años 8, 9 y 10
<?dblinebreak ?>


         con LTSS
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         Servicios técnicos L1/L2
        </para>
       </entry>
       <entry>
        <para>
         ✓
        </para>
       </entry>
       <entry>
        <para>
         ✓
        </para>
       </entry>
       <entry>
        <para>
         ✓
        </para>
       </entry>
       <entry>
        <para>
         ✓
        </para>
       </entry>
       <entry>
        <para>
         ✓
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Mantenimiento proactivo
        </para>
       </entry>
       <entry>
        <para>
         ✓
        </para>
       </entry>
       <entry>
        <para>
         ✓
        </para>
       </entry>
       <entry/>
       <entry>
        <para>
         ✓
        </para>
       </entry>
       <entry/>
      </row>
      <row>
       <entry>
        <para>
         Actualizaciones de controladores mediante PLDP
        </para>
       </entry>
       <entry>
        <para>
         ✓
        </para>
       </entry>
       <entry>
        <para>
         ✓
        </para>
       </entry>
       <entry>
        <para>
         ✓
        </para>
       </entry>
       <entry/>
       <entry/>
      </row>
      <row>
       <entry>
        <para>
         Actualizaciones de seguridad proactivas
        </para>
       </entry>
       <entry>
        <para>
         ✓
        </para>
       </entry>
       <entry>
        <para>
         ✓
        </para>
       </entry>
       <entry>
        <para>
         ✓
        </para>
       </entry>
       <entry>
        <para>
         ✓
        </para>
       </entry>
       <entry/>
      </row>
      <row>
       <entry>
        <para>
         Compatibilidad con ingeniería L3
        </para>
       </entry>
       <entry>
        <para>
         ✓
        </para>
       </entry>
       <entry>
        <para>
         ✓
        </para>
       </entry>
       <entry>
        <para>
         ✓
        </para>
       </entry>
       <entry>
        <para>
         ✓
        </para>
       </entry>
       <entry>
        <para>
         ✓
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Versiones anteriores disponibles
        </para>
       </entry>
       <entry>
        <para>
         ✓
        </para>
       </entry>
       <entry/>
       <entry>
        <para>
         ✓
        </para>
       </entry>
       <entry>
        <para>
         ✓
        </para>
       </entry>
       <entry>
        <para>
         ✓
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </table>
  </sect2>

  <sect2 id="sec-update-nmm-channels">
   <title>Modelo de canales</title>
   <para os="sles">
    Con el modelo de mantenimiento anterior, <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> tenía dos canales asignados: <literal>SLES11-SPx-Pool</literal> y <literal>SLES11-SPx-Updates</literal>. Durante una migración en línea a SPx+1, estos canales se reemplazaron temporalmente por <literal>SLES11-SPx-Online</literal>.
   </para>
   
   <para>
    Con SUSE Linux Enterprise SP 2, la disposición de los canales ha cambiado para ofrecer las ventajas del nuevo modelo de mantenimiento. <xref linkend="tab-update-nmm-channels-sp2"/> incluye una lista de todos los canales desde el SP1 hasta el SP3.
   </para>
   <table id="tab-update-nmm-channels-sp2">
    <title>Disposición de canales para SUSE Linux Enterprise 11 SP1, SP2 y SP3</title>

    <tgroup cols="3">
     <colspec colnum="1" colname="c1" colwidth="1.2*"/>
     <colspec colnum="2" colname="c2" colwidth="3*"/>
     <colspec colnum="3" colname="c3" colwidth="3*"/>
     <thead>
      <row>
       <entry>
        <para>
         Tipo
        </para>
       </entry>
       <entry>
        <para>
         SLES
        </para>
       </entry>
       <entry>
        <para>
         SLED
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         Canales obligatorios
        </para>
       </entry>
       <entry>
        <para>
         SP1
        </para>
        <simplelist>
         <member><literal>SLES11-SP1-Pool</literal></member><member><literal>SLES11-SP1-Updates</literal></member>
        </simplelist>
        <para>
         SP2
        </para>
        <simplelist>
         <member><literal>SLES11-SP1-Pool</literal></member><member><literal>SLES11-SP1-Updates</literal></member><member><literal>SLES11-SP2-Core</literal></member><member><literal>SLES11-SP2-Updates</literal></member>
        </simplelist>
        <para>
         SP3
        </para>
        <simplelist>
         <member><literal>SLES11-SP3-Pool</literal></member><member><literal>SLES11-SP3-Updates</literal></member>
        </simplelist>
         <para>SP4</para>
         <simplelist>
           <member><literal>SLES11-SP4-Pool</literal></member><member><literal>SLES11-SP4-Updates</literal></member>
         </simplelist>
       </entry>
       <entry>
        <para>
         SP1
        </para>
        <simplelist>
         <member><literal>SLED11-SP1-Pool</literal> </member> <member><literal>SLED11-SP1-Updates</literal> </member>
        </simplelist>
        <para>
         SP2
        </para>
        <simplelist>
         <member><literal>SLED11-SP1-Pool</literal> </member> <member><literal>SLED11-SP1-Updates</literal> </member> <member><literal>SLED11-SP2-Core</literal> </member> <member><literal>SLED11-SP2-Updates</literal> </member>
        </simplelist>
        <para>
         SP3
        </para>
        <simplelist>
         <member><literal>SLED11-SP3-Pool</literal> </member> <member><literal>SLED11-SP3-Updates</literal> </member>
        </simplelist>
        <para>SP4</para>
         <simplelist>
           <member><literal>SLED11-SP4-Pool</literal> </member> <member><literal>SLED11-SP4-Updates</literal></member>
         </simplelist>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Canales opcionales
        </para>
       </entry>
       <entry>
        <para>
         SP1
        </para>
        <simplelist>
         <member><literal>SLES11-SP1-Debuginfo-Pool</literal> </member> <member><literal>SLES11-SP1-Debuginfo-Updates</literal> </member>
        </simplelist>
        <para>
         SP2
        </para>
        <simplelist>
         <member><literal>SLES11-SP2-Debuginfo-Core</literal> </member> <member><literal>SLES11-SP2-Debuginfo-Updates</literal> </member> <member><literal>SLES11-Extras</literal> </member> <member><literal>SLES11-SP2-Extension-Store</literal> </member>
        </simplelist>
        <para>
         SP3
        </para>
        <simplelist>
         <member><literal>SLES11-SP3-Debuginfo-Core</literal> </member> <member><literal>SLES11-SP3-Debuginfo-Updates</literal> </member> <member><literal>SLES11-SP3-Extension-Store</literal> </member> <member><literal>SLES11-Extra</literal> </member>
        </simplelist>
         <para>SP4</para>
         <simplelist>
           <member><literal>SLES11-SP4-Debuginfo-Pool</literal> </member> <member><literal>SLES11-SP4-Debuginfo-Updates</literal></member> <member><literal>SLES11-Extra</literal></member> <member><literal>SLES11-Security-Module</literal></member>
         </simplelist>
       </entry>
       <entry>
        <para>
         SP1
        </para>
        <simplelist>
         <member><literal>SLED11-SP1-Debuginfo-Pool</literal> </member> <member><literal>SLED11-SP1-Debuginfo-Updates</literal> </member>
        </simplelist>
        <para>
         SP2
        </para>
        <simplelist>
         <member><literal>SLED11-SP2-Debuginfo-Core</literal> </member> <member><literal>SLED11-SP2-Debuginfo-Updates</literal> </member> <member><literal>SLED11-Extras</literal> </member> <member><literal>SLED11-SP2-Extension-Store</literal> </member>
        </simplelist>
        <para>
         SP3
        </para>
        <simplelist>
         <member><literal>SLED11-SP3-Debuginfo-Core</literal> </member> <member><literal>SLED11-SP3-Debuginfo-Updates</literal> </member> <member><literal>SLED11-SP3-Extension-Store</literal> </member> <member><literal>SLED11-Extra</literal> </member>
        </simplelist>
         <para>SP4</para>
         <simplelist>
           <member><literal>SLED11-SP4-Debuginfo-Pool</literal> </member> <member><literal>SLED11-SP4-Debuginfo-Updates</literal></member>
         </simplelist>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Específicos de productos (ejemplos)
        </para>
       </entry>
       <entry>
        <simplelist>
         <member><literal>SLES11-WebYaST-SP2-Pool</literal> </member> <member><literal>SLES11-WebYaST-SP2-Updates</literal> </member>
        </simplelist>
       </entry>
       <entry>
        <simplelist>
         <member><literal>SLED11-MSI-Updates</literal> </member>
        </simplelist>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </table>
   <variablelist>
    <title>Descripción de canales obligatorios</title>
    <varlistentry>
     <term>Core (núcleo)</term>
     <listitem>
      <para>
       Un subconjunto de los medios de instalación descomprimidos. Solo contiene los paquetes que se consideran el <quote>núcleo</quote> del SPx (aproximadamente un 30% del total de paquetes). Los repositorios de SP solo contienen los paquetes específicos de un SP y sus temas (por ejemplo, compatibilidad de hardware). Solo existe en el SP2.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Actualizaciones</term>
     <listitem>
      <para>
       Actualizaciones de mantenimiento de los paquetes del repositorio <literal>Core</literal> o <literal>Pool</literal> correspondiente.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Repositorio</term>
     <listitem>
      <para>
       Contiene todos los RPM binarios de los medios de instalación, además de información de patrones y metadatos de estado de compatibilidad.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <variablelist>
    <title>Descripción de canales opcionales</title>
    <varlistentry>
     <term>Debuginfo-Pool</term>
     <term>Debuginfo-Updates</term>
     <listitem>
      <para>
       Estos canales tienen contenido estático. Sin embargo, solo el canal <literal>Debuginfo-Updates</literal> recibe actualizaciones. Habilite estos canales si tiene que instalar bibliotecas con información de depuración en caso de que se produzcan problemas.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Extension-Store</term>
     <listitem>
      <para> De momento, no se utiliza. La idea es que contenga paquetes para (futuros) productos complementarios. El canal de almacén de extensiones se eliminará a partir de SLES 11 SP4.</para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>LTSS-Updates</term>
     <listitem>
      <para>
       Actualizaciones de mantenimiento para paquetes del repositorio <literal>Pool</literal> correspondiente para instalaciones con servicio de asistencia a largo plazo (LTSS). Este canal específico requiere un contrato LTSS.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <sect3 id="sec-update-nmm-channels-origin">
    <title>Origen de paquetes</title>
    <formalpara>
     <title>SUSE Linux Enterprise 11 SP3/SP4</title>
     <para>Con la instalación de SP3, solo hay dos canales disponibles: SLES11-SP3-Pool y SLES11-SP3-Updates. Los canales anteriores del SP2 son visibles, pero no están habilitados. Los canales inhabilitados solo resultarán útiles para usuarios con unas necesidades muy concretas. 
     </para>
    </formalpara>
   </sect3>
   <sect3 id="sec-update-nmm-channels-working">
    <title>Cómo trabajar con los canales</title>
    <para>
     En el registro, el sistema recibe canales del Centro de servicios al cliente de Los nombres de canales corresponden a URI específicos del centro del cliente (ver <ulink url="http://scc.suse.com"/>). Para ver todos los canales disponibles del sistema, utilice <command>zypper</command> tal como se describe a continuación:
    </para>
<screen>zypper repos -u</screen>

    <para>
     Esto proporciona una lista de todos los canales disponibles en el sistema. Cada canal se indica según su alias, su nombre y si está habilitado y se actualizará. La opción <option>-u</option> también proporciona el URI desde donde se origina.
    </para>
    <para>
     Si desea eliminar canales antiguos (por ejemplo, del SP1), utilice <command>zypper removerepo</command> y los nombres de los canales. Por ejemplo, para eliminar los canales antiguos del SP1 y el SP2, utilice el siguiente comando:
    </para>
<screen>zypper removerepo SLES11-SP1-Pool SLES11-SP1-Updates \
  SLE11-SP1-Debuginfo-Pool SLE11-SP1-Debuginfo-Updates \
  SLES11-SP2-Core SLES11-SP2-Updates \
  SLE11-SP2-Debuginfo-Core SLES11-SP2-Extension-Store\
  SLE11-SP2-Debuginfo-Updates</screen>
    <para>
     Si desea volver a añadir algunos de los canales, entre a la sesión en <ulink url="http://www.novell.com/ncc"/> y seleccione el menú <menuchoice> <guimenu>Mis productos</guimenu> <guimenu>Duplicar credenciales.</guimenu> </menuchoice> Desde allí podrá ver una lista de URI. Solo es posible añadir los canales de esta lista de productos. Por ejemplo, para añadir el almacén de extensiones del SP2, utilice el siguiente comando (una línea, sin barra invertida):
    </para>
<screen>zypper addrepo -n SLES11-SP2-Extension-Store \
 https://nu.novell.com/repo/$RCE/SLES11-SP2-Extension-Store/nu_novell_com:SLES11-SP2-Extension-Store</screen>
   </sect3>
    
    
  </sect2>
 
 </sect1>
  
 <sect1 id="sec-update-proc-prep-paths">
  <title>Vías de actualización a SLE SP4 admitidas</title>


  <variablelist>
   <varlistentry>
    <term>Actualizar SLES 8, SLES 9 y NLD 9</term>
    <listitem>
     <para>
      No se admite ninguna vía de actualización directa para estas versiones. En vez de actualizar, es preferible realizar una instalación nueva.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Actualizar de SUSE Linux Enterprise 10 (cualquier paquete de servicios)</term>
    <listitem>
      
     <para>Existen varias formas de actualizar de SLES 10 GA y SPx o de SLES 11 GA y SP1 a SLES 11 SP3, lo que puede requerir de pasos intermedios:</para>
      <itemizedlist mark="bullet" spacing="normal">
        <listitem>
          <para>SLES 10 GA -&gt; SLES 10 SP1 -&gt; SLES 10 SP2 -&gt; SLES 10 SP3 -&gt; SLES 10 SP4 -&gt; SLES 11 SP3 o</para>
        </listitem>
        <listitem>
          <para>SLES 11 GA -&gt; SLES 11 SP1 -&gt; SLES 11 SP2 -&gt; SLES 11 SP3 -&gt; SLES 11 SP4</para>
        </listitem>
      </itemizedlist>
     <para>Se admite la actualización desde SLES 10 SP4 a través de un medio de arranque (incluido el arranque PXE). Para obtener más información, consulte las notas de la versión, que encontrará en <ulink url="https://www.suse.com/releasenotes/x86_64/SUSE-SLES/11-SP4/#Update.General.Sequence"/>.
       </para>
      <para>
        Atención para los usuarios de SLED: algunos paquetes de desarrollo se han trasladado del medio de instalación de <literal>SLED11-SP2</literal> al repositorio <literal>SLED11-Extras</literal>. A fin de evitar conflictos de dependencias durante la actualización, habilite este repositorio antes de realizar la actualización en sí. Ejecute los <command>repositorios de yast2</command> y habilite <literal>SLED11-Extras</literal> en ellos. En SLES, este paso adicional no es necesario.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Actualizar desde SUSE Linux Enterprise 11 GA</term>
    <listitem>
     <para>
      No se admite ninguna vía de migración directa a SUSE Linux Enterprise 11 SP3. Es necesario realizar primero una actualización de SUSE Linux Enterprise 11 GA a SP1. Continúe con <xref linkend="sec-update-sle11sp1"/> y, después, con <xref linkend="sec-update-sle11sp2"/>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Actualizar de SUSE Linux Enterprise 11 SP1</term>
    <listitem>
     <para>
      Consulte la <xref linkend="sec-update-sle11sp1"/> para obtener más detalles.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Actualizar de SUSE Linux Enterprise 11 SP2</term>
    <listitem>
     <para>
      Consulte la <xref linkend="sec-update-sle11sp2"/> para obtener más detalles.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Actualizar de SUSE Linux Enterprise 11 SP3</term>
    <listitem>
     <para>
      Consulte la <xref linkend="sec-update-sle11sp3"/> para obtener más detalles.
     </para>
    </listitem>
   </varlistentry> 
  </variablelist>

  <important>
   <title>no se admiten actualizaciones de arquitecturas cruzadas</title>
   <para>
    
    No se admiten las actualizaciones entre arquitecturas (de 32 bits a 64 bits y viceversa).
   </para>
  </important>
  
 </sect1>
 <sect1 id="sec-update-prep">
  <title>Preparativos generales para la actualización</title>

  <para>
   Antes de iniciar el procedimiento de actualización, asegúrese de que el sistema está debidamente preparado. Entre otros aspectos, los preparativos requieren realizar una copia de seguridad de los datos y comprobar las notas de la versión.
  </para>

  <sect2 id="sec-update-prep-backup">
   <title>Creación de una copia de seguridad</title>
   <para>
    Antes de actualizar, copie los archivos de configuración existentes en un medio independiente (un dispositivo de cinta, un disco duro extraíble, etc.) para realizar una copia de seguridad de los datos. Esta recomendación se aplica fundamentalmente a los archivos almacenados en <filename>/etc</filename>, además de a algunos directorios y archivos de <filename>/var</filename> y <filename>/opt</filename>. También puede ser conveniente escribir los datos de usuario del directorio <filename>/home</filename> (los directorios <envar>HOME</envar>) en un medio de copia de seguridad. Haga una copia de seguridad de esos datos como usuario <systemitem class="username">Root</systemitem>. Solo los usuarios <systemitem class="username">Root</systemitem> disponen de permiso de lectura para todos los archivos locales.
   </para>
   <para>
    Si ha seleccionado <guimenu>Actualizar un sistema existente</guimenu> como modo de instalación en YaST, puede optar por realizar una copia de seguridad (del sistema) en un momento posterior. Puede seleccionar la inclusión de todos los archivos modificados y los archivos del directorio <filename>/etc/sysconfig</filename>. Sin embargo, no se trata de una copia de seguridad completa, ya que faltarían otros directorios importantes mencionados anteriormente. Busque la copia de seguridad en el directorio <filename>/var/adm/backup</filename>.
   </para>
  </sect2>

  <sect2 id="sec-update-prep-disks">
   <title>Particionamiento y espacio en disco</title>
   <para>
    Antes de empezar el proceso de actualización, anote la partición raíz. El comando <command>df /</command> muestra el nombre de dispositivo de la partición raíz. En el <xref linkend="aus-update-df"/>, la partición raíz que se debe escribir es <filename>/dev/sda3</filename> (montada como <filename>/</filename>).
   </para>
   <example id="aus-update-df">
    <title>Lista que se obtiene con <command>df -h</command></title>

<screen os="sles">Filesystem     Size  Used Avail Use% Mounted on
     /dev/sda3       74G   22G   53G  29% /
     tmpfs          506M     0  506M   0% /dev/shm
     /dev/sda5      116G  5.8G  111G   5% /home
     /dev/sda1       44G    4G   40G   9% /data</screen>
   </example>
   <para>
    El software tiende a <quote>crecer</quote> de una versión a la siguiente. Por ello, antes de actualizar debe saber de cuánto espacio dispone en la partición, empleando para ello el comando <command>df</command>. Si sospecha que no dispone de mucho espacio en el disco, asegure los datos antes de actualizar el sistema y volver a particionarlo. No existe ninguna regla general sobre cuánto espacio debe tener cada partición. Los requisitos de espacio dependen de cada perfil de particiones concreto y del software que se seleccione.
   </para>
  </sect2>

  <sect2 id="sec-update-prep-vms">
   <title>Apagado de máquinas virtuales</title>
   <para>
    Si el equipo hace de Host VM Server para KVM o Xen, asegúrese de apagar correctamente cualquier Guest VM en ejecución antes de actualizar. De lo contrario, quizá no pueda acceder a los sistemas invitados tras la actualización.
   </para>
  </sect2>

  <sect2 id="sec-update-prep-relnotes">
   <title>Requisitos específicos de versiones</title>
   <para>
    Para conocer los requisitos específicos, consulte las notas de la versión incluidas con la actualización. En las notas de la versión encontrará información adicional sobre los procedimientos de actualización.
   </para>
   <para>
    Puede consultar en línea la versión actual del documento de notas de la versión de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>con la información más reciente en <ulink url="http://www.suse.com/doc/sles11/#additional"/>.
   </para>
  </sect2>
 </sect1>
 <sect1 id="sec-update-sle11sp1">
  <title>Actualizar SLE 11 SP1 a SLE 11 SP2</title>

  <para>
   Hay dos modos diferentes de actualizar un sistema SUSE Linux Enterprise 11 SP1 al Service Pack 2. Puede emplear las herramientas de actualización en línea para instalar los parches correspondientes (<quote>migración en línea</quote>), o bien realizar el proceso desde el medio de instalación del Service Pack. Además, las actualizaciones se pueden realizar mediante servidores en los que se encuentre Subscription Management Tool o SUSE Manager.
  </para>

  <para>
   La migración en línea es compatible con las siguientes herramientas:
  </para>

  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     <guimenu>YaST wagon</guimenu> (interfaz gráfica de usuario)
    </para>
   </listitem>
   <listitem>
    <para>
     <command>zypper</command> (línea de comandos)
    </para>
   </listitem>
  </itemizedlist>

  <para>
   Si lo prefiere, puede descargar el medio con el Service Pack completo (imagen ISO de DVD). Inicie el proceso de actualización arrancando desde el medio físico del Service Pack o un origen de instalación de red.
  </para>

  <sect2 id="sec-update-sle11spx-online">
   <title>Migración en línea</title>
   <para>
    La actualización del sistema mediante la migración en línea se realiza desde el sistema en ejecución. Solo es necesario reiniciar una vez, cuando la actualización ha finalizado.
   </para>
   <sect3 id="sec-update-sle11spx-online-requirements">
    <title>Requisitos</title>
    <para>
     Para efectuar una actualización en línea, deben cumplirse los requisitos descritos a continuación. No olvide leer también la <xref linkend="sec-update-prep"/>.
    </para>
    <variablelist>
     <varlistentry>
      <term>Registro del producto</term>
      <listitem>
       <para>
        Para que sea posible conectar con los canales de actualización, el producto debe estar registrado. Si no es el caso, ejecute el módulo <guimenu>Configuración del Centro de servicios al cliente de Novell</guimenu> en YaST o la herramienta de línea de comandos <command>suse_register</command> para iniciar el registro.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Ejecución de una actualización en línea</term>
      <listitem>
       <para>
        Asegúrese de que la versión instalada actualmente dispone de los parches más recientes. Ejecute una actualización en línea antes de la migración en línea. Si utiliza una interfaz gráfica, inicie la actualización en línea de YaST, o el applet de actualización. En la línea de comandos, ejecute los siguientes comandos (el último debe ejecutarse dos veces):
       </para>
<screen>zypper ref -s
zypper update -t patch
zypper update -t patch</screen>
       <para>
        Reinicie el sistema si es necesario.
       </para>
       <para>
        Consulte el <xref linkend="cha-onlineupdate-you"/> o la <xref linkend="sec-zypper-softup"/> para obtener más información sobre las herramientas de actualización en línea.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Software de otros fabricantes</term>
      <listitem>
       <para>
        Si la configuración afecta a software de otros fabricantes o a software complementario, pruebe este procedimiento en otro equipo para asegurarse de que no se rompen las dependencias durante la actualización.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
    <important>
     <title>ejecute siempre una migración en línea completa</title>
     <para>
      La migración en línea siempre debe completarse de principio a fin. Si una migración en línea se interrumpe, el sistema sufrirá daños irrecuperables.
     </para>
    </important>
   </sect3>
   <sect3 id="sec-update-sle11spx-online-wagon">
    <title>Migración en línea con YaST <guimenu>Wagon</guimenu></title>
     <para>Si tiene un sistema SLES 11 SP1, encontrará los pasos necesarios en <ulink url="https://www.suse.com/support/kb/doc.php?id=7011872"/>. El procedimiento siguiente se aplica a la migración en línea de SP2 a SP3.</para>     
    <procedure>
     <step performance="required">
      <para>
       Si se cumplen todos los requisitos (consulte la <xref linkend="sec-update-sle11spx-online-requirements"/>), el applet de actualización de la bandeja del sistema mostrará un mensaje para indicar que hay una actualización de la distribución disponible. Haga clic en él para iniciar YaST <guimenu>Wagon</guimenu> Si lo prefiere, ejecute <command>/usr/sbin/wagon</command> como <systemitem class="username">raíz</systemitem> desde la línea de comandos.
      </para>
     </step>
     <step performance="required">
      <para>
       Confirme el diálogo de <guimenu>Bienvenida</guimenu> con la opción <guimenu>Siguiente.</guimenu>
      </para>
     </step>
     <step performance="required">
      <para>
       Si <guimenu>Wagon</guimenu> detecta que no se cumplen los requisitos (hay actualizaciones de mantenimiento obligatorias disponibles pero no instaladas), realizará una actualización automática, lo que podría requerir un reinicio. Siga las instrucciones que aparecen en pantalla.
      </para>
     </step>
     <step performance="required">
      <para>
       Seleccione el método de actualización en el siguiente diálogo. Seleccione <guimenu>Centro de servicios al cliente</guimenu> para usar la configuración por defecto (recomendada).
      </para>
      <para>
       Haga clic en <guimenu>URL personalizada</guimenu> para elegir manualmente los canales de software que se deben emplear para la migración en línea. Se mostrará una lista de canales que le permitirá habilitar, inhabilitar, añadir o suprimir canales manualmente. Añada los orígenes de actualizaciones de SP2. Puede ser el medio de instalación de SP2 o los canales <literal>SP2-Core</literal> y <literal>SP2-Updates</literal>. Haga clic en <guimenu>Aceptar</guimenu> para volver al diálogo <guimenu>Método de actualización.</guimenu>
      </para>
      <para>
       Si desea revisar los cambios en la configuración de canales causados por el proceso de actualización, seleccione <guimenu>Comprobar cambios automáticos del repositorio.</guimenu>
      </para>
      <para>
       Haga clic en <guimenu>Siguiente.</guimenu>
      </para>
     </step>
     <step performance="required">
      <para>
       El sistema se volverá a registrar. Durante este proceso, los canales <literal>SP2-Core</literal> y <literal>SP2-Updates</literal> se añadirán al sistema (consulte <xref linkend="sec-update-nmm-channels"/> para obtener más información). Confirme la adición de los canales.
      </para>
     </step>
     <step performance="required">
      <para>
       Si ha seleccionado <guimenu>Comprobar cambios automáticos del repositorio</guimenu> en el diálogo <guimenu>Método de actualización,</guimenu> se mostrará la lista de repositorios, que le permitirá habilitar, inhabilitar, añadir o suprimir canales manualmente. Haga clic en <guimenu>Aceptar</guimenu> cuando haya terminado.
      </para>
     </step>
     <step performance="required">
      <para>
       Seleccione el tipo de migración:
      </para>
      <variablelist>
       <varlistentry>
        <term><guimenu>Migración completa</guimenu>
        </term>
        <listitem>
         <para>
          Se actualizarán todos los paquetes al nivel más reciente del SP2.
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term><guimenu>Migración mínima</guimenu>
        </term>
        <listitem>
         <para>
          Se actualizará un conjunto mínimo de paquetes al nivel más reciente del SP2.
         </para>
        </listitem>
       </varlistentry>
      </variablelist>
      <para>
       Haga clic en <guimenu>Avanzado</guimenu> para seleccionar manualmente los repositorios empleados para la actualización.
      </para>
      <para>
       Confirme la selección.
      </para>
     </step>
     <step performance="required">
      <para>
       Se abrirá la pantalla <guimenu>Valores de actualización de la distribución,</guimenu> que muestra un resumen de la configuración de la actualización. Las secciones disponibles son las siguientes:
      </para>
      <variablelist>
       <varlistentry>
        <term><guimenu>Productos complementarios</guimenu>
        </term>
        <listitem>
         <para>
          Podrá añadir productos complementarios de SUSE Linux Enterprise Server o productos de otro fabricante.
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term><guimenu>Opciones de actualización</guimenu>
        </term>
        <listitem>
         <para>
          Muestra las acciones que se llevarán a cabo durante la actualización. Puede decidir si se deben descargar todos los paquetes antes de empezar a instalarlos (valor por defecto y recomendado) o si se deben descargar e instalar de uno en uno.
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term><guimenu>Paquetes</guimenu>
        </term>
        <listitem>
         <para>
          Descripción general de estadísticas de la actualización.
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term>Copia de seguridad</term>
        <listitem>
         <para>
          Defina las opciones de copia de seguridad.
         </para>
        </listitem>
       </varlistentry>
      </variablelist>
      <para>
       Haga clic en <guimenu>Siguiente</guimenu> y en <guimenu>Iniciar actualización</guimenu> para continuar.
      </para>
      <important>
       <title>cancelación de la migración en línea</title>
       <para>
        Puede cancelar la migración en línea de forma segura desde esta pantalla y las anteriores <emphasis>antes</emphasis> de hacer clic en <guimenu>Iniciar actualización.</guimenu> Haga clic en <guimenu>Cancelar</guimenu> para abandonar el procedimiento de actualización y restaurar el sistema al estado en el que se encontraba antes de iniciar YaST wagon. Siga las instrucciones que aparezcan en pantalla y repita el registro antes de salir de Wagon para eliminar los canales del SP2 del sistema.
       </para>
      </important>
     </step>
     <step performance="required">
      <para>
       Durante el procedimiento de actualización se ejecutan los siguientes pasos:
      </para>
      <substeps performance="required">
       <step performance="required">
        <para>
         Los paquetes se actualizarán.
        </para>
       </step>
       <step performance="required">
        <para>
         <command>SuSEconfig</command> se ejecutará.
        </para>
       </step>
       <step performance="required">
        <para>
         El sistema se reiniciará (pulse <guimenu>Aceptar</guimenu>).
        </para>
       </step>
       <step performance="required">
        <para>
         El sistema recién actualizado se volverá a registrar.
        </para>
       </step>
      </substeps>
     </step>
     <step performance="required">
      <para>
       El sistema se ha actualizado correctamente al Service Pack 2.
      </para>
     </step>
    </procedure>
    
   </sect3>
   <sect3 id="sec-update-sle11spx-online-zypper">
    <title>Migración en línea con <command>zypper</command></title>
    <procedure>
     <step performance="required">
      <para>
       Si se cumplen todos los requisitos (consulte la <xref linkend="sec-update-sle11spx-online-requirements"/>), los <quote>productos</quote> necesarios para la migración en línea se añaden a <filename>/etc/products.d</filename>. Para obtener una lista de dichos productos, ejecute el siguiente comando:
      </para>

<screen>zypper se -t product | grep -h -- "-migration" | cut -d'|' -f2</screen>
      <para>
       El comando debe devolver al menos <literal os="sles">SUSE_SLES-SP2-migration</literal>. Dependiendo del alcance de la instalación, es posible que incluya más productos.
      </para>
     </step>
     <step performance="required">
      <para>
       Instale los productos de migración recuperados en el paso anterior con el comando <command>zypper in -t producto <replaceable>LISTA_DE_PRODUCTOS</replaceable></command>, por ejemplo.
      </para>
<screen os="sles">zypper in -t product SUSE_SLES-SP2-migration</screen>

     </step>
     <step performance="required">
      <para>
       Registre los productos instalados en el paso anterior para obtener los canales de actualización correspondientes:
      </para>
<screen>suse_register -d 2 -L /root/.suse_register.log</screen>
     </step>
     <step performance="required">
      <para>
       Vuelva a actualizar los repositorios y los servicios:
      </para>
<screen>zypper ref -s</screen>
     </step>
     <step performance="required">
      <para>
       Compruebe la lista de los repositorios que puede recuperar con <command>zypper lr</command>. <emphasis>Al menos</emphasis> los siguientes repositorios deben estar <guimenu>habilitados:</guimenu>
      </para>
      <itemizedlist os="sles" mark="bullet" spacing="normal">
       <listitem>
        <para>
         <literal>SLES11-SP1-Pool</literal>
        </para>
       </listitem>
       <listitem>
        <para>
         <literal>SLES11-SP1-Updates</literal>
        </para>
       </listitem>
       <listitem>
        <para>
         <literal>SLES11-SP2-Core</literal>
        </para>
       </listitem>
       <listitem>
        <para>
         <literal>SLES11-SP2-Updates</literal>
        </para>
       </listitem>
      </itemizedlist>
      
      <para>
       Dependiendo del alcance de la instalación, será necesario habilitar más repositorios para productos complementarios o extensiones.
      </para>
      <para>
       Si uno de los repositorios no está habilitado (los del <literal>SP2</literal> no están habilitados por defecto si se sigue este flujo de trabajo), habilítelos con el comando <command>zypper modifyrepo --enable <replaceable>ALIAS DE REPOSITORIO</replaceable></command>, por ejemplo:
      </para>
<screen os="sles">zypper modifyrepo --enable SLES11-SP2-Core SLES11-SP2-Updates</screen>

      <para>
       Si la configuración contiene repositorios de otros fabricantes que podrían no ser compatibles con el SP2, inhabilítelos con <command>zypper modifyrepo --disable <replaceable>ALIAS DE REPOSITORIO</replaceable></command>.
      </para>
     </step>
     <step performance="required">
      <para>
       Todo está preparado para realizar la actualización de la distribución con <command>zypper dup --from <replaceable>REPO 1</replaceable> --from <replaceable>REPO 2</replaceable> <replaceable>...</replaceable></command> Asegúrese de que se enumeran todos los repositorios necesarios con <option>--from</option>, por ejemplo:
      </para>
<screen os="sles">zypper dup --from SLES11-SP2-Core --from SLES11-SP2-Updates</screen>

      <para>
       Confirme con <guimenu>y</guimenu> para iniciar la actualización.
      </para>
     </step>
     <step performance="required">
      <para>
       Una vez completada la actualización de la distribución mediante el paso anterior, se habrá realizado una migración mínima (un conjunto mínimo de paquetes actualizados al nivel más reciente del SP2). Omita este paso si no pretende realizar una migración completa.
      </para>
      <para>
       Para realizar una migración completa (actualiza todos los paquetes al nivel más reciente del SP2), ejecute el siguiente comando:
      </para>
<screen>zypper update -t patch</screen>
     </step>
     <step performance="required">
      <para>
       Ahora que se ha completado la actualización al SP2, deberá volver a registrar el producto:
      </para>
<screen>suse_register -d 2 -L /root/.suse_register.log</screen>
     </step>
     <step performance="required">
      <para>
       Por último, reinicie el sistema.
      </para>
     </step>
     <step performance="required">
      <para>
       El sistema se ha actualizado correctamente al Service Pack 2.
      </para>
     </step>
    </procedure>
   </sect3>
  </sect2>

  <sect2 id="sec-update-sle11spx-medium">
   <title>Actualización mediante el arranque desde un origen de instalación</title>
   <para>
    Como alternativa a la migración en línea (consulte la <xref linkend="sec-update-sle11spx-online"/> para obtener más información), también puede actualizar el sistema arrancándolo desde un origen de instalación (ya sea un DVD o un origen de instalación de red). La actualización comenzará como una instalación normal.
   </para>
   <para>
    Puede obtener una imagen ISO del Service Pack 2 desde <ulink url="http://download.novell.com/"/>. Grábela en un DVD o prepare un origen de instalación de red, tal como se describe en la <xref linkend="sec-deployment-remoteinst-instserver"/>.
   </para>
   <sect3 id="sec-upgrade-install-from-dvd">
    <title>Actualización desde una unidad de DVD local</title>
    <para>
     Antes de comenzar una instalación nueva de un paquete de servicios de SUSE Linux Enterprise SP, asegúrese de que todos los medios de instalación del paquete de servicios (los DVD) están disponibles.
    </para>
    <procedure id="upgrade-sp-instsp-fromsp">
     <title>Arranque desde el medio del Service Pack.</title>
     <step performance="required">
      <para>
       Inserte el primer medio SUSE Linux Enterprise SP y arranque el equipo. Se mostrará una pantalla de arranque parecida a la de la instalación original de SUSE Linux Enterprise 11.
      </para>
     </step>
     <step performance="required">
      <para>
       Seleccione <guimenu>Instalación</guimenu> y continúe como se describe en las instrucciones de instalación de YaST en el <xref linkend="cha-inst"/>.
      </para>
     </step>
    </procedure>
   </sect3>
   <sect3 id="sec-upgrade-install-from-network">
    <title>Actualización desde un origen de instalación de red</title>
    <para>
     Antes de iniciar una actualización de un SUSE Linux Enterprise SP desde un origen de instalación de red, compruebe que se cumplen los siguientes requisitos:
    </para>
    <itemizedlist mark="bullet" spacing="normal">
     <listitem>
      <para>
       Hay un origen de instalación de red configurado según se describe en <xref linkend="sec-deployment-remoteinst-instserver"/>.
      </para>
     </listitem>
     <listitem>
      <para>
       Existe una conexión de red funcional en el servidor de instalación y en el equipo de destino con un servicio de nombres, DHCP (opcional, pero necesario para arranques PXE) y OpenSLP (opcional).
      </para>
     </listitem>
     <listitem>
      <para>
       Dispone del DVD 1 SUSE Linux Enterprise SP para arrancar el sistema de destino <emphasis>o</emphasis> un sistema de destino configurado para el arranque PXE según se describe en la <xref linkend="sec-deployment-remoteinst-boot-pxeprep" xrefstyle="HeadingOnPage"/>.
      </para>
     </listitem>
    </itemizedlist>
    <para>
     Consulte <xref linkend="cha-deployment-remoteinst"/> para obtener información más detallada sobre cómo iniciar la actualización desde un servidor remoto.
    </para>
    <sect4 id="sec-upgrade-install-from-network-dvdboot">
     <title>Instalación en red: arranque desde un DVD</title>
     <para>
      Para realizar una instalación de red utilizando el DVD del paquete de servicios como medio de arranque, haga lo siguiente:
     </para>
     <procedure>
      <step performance="required">
       <para>
        Inserte el DVD 1 SUSE Linux Enterprise SP y arranque el equipo. Se mostrará una pantalla de arranque parecida a la de la instalación original de SUSE Linux Enterprise 11.
       </para>
      </step>
      <step performance="required">
       <para>
        Seleccione <guimenu>Instalación</guimenu> para arrancar el núcleo del paquete de servicios y pulse <keycap>F4</keycap> para seleccionar el tipo de origen de instalación de red (FTP, HTTP, NFS o SMB).
       </para>
      </step>
      <step performance="required">
       <para>
        Proporcione la información de la vía adecuada o seleccione <guimenu>SLP</guimenu> como origen de instalación.
       </para>
      </step>
      <step performance="required">
       <para>
        Seleccione el servidor de instalación oportuno entre los que se ofrecen o utilice el indicador de opciones de arranque para proporcionar el tipo de origen de instalación y su ubicación real, como se describe en la <xref linkend="sec-i-yast2-source-network"/>. Se iniciará YaST.
       </para>
       <para>
        Complete la instalación como se describe en la <xref linkend="sec-update-sle11spx-medium-update"/>.
       </para>
      </step>
     </procedure>
    </sect4>
    <sect4 id="sec-upgrade-install-from-network-pxeboot">
     <title>Instalación de red: arranque PXE</title>
     <para>
      Para realizar una instalación de un Service Pack de SUSE Linux Enterprise a través de la red, haga lo siguiente:
     </para>
     <procedure>
      <step performance="required">
       <para>
        Ajuste la configuración del servidor DHCP para proporcionar la información de dirección necesaria para el arranque PXE como se describe en la <xref linkend="sec-deployment-remoteinst-boot-pxeprep"/>.
       </para>
      </step>
      <step performance="required">
       <para>
        Configure un servidor TFTP para almacenar la imagen necesaria para el arranque PXE.
       </para>
       <para>
        Utilice el primer CD o DVD del paquete de servicios de SUSE Linux Enterprise o siga las instrucciones de la <xref linkend="sec-deployment-remoteinst-boot-tftp"/>.
       </para>
      </step>
      <step performance="required">
       <para>
        Prepare el arranque PXE y Wake-on-LAN en el equipo de destino.
       </para>
      </step>
      <step performance="required">
       <para>
        Inicie el arranque del sistema de destino y utilice el VNC para conectar de forma remota con la rutina de instalación en ejecución en ese equipo. Consulte la <xref linkend="sec-deployment-remoteinst-monitor-vnc"/> para obtener más información.
       </para>
      </step>
      <step performance="required">
       <para>
        Complete la instalación como se describe en la <xref linkend="sec-update-sle11spx-medium-update"/>.
       </para>
      </step>
     </procedure>
    </sect4>
   </sect3>
   <sect3 id="sec-update-sle11spx-medium-update">
    <title>Procedimiento de actualización</title>
    <para>
     Después de arrancar correctamente desde un medio de instalación o desde la red, lleve a cabo los pasos descritos a continuación para iniciar la actualización:
    </para>
    <procedure>
     <step performance="required">
      <para>
       En la pantalla de <guimenu>Bienvenida,</guimenu> seleccione el <guimenu>Idioma</guimenu> y el <guimenu>Teclado</guimenu> y acepte el Acuerdo de licencia. Haga clic en <guimenu>Siguiente.</guimenu>
      </para>
     </step>
     <step performance="required">
      <para>
       En caso de que haya arrancado desde un medio físico, realice una <guimenu>Comprobación de medios</guimenu> para verificar la integridad del medio. Omita este paso solo si ha comprobado el medio anteriormente.
      </para>
     </step>
     <step performance="required">
      <para>
       En la pantalla <guimenu>Modo de instalación,</guimenu> seleccione <guimenu>Actualizar.</guimenu> Al hacer clic en <guimenu>Siguiente,</guimenu> comenzará el procedimiento de actualización.
      </para>
     </step>
    </procedure>
   </sect3>
  </sect2>

  <sect2 id="sec-update-sle11spx-smt">
   <title>Actualización a través de Subscription Management Tool (SMT)</title>
   <para>
    Como alternativa a la descarga de actualizaciones para cada sistema cliente desde el servidor de actualizaciones de Novell, es posible emplear el componente Subscription Management Tool (SMT) para SUSE Linux Enterprise, a fin de duplicar las actualizaciones en un servidor local.
   </para>
   <para>
    Esta herramienta actúa como proxy del Centro de servicios al cliente de Novell para registrar clientes y como repositorio de actualizaciones de software. La documentación de SMT disponible en <ulink url="http://www.suse.com/doc/smt11/"/> ofrece una descripción general de sus funciones, así como instrucciones acerca de cómo implementarla.
   </para>
  </sect2>

  <sect2 id="sec-update-sle11spx-manager">
   <title>Actualización a través de SUSE Manager</title>
   <para>
    SUSE Manager es una solución de servidor para proporcionar actualizaciones, parches y soluciones de seguridad para los clientes de SUSE Linux Enterprise. Incorpora un conjunto de herramientas y una interfaz de usuario Web para tareas de gestión.
   </para>
   <para>
    La documentación de SUSE Manager <ulink url="http://www.suse.com/doc/suse_manager/"/> ofrece una descripción general de sus funciones e instrucciones acerca de cómo configurar servidores y clientes.
   </para>
  </sect2>
 </sect1>
 <sect1 id="sec-update-sle11sp2">
  <title>Actualizar SLE 11 SP2 a SLE 11 SP3</title>

  

  <para>
   La migración en línea es compatible con las siguientes herramientas:
  </para>

  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     <guimenu>YaST wagon</guimenu> (interfaz gráfica de usuario)
    </para>
   </listitem>
   <listitem>
    <para>
     <command>zypper</command> (línea de comandos)
    </para>
   </listitem>
  </itemizedlist>

  <para>
   Si actualiza el sistema mediante la migración en línea, la actualización se lleva a cabo con el sistema en ejecución. Solo es necesario reiniciar una vez, cuando la actualización ha finalizado. Sigue siendo posible actualizar mediante las siguientes alternativas:
  </para>

  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     <xref linkend="sec-update-sle11spx-medium"/>
    </para>
   </listitem>
   <listitem>
    <para>
     <xref linkend="sec-update-sle11spx-smt"/>
    </para>
   </listitem>
   <listitem>
    <para>
     <xref linkend="sec-update-sle11spx-manager"/>
    </para>
   </listitem>
  </itemizedlist>

  <sect2 id="sec-update-sle11sp2-online-requirements">
   <title>Requisitos</title>
   <para>
    Para efectuar una actualización en línea, deben cumplirse los requisitos descritos a continuación. No olvide leer también la <xref linkend="sec-update-prep"/>.
   </para>
   <variablelist>
    <varlistentry>
     <term>Registro del producto</term>
     <listitem>
      <para>
       Para que sea posible conectar con los canales de actualización, el producto debe estar registrado. Si no es el caso, ejecute el módulo <guimenu>Configuración del Centro de servicios al cliente de Novell</guimenu> en YaST o la herramienta de línea de comandos <command>suse_register</command> para iniciar el registro.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Ejecución de una actualización en línea</term>
     <listitem>
      <para>
       Asegúrese de que la versión instalada actualmente dispone de los parches más recientes. Ejecute una actualización en línea antes de la migración en línea. Si utiliza una interfaz gráfica, inicie la actualización en línea de YaST, o el applet de actualización. En la línea de comandos, ejecute los siguientes comandos (el último debe ejecutarse dos veces):
      </para>
<screen>zypper ref -s
zypper update -t patch
zypper update -t patch</screen>
      <para>
       Reinicie el sistema si es necesario.
      </para>
      <para>
       Consulte el <xref linkend="cha-onlineupdate-you"/> o la <xref linkend="sec-zypper-softup"/> para obtener más información acerca de las herramientas de actualización en línea.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Software de otros fabricantes</term>
     <listitem>
      <para>
       Si la configuración afecta a software de otros fabricantes o a software complementario, pruebe este procedimiento en otro equipo para asegurarse de que no se rompen las dependencias durante la actualización.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <important>
    <title>ejecute siempre una migración en línea completa</title>
    <para>
     La migración en línea siempre debe completarse de principio a fin. Si una migración en línea se interrumpe, el sistema sufrirá daños irrecuperables.
    </para>
   </important>
  </sect2>

  <sect2 id="sec-update-sle11sp2-online-wagon">
   <title>Migración en línea con YaST <guimenu>Wagon</guimenu></title>
   <procedure>
    <step performance="required">
     <para>
      Si se cumplen todos los requisitos (consulte la <xref linkend="sec-update-sle11spx-online-requirements"/>), el applet de actualización de la bandeja del sistema mostrará un mensaje para indicar que hay una actualización de la distribución disponible. Haga clic en él para iniciar YaST <guimenu>Wagon</guimenu> Si lo prefiere, ejecute <command>/usr/sbin/wagon</command> como <systemitem class="username">raíz</systemitem> desde la línea de comandos.
     </para>
    </step>
    <step performance="required">
     <para>
      Confirme el diálogo de <guimenu>Bienvenida</guimenu> con la opción <guimenu>Siguiente.</guimenu>
     </para>
    </step>
    <step performance="required">
     <para>
      Si <guimenu>Wagon</guimenu> detecta que no se cumplen los requisitos (hay actualizaciones de mantenimiento obligatorias disponibles pero no instaladas), realizará una actualización automática, lo que podría requerir un reinicio. Siga las instrucciones que aparecen en pantalla.
     </para>
    </step>
    <step performance="required">
     <para>
      Seleccione el método de actualización en el siguiente diálogo. Seleccione <guimenu>Centro de servicios al cliente</guimenu> para usar la configuración por defecto (recomendada).
     </para>
     <para>
      Haga clic en <guimenu>URL personalizada</guimenu> para elegir manualmente los canales de software que se deben emplear para la migración en línea. Se mostrará una lista de canales que le permitirá habilitar, inhabilitar, añadir o suprimir canales manualmente. Añada los orígenes de actualizaciones del SP3. Puede ser el medio de instalación del SP3 o los canales <literal>SP3-Pool</literal> y <literal>SP3-Updates</literal>. Haga clic en <guimenu>Aceptar</guimenu> para volver al diálogo <guimenu>Método de actualización.</guimenu>
     </para>
     <para>
      Si desea revisar los cambios en la configuración de canales causados por el proceso de actualización, seleccione <guimenu>Comprobar cambios automáticos del repositorio.</guimenu>
     </para>
     <para>
      Haga clic en <guimenu>Siguiente.</guimenu>
     </para>
    </step>
    <step performance="required">
     <para>
      El sistema se volverá a registrar. Durante este proceso, los canales <literal>SP3-Pool</literal> y <literal>SP3-Updates</literal> se añadirán al sistema (consulte <xref linkend="sec-update-nmm-channels"/> para obtener más información). Confirme la adición de los canales.
     </para>
    </step>
    <step performance="required">
     <para>
      Si ha seleccionado <guimenu>Comprobar cambios automáticos del repositorio</guimenu> en el diálogo <guimenu>Método de actualización,</guimenu> se mostrará la lista de repositorios, que le permitirá habilitar, inhabilitar, añadir o suprimir canales manualmente. Haga clic en <guimenu>Aceptar</guimenu> cuando haya terminado.
     </para>
    </step>
    <step performance="required">
     <para>
      Se abrirá la pantalla <guimenu>Valores de actualización de la distribución,</guimenu> que muestra un resumen de la configuración de la actualización. Las secciones disponibles son las siguientes:
     </para>
     <variablelist>
      <varlistentry>
       <term><guimenu>Productos complementarios</guimenu>
       </term>
       <listitem>
        <para>
         Podrá añadir productos complementarios de SUSE Linux Enterprise Server o productos de otro fabricante.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><guimenu>Opciones de actualización</guimenu>
       </term>
       <listitem>
        <para>
         Muestra las acciones que se llevarán a cabo durante la actualización. Puede decidir si se deben descargar todos los paquetes antes de empezar a instalarlos (valor por defecto y recomendado) o si se deben descargar e instalar de uno en uno.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><guimenu>Paquetes</guimenu>
       </term>
       <listitem>
        <para>
         Descripción general de estadísticas de la actualización.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Copia de seguridad</term>
       <listitem>
        <para>
         Defina las opciones de copia de seguridad.
        </para>
       </listitem>
      </varlistentry>
     </variablelist>
     <para>
      Haga clic en <guimenu>Siguiente</guimenu> y en <guimenu>Iniciar actualización</guimenu> para continuar.
     </para>
     <important>
      <title>cancelación de la migración en línea</title>
      <para>
       Puede cancelar la migración en línea de forma segura desde esta pantalla y las anteriores <emphasis>antes</emphasis> de hacer clic en <guimenu>Iniciar actualización.</guimenu> Haga clic en <guimenu>Cancelar</guimenu> para abandonar el procedimiento de actualización y restaurar el sistema al estado en el que se encontraba antes de iniciar YaST Wagon. Siga las instrucciones que aparezcan en pantalla y repita el registro antes de salir de Wagon para eliminar los canales del SP2 del sistema.
      </para>
     </important>
    </step>
    <step performance="required">
     <para>
      Durante el procedimiento de actualización se ejecutan los siguientes pasos:
     </para>
     <substeps performance="required">
      <step performance="required">
       <para>
        Los paquetes se actualizarán.
       </para>
      </step>
      <step performance="required">
       <para>
        <command>SuSEconfig</command> se ejecutará.
       </para>
      </step>
      <step performance="required">
       <para>
        El sistema se reiniciará (pulse <guimenu>Aceptar</guimenu>).
       </para>
      </step>
      <step performance="required">
       <para>
        El sistema recién actualizado se volverá a registrar.
       </para>
      </step>
     </substeps>
    </step>
    <step performance="required">
     <para>
      El sistema se ha actualizado correctamente al Service Pack 3.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec-update-sle11sp2-online-zypper">
   <title>Migración en línea con <command>zypper</command></title>
   <procedure>
    <step performance="required">
     <para>
      Si se cumplen todos los requisitos (consulte <xref linkend="sec-update-sle11spx-online-requirements"/>), los <quote>productos</quote> necesarios para la migración en línea se añaden a <filename>/etc/products.d</filename>. Para obtener una lista de dichos productos, ejecute el siguiente comando:
     </para>

<screen>zypper se -t product | grep -h -- "-migration" | cut -d'|' -f2</screen>
     <para>
      El comando debe devolver al menos <literal os="sles">SUSE_SLES-SP3</literal>-migration. Dependiendo del alcance de la instalación, es posible que incluya más productos.
     </para>
    </step>
    <step performance="required">
     <para>
      Instale los productos de migración recuperados en el paso anterior con el comando <command>zypper in -t producto <replaceable>LISTA_DE_PRODUCTOS</replaceable></command>, por ejemplo.
     </para>
<screen os="sles">zypper in -t product SUSE_SLES-SP3-migration</screen>

    </step>
    <step performance="required">
     <para>
      Registre los productos instalados en el paso anterior para obtener los canales de actualización correspondientes:
     </para>
<screen>suse_register -d 2 -L /root/.suse_register.log</screen>
    </step>
    <step performance="required">
     <para>
      Actualice los repositorios y servicios:
     </para>
<screen>zypper ref -s</screen>
    </step>
    <step performance="required">
     <para>
      Compruebe la lista de los repositorios que puede recuperar con <command>zypper lr</command>.
     </para>
     <para>
      Si uno de los repositorios no está habilitado (los del <literal>SP3</literal> no están habilitados por defecto si se sigue este flujo de trabajo), habilítelos con el comando <command>zypper modifyrepo --enable <replaceable>ALIAS DE REPOSITORIO</replaceable></command>, por ejemplo:
     </para>
<screen os="sles">zypper modifyrepo --enable SLES11-SP3-Core SLES11-SP3-Updates</screen>

     <para>
      Si la configuración contiene repositorios de otros fabricantes que podrían no ser compatibles con el SP3, inhabilítelos con <command>zypper modifyrepo --disable <replaceable>ALIAS DE REPOSITORIO</replaceable></command>.
     </para>
    </step>
    <step performance="required">
     <para>
      Todo está preparado para realizar la actualización de la distribución con <command>zypper dup --from <replaceable>REPO 1</replaceable> --from <replaceable>REPO 2</replaceable> <replaceable>...</replaceable></command>. Asegúrese de que se enumeran todos los repositorios necesarios con <option>--from</option>, por ejemplo:
     </para>
<screen os="sles">zypper dup --from SLES11-SP3-Pool --from SLES11-SP3-Updates</screen>

     <para>
      Confirme con <guimenu>y</guimenu> para iniciar la actualización.
     </para>
    </step>
    <step performance="required">
     <para>
      Una vez finalizada la actualización de la distribución en el paso anterior, ejecute el siguiente comando:
     </para>
<screen>zypper update -t patch</screen>
    </step>
    <step performance="required">
     <para>
      Ahora que se ha completado la actualización al SP3, deberá volver a registrar el producto:
     </para>
<screen>suse_register -d 2 -L /root/.suse_register.log</screen>
    </step>
    <step performance="required">
     <para>
      Por último, reinicie el sistema.
     </para>
    </step>
    <step performance="required">
     <para>
      El sistema se ha actualizado correctamente al Service Pack 3.
     </para>
    </step>
   </procedure>
  </sect2>
 </sect1>
  
 <sect1 id="sec-update-sle11sp3">
   <title>Actualizar SLE 11 SP3 a SLE 11 SP4</title>
   <para>Hay varios modos diferentes de actualizar un sistema SUSE Linux Enterprise Server 11 SP3 al Service Pack 4. Puede emplear las herramientas de actualización en línea para instalar los parches correspondientes (migración en línea), o bien realizar el proceso desde el medio de instalación del Service Pack. Además, las actualizaciones se pueden realizar mediante servidores en los que se encuentre Subscription Management Tool (SMT) o SUSE Manager.</para>
   <para>La migración en línea es compatible con las siguientes herramientas:
     </para>
       <itemizedlist mark="bullet" spacing="normal">
         <listitem>
           <para>YaST wagon (interfaz gráfica de usuario) </para>
         </listitem>
         <listitem>
           <para><command>zypper</command> (línea de comandos)</para>
         </listitem>
       </itemizedlist>
     <para>Si lo prefiere, puede descargar el medio con el Service Pack completo (imagen ISO de DVD). Inicie el proceso de actualización arrancando desde el medio físico del Service Pack o un origen de instalación de red. </para>
   
   <sect2 id="sec-update-sle11sp3-onlinemigration">
     <title>Migración en línea</title>
     <para>La actualización del sistema mediante la migración en línea se realiza desde el sistema en ejecución. Solo es necesario reiniciar una vez, cuando la actualización ha finalizado.</para>
     <sect3>
       <title>Requisitos</title>
       <para>Para efectuar una actualización en línea, deben cumplirse los requisitos descritos a continuación. No olvide leer también la <xref linkend="sec-update-prep"/>.
       </para>
       
       <variablelist>
         <varlistentry>
           <term>Registro del producto</term>
           <listitem>
             <para>Para que sea posible conectar con los canales de actualización, el producto debe estar registrado. Si no es el caso, ejecute el módulo Configuración del Centro de servicios al cliente de Novell en YaST o la herramienta de línea de comandos <command>suse_register</command> para iniciar el registro. </para>
           </listitem>
         </varlistentry>
         <varlistentry>
           <term>Ejecución de una actualización en línea</term>
           <listitem>
             <para>Asegúrese de que la versión instalada actualmente dispone de los parches más recientes. Ejecute una actualización en línea antes de la migración en línea. Si utiliza una interfaz gráfica, inicie la actualización en línea de YaST, o el applet de actualización. En la línea de comandos, ejecute los siguientes comandos (el último debe ejecutarse dos veces): </para>
             <screen>zypper ref -s
zypper update -t patch
zypper update -t patch</screen>
             <para>Reinicie el sistema si es necesario.</para>
             <para>Consulte la Sección 1.0, Actualización en línea de YaST, (↑Guía de administración) o la Sección 6.1.3, Actualización del software con Zypper, (↑Guía de administración). para obtener más información sobre las herramientas de actualización en línea.</para>
           </listitem>
         </varlistentry>
         <varlistentry>
           <term>Software de otros fabricantes</term>
           <listitem>
             <para>Si la configuración afecta a software de otros fabricantes o a software complementario, pruebe este procedimiento en otro equipo para asegurarse de que no se rompen las dependencias durante la actualización. </para>
           </listitem>
         </varlistentry>
       </variablelist>
       
       <important>
         <title>ejecute siempre una migración en línea completa</title>
         <para>La migración en línea siempre debe completarse de principio a fin. Si una migración en línea se interrumpe, el sistema sufrirá daños irrecuperables.</para>
       </important>
     </sect3>
   
   <sect3 id="sec-update-sle11sp3-online-wagon">
     <title>Migración en línea con YaST <guimenu>Wagon</guimenu></title>
     <para>Si tiene un sistema SLES 11 SP1, encontrará los pasos necesarios en <ulink url="https://www.suse.com/support/kb/doc.php?id=7011872"/>. El procedimiento siguiente se aplica a la migración en línea de SP3 a SP4.</para>
     <procedure>
       <step performance="required">
         <para>
           Si se cumplen todos los requisitos (consulte la <xref linkend="sec-update-sle11spx-online-requirements"/>), el applet de actualización de la bandeja del sistema mostrará un mensaje para indicar que hay una actualización de la distribución disponible. Haga clic en él para iniciar YaST <guimenu>Wagon</guimenu> Si lo prefiere, ejecute <command>/usr/sbin/wagon</command> como <systemitem class="username">raíz</systemitem> desde la línea de comandos.
         </para>
       </step>
       <step performance="required">
         <para>
           Confirme el diálogo de <guimenu>Bienvenida</guimenu> con la opción <guimenu>Siguiente.</guimenu>
         </para>
       </step>
       <step performance="required">
         <para>
           Si <guimenu>Wagon</guimenu> detecta que no se cumplen los requisitos (hay actualizaciones de mantenimiento obligatorias disponibles pero no instaladas), realizará una actualización automática, lo que podría requerir un reinicio. Siga las instrucciones que aparecen en pantalla.
         </para>
       </step>
       <step performance="required">
         <para>
           Seleccione el método de actualización en el siguiente diálogo. Seleccione <guimenu>Centro de servicios al cliente</guimenu> para usar la configuración por defecto (recomendada).
         </para>
         <para>
           Haga clic en <guimenu>URL personalizada</guimenu> para elegir manualmente los canales de software que se deben emplear para la migración en línea. Se mostrará una lista de canales que le permitirá habilitar, inhabilitar, añadir o suprimir canales manualmente. Añada los orígenes de actualizaciones de SP4. Puede ser el medio de instalación del SP4 o los canales <literal>SP4-Pool</literal> y <literal>SP4-Updates</literal>. Haga clic en <guimenu>Aceptar</guimenu> para volver al diálogo <guimenu>Método de actualización.</guimenu>
         </para>
         <para>
           Si desea revisar los cambios en la configuración de canales causados por el proceso de actualización, seleccione <guimenu>Comprobar cambios automáticos del repositorio.</guimenu>
         </para>
         <para>
           Haga clic en <guimenu>Siguiente.</guimenu>
         </para>
       </step>
       <step performance="required">
         <para>
           El sistema se volverá a registrar. Durante este proceso, los canales <literal>SP4-Pool</literal> y <literal>SP4-Updates</literal> se añadirán al sistema (consulte <xref linkend="sec-update-nmm-channels"/> para obtener más información). Confirme la adición de los canales.
         </para>
       </step>
       <step performance="required">
         <para>
           Si ha seleccionado <guimenu>Comprobar cambios automáticos del repositorio</guimenu> en el diálogo <guimenu>Método de actualización,</guimenu> se mostrará la lista de repositorios, que le permitirá habilitar, inhabilitar, añadir o suprimir canales manualmente. Haga clic en <guimenu>Aceptar</guimenu> cuando haya terminado.
         </para>
       </step>
       <step performance="required">
         <para>Seleccione el tipo de migración:</para>
         <variablelist>
           <varlistentry>
             <term>Migración completa</term>
             <listitem>
               <para>Se actualizarán todos los paquetes al nivel más reciente del SP4.</para>
             </listitem>
           </varlistentry>
           <varlistentry>
             <term>Migración mínima</term>
             <listitem>
               <para>Se actualizará un conjunto mínimo de paquetes al nivel más reciente del SP4.</para>
             </listitem>
           </varlistentry>
         </variablelist>
         <para>Haga clic en <guimenu>Avanzado</guimenu> para seleccionar manualmente los repositorios empleados para la actualización. Confirme la selección.
         </para>
       </step>
       
       <step performance="required">
         <para>
           Se abrirá la pantalla <guimenu>Valores de actualización de la distribución,</guimenu> que muestra un resumen de la configuración de la actualización. Las secciones disponibles son las siguientes:
         </para>
         <variablelist>
           <varlistentry>
             <term><guimenu>Productos complementarios</guimenu>
             </term>
             <listitem>
               <para>
                 Podrá añadir productos complementarios de SUSE Linux Enterprise Server o productos de otro fabricante.
               </para>
             </listitem>
           </varlistentry>
           <varlistentry>
             <term><guimenu>Opciones de actualización</guimenu>
             </term>
             <listitem>
               <para>
                 Muestra las acciones que se llevarán a cabo durante la actualización. Puede decidir si se deben descargar todos los paquetes antes de empezar a instalarlos (valor por defecto y recomendado) o si se deben descargar e instalar de uno en uno.
               </para>
             </listitem>
           </varlistentry>
           <varlistentry>
             <term><guimenu>Paquetes</guimenu>
             </term>
             <listitem>
               <para>
                 Descripción general de estadísticas de la actualización.
               </para>
             </listitem>
           </varlistentry>
           <varlistentry>
             <term>Copia de seguridad</term>
             <listitem>
               <para>
                 Defina las opciones de copia de seguridad.
               </para>
             </listitem>
           </varlistentry>
         </variablelist>
         <para>
           Haga clic en <guimenu>Siguiente</guimenu> y en <guimenu>Iniciar actualización</guimenu> para continuar.
         </para>
         <important>
           <title>cancelación de la migración en línea</title>
           <para>
             Puede cancelar la migración en línea de forma segura desde esta pantalla y las anteriores <emphasis>antes</emphasis> de hacer clic en <guimenu>Iniciar actualización.</guimenu> Haga clic en <guimenu>Cancelar</guimenu> para abandonar el procedimiento de actualización y restaurar el sistema al estado en el que se encontraba antes de iniciar YaST Wagon. Siga las instrucciones que aparezcan en pantalla y repita el registro antes de salir de Wagon para eliminar los canales del SP4 del sistema.
           </para>
         </important>
       </step>
       <step performance="required">
         <para>
           Durante el procedimiento de actualización se ejecutan los siguientes pasos:
         </para>
         <orderedlist spacing="normal">
           <listitem>
             <para>
               Los paquetes se actualizarán.
             </para>
           </listitem>
           <listitem>
             <para>
               <command>SuSEconfig</command> se ejecutará.
             </para>
           </listitem>
           <listitem>
             <para>
               El sistema se reiniciará (pulse <guimenu>Aceptar</guimenu>).
             </para>
           </listitem>
           <listitem>
             <para>
               El sistema recién actualizado se volverá a registrar.
             </para>
           </listitem>
         </orderedlist>
       </step>
       <step performance="required">
         <para>
           El sistema se ha actualizado correctamente al Service Pack 4.
         </para>
       </step>
     </procedure>
   </sect3>
   
   <sect3 id="sec-update-sle11sp3-online-zypper">
     <title>Migración en línea con <command>zypper</command></title>
     <procedure>
       <step performance="required">
         <para>
           Si se cumplen todos los requisitos (consulte <xref linkend="sec-update-sle11spx-online-requirements"/>), los <quote>productos</quote> necesarios para la migración en línea se añaden a <filename>/etc/products.d</filename>. Para obtener una lista de dichos productos, ejecute el siguiente comando:
         </para>
         
         <screen>zypper se -t product | grep -h -- "-migration" | cut -d'|' -f2</screen>
         <para>
           El comando debe devolver al menos <literal os="sles">SUSE_SLES-SP4-migration</literal>. Dependiendo del alcance de la instalación, es posible que incluya más productos.
         </para>
       </step>
       <step performance="required">
         <para>
           Instale los productos de migración recuperados en el paso anterior con el comando <command>zypper in -t producto <replaceable>LISTA_DE_PRODUCTOS</replaceable></command>, por ejemplo.
         </para>
         <screen os="sles">zypper in -t product SUSE_SLES-SP4-migration</screen>
         
       </step>
       <step performance="required">
         <para>
           Registre los productos instalados en el paso anterior para obtener los canales de actualización correspondientes:
         </para>
         <screen>suse_register -d 2 -L /root/.suse_register.log</screen>
       </step>
       <step performance="required">
         <para>
           Actualice los repositorios y servicios:
         </para>
         <screen>zypper ref -s</screen>
       </step>
       <step performance="required">
         <para>
           Compruebe la lista de los repositorios que puede recuperar con <command>zypper lr</command>. Al menos los siguientes repositorios deben estar habilitados: 
         </para>
         
         <itemizedlist mark="bullet" spacing="normal">
           <listitem>
             <para>SLES11-SP4-Pool</para>
           </listitem>
           <listitem>
             <para>SLES11-SP4-Updates</para>
           </listitem>
         </itemizedlist>
         
         <para>Dependiendo del alcance de la instalación, será necesario habilitar más repositorios para productos complementarios o extensiones. </para>
         
         <para>
           Si uno de los repositorios no está habilitado (los del <literal>SP4</literal> no están habilitados por defecto si se sigue este flujo de trabajo), habilítelos con el comando <command>zypper modifyrepo --enable <replaceable>ALIAS DE REPOSITORIO</replaceable></command>, por ejemplo:
         </para>
         <screen os="sles">zypper modifyrepo --enable SLES11-SP4-Pool --enable SLES11-SP4-Updates</screen>
         
         <para>
           Si la configuración contiene repositorios de otros fabricantes que podrían no ser compatibles con el SP4, inhabilítelos con <command>zypper modifyrepo --disable <replaceable>ALIAS DE REPOSITORIO</replaceable></command>.
         </para>
       </step>
       <step performance="required">
         <para>
           Todo está preparado para realizar la actualización de la distribución con <command>zypper dup --from <replaceable>REPO 1</replaceable> --from <replaceable>REPO 2</replaceable> <replaceable>...</replaceable></command> Asegúrese de que se enumeran todos los repositorios necesarios con <option>--from</option>, por ejemplo:
         </para>
         <screen os="sles">zypper dup --from SLES11-SP4-Pool --from SLES11-SP4-Updates</screen>
         
         <para>
           Confirme con <guimenu>y</guimenu> para iniciar la actualización.
         </para>
       </step>
       <step performance="required">
         <para>
           Una vez completada la actualización de la distribución mediante el paso anterior, se habrá realizado una migración mínima (un conjunto mínimo de paquetes actualizados al nivel más reciente del SP4). Omita este paso si no pretende realizar una migración completa.
         </para>
         <para>Para realizar una migración completa (actualiza todos los paquetes al nivel más reciente del SP4), ejecute el siguiente comando: </para>
         <screen>zypper update -t patch</screen>
       </step>
       <step performance="required">
         <para>
           Ahora que se ha completado la actualización al SP4, deberá volver a registrar el producto:
         </para>
         <screen>suse_register -d 2 -L /root/.suse_register.log</screen>
       </step>
       <step performance="required">
         <para>
           Por último, reinicie el sistema.
         </para>
       </step>
     </procedure>
     <para>
       El sistema se ha actualizado correctamente al Service Pack 4.
     </para>
   </sect3>
    
    <sect3>
      <title>Actualización mediante el arranque desde un origen de instalación</title>
      <para>Como alternativa a la migración en línea, también puede actualizar el sistema arrancándolo desde un origen de instalación (ya sea un DVD o un origen de instalación de red). La actualización comenzará como una instalación normal. </para>
      <para>Puede obtener una imagen ISO del Service Pack 4 desde <ulink url="http://download.suse.com/"/>. Grábela en un DVD o prepare un origen de instalación de red, tal como se describe en la <xref linkend="sec-deployment-remoteinst-instserver"/>.
      </para>
    </sect3>
   </sect2>
   
 </sect1>
 
 <sect1 id="sec-update-backports">
  <title>Backport de código fuente</title>

  <para>
   SUSE hace un amplio uso de la técnica de backport. La información que encontrará en esta sección le ayudará a entender por qué puede resultar engañoso comparar números de versiones para juzgar la capacidad y posibles problemas del software.

  </para>

  <sect2 id="sec-update-backports-why">
   <title>¿Por qué el concepto de backport?</title>
   <para>
    A los desarrolladores en sentido ascendente les preocupa sobre todo que avance el software que están creando. En muchos casos, combinan las soluciones de errores con nuevas funciones que todavía no se han sometido a pruebas exhaustivas y pueden introducir nuevos fallos.
   </para>
   <para>
    Para los desarrolladores de distribuciones, es importante distinguir entre:
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      soluciones de errores con un potencial limitado para afectar a la funcionalidad; y
     </para>
    </listitem>
    <listitem>
     <para>
      cambios que pueden afectar a la funcionalidad existente.
     </para>
    </listitem>
   </itemizedlist>
   <para>
    En la mayoría de los casos, los desarrolladores de distribuciones no siguen todos los cambios en sentido ascendente cuando un paquete forma parte de una distribución publicada. Normalmente se limitan a la versión en sentido ascendente que han publicado inicialmente y crean parches basados en los cambios para solucionar errores. Esta práctica se conoce como <emphasis>backport.</emphasis>
   </para>
   <para>
    Normalmente, los desarrolladores de distribuciones solo introducen nuevas versiones del software en dos casos:
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      cuando los cambios entre sus paquetes y las versiones de sentido ascendente son tan grandes que el enfoque de backport ya no es factible; o
     </para>
    </listitem>
    <listitem>
     <para>
      en el caso de software que por sus características propias, se queda obsoleto con facilidad, como los productos contra el software dañino.
     </para>
    </listitem>
   </itemizedlist>
  </sect2>

  <sect2 id="sec-update-backports-reasons-for">
   <title>Motivos para emplear backport</title>
   <para>
    SUSE usa ampliamente el enfoque de backport, ya que nos permite ofrecer un buen equilibrio respecto a diferentes consideraciones que afectan al software de empresa. Las más importantes son las siguientes:
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Disponer de interfaces estables (API) en las que los fabricantes de software puedan confiar al crear componentes para su uso en los productos de empresa de SUSE.
     </para>
    </listitem>
    <listitem>
     <para>
      Garantizar que los paquetes empleados para publicar los productos de empresa de SUSE sean de la mayor calidad y se hayan sometido a pruebas exhaustivas, por sí mismos y como parte del producto de empresa completo.
     </para>
    </listitem>
    <listitem>
     <para>
      Mantener las diferentes certificaciones de los productos de empresa de SUSE por parte de otros fabricantes, como certificaciones para productos de Oracle o SAP.
     </para>
    </listitem>
    <listitem>
     <para>
      Permitir que los desarrolladores de SUSE se concentren en crear una siguiente versión del producto tan buena como sea posible, en lugar de tener que dividir su atención entre un amplio número de versiones.
     </para>
    </listitem>
    <listitem>
     <para>
      Mantener una visión clara de qué es una publicación de empresa particular, de modo que nuestra asistencia pueda proporcionar información precisa y más reciente sobre ello.
     </para>
    </listitem>
   </itemizedlist>
  </sect2>

  <sect2 id="sec-update-backports-reasons-against">
   <title>Argumentos en contra del enfoque de backport</title>
   <para>
    Es una regla general de nuestras directivas no introducir nuevas versiones en sentido ascendente de un paquete en los productos de empresa. Sin embargo, no es una regla inexcusable. En una clase limitada de paquetes, especialmente los de software antivirus, las consideraciones de seguridad tienen prioridad sobre el enfoque conservador, preferible desde el punto de vista de las garantías de calidad. Para los paquetes de esa clase, ocasionalmente se introducen nuevas versiones en una versión publicada de una línea de productos de empresa.
   </para>
   <para>
    A veces, para otros tipos de paquetes, también se decide introducir una nueva versión en lugar del enfoque de backport. Esta decisión se toma cuando el backport no es económicamente factible o cuando hay un motivo técnico relevante para introducir la nueva versión.
   </para>
  </sect2>

  <sect2 id="sec-update-backports-implication">
   <title>Implicaciones del concepto de backport para interpretar números de versiones</title>
   <para>
    Debido al enfoque de backport, no es posible comparar sencillamente los números de versiones para determinar si un paquete de SUSE contiene una solución para un problema en concreto o se le ha añadido una función determinada. Con el backport, la parte de sentido ascendente del número de versión de un paquete de SUSE solamente indica en qué versión de sentido ascendente se basa el paquete de SUSE. Puede incluir correcciones de errores y funciones que no estén en la versión de sentido ascendente que corresponda, pero que se hayan incluido en el paquete de SUSE a través de backport.
   </para>
   <para>
    Hay varias ubicaciones en las que se almacena la información relacionada con las funciones y soluciones de errores:
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      El registro de cambios del paquete:
     </para>
<screen>rpm -q --changelog name-of-installed-package
rpm -qp --changelog packagefile.rpm</screen>
     <para>
      El contenido documenta brevemente el historial de cambios del paquete.
     </para>
    </listitem>
    <listitem>
     <para>
      El registro de cambios del paquete puede incluir entradas como <literal>bnc#1234</literal>, que hagan referencia al sistema de seguimiento de Bugzilla de Novell, o bien enlaces a otros sistemas de seguimiento de errores. (Por motivos de confidencialidad, quizá no sea posible acceder a toda la información al respecto.)
     </para>
    </listitem>
    <listitem>
     <para>
      Los paquetes pueden incluir un archivo <filename>/usr/share/doc/packagename/README.SUSE</filename> o <filename>README.SuSE</filename> con información general de alto nivel, específica del paquete de SUSE.
     </para>
    </listitem>
    <listitem>
     <para>
      El paquete de código fuente del RPM contiene los parches aplicados al crear los RPM binarios normales como archivos independientes. Puede interpretar dicha información si está familiarizado con la lectura de código fuente. Consulte el documento <ulink url="http://www.rpm.org/max-rpm/">Maximum RPM</ulink> para obtener más información.
     </para>
    </listitem>
    <listitem>
     <para>
      Para conocer las soluciones a problemas de seguridad, consulte <ulink url="https://www.suse.com/support/security/#1">los avisos de seguridad de SUSE</ulink>. Suelen hacer referencia a errores mediante nombres estandarizados, como <literal>CAN-2005-2495</literal>, mantenidos por el proyecto <ulink url="http://cve.mitre.org">Common Vulnerabilities and Exposures</ulink> (Vulnerabilidades y puntos expuestos habituales).
     </para>
    </listitem>
   </itemizedlist>
   <para>
    Un aspecto en concreto que puede provocar problemas en lo que respecta al valor limitado de los números de versión en relación con el enfoque de backport, es el de las herramientas de seguridad. Algunas herramientas de seguridad (o determinadas pruebas de dichas herramientas) solo emplean la información de versiones. Estas herramientas o pruebas suelen generar <quote>falsos positivos</quote> (indican que han detectado vulnerabilidades que en realidad no existen) cuando hay versiones de backport implicadas. Al evaluar informes de herramientas de seguridad, siempre se debe investigar si una entrada se basa solamente en un número de versión o en una prueba real de que existe una vulnerabilidad.
   </para>
  </sect2>
 </sect1>
 <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="update_split_brain.xml" parse="xml"/>
 <sect1 id="sec-update-wagonhooks">
  <title>Hooks de migración para YaST Wagon</title>



  <para>
   Los hooks de migración facilitan la ejecución de un guion externo personalizado en algún momento durante el proceso de migración. Estos guiones permiten gestionar problemas específicos que no se pueden resolver mediante los guiones RPM habituales, o bien realizar cualquier acción adicional que pueda ser necesaria durante la migración (y que no lo sea al realizar la actualización normal de los paquetes).
  </para>

  <para>
   Los hooks de migración se ejecutan con privilegios de usuario "root", de modo que es posible realizar tareas de mantenimiento mediante los guiones (iniciar o detener servicios, realizar copias de seguridad de datos, migrar datos, etc.). Los guiones no deben ser interactivos; STDIN y STDOUT se redireccionan a conductos cuando se ejecutan en YaST. No debe emplearse la sesión X, ya que quizá no esté disponible en todos los casos (por ejemplo, si la ejecución se lleva a cabo en modo texto). No olvide configurar el permiso de ejecución para los guiones de hook.
  </para>

  <para>
   Los hooks de migración se admiten a partir de la versión 2.17.32.1 (proporcionada como actualización para SLES11-SP2) o 2.17.34 (incluida en SLES11-SP3) del paquete <systemitem class="resource">yast2-wagon</systemitem> y versiones superiores.
  </para>

  <sect2>
   <title>Ubicación del guion de hook y convenciones de nombres</title>
   <para>
    Los guiones se buscan en el directorio <filename>/var/lib/YaST2/wagon/hooks/</filename>. El nombre esperado del guion tiene el formato <replaceable>paso_secuencia_prefijo_nombre</replaceable>, donde:
   </para>
   <variablelist>
    <varlistentry>
     <term><replaceable>paso</replaceable>
     </term>
     <listitem>
      <para>
       Es el nombre de un paso de migración predefinido que describe el paso actual de la migración.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><replaceable>secuencia</replaceable>
     </term>
     <listitem>
      <para>
       es un número de secuencia del intervalo 00...99, que permite establecer el orden de ejecución de los guiones. (Es importante mantener los ceros iniciales para que el orden sea correcto.)
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><replaceable>prefijo</replaceable>
     </term>
     <listitem>
      <para>
       debe ser único para evitar conflictos (como un espacio de nombres). Use el nombre del paquete (si forma parte de un paquete) o el nombre de proveedor, el nombre de dominio de Internet, etc., básicamente cualquier contenido que pueda considerarse suficientemente único.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><replaceable>nombre</replaceable>
     </term>
     <listitem>
      <para>
       puede ser cualquier cadena (simplemente para diferenciar los guiones). Se recomienda emplear un nombre descriptivo.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <example>
    <title>Guion de hook con vía completa</title>
<screen>/var/lib/YaST2/wagon/hooks/before_package_migration_00_postgresql_backup</screen>
   </example>
  </sect2>

  <sect2>
   <title>Valor de salida con guion de hook</title>
   <para>
    El guion debe devolver el valor de salida 0. Si falla (cualquier valor de salida distinto de cero), se muestra un mensaje de error en Wagon y existe la posibilidad de reiniciar el guion, omitir el fallo (y continuar con otros guiones) o bien cancelar por completo los hooks del paso y la etapa actuales.
   </para>
  </sect2>

  <sect2>
   <title>Guiones de idempotencia</title>
   <para>
    Los guiones de hook <emphasis>pueden ejecutarse potencialmente más veces</emphasis> (al avanzar y retroceder en los diálogos de Wagon, Wagon puede reiniciarse o puede que algunos pasos se ejecuten varias veces en el flujo de trabajo de migración), de modo que los guiones deben tener en cuenta ese hecho (pueden comprobar al principio si es necesario realizar la acción o ya se ha realizado, o bien crear un archivo sencillo de sello temporal o solucionar de otro modo las ejecuciones múltiples de la forma adecuada).
   </para>
  </sect2>

  <sect2>
   <title>Lista de hooks admitidos</title>
   <para>
    Algunos hooks son opcionales (porque dependen de resultados anteriores o de valores seleccionados por el usuario). Tenga en cuenta que algunos hooks se invocan varias veces (por ejemplo, el de registro se invoca antes y después de la migración). A continuación encontrará una lista de los hooks admitidos (nombres de pasos) según su orden de ejecución:
   </para>
   <variablelist>
    <varlistentry>
     <term><command>before_init</command>
     </term>
     <listitem>
      <para>
       Se inicia al principio (nota: se vuelve a invocar cuando se reinicia Wagon).
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>before_welcome</command>
     </term>
     <term><command>after_welcome</command>
     </term>
     <listitem>
      <para>
       Se inician antes y después del diálogo de bienvenida.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>before_registration_check</command>
     </term>
     <term><command>after_registration_check</command>
     </term>
     <listitem>
      <para>
       Wagon comprueba el estado de registro (si el registro de algunos productos ha caducado, la migración podría fallar). Si todo es correcto, no se muestra ningún diálogo y Wagon continúa automáticamente con el siguiente paso.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>before_custom_url</command>
     </term>
     <term><command>after_custom_url</command>
     </term>
     <listitem>
      <para>
       Se inicia el gestor de repositorios (opcional, solo en modo de CD de parches).
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>before_self_update</command>
     </term>
     <term><command>after_self_update</command>
     </term>
     <listitem>
      <para>
       Se invocan antes y después de que Wagon se actualice a sí mismo (para garantizar que se emplee la versión más reciente en la migración).
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>before_installing_migration_products</command>
     </term>
     <term><command>after_installing_migration_products</command>
     </term>
     <listitem>
      <para>
       Se invocan antes y después de instalar los productos que se van a migrar.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>before_selecting_migration_source</command>
     </term>
     <term><command>after_selecting_migration_source</command>
     </term>
     <listitem>
      <para>
       Wagon pregunta al usuario si quiere realizar la migración mediante los repositorios del Centro de servicios al cliente de Novell; o mediante un repositorio personalizado (el siguiente paso depende de la elección del usuario)
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>before_registration</command>
     </term>
     <term><command>after_registration</command>
     </term>
     <listitem>
      <para>
       Se ejecuta el registro de SUSE (para añadir repositorios de migración).
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>before_repo_selection</command>
     </term>
     <term><command>after_repo_selection</command>
     </term>
     <listitem>
      <para>
       Gestión manual de repositorios.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>before_set_migration_repo</command>
     </term>
     <term><command>after_set_migration_repo</command>
     </term>
     <listitem>
      <para>
       selección de repositorios de migración (migración completa/mínima mediante el Centro de servicios al cliente de Novell) o selección de repositorios de actualizaciones (migración de repositorios personalizados)
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>before_package_migration</command>
     </term>
     <listitem>
      <para>
       Antes de que comience la actualización de paquetes, tras este paso comienza la migración real y no es posible volver al estado anterior automáticamente (si se cancela el proceso durante este paso se obtiene un sistema actualizado a medias y es necesario deshacer los cambios manualmente).
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>before_registration</command>
     </term>
     <term><command>after_registration</command>
     </term>
     <listitem>
      <para>
       Ejecución de registro de SUSE (para registrar productos actualizados).
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>before_congratulate</command>
     </term>
     <term><command>after_congratulate</command>
     </term>
     <listitem>
      <para>
       Antes y después de que Wagon muestre el diálogo de felicitación como resultado de una migración correcta.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>before_exit</command>
     </term>
     <listitem>
      <para>
       Se invoca justo antes de que se cierre Wagon (siempre, sea cual sea el resultado de la migración, también tras una cancelación y al reiniciar).
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2>
   <title>Hooks de cancelación</title>
   <para>
    Se trata de hooks de cancelación especiales que se invocan cuando el usuario cancela la migración. Estos hooks pueden invocarse en cualquier paso del flujo de trabajo de migración, por lo que no es posible garantizar el orden de ejecución. Los guiones deben comprobar el estado actual si dependen de los resultados de otros hooks.
   </para>
   <variablelist>
    <varlistentry>
     <term><command>before_abort</command>
     </term>
     <listitem>
      <para>
       El usuario ha confirmado la cancelación de la migración.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>before_abort_rollback</command>
     </term>
     <term><command>after_abort_rollback</command>
     </term>
     <listitem>
      <para>
       El usuario ha confirmado que quiere deshacer el proceso tras la migración (y volver a los productos anteriores instalados antes de que comenzara la migración). Estos hooks se invocan después de before_abort y se omiten si el usuario no confirma que desea deshacer el proceso.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2>
   <title>Hooks de reinicio</title>
   <para>
    Estos hooks se invocan siempre que Wagon se reinicia.
   </para>
   <variablelist>
    <varlistentry>
     <term><command>before_restart</command>
     </term>
     <listitem>
      <para>
       Wagon está finalizando y se reiniciará.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>after_restart</command>
     </term>
     <listitem>
      <para>
       Wagon se ha reiniciado y está ejecutando el siguiente paso del flujo de trabajo de migración.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2>
   <title>Hooks utilizados normalmente</title>
   <para>
    La lista de hooks es bastante larga, pero muchos solo tienen sentido en casos especiales. En los casos normales de uso, deben tener preferencia los siguientes:
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Para realizar alguna acción antes de que se migre el sistema (todavía se ejecuta la versión anterior), utilice el hook <command>before_package_migration</command>.
     </para>
     <para>
      En este punto, está claro que la migración está preparada y a punto de comenzar, mientras que en los pasos anteriores era posible cancelarla.

     </para>
    </listitem>
    <listitem>
     <para>
      Para llevar a cabo alguna acción después de migrar el sistema (el sistema ejecuta la versión recién migrada, pero algunos elementos podrían no estar activos, como un núcleo o algunos servicios actualizados que requieren reiniciar, etc.), utilice los hooks <command>before_congratulate</command> o <command>after_congratulate</command>.
     </para>
     <para>
      También se pueden emplear para limpiar los resultados temporales del hook <command>before_package_migration</command>. En este punto, la migración ha finalizado satisfactoriamente.
     </para>
    </listitem>
    <listitem>
     <para>
      Para deshacer los cambios si la migración se cancela, use uno de los hooks para cancelar, según el caso. Recuerde que los hooks para cancelar se pueden invocar en cualquier momento, por lo que quizá no sea necesario deshacer nada (es posible que el hook que realiza los cambios aún no se haya invocado). Los hooks de cancelación deben comprobar el estado actual.
     </para>
    </listitem>
   </itemizedlist>
  </sect2>

  <sect2>
   <title>Hooks obsoletos</title>
   <para>
    Las versiones anteriores de Wagon solo admitían dos guiones de hooks: <filename>/usr/lib/YaST2/bin/wagon_hook_init</filename> y <filename>/usr/lib/YaST2/bin/wagon_hook_finish</filename>. El problema era que solo se podía ejecutar un guion como hook y no era posible incluir hooks directamente en paquetes RPM.
   </para>
   <para>
    Estos guiones de hooks se siguen admitiendo en las nuevas versiones de Wagon para ofrecer compatibilidad con versiones anteriores, pero se deben emplear los nuevos hooks <command>before_init</command> y <command>before_exit</command> en lugar de los obsoletos.
   </para>
  </sect2>
 </sect1>
</chapter>
